function kvLookup(a,b,c,d,e,f){var g=d,h=!1;if(null!==a&&void 0!==a&&(null!==c&&void 0!==c&&"object"==typeof c&&a in c?(g=c[a],h=!0):null!==b&&void 0!==b&&"object"==typeof b&&a in b?(g=b[a],h=!0):g=d,!0===h&&null!==e&&void 0!==e))switch(e){case"int":g=parseInt(g,10);break;case"float":g=parseFloat(g)}return g}function getColor(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,d=d||e.length>0;if(e.ranges.length>0){!0===e.percents&&(a=100*b);for(var t=0;t<e.ranges.length;t++)if(a>=e.ranges[t].lo&&a<=e.ranges[t].hi)return e.ranges[t].color}if(1===(f=c.length))return c[0];for(g=d?1/f:1/(f-1),h=[],t=0;t<c.length;t++)i=d?g*(t+1):g*t,j=parseInt(cutHex(c[t]).substring(0,2),16),k=parseInt(cutHex(c[t]).substring(2,4),16),l=parseInt(cutHex(c[t]).substring(4,6),16),h[t]={pct:i,color:{r:j,g:k,b:l}};if(0===b)return"rgb("+[h[0].color.r,h[0].color.g,h[0].color.b].join(",")+")";for(var u=0;u<h.length;u++)if(b<=h[u].pct)return d?"rgb("+[h[u].color.r,h[u].color.g,h[u].color.b].join(",")+")":(m=h[u-1],n=h[u],o=n.pct-m.pct,p=(b-m.pct)/o,q=1-p,r=p,s={r:Math.floor(m.color.r*q+n.color.r*r),g:Math.floor(m.color.g*q+n.color.g*r),b:Math.floor(m.color.b*q+n.color.b*r)},"rgb("+[s.r,s.g,s.b].join(",")+")")}function setDy(a,b,c){(!ie||ie>9)&&a.node.firstChild.attributes.dy&&(a.node.firstChild.attributes.dy.value=0)}function getRandomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}function cutHex(a){return"#"==a.charAt(0)?a.substring(1,7):a}function humanFriendlyNumber(a,b){var c,d,e,f;for(c=Math.pow,d=c(10,b),e=7;e;)(f=c(10,3*e--))<=a&&(a=Math.round(a*d/f)/d+"KMGTPE"[e]);return a}function formatNumber(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}function getStyle(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]),c}function onCreateElementNsReady(a){void 0!==document.createElementNS?a():setTimeout(function(){onCreateElementNsReady(a)},100)}function extend(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a}!function(a){var b,c,d="0.4.2",e="hasOwnProperty",f=/[\.\/]/,g=function(){},h=function(a,b){return a-b},i={n:{}},j=function(a,d){a=String(a);var e,f=c,g=Array.prototype.slice.call(arguments,2),i=j.listeners(a),k=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=i.length;q>p;p++)"zIndex"in i[p]&&(l.push(i[p].zIndex),i[p].zIndex<0&&(m[i[p].zIndex]=i[p]));for(l.sort(h);l[k]<0;)if(e=m[l[k++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if("zIndex"in(e=i[p]))if(e.zIndex==l[k]){if(n.push(e.apply(d,g)),c)break;do{if(k++,e=m[l[k]],e&&n.push(e.apply(d,g)),c)break}while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};j._events=i,j.listeners=function(a){var b,c,d,e,g,h,j,k,l=a.split(f),m=i,n=[m],o=[];for(e=0,g=l.length;g>e;e++){for(k=[],h=0,j=n.length;j>h;h++)for(m=n[h].n,c=[m[l[e]],m["*"]],d=2;d--;)(b=c[d])&&(k.push(b),o=o.concat(b.f||[]));n=k}return o},j.on=function(a,b){if(a=String(a),"function"!=typeof b)return function(){};for(var c=a.split(f),d=i,e=0,h=c.length;h>e;e++)d=d.n,d=d.hasOwnProperty(c[e])&&d[c[e]]||(d[c[e]]={n:{}});for(d.f=d.f||[],e=0,h=d.f.length;h>e;e++)if(d.f[e]==b)return g;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},j.f=function(a){var b=[].slice.call(arguments,1);return function(){j.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}},j.stop=function(){c=1},j.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},j.nts=function(){return b.split(f)},j.off=j.unbind=function(a,b){if(!a)return void(j._events=i={n:{}});var c,d,g,h,k,l,m,n=a.split(f),o=[i];for(h=0,k=n.length;k>h;h++)for(l=0;l<o.length;l+=g.length-2){if(g=[l,1],c=o[l].n,"*"!=n[h])c[n[h]]&&g.push(c[n[h]]);else for(d in c)c[e](d)&&g.push(c[d]);o.splice.apply(o,g)}for(h=0,k=o.length;k>h;h++)for(c=o[h];c.n;){if(b){if(c.f){for(l=0,m=c.f.length;m>l;l++)if(c.f[l]==b){c.f.splice(l,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var p=c.n[d].f;for(l=0,m=p.length;m>l;l++)if(p[l]==b){p.splice(l,1);break}!p.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},j.once=function(a,b){var c=function(){return j.unbind(a,c),b.apply(this,arguments)};return j.on(a,c)},j.version=d,j.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=j:"undefined"!=typeof define?define("eve",[],function(){return j}):a.eve=j}(window||this),function(a,b){"function"==typeof define&&define.amd?define(["eve"],function(c){return b(a,c)}):b(a,a.eve||"function"==typeof require&&require("eve"))}(this,function(a,b){function c(a){if(c.is(a,"function"))return u?a():b.on("raphael.DOMload",a);if(c.is(a,V))return c._engine.create[D](c,a.splice(0,3+c.is(a[0],T))).add(a);var d=Array.prototype.slice.call(arguments,0);if(c.is(d[d.length-1],"function")){var e=d.pop();return u?e.call(c._engine.create[D](c,d)):b.on("raphael.DOMload",function(){e.call(c._engine.create[D](c,d))})}return c._engine.create[D](c,arguments)}function d(a){if("function"==typeof a||Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[z](c)&&(b[c]=d(a[c]));return b}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function f(a,b,c){function d(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=d.cache=d.cache||{},i=d.count=d.count||[];return h[z](g)?(e(i,g),c?c(h[g]):h[g]):(i.length>=1e3&&delete h[i.shift()],i.push(g),h[g]=a[D](b,f),c?c(h[g]):h[g])}return d}function g(){return this.hex}function h(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function i(a,b,c,d,e){return a*(a*(-3*b+9*c-9*d+3*e)+6*b-12*c+6*d)-3*b+3*c}function j(a,b,c,d,e,f,g,h,j){null==j&&(j=1),j=j>1?1:0>j?0:j;for(var k=j/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0,o=0;12>o;o++){var p=k*l[o]+k,q=i(p,a,c,e,g),r=i(p,b,d,f,h),s=q*q+r*r;n+=m[o]*N.sqrt(s)}return k*n}function k(a,b,c,d,e,f,g,h,i){if(!(0>i||j(a,b,c,d,e,f,g,h)<i)){var k,l=.5,m=1-l;for(k=j(a,b,c,d,e,f,g,h,m);Q(k-i)>.01;)l/=2,m+=(i>k?1:-1)*l,k=j(a,b,c,d,e,f,g,h,m);return m}}function l(a,b,c,d,e,f,g,h){if(!(O(a,c)<P(e,g)||P(a,c)>O(e,g)||O(b,d)<P(f,h)||P(b,d)>O(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(k){var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(!(n<+P(a,c).toFixed(2)||n>+O(a,c).toFixed(2)||n<+P(e,g).toFixed(2)||n>+O(e,g).toFixed(2)||o<+P(b,d).toFixed(2)||o>+O(b,d).toFixed(2)||o<+P(f,h).toFixed(2)||o>+O(f,h).toFixed(2)))return{x:l,y:m}}}}function m(a,b,d){var e=c.bezierBBox(a),f=c.bezierBBox(b);if(!c.isBBoxIntersect(e,f))return d?0:[];for(var g=j.apply(0,a),h=j.apply(0,b),i=O(~~(g/5),1),k=O(~~(h/5),1),m=[],n=[],o={},p=d?0:[],q=0;i+1>q;q++){var r=c.findDotsAtSegment.apply(c,a.concat(q/i));m.push({x:r.x,y:r.y,t:q/i})}for(q=0;k+1>q;q++)r=c.findDotsAtSegment.apply(c,b.concat(q/k)),n.push({x:r.x,y:r.y,t:q/k});for(q=0;i>q;q++)for(var s=0;k>s;s++){var t=m[q],u=m[q+1],v=n[s],w=n[s+1],x=Q(u.x-t.x)<.001?"y":"x",y=Q(w.x-v.x)<.001?"y":"x",z=l(t.x,t.y,u.x,u.y,v.x,v.y,w.x,w.y);if(z){if(o[z.x.toFixed(4)]==z.y.toFixed(4))continue;o[z.x.toFixed(4)]=z.y.toFixed(4);var A=t.t+Q((z[x]-t[x])/(u[x]-t[x]))*(u.t-t.t),B=v.t+Q((z[y]-v[y])/(w[y]-v[y]))*(w.t-v.t);A>=0&&1.001>=A&&B>=0&&1.001>=B&&(d?p++:p.push({x:z.x,y:z.y,t1:P(A,1),t2:P(B,1)}))}}return p}function n(a,b,d){a=c._path2curve(a),b=c._path2curve(b);for(var e,f,g,h,i,j,k,l,n,o,p=d?0:[],q=0,r=a.length;r>q;q++){var s=a[q];if("M"==s[0])e=i=s[1],f=j=s[2];else{"C"==s[0]?(n=[e,f].concat(s.slice(1)),e=n[6],f=n[7]):(n=[e,f,e,f,i,j,i,j],e=i,f=j);for(var t=0,u=b.length;u>t;t++){var v=b[t];if("M"==v[0])g=k=v[1],h=l=v[2];else{"C"==v[0]?(o=[g,h].concat(v.slice(1)),g=o[6],h=o[7]):(o=[g,h,g,h,k,l,k,l],g=k,h=l);var w=m(n,o,d);if(d)p+=w;else{for(var x=0,y=w.length;y>x;x++)w[x].segment1=q,w[x].segment2=t,w[x].bez1=n,w[x].bez2=o;p=p.concat(w)}}}}}return p}function o(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+H+this.y+H+this.width+" × "+this.height}function q(a,b,c,d,e,f){function g(a){return((k*a+j)*a+i)*a}function h(a,b){var c,d,e,f,h,l;for(e=a,l=0;8>l;l++){if(f=g(e)-a,Q(f)<b)return e;if(h=(3*k*e+2*j)*e+i,Q(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),Q(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var i=3*b,j=3*(d-b)-i,k=1-i-j,l=3*c,m=3*(e-c)-l,n=1-l-m;return function(a,b){var c=h(a,b);return((n*c+m)*c+l)*c}(a,1/(200*f))}function r(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[z](e)&&(d[_(e)]=a[e],c.push(_(e)));c.sort(la)}this.anim=d,this.top=c[c.length-1],this.percents=c}function s(a,d,e,f,g,h){e=_(e);var i,j,k,l,m,n,p=a.ms,r={},s={},t={};if(f)for(v=0,x=ib.length;x>v;v++){var u=ib[v];if(u.el.id==d.id&&u.anim==a){u.percent!=e?(ib.splice(v,1),k=1):j=u,d.attr(u.totalOrigin);break}}else f=+s;for(var v=0,x=a.percents.length;x>v;v++){if(a.percents[v]==e||a.percents[v]>f*a.top){e=a.percents[v],m=a.percents[v-1]||0,p=p/a.top*(e-m),l=a.percents[v+1],i=a.anim[e];break}f&&d.attr(a.anim[a.percents[v]])}if(i){if(j)j.initstatus=f,j.start=new Date-j.ms*f;else{for(var y in i)if(i[z](y)&&(da[z](y)||d.paper.customAttributes[z](y)))switch(r[y]=d.attr(y),null==r[y]&&(r[y]=ca[y]),s[y]=i[y],da[y]){case T:t[y]=(s[y]-r[y])/p;break;case"colour":r[y]=c.getRGB(r[y]);var A=c.getRGB(s[y]);t[y]={r:(A.r-r[y].r)/p,g:(A.g-r[y].g)/p,b:(A.b-r[y].b)/p};break;case"path":var B=Ka(r[y],s[y]),C=B[1];for(r[y]=B[0],t[y]=[],v=0,x=r[y].length;x>v;v++){t[y][v]=[0];for(var D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(C[v][D]-r[y][v][D])/p}break;case"transform":var G=d._,H=Pa(G[y],s[y]);if(H)for(r[y]=H.from,s[y]=H.to,t[y]=[],t[y].real=!0,v=0,x=r[y].length;x>v;v++)for(t[y][v]=[r[y][v][0]],D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(s[y][v][D]-r[y][v][D])/p;else{var K=d.matrix||new o,L={_:{transform:G.transform},getBBox:function(){return d.getBBox(1)}};r[y]=[K.a,K.b,K.c,K.d,K.e,K.f],Na(L,s[y]),s[y]=L._.transform,t[y]=[(L.matrix.a-K.a)/p,(L.matrix.b-K.b)/p,(L.matrix.c-K.c)/p,(L.matrix.d-K.d)/p,(L.matrix.e-K.e)/p,(L.matrix.f-K.f)/p]}break;case"csv":var M=I(i[y])[J](w),N=I(r[y])[J](w);if("clip-rect"==y)for(r[y]=N,t[y]=[],v=N.length;v--;)t[y][v]=(M[v]-r[y][v])/p;s[y]=M;break;default:for(M=[][E](i[y]),N=[][E](r[y]),t[y]=[],v=d.paper.customAttributes[y].length;v--;)t[y][v]=((M[v]||0)-(N[v]||0))/p}var O=i.easing,P=c.easing_formulas[O];if(!P)if((P=I(O).match(Z))&&5==P.length){var Q=P;P=function(a){return q(a,+Q[1],+Q[2],+Q[3],+Q[4],p)}}else P=na;if(n=i.start||a.start||+new Date,u={anim:a,percent:e,timestamp:n,start:n+(a.del||0),status:0,initstatus:f||0,stop:!1,ms:p,easing:P,from:r,diff:t,to:s,el:d,callback:i.callback,prev:m,next:l,repeat:h||a.times,origin:d.attr(),totalOrigin:g},ib.push(u),f&&!j&&!k&&(u.stop=!0,u.start=new Date-p*f,1==ib.length))return kb();k&&(u.start=new Date-u.ms*f),1==ib.length&&jb(kb)}b("raphael.anim.start."+d.id,d,a)}}function t(a){for(var b=0;b<ib.length;b++)ib[b].el.paper==a&&ib.splice(b--,1)}c.version="2.1.2",c.eve=b;var u,v,w=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},y=/\{(\d+)\}/g,z="hasOwnProperty",A={doc:document,win:a},B={was:Object.prototype[z].call(A.win,"Raphael"),is:A.win.Raphael},C=function(){this.ca=this.customAttributes={}},D="apply",E="concat",F="ontouchstart"in A.win||A.win.DocumentTouch&&A.doc instanceof DocumentTouch,G="",H=" ",I=String,J="split",K="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[J](H),L={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},M=I.prototype.toLowerCase,N=Math,O=N.max,P=N.min,Q=N.abs,R=N.pow,S=N.PI,T="number",U="string",V="array",W=Object.prototype.toString,X=(c._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=N.round,_=parseFloat,aa=parseInt,ba=I.prototype.toUpperCase,ca=c._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},da=c._availableAnimAttrs={blur:T,"clip-rect":"csv",cx:T,cy:T,fill:"colour","fill-opacity":T,"font-size":T,height:T,opacity:T,path:"path",r:T,rx:T,ry:T,stroke:"colour","stroke-opacity":T,"stroke-width":T,transform:"transform",width:T,x:T,y:T},ea=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,fa={hs:1,rg:1},ga=/,?([achlmqrstvxz]),?/gi,ha=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ia=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ja=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ka=(c._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),la=function(a,b){return _(a)-_(b)},ma=function(){},na=function(a){return a},oa=c._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},pa=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},qa=c._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return pa(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return pa(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return oa(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return oa(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return oa(b.x,b.y,b.width,b.height)},set:function(a){var b=a._getBBox();return oa(b.x,b.y,b.width,b.height)}},ra=c.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=Ka(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(c._g=A,c.type=A.win.SVGAngle||A.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==c.type){var sa,ta=A.doc.createElement("div");if(ta.innerHTML='<v:shape adj="1"/>',sa=ta.firstChild,sa.style.behavior="url(#default#VML)",!sa||"object"!=typeof sa.adj)return c.type=G;ta=null}c.svg=!(c.vml="VML"==c.type),c._Paper=C,c.fn=v=C.prototype=c.prototype,c._id=0,c._oid=0,c.is=function(a,b){return b=M.call(b),"finite"==b?!Y[z](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||W.call(a).slice(8,-1).toLowerCase()==b},c.angle=function(a,b,d,e,f,g){if(null==f){var h=a-d,i=b-e;return h||i?(180+180*N.atan2(-i,-h)/S+360)%360:0}return c.angle(a,b,f,g)-c.angle(d,e,f,g)},c.rad=function(a){return a%360*S/180},c.deg=function(a){return Math.round(180*a/S%360*1e3)/1e3},c.snapTo=function(a,b,d){if(d=c.is(d,"finite")?d:10,c.is(a,V)){for(var e=a.length;e--;)if(Q(a[e]-b)<=d)return a[e]}else{a=+a;var f=b%a;if(d>f)return b-f;if(f>a-d)return b-f+a}return b},c.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=16*N.random()|0;return("x"==a?b:3&b|8).toString(16)}),c.setWindow=function(a){b("raphael.setWindow",c,A.win,a),A.win=a,A.doc=A.win.document,c._engine.initWin&&c._engine.initWin(A.win)};var ua=function(a){if(c.vml){var b,d=/^\s+|\s+$/g;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),b=e.body}catch(a){b=createPopup().document.body}var g=b.createTextRange();ua=f(function(a){try{b.style.color=I(a).replace(d,G);var c=g.queryCommandValue("ForeColor");return c=(255&c)<<16|65280&c|(16711680&c)>>>16,"#"+("000000"+c.toString(16)).slice(-6)}catch(a){return"none"}})}else{var h=A.doc.createElement("i");h.title="Raphaël Colour Picker",h.style.display="none",A.doc.body.appendChild(h),ua=f(function(a){return h.style.color=a,A.doc.defaultView.getComputedStyle(h,G).getPropertyValue("color")})}return ua(a)},va=function(){return"hsb("+[this.h,this.s,this.b]+")"},wa=function(){return"hsl("+[this.h,this.s,this.l]+")"},xa=function(){return this.hex},ya=function(a,b,d){if(null==b&&c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(d=a.b,b=a.g,a=a.r),null==b&&c.is(a,U)){var e=c.getRGB(a);a=e.r,b=e.g,d=e.b}return(a>1||b>1||d>1)&&(a/=255,b/=255,d/=255),[a,b,d]},za=function(a,b,d,e){a*=255,b*=255,d*=255;var f={r:a,g:b,b:d,hex:c.rgb(a,b,d),toString:xa};return c.is(e,"finite")&&(f.opacity=e),f};c.color=function(a){var b;return c.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=c.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):c.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=c.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(c.is(a,"string")&&(a=c.getRGB(a)),c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=c.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=c.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=xa,a},c.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,d=a.o,a=a.h),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Q(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],za(e,f,g,d)},c.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-Q(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],za(e,f,g,d)},c.rgb2hsb=function(a,b,c){c=ya(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=O(a,b,c),g=f-P(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:va}},c.rgb2hsl=function(a,b,c){c=ya(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=O(a,b,c),h=P(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:wa}},c._path2string=function(){return this.join(",").replace(ga,"$1")},c._preload=function(a,b){var c=A.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,A.doc.body.removeChild(this)},c.onerror=function(){A.doc.body.removeChild(this)},A.doc.body.appendChild(c),c.src=a},c.getRGB=f(function(a){if(!a||(a=I(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!(fa[z](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=ua(a));var b,d,e,f,h,i,j=a.match(X);return j?(j[2]&&(e=aa(j[2].substring(5),16),d=aa(j[2].substring(3,5),16),b=aa(j[2].substring(1,3),16)),j[3]&&(e=aa((h=j[3].charAt(3))+h,16),d=aa((h=j[3].charAt(2))+h,16),b=aa((h=j[3].charAt(1))+h,16)),j[4]&&(i=j[4][J](ea),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),"rgba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100)),j[5]?(i=j[5][J](ea),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsb2rgb(b,d,e,f)):j[6]?(i=j[6][J](ea),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsla"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsl2rgb(b,d,e,f)):(j={r:b,g:d,b:e,toString:g},j.hex="#"+(16777216|e|d<<8|b<<16).toString(16).slice(1),c.is(f,"finite")&&(j.opacity=f),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},c),c.hsb=f(function(a,b,d){return c.hsb2rgb(a,b,d).hex}),c.hsl=f(function(a,b,d){return c.hsl2rgb(a,b,d).hex}),c.rgb=f(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),c.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},c.getColor.reset=function(){delete this.start},c.parsePathString=function(a){if(!a)return null;var b=Aa(a);if(b.arr)return Ca(b.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return c.is(a,V)&&c.is(a[0],V)&&(e=Ca(a)),e.length||I(a).replace(ha,function(a,b,c){var f=[],g=b.toLowerCase();if(c.replace(ja,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(e.push([b][E](f.splice(0,2))),g="l",b="m"==b?"l":"L"),"r"==g)e.push([b][E](f));else for(;f.length>=d[g]&&(e.push([b][E](f.splice(0,d[g]))),d[g]););}),e.toString=c._path2string,b.arr=Ca(e),e},c.parseTransformString=f(function(a){if(!a)return null;var b=[];return c.is(a,V)&&c.is(a[0],V)&&(b=Ca(a)),b.length||I(a).replace(ia,function(a,c,d){var e=[];M.call(c),d.replace(ja,function(a,b){b&&e.push(+b)}),b.push([c][E](e))}),b.toString=c._path2string,b});var Aa=function(a){var b=Aa.ps=Aa.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[z](c)&&c!=a&&!--b[c].sleep&&delete b[c]}),b[a]};c.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=R(j,3),l=R(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*N.atan2(q-s,r-t)/S;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},c.bezierBBox=function(a,b,d,e,f,g,h,i){c.is(a,"array")||(a=[a,b,d,e,f,g,h,i]);var j=Ja.apply(null,a);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},c.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},c.isBBoxIntersect=function(a,b){var d=c.isPointInsideBBox;return d(b,a.x,a.y)||d(b,a.x2,a.y)||d(b,a.x,a.y2)||d(b,a.x2,a.y2)||d(a,b.x,b.y)||d(a,b.x2,b.y)||d(a,b.x,b.y2)||d(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)},c.pathIntersection=function(a,b){return n(a,b)},c.pathIntersectionNumber=function(a,b){return n(a,b,1)},c.isPointInsidePath=function(a,b,d){var e=c.pathBBox(a);return c.isPointInsideBBox(e,b,d)&&n(a,[["M",b,d],["H",e.x2+10]],1)%2==1},c._removedFactory=function(a){return function(){b("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var Ba=c.pathBBox=function(a){var b=Aa(a);if(b.bbox)return d(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Ka(a);for(var c,e=0,f=0,g=[],h=[],i=0,j=a.length;j>i;i++)if(c=a[i],"M"==c[0])e=c[1],f=c[2],g.push(e),h.push(f);else{var k=Ja(e,f,c[1],c[2],c[3],c[4],c[5],c[6]);g=g[E](k.min.x,k.max.x),h=h[E](k.min.y,k.max.y),e=c[5],f=c[6]}var l=P[D](0,g),m=P[D](0,h),n=O[D](0,g),o=O[D](0,h),p=n-l,q=o-m,r={x:l,y:m,x2:n,y2:o,width:p,height:q,cx:l+p/2,cy:m+q/2};return b.bbox=d(r),r},Ca=function(a){var b=d(a);return b.toString=c._path2string,b},Da=c._pathToRelative=function(a){var b=Aa(a);if(b.rel)return Ca(b.rel);c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a));var d=[],e=0,f=0,g=0,h=0,i=0;"M"==a[0][0]&&(e=a[0][1],f=a[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=a.length;k>j;j++){var l=d[j]=[],m=a[j];if(m[0]!=M.call(m[0]))switch(l[0]=M.call(m[0]),l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;o>n;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}else{l=d[j]=[],"m"==m[0]&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;q>p;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}return d.toString=c._path2string,b.rel=Ca(d),d},Ea=c._pathToAbsolute=function(a){var b=Aa(a);if(b.abs)return Ca(b.abs);if(c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a)),!a||!a.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,i=0,j=0;"M"==a[0][0]&&(e=+a[0][1],f=+a[0][2],g=e,i=f,j++,d[0]=["M",e,f]);for(var k,l,m=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),n=j,o=a.length;o>n;n++){if(d.push(k=[]),l=a[n],l[0]!=ba.call(l[0]))switch(k[0]=ba.call(l[0]),k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":for(var p=[e,f][E](l.slice(1)),q=2,r=p.length;r>q;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[E](h(p,m));break;case"M":g=+l[1]+e,i=+l[2]+f;default:for(q=1,r=l.length;r>q;q++)k[q]=+l[q]+(q%2?e:f)}else if("R"==l[0])p=[e,f][E](l.slice(1)),d.pop(),d=d[E](h(p,m)),k=["R"][E](l.slice(-2));else for(var s=0,t=l.length;t>s;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=i;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],i=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}return d.toString=c._path2string,b.abs=Ca(d),d},Fa=function(a,b,c,d){return[a,b,c,d,c,d]},Ga=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Ha=function(a,b,c,d,e,g,h,i,j,k){var l,m=120*S/180,n=S/180*(+e||0),o=[],p=f(function(a,b,c){return{x:a*N.cos(c)-b*N.sin(c),y:a*N.sin(c)+b*N.cos(c)}});if(k)y=k[0],z=k[1],w=k[2],x=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(N.cos(S/180*e),N.sin(S/180*e),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(d*d);s>1&&(s=N.sqrt(s),c*=s,d*=s);var t=c*c,u=d*d,v=(g==h?-1:1)*N.sqrt(Q((t*u-t*r*r-u*q*q)/(t*r*r+u*q*q))),w=v*c*r/d+(a+i)/2,x=v*-d*q/c+(b+j)/2,y=N.asin(((b-x)/d).toFixed(9)),z=N.asin(((j-x)/d).toFixed(9));y=w>a?S-y:y,z=w>i?S-z:z,0>y&&(y=2*S+y),0>z&&(z=2*S+z),h&&y>z&&(y-=2*S),!h&&z>y&&(z-=2*S)}var A=z-y;if(Q(A)>m){var B=z,C=i,D=j;z=y+m*(h&&z>y?1:-1),i=w+c*N.cos(z),j=x+d*N.sin(z),o=Ha(i,j,c,d,e,0,h,C,D,[z,B,w,x])}A=z-y;var F=N.cos(y),G=N.sin(y),H=N.cos(z),I=N.sin(z),K=N.tan(A/4),L=4/3*c*K,M=4/3*d*K,O=[a,b],P=[a+L*G,b-M*F],R=[i+L*I,j-M*H],T=[i,j];if(P[0]=2*O[0]-P[0],P[1]=2*O[1]-P[1],k)return[P,R,T][E](o);o=[P,R,T][E](o).join()[J](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},Ia=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:R(j,3)*a+3*R(j,2)*i*c+3*j*i*i*e+R(i,3)*g,y:R(j,3)*b+3*R(j,2)*i*d+3*j*i*i*f+R(i,3)*h}},Ja=f(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ia(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ia(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ia(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ia(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:P[D](0,p),y:P[D](0,o)},max:{x:O[D](0,p),y:O[D](0,o)}}}),Ka=c._path2curve=f(function(a,b){var c=!b&&Aa(a);if(!b&&c.curve)return Ca(c.curve);for(var d=Ea(a),e=b&&Ea(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(a,b,c){var d,e,f={T:1,Q:1};if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in f)&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][E](Ha[D](0,[b.x,b.y][E](a.slice(1))));break;case"S":"C"==c||"S"==c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y),a=["C",d,e][E](a.slice(1));break;case"T":"Q"==c||"T"==c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y),a=["C"][E](Ga(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][E](Ga(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][E](Fa(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][E](Fa(b.x,b.y,a[1],b.y));break;case"V":a=["C"][E](Fa(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][E](Fa(b.x,b.y,b.X,b.Y))}return a}),i=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)k[b]="A",e&&(l[b]="A"),a.splice(b++,0,["C"][E](c.splice(0,6)));a.splice(b,1),p=O(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],p=O(d.length,e&&e.length||0))},k=[],l=[],m="",n="",o=0,p=O(d.length,e&&e.length||0);p>o;o++){d[o]&&(m=d[o][0]),"C"!=m&&(k[o]=m,o&&(n=k[o-1])),d[o]=h(d[o],f,n),"A"!=k[o]&&"C"==m&&(k[o]="C"),i(d,o),e&&(e[o]&&(m=e[o][0]),"C"!=m&&(l[o]=m,o&&(n=l[o-1])),e[o]=h(e[o],g,n),"A"!=l[o]&&"C"==m&&(l[o]="C"),i(e,o)),j(d,e,f,g,o),j(e,d,g,f,o);var q=d[o],r=e&&e[o],s=q.length,t=e&&r.length;f.x=q[s-2],f.y=q[s-1],f.bx=_(q[s-4])||f.x,f.by=_(q[s-3])||f.y,g.bx=e&&(_(r[t-4])||g.x),g.by=e&&(_(r[t-3])||g.y),g.x=e&&r[t-2],g.y=e&&r[t-1]}return e||(c.curve=Ca(d)),e?[d,e]:d},null,Ca),La=(c._parseDots=f(function(a){for(var b=[],d=0,e=a.length;e>d;d++){var f={},g=a[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=c.getRGB(g[1]),f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),b.push(f)}for(d=1,e=b.length-1;e>d;d++)if(!b[d].offset){for(var h=_(b[d-1].offset||0),i=0,j=d+1;e>j;j++)if(b[j].offset){
i=b[j].offset;break}i||(i=100,j=e),i=_(i);for(var k=(i-h)/(j-d+1);j>d;d++)h+=k,b[d].offset=h+"%"}return b}),c._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),Ma=(c._tofront=function(a,b){b.top!==a&&(La(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},c._toback=function(a,b){b.bottom!==a&&(La(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},c._insertafter=function(a,b,c){La(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},c._insertbefore=function(a,b,c){La(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},c.toMatrix=function(a,b){var c=Ba(a),d={_:{transform:G},getBBox:function(){return c}};return Na(d,b),d.matrix}),Na=(c.transformPath=function(a,b){return ra(a,Ma(a,b))},c._extractTransform=function(a,b){if(null==b)return a._.transform;b=I(b).replace(/\.{3}|\u2026/g,a._.transform||G);var d=c.parseTransformString(b),e=0,f=0,g=0,h=1,i=1,j=a._,k=new o;if(j.transform=d||[],d)for(var l=0,m=d.length;m>l;l++){var n,p,q,r,s,t=d[l],u=t.length,v=I(t[0]).toLowerCase(),w=t[0]!=v,x=w?k.invert():0;"t"==v&&3==u?w?(n=x.x(0,0),p=x.y(0,0),q=x.x(t[1],t[2]),r=x.y(t[1],t[2]),k.translate(q-n,r-p)):k.translate(t[1],t[2]):"r"==v?2==u?(s=s||a.getBBox(1),k.rotate(t[1],s.x+s.width/2,s.y+s.height/2),e+=t[1]):4==u&&(w?(q=x.x(t[2],t[3]),r=x.y(t[2],t[3]),k.rotate(t[1],q,r)):k.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==v?2==u||3==u?(s=s||a.getBBox(1),k.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(w?(q=x.x(t[3],t[4]),r=x.y(t[3],t[4]),k.scale(t[1],t[2],q,r)):k.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&k.add(t[1],t[2],t[3],t[4],t[5],t[6]),j.dirtyT=1,a.matrix=k}a.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,1==h&&1==i&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1}),Oa=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pa=c._equaliseTransform=function(a,b){b=I(b).replace(/\.{3}|\u2026/g,a),a=c.parseTransformString(a)||[],b=c.parseTransformString(b)||[];for(var d,e,f,g,h=O(a.length,b.length),i=[],j=[],k=0;h>k;k++){if(f=a[k]||Oa(b[k]),g=b[k]||Oa(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;for(i[k]=[],j[k]=[],d=0,e=O(f.length,g.length);e>d;d++)d in f&&(i[k][d]=f[d]),d in g&&(j[k][d]=g[d])}return{from:i,to:j}};c._getContainer=function(a,b,d,e){var f;return f=null!=e||c.is(a,"object")?a:A.doc.getElementById(a),null!=f?f.tagName?null==b?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:b,height:d}:{container:1,x:a,y:b,width:d,height:e}:void 0},c.pathToRelative=Da,c._engine={},c.path2curve=Ka,c.matrix=function(a,b,c,d,e,f){return new o(a,b,c,d,e,f)},function(a){function b(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var c=N.sqrt(b(a));a[0]&&(a[0]/=c),a[1]&&(a[1]/=c)}a.add=function(a,b,c,d,e,f){var g,h,i,j,k=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],m=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof o&&(m=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),g=0;3>g;g++)for(h=0;3>h;h++){for(j=0,i=0;3>i;i++)j+=l[g][i]*m[i][h];k[g][h]=j}this.a=k[0][0],this.b=k[1][0],this.c=k[0][1],this.d=k[1][1],this.e=k[0][2],this.f=k[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new o(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,b,d){a=c.rad(a),b=b||0,d=d||0;var e=+N.cos(a).toFixed(9),f=+N.sin(a).toFixed(9);this.add(e,f,-f,e,b,d),this.add(1,0,0,1,-b,-d)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[I.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return c.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=N.sqrt(b(e[0])),d(e[0]),a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear],a.scaley=N.sqrt(b(e[1])),d(e[1]),a.shear/=a.scaley;var f=-e[0][1],g=e[1][1];return 0>g?(a.rotate=c.deg(N.acos(g)),0>f&&(a.rotate=360-a.rotate)):a.rotate=c.deg(N.asin(f)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[J]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:G)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:G)+(b.rotate?"r"+[b.rotate,0,0]:G)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var Qa=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);v.safari="Apple Computer, Inc."==navigator.vendor&&(Qa&&Qa[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Qa&&Qa[1]<8?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:ma;for(var Ra=function(){this.returnValue=!1},Sa=function(){return this.originalEvent.preventDefault()},Ta=function(){this.cancelBubble=!0},Ua=function(){return this.originalEvent.stopPropagation()},Va=function(a){var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,c=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;return{x:a.clientX+c,y:a.clientY+b}},Wa=function(){return A.doc.addEventListener?function(a,b,c,d){var e=function(a){var b=Va(a);return c.call(d,a,b.x,b.y)};if(a.addEventListener(b,e,!1),F&&L[b]){var f=function(b){for(var e=Va(b),f=b,g=0,h=b.targetTouches&&b.targetTouches.length;h>g;g++)if(b.targetTouches[g].target==a){b=b.targetTouches[g],b.originalEvent=f,b.preventDefault=Sa,b.stopPropagation=Ua;break}return c.call(d,b,e.x,e.y)};a.addEventListener(L[b],f,!1)}return function(){return a.removeEventListener(b,e,!1),F&&L[b]&&a.removeEventListener(L[b],f,!1),!0}}:A.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||A.win.event;var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,e=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Ra,a.stopPropagation=a.stopPropagation||Ta,c.call(d,a,f,g)};return a.attachEvent("on"+b,e),function(){return a.detachEvent("on"+b,e),!0}}:void 0}(),Xa=[],Ya=function(a){for(var c,d=a.clientX,e=a.clientY,f=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,g=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,h=Xa.length;h--;){if(c=Xa[h],F&&a.touches){for(var i,j=a.touches.length;j--;)if(i=a.touches[j],i.identifier==c.el._drag.id){d=i.clientX,e=i.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var k,l=c.el.node,m=l.nextSibling,n=l.parentNode,o=l.style.display;A.win.opera&&n.removeChild(l),l.style.display="none",k=c.el.paper.getElementByPoint(d,e),l.style.display=o,A.win.opera&&(m?n.insertBefore(l,m):n.appendChild(l)),k&&b("raphael.drag.over."+c.el.id,c.el,k),d+=g,e+=f,b("raphael.drag.move."+c.el.id,c.move_scope||c.el,d-c.el._drag.x,e-c.el._drag.y,d,e,a)}},Za=function(a){c.unmousemove(Ya).unmouseup(Za);for(var d,e=Xa.length;e--;)d=Xa[e],d.el._drag={},b("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);Xa=[]},$a=c.el={},_a=K.length;_a--;)!function(a){c[a]=$a[a]=function(b,d){return c.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Wa(this.shape||this.node||A.doc,a,b,d||this)})),this},c["un"+a]=$a["un"+a]=function(b){for(var d=this.events||[],e=d.length;e--;)d[e].name!=a||!c.is(b,"undefined")&&d[e].f!=b||(d[e].unbind(),d.splice(e,1),!d.length&&delete this.events);return this}}(K[_a]);$a.data=function(a,d){var e=ka[this.id]=ka[this.id]||{};if(0==arguments.length)return e;if(1==arguments.length){if(c.is(a,"object")){for(var f in a)a[z](f)&&this.data(f,a[f]);return this}return b("raphael.data.get."+this.id,this,e[a],a),e[a]}return e[a]=d,b("raphael.data.set."+this.id,this,d,a),this},$a.removeData=function(a){return null==a?ka[this.id]={}:ka[this.id]&&delete ka[this.id][a],this},$a.getData=function(){return d(ka[this.id]||{})},$a.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},$a.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var ab=[];$a.drag=function(a,d,e,f,g,h){function i(i){(i.originalEvent||i).preventDefault();var j=i.clientX,k=i.clientY,l=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,m=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;if(this._drag.id=i.identifier,F&&i.touches)for(var n,o=i.touches.length;o--;)if(n=i.touches[o],this._drag.id=n.identifier,n.identifier==this._drag.id){j=n.clientX,k=n.clientY;break}this._drag.x=j+m,this._drag.y=k+l,!Xa.length&&c.mousemove(Ya).mouseup(Za),Xa.push({el:this,move_scope:f,start_scope:g,end_scope:h}),d&&b.on("raphael.drag.start."+this.id,d),a&&b.on("raphael.drag.move."+this.id,a),e&&b.on("raphael.drag.end."+this.id,e),b("raphael.drag.start."+this.id,g||f||this,i.clientX+m,i.clientY+l,i)}return this._drag={},ab.push({el:this,start:i}),this.mousedown(i),this},$a.onDragOver=function(a){a?b.on("raphael.drag.over."+this.id,a):b.unbind("raphael.drag.over."+this.id)},$a.undrag=function(){for(var a=ab.length;a--;)ab[a].el==this&&(this.unmousedown(ab[a].start),ab.splice(a,1),b.unbind("raphael.drag.*."+this.id));!ab.length&&c.unmousemove(Ya).unmouseup(Za),Xa=[]},v.circle=function(a,b,d){var e=c._engine.circle(this,a||0,b||0,d||0);return this.__set__&&this.__set__.push(e),e},v.rect=function(a,b,d,e,f){var g=c._engine.rect(this,a||0,b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.ellipse=function(a,b,d,e){var f=c._engine.ellipse(this,a||0,b||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},v.path=function(a){a&&!c.is(a,U)&&!c.is(a[0],V)&&(a+=G);var b=c._engine.path(c.format[D](c,arguments),this);return this.__set__&&this.__set__.push(b),b},v.image=function(a,b,d,e,f){var g=c._engine.image(this,a||"about:blank",b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.text=function(a,b,d){var e=c._engine.text(this,a||0,b||0,I(d));return this.__set__&&this.__set__.push(e),e},v.set=function(a){!c.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new mb(a);return this.__set__&&this.__set__.push(b),b.paper=this,b.type="set",b},v.setStart=function(a){this.__set__=a||this.set()},v.setFinish=function(){var a=this.__set__;return delete this.__set__,a},v.getSize=function(){var a=this.canvas.parentNode;return{width:a.offsetWidth,height:a.offsetHeight}},v.setSize=function(a,b){return c._engine.setSize.call(this,a,b)},v.setViewBox=function(a,b,d,e,f){return c._engine.setViewBox.call(this,a,b,d,e,f)},v.top=v.bottom=null,v.raphael=c;var bb=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0;return{y:b.top+(A.win.pageYOffset||e.scrollTop||d.scrollTop)-f,x:b.left+(A.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g}};v.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=A.doc.elementFromPoint(a,b);if(A.win.opera&&"svg"==e.tagName){var f=bb(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},v.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(d){c.isBBoxIntersect(d.getBBox(),a)&&b.push(d)}),b},v.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},v.forEach=function(a,b){for(var c=this.bottom;c;){if(!1===a.call(b,c))return this;c=c.next}return this},v.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c},$a.isPointInside=function(a,b){var d=this.realPath=qa[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(d=c.transformPath(d,this.attr("transform"))),c.isPointInsidePath(d,a,b)},$a.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=qa[this.type](this),b.bboxwt=Ba(this.realPath),b.bboxwt.toString=p,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=qa[this.type](this)),b.bbox=Ba(ra(this.realPath,this.matrix)),b.bbox.toString=p,b.dirty=b.dirtyT=0),b.bbox)},$a.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},$a.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||qa[this.type](this);f=this.matrix?ra(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cb=function(a,b,d,e,f,g,h,i,l){return null==l?j(a,b,d,e,f,g,h,i):c.findDotsAtSegment(a,b,d,e,f,g,h,i,k(a,b,d,e,f,g,h,i,l))},db=function(a,b){return function(d,e,f){d=Ka(d);for(var g,h,i,j,k,l="",m={},n=0,o=0,p=d.length;p>o;o++){if(i=d[o],"M"==i[0])g=+i[1],h=+i[2];else{if(j=cb(g,h,i[1],i[2],i[3],i[4],i[5],i[6]),n+j>e){if(b&&!m.start){if(k=cb(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],f)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!a&&!b)return k=cb(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=j,g=+i[5],h=+i[6]}l+=i.shift()+i}return m.end=l,k=a?n:b?m:c.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},eb=db(1),fb=db(),gb=db(0,1);c.getTotalLength=eb,c.getPointAtLength=fb,c.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return gb(a,b).end;var d=gb(a,c,1);return b?gb(d,b).end:d},$a.getTotalLength=function(){var a=this.getPath();if(a)return this.node.getTotalLength?this.node.getTotalLength():eb(a)},$a.getPointAtLength=function(a){var b=this.getPath();if(b)return fb(b,a)},$a.getPath=function(){var a,b=c._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return b&&(a=b(this)),a},$a.getSubpath=function(a,b){var d=this.getPath();if(d)return c.getSubpath(d,a,b)};var hb=c.easing_formulas={linear:function(a){return a},"<":function(a){return R(a,1.7)},">":function(a){return R(a,.48)},"<>":function(a){var b=.48-a/1.04,c=N.sqrt(.1734+b*b),d=c-b,e=R(Q(d),1/3)*(0>d?-1:1),f=-c-b,g=R(Q(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:R(2,-10*a)*N.sin(2*(a-.075)*S/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};hb.easeIn=hb["ease-in"]=hb["<"],hb.easeOut=hb["ease-out"]=hb[">"],hb.easeInOut=hb["ease-in-out"]=hb["<>"],hb["back-in"]=hb.backIn,hb["back-out"]=hb.backOut;var ib=[],jb=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,16)},kb=function(){for(var a=+new Date,d=0;d<ib.length;d++){var e=ib[d];if(!e.el.removed&&!e.paused){var f,g,h=a-e.start,i=e.ms,j=e.easing,k=e.from,l=e.diff,m=e.to,n=(e.t,e.el),o={},p={};if(e.initstatus?(h=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*i,e.status=e.initstatus,delete e.initstatus,e.stop&&ib.splice(d--,1)):e.status=(e.prev+(e.percent-e.prev)*(h/i))/e.anim.top,!(0>h))if(i>h){var q=j(h/i);for(var r in k)if(k[z](r)){switch(da[r]){case T:f=+k[r]+q*i*l[r];break;case"colour":f="rgb("+[lb($(k[r].r+q*i*l[r].r)),lb($(k[r].g+q*i*l[r].g)),lb($(k[r].b+q*i*l[r].b))].join(",")+")";break;case"path":f=[];for(var t=0,u=k[r].length;u>t;t++){f[t]=[k[r][t][0]];for(var v=1,w=k[r][t].length;w>v;v++)f[t][v]=+k[r][t][v]+q*i*l[r][t][v];f[t]=f[t].join(H)}f=f.join(H);break;case"transform":if(l[r].real)for(f=[],t=0,u=k[r].length;u>t;t++)for(f[t]=[k[r][t][0]],v=1,w=k[r][t].length;w>v;v++)f[t][v]=k[r][t][v]+q*i*l[r][t][v];else{var x=function(a){return+k[r][a]+q*i*l[r][a]};f=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if("clip-rect"==r)for(f=[],t=4;t--;)f[t]=+k[r][t]+q*i*l[r][t];break;default:var y=[][E](k[r]);for(f=[],t=n.paper.customAttributes[r].length;t--;)f[t]=+y[t]+q*i*l[r][t]}o[r]=f}n.attr(o),function(a,c,d){setTimeout(function(){b("raphael.anim.frame."+a,c,d)})}(n.id,n,e.anim)}else{if(function(a,d,e){setTimeout(function(){b("raphael.anim.frame."+d.id,d,e),b("raphael.anim.finish."+d.id,d,e),c.is(a,"function")&&a.call(d)})}(e.callback,n,e.anim),n.attr(m),ib.splice(d--,1),e.repeat>1&&!e.next){for(g in m)m[z](g)&&(p[g]=e.totalOrigin[g]);e.el.attr(p),s(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&s(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}c.svg&&n&&n.paper&&n.paper.safari(),ib.length&&jb(kb)},lb=function(a){return a>255?255:0>a?0:a};$a.animateWith=function(a,b,d,e,f,g){var h=this;if(h.removed)return g&&g.call(h),h;var i=d instanceof r?d:c.animation(d,e,f,g);s(i,h,i.percents[0],null,h.attr());for(var j=0,k=ib.length;k>j;j++)if(ib[j].anim==b&&ib[j].el==a){ib[k-1].start=ib[j].start;break}return h},$a.onAnimation=function(a){return a?b.on("raphael.anim.frame."+this.id,a):b.unbind("raphael.anim.frame."+this.id),this},r.prototype.delay=function(a){var b=new r(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},r.prototype.repeat=function(a){var b=new r(this.anim,this.ms);return b.del=this.del,b.times=N.floor(O(a,0))||1,b},c.animation=function(a,b,d,e){if(a instanceof r)return a;(c.is(d,"function")||!d)&&(e=e||d||null,d=null),a=Object(a),b=+b||0;var f,g,h={};for(g in a)a[z](g)&&_(g)!=g&&_(g)+"%"!=g&&(f=!0,h[g]=a[g]);if(f)return d&&(h.easing=d),e&&(h.callback=e),new r({100:h},b);if(e){var i=0;for(var j in a){var k=aa(j);a[z](j)&&k>i&&(i=k)}i+="%",!a[i].callback&&(a[i].callback=e)}return new r(a,b)},$a.animate=function(a,b,d,e){var f=this;if(f.removed)return e&&e.call(f),f;var g=a instanceof r?a:c.animation(a,b,d,e);return s(g,f,g.percents[0],null,f.attr()),f},$a.setTime=function(a,b){return a&&null!=b&&this.status(a,P(b,a.ms)/a.ms),this},$a.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return s(a,this,-1,P(b,1)),this;for(c=ib.length;c>f;f++)if(d=ib[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e},$a.pause=function(a){for(var c=0;c<ib.length;c++)ib[c].el.id!=this.id||a&&ib[c].anim!=a||!1!==b("raphael.anim.pause."+this.id,this,ib[c].anim)&&(ib[c].paused=!0);return this},$a.resume=function(a){for(var c=0;c<ib.length;c++)if(ib[c].el.id==this.id&&(!a||ib[c].anim==a)){var d=ib[c];!1!==b("raphael.anim.resume."+this.id,this,d.anim)&&(delete d.paused,this.status(d.anim,d.status))}return this},$a.stop=function(a){for(var c=0;c<ib.length;c++)ib[c].el.id!=this.id||a&&ib[c].anim!=a||!1!==b("raphael.anim.stop."+this.id,this,ib[c].anim)&&ib.splice(c--,1);return this},b.on("raphael.remove",t),b.on("raphael.clear",t),$a.toString=function(){return"Raphaël’s object"};var mb=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=$a.constructor&&a[b].constructor!=mb||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},nb=mb.prototype;nb.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)!(a=arguments[c])||a.constructor!=$a.constructor&&a.constructor!=mb||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},nb.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},nb.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(!1===a.call(b,this.items[c],c))return this;return this};for(var ob in $a)$a[z](ob)&&(nb[ob]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][D](c,b)})}}(ob));return nb.attr=function(a,b){if(a&&c.is(a,V)&&c.is(a[0],"object"))for(var d=0,e=a.length;e>d;d++)this.items[d].attr(a[d]);else for(var f=0,g=this.items.length;g>f;f++)this.items[f].attr(a,b);return this},nb.clear=function(){for(;this.length;)this.pop()},nb.splice=function(a,b){a=0>a?O(this.length+a,0):a,b=O(0,P(this.length-a,b));var c,d=[],e=[],f=[];for(c=2;c<arguments.length;c++)f.push(arguments[c]);for(c=0;b>c;c++)e.push(this[a+c]);for(;c<this.length-a;c++)d.push(this[a+c]);var g=f.length;for(c=0;c<g+d.length;c++)this.items[a+c]=this[a+c]=g>c?f[c]:d[c-g];for(c=this.items.length=this.length-=b-g;this[c];)delete this[c++];return new mb(e)},nb.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},nb.animate=function(a,b,d,e){(c.is(d,"function")||!d)&&(e=d||null);var f,g,h=this.items.length,i=h,j=this;if(!h)return this;e&&(g=function(){!--h&&e.call(j)}),d=c.is(d,U)?d:g;var k=c.animation(a,b,d,g);for(f=this.items[--i].animate(k);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(f,k,k),this.items[i]&&!this.items[i].removed||h--;return this},nb.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},nb.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=P[D](0,a),b=P[D](0,b),c=O[D](0,c),d=O[D](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},nb.clone=function(a){a=this.paper.set();for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},nb.toString=function(){return"Raphaël‘s set"},nb.glow=function(a){var b=this.paper.set();return this.forEach(function(c){var d=c.glow(a);null!=d&&d.forEach(function(a){b.push(a)})}),b},nb.isPointInside=function(a,b){var c=!1;return this.forEach(function(d){return d.isPointInside(a,b)?(c=!0,!1):void 0}),c},c.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[z](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=aa(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[z](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[z](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},v.getFont=function(a,b,d,e){if(e=e||"normal",d=d||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400,c.fonts){var f=c.fonts[a];if(!f){var g=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,G)+"(\\s|$)","i");for(var h in c.fonts)if(c.fonts[z](h)&&g.test(h)){f=c.fonts[h];break}}var i;if(f)for(var j=0,k=f.length;k>j&&(i=f[j],i.face["font-weight"]!=b||i.face["font-style"]!=d&&i.face["font-style"]||i.face["font-stretch"]!=e);j++);return i}},v.print=function(a,b,d,e,f,g,h,i){g=g||"middle",h=O(P(h||0,1),-1),i=O(P(i||1,3),1);var j,k=I(d)[J](G),l=0,m=0,n=G;if(c.is(e,"string")&&(e=this.getFont(e)),e){j=(f||16)/e.face["units-per-em"];for(var o=e.face.bbox[J](w),p=+o[0],q=o[3]-o[1],r=0,s=+o[1]+("baseline"==g?q+ +e.face.descent:q/2),t=0,u=k.length;u>t;t++){if("\n"==k[t])l=0,x=0,m=0,r+=q*i;else{var v=m&&e.glyphs[k[t-1]]||{},x=e.glyphs[k[t]];l+=m?(v.w||e.w)+(v.k&&v.k[k[t]]||0)+e.w*h:0,m=1}x&&x.d&&(n+=c.transformPath(x.d,["t",l*j,r*j,"s",j,j,p,s,"t",(a-p)/j,(b-s)/j]))}}return this.path(n).attr({fill:"#000",stroke:"none"})},v.add=function(a){if(c.is(a,"array"))for(var b,d=this.set(),e=0,f=a.length;f>e;e++)b=a[e]||{},x[z](b.type)&&d.push(this[b.type]().attr(b));return d},c.format=function(a,b){var d=c.is(b,V)?[0][E](b):arguments;return a&&c.is(a,U)&&d.length-1&&(a=a.replace(y,function(a,b){return null==d[++b]?G:d[b]})),a||G},c.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),c.ninja=function(){return B.was?A.win.Raphael=B.is:delete Raphael,c},c.st=nb,b.on("raphael.DOMload",function(){u=!0}),function(a,b,d){function e(){/in/.test(a.readyState)?setTimeout(e,9):c.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1),a.readyState="complete"},!1),a.readyState="loading"),e()}(document,"DOMContentLoaded"),function(){if(c.svg){var a="hasOwnProperty",b=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=c.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};c.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[a](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),b(e[f])):d.setAttribute(f,b(e[f])))}else d=c._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(a,e){var j="linear",k=a.id+e,m=.5,n=.5,o=a.node,p=a.paper,r=o.style,s=c._g.doc.getElementById(k);if(!s){if(e=b(e).replace(c._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(c.rad(t)),f.sin(c.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=c._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,\xb0#]/g,"_"),a.gradient&&k!=a.gradient.id&&(p.defs.removeChild(a.gradient),delete a.gradient),!a.gradient){s=q(j+"Gradient",{id:k}),a.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:a.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url('"+document.location+"#"+k+"')",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=b(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y+"-obj"+d.id;c._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=c._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-E*u):(g=E*u,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=c.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-g):(g=0,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:c.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[a](k)&&!p[k]){var F=c._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,c,d){if(c=u[b(c).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=c.length;h--;)g[h]=c[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[a](o)){if(!c._availableAttrs[a](o))continue;var p=f[o];switch(k[o]=p,o){case"blur":d.blur(p);break;case"title":var u=i.getElementsByTagName("title");if(u.length&&(u=u[0]))u.firstChild.nodeValue=p;else{u=q("title");var w=c._g.doc.createTextNode(p);u.appendChild(w),i.appendChild(u)}break;case"href":case"target":var y=i.parentNode;if("a"!=y.tagName.toLowerCase()){var z=q("a");y.insertBefore(z,i),z.appendChild(i),y=z}"target"==o?y.setAttributeNS(n,"show","blank"==p?"new":p):y.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var A=b(p).split(j);if(4==A.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var B=q("clipPath"),C=q("rect");B.id=c.createUUID(),q(C,{x:A[0],y:A[1],width:A[2],height:A[3]}),B.appendChild(C),d.paper.defs.appendChild(B),q(i,{"clip-path":"url(#"+B.id+")"}),d.clip=C}if(!p){var D=i.getAttribute("clip-path");if(D){var E=c._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g,l));E&&E.parentNode.removeChild(E),q(i,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(i,{d:p?k.path=c._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(i.setAttribute(o,p),d._.dirty=1,!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if("rx"==o&&"rect"==d.type)break;case"cx":i.setAttribute(o,p),
d.pattern&&s(d),d._.dirty=1;break;case"height":if(i.setAttribute(o,p),d._.dirty=1,!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if("ry"==o&&"rect"==d.type)break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":"image"==d.type&&i.setAttributeNS(n,"href",p);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(p/=g(h(d._.sx),h(d._.sy))||1),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var F=b(p).match(c._ISURL);if(F){B=q("pattern");var G=q("image");B.id=c.createUUID(),q(B,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(G,{x:0,y:0,"xlink:href":F[1]}),B.appendChild(G),function(a){c._preload(F[1],function(){var b=this.offsetWidth,c=this.offsetHeight;q(a,{width:b,height:c}),q(G,{width:b,height:c}),d.paper.safari()})}(B),d.paper.defs.appendChild(B),q(i,{fill:"url(#"+B.id+")"}),d.pattern=B,d.pattern&&s(d);break}var H=c.getRGB(p);if(H.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var I=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(I){var J=I.getElementsByTagName("stop");q(J[J.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}}else delete f.gradient,delete k.gradient,!c.is(k.opacity,"undefined")&&c.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!c.is(k["fill-opacity"],"undefined")&&c.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});H[a]("opacity")&&q(i,{"fill-opacity":H.opacity>1?H.opacity/100:H.opacity});case"stroke":H=c.getRGB(p),i.setAttribute(o,H.hex),"stroke"==o&&H[a]("opacity")&&q(i,{"stroke-opacity":H.opacity>1?H.opacity/100:H.opacity}),"stroke"==o&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p);break;case"opacity":k.gradient&&!k[a]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){(I=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)))&&(J=I.getElementsByTagName("stop"),q(J[J.length-1],{"stop-opacity":p}));break}default:"font-size"==o&&(p=e(p,10)+"px");var K=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[K]=p,d._.dirty=1,i.setAttribute(o,p)}}x(d,f),i.style.visibility=m},x=function(d,f){if("text"==d.type&&(f[a]("text")||f[a]("font")||f[a]("font-size")||f[a]("x")||f[a]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(c._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[a]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=b(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:1.2*i,x:g.x}),j.appendChild(c._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:1.2*i,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&c.is(r,"finite")&&q(m[0],{dy:r})}},y=function(a){return a.parentNode&&"a"===a.parentNode.tagName.toLowerCase()?a.parentNode:a},z=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.matrix=c.matrix(),this.realPath=null,this.paper=b,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},A=c.el;z.prototype=A,A.constructor=z,c._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,c,e){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,c,e]])),this},A.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this},A.translate=function(a,c){return this.removed?this:(a=b(a).split(j),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this.transform(this._.transform.concat([["t",a,c]])),this)},A.transform=function(b){var d=this._;if(null==b)return d.transform;if(c._extractTransform(this,b),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[a]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){var a=y(this.node);if(!this.removed&&a.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),c._tear(this,b),a.parentNode.removeChild(a),this.removeData();for(var d in this)this[d]="function"==typeof this[d]?c._removedFactory(d):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b,c=!1;this.paper.canvas.parentElement?b=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(b=this.paper.canvas.parentNode.style),b&&"none"==b.display&&(c=!0,b.display="");var d={};try{d=this.node.getBBox()}catch(a){d={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{d=d||{},c&&(b.display="none")}return a&&this.hide(),d},A.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==b)return this._.transform;for(var g=b.split(j),h={},i=0,l=g.length;l>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return l-1?h:h[g[0]]}if(null==d&&c.is(b,"array")){for(h={},i=0,l=b.length;l>i;i++)h[b[i]]=this.attr(b[i]);return h}if(null!=d){var m={};m[b]=d}else null!=b&&c.is(b,"object")&&(m=b);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[a](n)&&m[a](n)&&c.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[a](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;var a=y(this.node);a.parentNode.appendChild(a);var b=this.paper;return b.top!=this&&c._tofront(this,b),this},A.toBack=function(){if(this.removed)return this;var a=y(this.node),b=a.parentNode;return b.insertBefore(a,b.firstChild),c._toback(this,this.paper),this.paper,this},A.insertAfter=function(a){if(this.removed||!a)return this;var b=y(this.node),d=y(a.node||a[a.length-1].node);return d.nextSibling?d.parentNode.insertBefore(b,d.nextSibling):d.parentNode.appendChild(b),c._insertafter(this,a,this.paper),this},A.insertBefore=function(a){if(this.removed||!a)return this;var b=y(this.node),d=y(a.node||a[0].node);return d.parentNode.insertBefore(b,d),c._insertbefore(this,a,this.paper),this},A.blur=function(a){var b=this;if(0!=+a){var d=q("filter"),e=q("feGaussianBlur");b.attrs.blur=a,d.id=c.createUUID(),q(e,{stdDeviation:+a||1.5}),d.appendChild(e),b.paper.defs.appendChild(d),b._blur=d,q(b.node,{filter:"url(#"+d.id+")"})}else b._blur&&(b._blur.parentNode.removeChild(b._blur),delete b._blur,delete b.attrs.blur),b.node.removeAttribute("filter");return b},c._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},c._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},c._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},c._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},c._engine.text=function(a,b,d,e){var f=q("text");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={x:b,y:d,"text-anchor":"middle",text:e,"font-family":c._availableAttrs["font-family"],"font-size":c._availableAttrs["font-size"],stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},c._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a&&a.container,d=a.x,e=a.y,f=a.width,g=a.height;if(!b)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==b?(i.style.cssText=j+"position:absolute;left:"+d+"px;top:"+e+"px",c._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:relative",b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i)),b=new c._Paper,b.width=f,b.height=g,b.canvas=i,b.clear(),b._left=b._top=0,h&&(b.renderfix=function(){}),b.renderfix(),b},c._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=this.getSize(),j=g(c/i.width,d/i.height),l=this.top,n=e?"xMidYMid meet":"xMinYMin";for(null==a?(this._vbSize&&(j=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=j,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:n});j&&l;)h="stroke-width"in l.attrs?l.attrs["stroke-width"]:1,l.attr({"stroke-width":h}),l._.dirty=1,l._.dirtyT=1,l=l.prev;return this._viewBox=[a,b,c,d,!!e],this},c.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(c){a=b.createSVGMatrix()}var d=-a.e%1,e=-a.f%1;(d||e)&&(d&&(this._left=(this._left+d)%1,c.left=this._left+"px"),e&&(this._top=(this._top+e)%1,c.top=this._top+"px"))},c.prototype.clear=function(){c.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(c._g.doc.createTextNode("Created with Raphaël "+c.version)),a.appendChild(this.desc),a.appendChild(this.defs=q("defs"))},c.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null};var B=c.st;for(var C in A)A[a](C)&&!B[a](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}}(),function(){if(c.vml){var a="hasOwnProperty",b=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=c.eve,m=" ",n="",o={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},p=/([clmz]),?([^clmz]*)/gi,q=/ progid:\S+Blur\([^\)]+\)/g,r=/-?[^,\s-]+/g,s="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",t=21600,u={path:1,rect:1,image:1},v={circle:1,ellipse:1},w=function(a){var d=/[ahqstv]/gi,e=c._pathToAbsolute;if(b(a).match(d)&&(e=c._path2curve),d=/[clmz]/g,e==c._pathToAbsolute&&!b(a).match(d)){var g=b(a).replace(p,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=o[b];return c.replace(r,function(a){e&&2==d.length&&(g+=d+o["m"==b?"l":"L"],d=[]),d.push(f(a*t))}),g+d});return g}var h,i,j=e(a);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],"z"==(i=j[k][0].toLowerCase())&&(i="x");for(var q=1,s=h.length;s>q;q++)i+=f(h[q]*t)+(q!=s-1?",":n);g.push(i)}return g.join(m)},x=function(a,b,d){var e=c.matrix();return e.rotate(-a,.5,.5),{dx:e.x(b,d),dy:e.y(b,d)}},y=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,n=l.style,o=1,p="",q=t/b,r=t/c;if(n.visibility="hidden",b&&c){if(l.coordsize=i(q)+m+i(r),n.rotation=f*(0>b*c?-1:1),f){var s=x(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),n.flip=p,l.coordorigin=d*-q+m+e*-r,k||g.fillsize){var u=l.getElementsByTagName(j);u=u&&u[0],l.removeChild(u),k&&(s=x(f,h.x(k[0],k[1]),h.y(k[0],k[1])),u.position=s.dx*o+m+s.dy*o),g.fillsize&&(u.size=g.fillsize[0]*i(b)+m+g.fillsize[1]*i(c)),l.appendChild(u)}n.visibility="visible"}};c.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var z=function(a,c,d){for(var e=b(c).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},A=function(e,i){e.attrs=e.attrs||{};var l=e.node,o=e.attrs,p=l.style,q=u[e.type]&&(i.x!=o.x||i.y!=o.y||i.width!=o.width||i.height!=o.height||i.cx!=o.cx||i.cy!=o.cy||i.rx!=o.rx||i.ry!=o.ry||i.r!=o.r),r=v[e.type]&&(o.cx!=i.cx||o.cy!=i.cy||o.r!=i.r||o.rx!=i.rx||o.ry!=i.ry),s=e;for(var x in i)i[a](x)&&(o[x]=i[x]);if(q&&(o.path=c._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=w(~b(o.path).toLowerCase().indexOf("r")?c._pathToAbsolute(o.path):o.path),e._.dirty=1,"image"==e.type&&(e._.fillpos=[o.x,o.y],e._.fillsize=[o.width,o.height],y(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var A=+o.cx,C=+o.cy,D=+o.rx||+o.r||0,F=+o.ry||+o.r||0;l.path=c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((A-D)*t),f((C-F)*t),f((A+D)*t),f((C+F)*t),f(A*t)),e._.dirty=1}if("clip-rect"in i){var G=b(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||c._g.doc.createElement("div"),I=H.style;I.clip=c.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,n)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&z(s,i["arrow-start"]),"arrow-end"in i&&z(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j);if(K=K&&K[0],!K&&(K=E(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var L=b(i.fill).match(c._ISURL);if(L){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=L[1],K.type="tile";var M=e.getBBox(1);K.position=M.x+m+M.y,e._.fillpos=[M.x,M.y],c._preload(L[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=c.getRGB(i.fill).hex,K.src=n,K.type="solid",c.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=b(i.fill).charAt())&&B(s,i.fill,K)&&(o.fill="none",o.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var N=((+o["fill-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+c.getRGB(i.fill).o+1||2)-1);N=h(g(N,0),1),K.opacity=N,K.src&&(K.color="none")}l.appendChild(K);var O=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],P=!1;!O&&(P=O=E("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(O.on=!0),("none"==i.stroke||null===i.stroke||null==O.on||0==i.stroke||0==i["stroke-width"])&&(O.on=!1);var Q=c.getRGB(i.stroke);O.on&&i.stroke&&(O.color=Q.hex),N=((+o["stroke-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+Q.o+1||2)-1);var R=.75*(d(i["stroke-width"])||1);if(N=h(g(N,0),1),null==i["stroke-width"]&&(R=o["stroke-width"]),i["stroke-width"]&&(O.weight=R),R&&1>R&&(N*=R)&&(O.weight=1),O.opacity=N,i["stroke-linejoin"]&&(O.joinstyle=i["stroke-linejoin"]||"miter"),O.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(O.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),"stroke-dasharray"in i){var S={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};O.dashstyle=S[a](i["stroke-dasharray"])?S[i["stroke-dasharray"]]:n}P&&l.appendChild(O)}if("text"==s.type){s.paper.canvas.style.display=n;var T=s.paper.span,U=o.font&&o.font.match(/\d+(?:\.\d*)?(?=px)/);p=T.style,o.font&&(p.font=o.font),o["font-family"]&&(p.fontFamily=o["font-family"]),o["font-weight"]&&(p.fontWeight=o["font-weight"]),o["font-style"]&&(p.fontStyle=o["font-style"]),U=d(o["font-size"]||U&&U[0])||10,p.fontSize=100*U+"px",s.textpath.string&&(T.innerHTML=b(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var V=T.getBoundingClientRect();s.W=o.w=(V.right-V.left)/100,s.H=o.h=(V.bottom-V.top)/100,s.X=o.x,s.Y=o.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=c.format("m{0},{1}l{2},{1}",f(o.x*t),f(o.y*t),f(o.x*t)+1));for(var W=["x","y","text","font","font-family","font-weight","font-style","font-size"],X=0,Y=W.length;Y>X;X++)if(W[X]in i){s._.dirty=1;break}switch(o["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},B=function(a,f,g){a.attrs=a.attrs||{};var h=(a.attrs,Math.pow),i="linear",j=".5 .5";if(a.attrs.gradient=f,f=b(f).replace(c._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+m+c),n}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=c._parseDots(f);if(!l)return null;if(a=a.shape||a.node,l.length){a.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var o=[],p=0,q=l.length;q>p;p++)l[p].offset&&o.push(l[p].offset+m+l[p].color);g.colors=o.length?o.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),a.appendChild(g)}return 1},C=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=b,this.matrix=c.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},D=c.el;C.prototype=D,D.constructor=C,D.transform=function(a){if(null==a)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:n;e&&(d=a=b(a).replace(/\.{3}|\u2026/g,this._.transform||n)),c._extractTransform(this,f+a);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~b(this.attrs.fill).indexOf("-"),l=!b(this.attrs.fill).indexOf("url(");if(h.translate(1,1),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var o=this.getBBox(),p=this.getBBox(1),q=o.x-p.x,r=o.y-p.y;j.coordorigin=q*-t+m+r*-t,y(this,1,1,q,r,0)}else j.style.filter=n,y(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=n,i.matrix=b(h),i.offset=h.offset();return null!==d&&(this._.transform=d,c._extractTransform(this,d)),this},D.rotate=function(a,c,e){if(this.removed)return this;if(null!=a){if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,c,e]])),this}},D.translate=function(a,c){return this.removed?this:(a=b(a).split(k),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=c),this.transform(this._.transform.concat([["t",a,c]])),this)},D.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this._.dirtyT=1,this},D.hide=function(){return!this.removed&&(this.node.style.display="none"),this},D.show=function(){return!this.removed&&(this.node.style.display=n),this},D.auxGetBBox=c.el.getBBox,D.getBBox=function(){var a=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var b={},c=1/this.paper._viewBoxShift.scale;return b.x=a.x-this.paper._viewBoxShift.dx,b.x*=c,b.y=a.y-this.paper._viewBoxShift.dy,b.y*=c,b.width=a.width*c,b.height=a.height*c,b.x2=b.x+b.width,b.y2=b.y+b.height,b}return a},D._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},D.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),c.eve.unbind("raphael.*.*."+this.id),c._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;this.removed=!0}},D.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if(b==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=b.split(k),h={},i=0,m=g.length;m>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&c.is(b,"array")){for(h={},i=0,m=b.length;m>i;i++)h[b[i]]=this.attr(b[i]);return h}var n;null!=d&&(n={},n[b]=d),null==d&&c.is(b,"object")&&(n=b);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[a](o)&&n[a](o)&&c.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[a](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),A(this,n)}return this},D.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&c._tofront(this,this.paper),this},D.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper)),this)},D.insertAfter=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[a.length-1]),a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),this)},D.insertBefore=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[0]),a.node.parentNode.insertBefore(this.node,a.node),c._insertbefore(this,a,this.paper),this)},D.blur=function(a){var b=this.node.runtimeStyle,d=b.filter;return d=d.replace(q,n),0!=+a?(this.attrs.blur=a,b.filter=d+m+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",b.margin=c.format("-{0}px 0 0 -{0}px",f(+a||1.5))):(b.filter=d,b.margin=0,delete this.attrs.blur),this},c._engine.path=function(a,b){var c=E("shape");c.style.cssText=s,c.coordsize=t+m+t,c.coordorigin=b.coordorigin;var d=new C(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=n,A(d,e),b.canvas.appendChild(c);var f=E("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(n),d},c._engine.rect=function(a,b,d,e,f,g){var h=c._rectPath(b,d,e,f,g),i=a.path(h),j=i.attrs;return i.X=j.x=b,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},c._engine.ellipse=function(a,b,c,d,e){var f=a.path();return f.attrs,f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",A(f,{cx:b,cy:c,rx:d,ry:e}),f},c._engine.circle=function(a,b,c,d){var e=a.path();return e.attrs,e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",A(e,{cx:b,cy:c,r:d}),e},c._engine.image=function(a,b,d,e,f,g){var h=c._rectPath(d,e,f,g),i=a.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=b,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=b,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),y(i,1,1,0,0,0),i},c._engine.text=function(a,d,e,g){var h=E("shape"),i=E("path"),j=E("textpath");d=d||0,e=e||0,g=g||"",i.v=c.format("m{0},{1}l{2},{1}",f(d*t),f(e*t),f(d*t)+1),i.textpathok=!0,j.string=b(g),j.on=!0,h.style.cssText=s,h.coordsize=t+m+t,h.coordorigin="0 0";var k=new C(h,a),l={fill:"#000",stroke:"none",font:c._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=b(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,A(k,l),h.appendChild(j),h.appendChild(i),a.canvas.appendChild(h);var o=E("skew");return o.on=!0,h.appendChild(o),k.skew=o,k.transform(n),k},c._engine.setSize=function(a,b){var d=this.canvas.style;return this.width=a,this.height=b,a==+a&&(a+="px"),b==+b&&(b+="px"),d.width=a,d.height=b,d.clip="rect(0 "+a+" "+b+" 0)",this._viewBox&&c._engine.setViewBox.apply(this,this._viewBox),this},c._engine.setViewBox=function(a,b,d,e,f){c.eve("raphael.setViewBox",this,this._viewBox,[a,b,d,e,f]);var g,h,i=this.getSize(),j=i.width,k=i.height;return f&&(g=k/e,h=j/d,j>d*g&&(a-=(j-d*g)/2/g),k>e*h&&(b-=(k-e*h)/2/h)),this._viewBox=[a,b,d,e,!!f],this._viewBoxShift={dx:-a,dy:-b,scale:i},this.forEach(function(a){a.transform("...")}),this};var E;c._engine.initWin=function(a){var b=a.document;b.styleSheets.length<31?b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):b.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),E=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(a){E=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},c._engine.initWin(c._g.win),c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a.container,d=a.height,e=a.width,f=a.x,g=a.y;if(!b)throw new Error("VML container not found.");var h=new c._Paper,i=h.canvas=c._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=216e5+m+216e5,h.coordorigin="0 0",h.span=c._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=c.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==b?(c._g.doc.body.appendChild(i),j.left=f+"px",j.top=g+"px",j.position="absolute"):b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i),h.renderfix=function(){},h},c.prototype.clear=function(){c.eve("raphael.clear",this),this.canvas.innerHTML=n,this.span=c._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},c.prototype.remove=function(){c.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;return!0};var F=c.st;for(var G in D)D[a](G)&&!F[a](G)&&(F[G]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(G))}}(),B.was?A.win.Raphael=c:Raphael=c,"object"==typeof exports&&(module.exports=c),c}),function(){var a,b,c,d,e=[].slice,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};b=window.Morris={},a=jQuery,b.EventEmitter=function(){function a(){}return a.prototype.on=function(a,b){return null==this.handlers&&(this.handlers={}),null==this.handlers[a]&&(this.handlers[a]=[]),this.handlers[a].push(b),this},a.prototype.fire=function(){var a,b,c,d,f,g,h;if(c=arguments[0],a=2<=arguments.length?e.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[c]){for(g=this.handlers[c],h=[],d=0,f=g.length;d<f;d++)b=g[d],h.push(b.apply(null,a));return h}},a}(),b.commas=function(a){var b,c,d,e;return null!=a?(d=a<0?"-":"",b=Math.abs(a),c=Math.floor(b).toFixed(0),d+=c.replace(/(?=(?:\d{3})+$)(?!^)/g,","),e=b.toString(),e.length>c.length&&(d+=e.slice(c.length)),d):"-"},b.pad2=function(a){return(a<10?"0":"")+a},b.Grid=function(c){function d(b){this.hasToShow=f(this.hasToShow,this),this.resizeHandler=f(this.resizeHandler,this);var c=this;if("string"==typeof b.element?this.el=a(document.getElementById(b.element)):this.el=a(b.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=a.extend({},this.gridDefaults,this.defaults||{},b),"string"==typeof this.options.units&&(this.options.postUnits=b.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(a){var b,d,e,f,g;return d=c.el.offset(),g=a.pageX-d.left,c.selectFrom?(b=c.data[c.hitTest(Math.min(g,c.selectFrom))]._x,e=c.data[c.hitTest(Math.max(g,c.selectFrom))]._x,f=e-b,c.selectionRect.attr({x:b,width:f})):c.fire("hovermove",g,a.pageY-d.top)}),this.el.bind("mouseleave",function(a){return c.selectFrom&&(c.selectionRect.hide(),c.selectFrom=null),c.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(a){var b,d;return d=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],b=c.el.offset(),
c.fire("hovermove",d.pageX-b.left,d.pageY-b.top)}),this.el.bind("click",function(a){var b;return b=c.el.offset(),c.fire("gridclick",a.pageX-b.left,a.pageY-b.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(a){var b;return b=c.el.offset(),c.startRange(a.pageX-b.left)}),this.el.bind("mouseup",function(a){var b;return b=c.el.offset(),c.endRange(a.pageX-b.left),c.fire("hovermove",a.pageX-b.left,a.pageY-b.top)})),this.options.resize&&a(window).bind("resize",function(a){return null!=c.timeoutId&&window.clearTimeout(c.timeoutId),c.timeoutId=window.setTimeout(c.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return h(d,c),d.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},d.prototype.setData=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(null==d&&(d=!0),this.options.data=c,null==c||0===c.length)return this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide());s=this.cumulative?0:null,t=this.cumulative?0:null,this.options.goals.length>0&&(k=Math.min.apply(Math,this.options.goals),j=Math.max.apply(Math,this.options.goals),t=null!=t?Math.min(t,k):k,s=null!=s?Math.max(s,j):j),this.data=function(){var a,d,e;for(e=[],i=a=0,d=c.length;a<d;i=++a)m=c[i],l={src:m},l.label=m[this.options.xkey],this.options.parseTime?(l.x=b.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):(l.x=i,this.options.xLabelFormat&&(l.label=this.options.xLabelFormat(l))),p=0,l.y=function(){var a,b,c,d;for(c=this.options.ykeys,d=[],h=a=0,b=c.length;a<b;h=++a)r=c[h],u=m[r],"string"==typeof u&&(u=parseFloat(u)),null!=u&&"number"!=typeof u&&(u=null),null!=u&&this.hasToShow(h)&&(this.cumulative?p+=u:null!=s?(s=Math.max(u,s),t=Math.min(u,t)):s=t=u),this.cumulative&&null!=p&&(s=Math.max(p,s),t=Math.min(p,t)),d.push(u);return d}.call(this),e.push(l);return e}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(a,b){return(a.x>b.x)-(b.x>a.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[];for(var z=!0,A=0;A<this.options.events.length;A++)if(null==this.options.events[A]){z=!1;break}if(this.options.events.length>0&&z){if(this.options.parseTime)for(x=this.options.events,v=0,w=x.length;v<w;v++)e=x[v],e instanceof Array?(g=e[0],o=e[1],this.events.push([b.parseDate(g),b.parseDate(o)])):this.events.push(b.parseDate(e));else this.events=this.options.events;f=a.map(this.events,function(a){return a}),this.xmax=Math.max(this.xmax,Math.max.apply(Math,f)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,f))}return this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",t),this.ymax=this.yboundary("max",s),this.ymin===this.ymax&&(t&&(this.ymin-=1),this.ymax+=1),!0!==(y=this.options.axes)&&"both"!==y&&"y"!==y&&!0!==this.options.grid||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(n=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var a,b,c;for(c=[],q=a=this.ymin,b=this.ymax;n>0?a<=b:a>=b;q=a+=n)c.push(q);return c}.call(this))),this.dirty=!0,d?this.redraw():void 0},d.prototype.yboundary=function(a,b){var c,d;return c=this.options["y"+a],"string"==typeof c?"auto"===c.slice(0,4)?c.length>5?(d=parseInt(c.slice(5),10),null==b?d:Math[a](b,d)):null!=b?b:0:parseInt(c,10):c},d.prototype.autoGridLines=function(a,b,c){var d,e,f,g,h,i,j,k,l;return h=b-a,l=Math.floor(Math.log(h)/Math.log(10)),j=Math.pow(10,l),e=Math.floor(a/j)*j,d=Math.ceil(b/j)*j,i=(d-e)/(c-1),1===j&&i>1&&Math.ceil(i)!==i&&(i=Math.ceil(i),d=e+i*(c-1)),e<0&&d>0&&(e=Math.floor(a/i)*i,d=Math.ceil(b/i)*i),i<1?(g=Math.floor(Math.log(i)/Math.log(10)),f=function(){var a,b;for(b=[],k=a=e;i>0?a<=d:a>=d;k=a+=i)b.push(parseFloat(k.toFixed(1-g)));return b}()):f=function(){var a,b;for(b=[],k=a=e;i>0?a<=d:a>=d;k=a+=i)b.push(k);return b}(),f},d.prototype._calc=function(){var a,b,c,d,e,f,g,h,i;if(f=this.el.width(),d=this.el.height(),(this.elementWidth!==f||this.elementHeight!==d||this.dirty)&&(this.elementWidth=f,this.elementHeight=d,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,!0!==(h=this.options.axes)&&"both"!==h&&"y"!==h||(g=function(){var a,b,d,e;for(d=this.grid,e=[],a=0,b=d.length;a<b;a++)c=d[a],e.push(this.measureText(this.yAxisFormat(c)).width);return e}.call(this),this.options.horizontal?this.bottom-=Math.max.apply(Math,g):this.left+=Math.max.apply(Math,g)),!0!==(i=this.options.axes)&&"both"!==i&&"x"!==i||(a=this.options.horizontal?-90:-this.options.xLabelAngle,b=function(){var b,c,d;for(d=[],e=b=0,c=this.data.length;0<=c?b<c:b>c;e=0<=c?++b:--b)d.push(this.measureText(this.data[e].label,a).height);return d}.call(this),this.options.horizontal?this.left+=Math.max.apply(Math,b):this.bottom-=Math.max.apply(Math,b)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.options.horizontal?(this.dx=this.height/(this.xmax-this.xmin),this.dy=this.width/(this.ymax-this.ymin),this.yStart=this.left,this.yEnd=this.right,this.xStart=this.top,this.xEnd=this.bottom,this.xSize=this.height,this.ySize=this.width):(this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.yStart=this.bottom,this.yEnd=this.top,this.xStart=this.left,this.xEnd=this.right,this.xSize=this.width,this.ySize=this.height),this.calc))return this.calc()},d.prototype.transY=function(a){return this.options.horizontal?this.left+(a-this.ymin)*this.dy:this.bottom-(a-this.ymin)*this.dy},d.prototype.transX=function(a){return 1===this.data.length?(this.xStart+this.xEnd)/2:this.xStart+(a-this.xmin)*this.dx},d.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},d.prototype.measureText=function(a,b){var c,d;return null==b&&(b=0),d=this.raphael.text(100,100,a).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(b),c=d.getBBox(),d.remove(),c},d.prototype.yAxisFormat=function(a){return this.yLabelFormat(a,0)},d.prototype.yLabelFormat=function(a,c){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(a,c):""+this.options.preUnits+b.commas(a)+this.options.postUnits},d.prototype.getYAxisLabelX=function(){return this.left-this.options.padding/2},d.prototype.drawGrid=function(){var a,b,c,d,e,f,g,h,i;if(!1!==this.options.grid||!0===(f=this.options.axes)||"both"===f||"y"===f){for(a=this.options.horizontal?this.getXAxisLabelY():this.getYAxisLabelX(),g=this.grid,i=[],d=0,e=g.length;d<e;d++)b=g[d],c=this.transY(b),!0!==(h=this.options.axes)&&"both"!==h&&"y"!==h||(this.options.horizontal?this.drawXAxisLabel(c,a,this.yAxisFormat(b)):this.drawYAxisLabel(a,c,this.yAxisFormat(b))),this.options.grid?(c=Math.floor(c)+.5,this.options.horizontal?i.push(this.drawGridLine("M"+c+","+this.xStart+"V"+this.xEnd)):i.push(this.drawGridLine("M"+this.xStart+","+c+"H"+this.xEnd))):i.push(void 0);return i}},d.prototype.drawGoals=function(){var a,b,c,d,e,f,g;for(f=this.options.goals,g=[],c=d=0,e=f.length;d<e;c=++d)b=f[c],a=this.options.goalLineColors[c%this.options.goalLineColors.length],g.push(this.drawGoal(b,a));return g},d.prototype.drawEvents=function(){var a,b,c,d,e,f,g;for(f=this.events,g=[],c=d=0,e=f.length;d<e;c=++d)b=f[c],a=this.options.eventLineColors[c%this.options.eventLineColors.length],g.push(this.drawEvent(b,a));return g},d.prototype.drawGoal=function(a,b){var c,d;return d=Math.floor(this.transY(a))+.5,c=this.options.horizontal?"M"+d+","+this.xStart+"V"+this.xEnd:"M"+this.xStart+","+d+"H"+this.xEnd,this.raphael.path(c).attr("stroke",b).attr("stroke-width",this.options.goalStrokeWidth)},d.prototype.drawEvent=function(a,b){var c,d,e,f;return a instanceof Array?(c=a[0],e=a[1],c=Math.floor(this.transX(c))+.5,e=Math.floor(this.transX(e))+.5,this.options.horizontal?this.raphael.rect(this.yStart,c,this.yEnd-this.yStart,e-c).attr({fill:b,stroke:!1}).toBack():this.raphael.rect(c,this.yEnd,e-c,this.yStart-this.yEnd).attr({fill:b,stroke:!1}).toBack()):(f=Math.floor(this.transX(a))+.5,d=this.options.horizontal?"M"+this.yStart+","+f+"H"+this.yEnd:"M"+f+","+this.yStart+"V"+this.yEnd,this.raphael.path(d).attr("stroke",b).attr("stroke-width",this.options.eventStrokeWidth))},d.prototype.drawYAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},d.prototype.drawGridLine=function(a){return this.raphael.path(a).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},d.prototype.startRange=function(a){return this.hover.hide(),this.selectFrom=a,this.selectionRect.attr({x:a,width:0}).show()},d.prototype.endRange=function(a){var b,c;if(this.selectFrom)return c=Math.min(this.selectFrom,a),b=Math.max(this.selectFrom,a),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(c)].x,end:this.data[this.hitTest(b)].x}),this.selectFrom=null},d.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},d.prototype.hasToShow=function(a){return!0===this.options.shown||!0===this.options.shown[a]},d}(b.EventEmitter),b.parseDate=function(a){var b,c,d,e,f,g,h,i,j,k,l;return"number"==typeof a?a:(c=a.match(/^(\d+) Q(\d)$/),e=a.match(/^(\d+)-(\d+)$/),f=a.match(/^(\d+)-(\d+)-(\d+)$/),h=a.match(/^(\d+) W(\d+)$/),i=a.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),j=a.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),c?new Date(parseInt(c[1],10),3*parseInt(c[2],10)-1,1).getTime():e?new Date(parseInt(e[1],10),parseInt(e[2],10)-1,1).getTime():f?new Date(parseInt(f[1],10),parseInt(f[2],10)-1,parseInt(f[3],10)).getTime():h?(k=new Date(parseInt(h[1],10),0,1),4!==k.getDay()&&k.setMonth(0,1+(4-k.getDay()+7)%7),k.getTime()+6048e5*parseInt(h[2],10)):i?i[6]?(g=0,"Z"!==i[6]&&(g=60*parseInt(i[8],10)+parseInt(i[9],10),"+"===i[7]&&(g=0-g)),Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)+g)):new Date(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)).getTime():j?(l=parseFloat(j[6]),b=Math.floor(l),d=Math.round(1e3*(l-b)),j[8]?(g=0,"Z"!==j[8]&&(g=60*parseInt(j[10],10)+parseInt(j[11],10),"+"===j[9]&&(g=0-g)),Date.UTC(parseInt(j[1],10),parseInt(j[2],10)-1,parseInt(j[3],10),parseInt(j[4],10),parseInt(j[5],10)+g,b,d)):new Date(parseInt(j[1],10),parseInt(j[2],10)-1,parseInt(j[3],10),parseInt(j[4],10),parseInt(j[5],10),b,d).getTime()):new Date(parseInt(a,10),0,1).getTime())},b.Hover=function(){function c(c){null==c&&(c={}),this.options=a.extend({},b.Hover.defaults,c),this.el=a("<div class='"+this.options.class+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return c.defaults={class:"morris-hover morris-default-style"},c.prototype.update=function(a,b,c,d){return a?(this.html(a),this.show(),this.moveTo(b,c,d)):this.hide()},c.prototype.html=function(a){return this.el.html(a)},c.prototype.moveTo=function(a,b,c){var d,e,f,g,h,i;return h=this.options.parent.innerWidth(),g=this.options.parent.innerHeight(),e=this.el.outerWidth(),d=this.el.outerHeight(),f=Math.min(Math.max(0,a-e/2),h-e),null!=b?!0===c?(i=b-d/2)<0&&(i=0):(i=b-d-10)<0&&(i=b+10)+d>g&&(i=g/2-d/2):i=g/2-d/2,this.el.css({left:f+"px",top:parseInt(i)+"px"})},c.prototype.show=function(){return this.el.show()},c.prototype.hide=function(){return this.el.hide()},c}(),b.Line=function(c){function d(a){if(this.hilight=f(this.hilight,this),this.onHoverOut=f(this.onHoverOut,this),this.onHoverMove=f(this.onHoverMove,this),this.onGridClick=f(this.onGridClick,this),!(this instanceof b.Line))return new b.Line(a);d.__super__.constructor.call(this,a)}return h(d,c),d.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new b.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},d.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,shown:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1,trendLine:!1,trendLineWidth:2,trendLineColors:["#689bc3","#a2b3bf","#64b764"]},d.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},d.prototype.calcPoints=function(){var a,b,c,d,e,f;for(e=this.data,f=[],c=0,d=e.length;c<d;c++)a=e[c],a._x=this.transX(a.x),a._y=function(){var c,d,e,f;for(e=a.y,f=[],c=0,d=e.length;c<d;c++)b=e[c],null!=b?f.push(this.transY(b)):f.push(b);return f}.call(this),f.push(a._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var c,d,e,f;for(e=a._y,f=[],c=0,d=e.length;c<d;c++)null!=(b=e[c])&&f.push(b);return f}())));return f},d.prototype.hitTest=function(a){var b,c,d,e,f;if(0===this.data.length)return null;for(f=this.data.slice(1),b=d=0,e=f.length;d<e&&(c=f[b],!(a<(c._x+this.data[b]._x)/2));b=++d);return b},d.prototype.onGridClick=function(a,b){var c;return c=this.hitTest(a),this.fire("click",c,this.data[c].src,a,b)},d.prototype.onHoverMove=function(a,b){var c;return c=this.hitTest(a),this.displayHoverForRow(c)},d.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.displayHoverForRow(null)},d.prototype.displayHoverForRow=function(a){var b;return null!=a?((b=this.hover).update.apply(b,this.hoverContentForRow(a)),this.hilight(a)):(this.hover.hide(),this.hilight())},d.prototype.hoverContentForRow=function(b){var c,d,e,f,g;for(e=this.data[b],c=a("<div class='morris-hover-row-label'>").text(e.label),c=c.prop("outerHTML"),g=e.y,d=g.length-1;d>=0;d--)f=g[d],!1!==this.options.labels[d]&&(c+="<div class='morris-hover-point' style='color: "+this.colorFor(e,d,"label")+"'>\n  "+this.options.labels[d]+":\n  "+this.yLabelFormat(f,d)+"\n</div>");return"function"==typeof this.options.hoverCallback&&(c=this.options.hoverCallback(b,this.options,c,e.src)),[c,e._x,e._ymax]},d.prototype.generatePaths=function(){var a,c,d,e;return this.paths=function(){var f,g,h,j;for(j=[],c=f=0,g=this.options.ykeys.length;0<=g?f<g:f>g;c=0<=g?++f:--f)e="boolean"==typeof this.options.smooth?this.options.smooth:(h=this.options.ykeys[c],i.call(this.options.smooth,h)>=0),a=function(){var a,b,e,f;for(e=this.data,f=[],a=0,b=e.length;a<b;a++)d=e[a],void 0!==d._y[c]&&f.push({x:d._x,y:d._y[c]});return f}.call(this),a.length>1?j.push(b.Line.createPath(a,e,this.bottom)):j.push(null);return j}.call(this)},d.prototype.draw=function(){var a;if(!0!==(a=this.options.axes)&&"both"!==a&&"x"!==a||this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)},d.prototype.drawXAxis=function(){var a,c,d,e,f,g,h,i,j,k,l=this;for(h=this.bottom+this.options.padding/2,f=null,e=null,a=function(a,b){var c,d,g,i,j;return c=l.drawXAxisLabel(l.transX(b),h,a),j=c.getBBox(),c.transform("r"+-l.options.xLabelAngle),d=c.getBBox(),c.transform("t0,"+d.height/2+"..."),0!==l.options.xLabelAngle&&(i=-.5*j.width*Math.cos(l.options.xLabelAngle*Math.PI/180),c.transform("t"+i+",0...")),d=c.getBBox(),(null==f||f>=d.x+d.width||null!=e&&e>=d.x)&&d.x>=0&&d.x+d.width<l.el.width()?(0!==l.options.xLabelAngle&&(g=1.25*l.options.gridTextSize/Math.sin(l.options.xLabelAngle*Math.PI/180),e=d.x-g),f=d.x-l.options.xLabelMargin):c.remove()},d=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:b.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var a,b,c,d;for(c=this.data,d=[],a=0,b=c.length;a<b;a++)g=c[a],d.push([g.label,g.x]);return d}.call(this),d.reverse(),k=[],i=0,j=d.length;i<j;i++)c=d[i],k.push(a(c[0],c[1]));return k},d.prototype.drawSeries=function(){var a,b,c,d,e,f;for(this.seriesPoints=[],a=b=d=this.options.ykeys.length-1;d<=0?b<=0:b>=0;a=d<=0?++b:--b)this.hasToShow(a)&&((!1!==this.options.trendLine&&!0===this.options.trendLine||!0===this.options.trendLine[a])&&this._drawTrendLine(a),this._drawLineFor(a));for(f=[],a=c=e=this.options.ykeys.length-1;e<=0?c<=0:c>=0;a=e<=0?++c:--c)this.hasToShow(a)?f.push(this._drawPointFor(a)):f.push(void 0);return f},d.prototype._drawPointFor=function(a){var b,c,d,e,f,g;for(this.seriesPoints[a]=[],f=this.data,g=[],d=0,e=f.length;d<e;d++)c=f[d],b=null,null!=c._y[a]&&(b=this.drawLinePoint(c._x,c._y[a],this.colorFor(c,a,"point"),a)),g.push(this.seriesPoints[a].push(b));return g},d.prototype._drawLineFor=function(a){var b;if(null!==(b=this.paths[a]))return this.drawLinePath(b,this.colorFor(null,a,"line"),a)},d.prototype._drawTrendLine=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(h=0,k=0,i=0,j=0,f=0,q=this.data,o=0,p=q.length;o<p;o++)l=q[o],m=l.x,void 0!==(n=l.y[a])&&(f+=1,h+=m,k+=n,i+=m*m,j+=m*n);return c=(f*j-h*k)/(f*i-h*h),d=k/f-c*h/f,e=[{},{}],e[0].x=this.transX(this.data[0].x),e[0].y=this.transY(this.data[0].x*c+d),e[1].x=this.transX(this.data[this.data.length-1].x),e[1].y=this.transY(this.data[this.data.length-1].x*c+d),g=b.Line.createPath(e,!1,this.bottom),g=this.raphael.path(g).attr("stroke",this.colorFor(null,a,"trendLine")).attr("stroke-width",this.options.trendLineWidth)},d.createPath=function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(k="",c&&(g=b.Line.gradients(a)),l={y:null},h=q=0,r=a.length;q<r;h=++q)e=a[h],null!=e.y&&(null!=l.y?c?(f=g[h],j=g[h-1],i=(e.x-l.x)/4,m=l.x+i,o=Math.min(d,l.y+i*j),n=e.x-i,p=Math.min(d,e.y-i*f),k+="C"+m+","+o+","+n+","+p+","+e.x+","+e.y):k+="L"+e.x+","+e.y:c&&null==g[h]||(k+="M"+e.x+","+e.y)),l=e;return k},d.gradients=function(a){var b,c,d,e,f,g,h,i;for(c=function(a,b){return(a.y-b.y)/(a.x-b.x)},i=[],d=g=0,h=a.length;g<h;d=++g)b=a[d],null!=b.y?(e=a[d+1]||{y:null},f=a[d-1]||{y:null},null!=f.y&&null!=e.y?i.push(c(f,e)):null!=f.y?i.push(c(f,b)):null!=e.y?i.push(c(b,e)):i.push(null)):i.push(null);return i},d.prototype.hilight=function(a){var b,c,d,e,f;if(null!==this.prevHilight&&this.prevHilight!==a)for(b=c=0,e=this.seriesPoints.length-1;0<=e?c<=e:c>=e;b=0<=e?++c:--c)this.seriesPoints[b][this.prevHilight]&&this.seriesPoints[b][this.prevHilight].animate(this.pointShrinkSeries(b));if(null!==a&&this.prevHilight!==a)for(b=d=0,f=this.seriesPoints.length-1;0<=f?d<=f:d>=f;b=0<=f?++d:--d)this.seriesPoints[b][a]&&this.seriesPoints[b][a].animate(this.pointGrowSeries(b));return this.prevHilight=a},d.prototype.colorFor=function(a,b,c){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,a,b,c):"point"===c?this.options.pointFillColors[b%this.options.pointFillColors.length]||this.options.lineColors[b%this.options.lineColors.length]:"line"===c||"label"===c?this.options.lineColors[b%this.options.lineColors.length]:this.options.trendLineColors[b%this.options.trendLineColors.length]},d.prototype.drawXAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},d.prototype.drawLinePath=function(a,b,c){return this.raphael.path(a).attr("stroke",b).attr("stroke-width",this.lineWidthForSeries(c))},d.prototype.drawLinePoint=function(a,b,c,d){return this.raphael.circle(a,b,this.pointSizeForSeries(d)).attr("fill",c).attr("stroke-width",this.pointStrokeWidthForSeries(d)).attr("stroke",this.pointStrokeColorForSeries(d))},d.prototype.pointStrokeWidthForSeries=function(a){return this.options.pointStrokeWidths[a%this.options.pointStrokeWidths.length]},d.prototype.pointStrokeColorForSeries=function(a){return this.options.pointStrokeColors[a%this.options.pointStrokeColors.length]},d.prototype.lineWidthForSeries=function(a){return this.options.lineWidth instanceof Array?this.options.lineWidth[a%this.options.lineWidth.length]:this.options.lineWidth},d.prototype.pointSizeForSeries=function(a){return this.options.pointSize instanceof Array?this.options.pointSize[a%this.options.pointSize.length]:this.options.pointSize},d.prototype.pointGrowSeries=function(a){if(0!==this.pointSizeForSeries(a))return Raphael.animation({r:this.pointSizeForSeries(a)+3},25,"linear")},d.prototype.pointShrinkSeries=function(a){return Raphael.animation({r:this.pointSizeForSeries(a)},25,"linear")},d}(b.Grid),b.labelSeries=function(c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;if(j=200*(d-c)/e,i=new Date(c),void 0===(n=b.LABEL_SPECS[f]))for(r=b.AUTO_LABEL_ORDER,p=0,q=r.length;p<q;p++)if(k=r[p],m=b.LABEL_SPECS[k],j>=m.span){n=m;break}for(void 0===n&&(n=b.LABEL_SPECS.second),g&&(n=a.extend({},n,{fmt:g})),h=n.start(i),l=[];(o=h.getTime())<=d;)o>=c&&l.push([n.fmt(h),o]),n.incr(h);return l},c=function(a){return{span:60*a*1e3,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours())},fmt:function(a){return b.pad2(a.getHours())+":"+b.pad2(a.getMinutes())},incr:function(b){return b.setUTCMinutes(b.getUTCMinutes()+a)}}},d=function(a){return{span:1e3*a,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes())},fmt:function(a){return b.pad2(a.getHours())+":"+b.pad2(a.getMinutes())+":"+b.pad2(a.getSeconds())},incr:function(b){return b.setUTCSeconds(b.getUTCSeconds()+a)}}},b.LABEL_SPECS={decade:{span:1728e8,start:function(a){return new Date(a.getFullYear()-a.getFullYear()%10,0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+10)}},year:{span:1728e7,start:function(a){return new Date(a.getFullYear(),0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+1)}},month:{span:24192e5,start:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},fmt:function(a){return a.getFullYear()+"-"+b.pad2(a.getMonth()+1)},incr:function(a){return a.setMonth(a.getMonth()+1)}},week:{span:6048e5,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},fmt:function(a){return a.getFullYear()+"-"+b.pad2(a.getMonth()+1)+"-"+b.pad2(a.getDate())},incr:function(a){return a.setDate(a.getDate()+7)}},day:{span:864e5,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},fmt:function(a){return a.getFullYear()+"-"+b.pad2(a.getMonth()+1)+"-"+b.pad2(a.getDate())},incr:function(a){return a.setDate(a.getDate()+1)}},hour:c(60),"30min":c(30),"15min":c(15),"10min":c(10),"5min":c(5),minute:c(1),"30sec":d(30),"15sec":d(15),"10sec":d(10),"5sec":d(5),second:d(1)},b.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],b.Area=function(c){function d(c){var f;if(!(this instanceof b.Area))return new b.Area(c);f=a.extend({},e,c),this.cumulative=!f.behaveLikeLine,"auto"===f.fillOpacity&&(f.fillOpacity=f.behaveLikeLine?.8:1),d.__super__.constructor.call(this,f)}var e;return h(d,c),e={fillOpacity:"auto",behaveLikeLine:!1},d.prototype.calcPoints=function(){var a,b,c,d,e,f,g;for(f=this.data,g=[],d=0,e=f.length;d<e;d++)a=f[d],a._x=this.transX(a.x),b=0,a._y=function(){var d,e,f,g;for(f=a.y,g=[],d=0,e=f.length;d<e;d++)c=f[d],this.options.behaveLikeLine?g.push(this.transY(c)):(b+=c||0,g.push(this.transY(b)));return g}.call(this),g.push(a._ymax=Math.max.apply(Math,a._y));return g},d.prototype.drawSeries=function(){var a,b,c,d,e,f,g,h;for(this.seriesPoints=[],b=this.options.behaveLikeLine?function(){f=[];for(var a=0,b=this.options.ykeys.length-1;0<=b?a<=b:a>=b;0<=b?a++:a--)f.push(a);return f}.apply(this):function(){g=[];for(var a=e=this.options.ykeys.length-1;e<=0?a<=0:a>=0;e<=0?a++:a--)g.push(a);return g}.apply(this),h=[],c=0,d=b.length;c<d;c++)a=b[c],this._drawFillFor(a),this._drawLineFor(a),h.push(this._drawPointFor(a));return h},d.prototype._drawFillFor=function(a){var b;if(null!==(b=this.paths[a]))return b=b+"L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(b,this.fillForSeries(a))},d.prototype.fillForSeries=function(a){var b;return b=Raphael.rgb2hsl(this.colorFor(this.data[a],a,"line")),Raphael.hsl(b.h,this.options.behaveLikeLine?.9*b.s:.75*b.s,Math.min(.98,this.options.behaveLikeLine?1.2*b.l:1.25*b.l))},d.prototype.drawFilledPath=function(a,b){return this.raphael.path(a).attr("fill",b).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},d}(b.Line),b.Bar=function(c){function d(c){if(this.onHoverOut=f(this.onHoverOut,this),this.onHoverMove=f(this.onHoverMove,this),this.onGridClick=f(this.onGridClick,this),!(this instanceof b.Bar))return new b.Bar(c);d.__super__.constructor.call(this,a.extend({},c,{parseTime:!1}))}return h(d,c),d.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new b.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},d.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50,horizontal:!1,shown:!0},d.prototype.calc=function(){var a;if(this.calcBars(),!1===this.options.hideHover)return(a=this.hover).update.apply(a,this.hoverContentForRow(this.data.length-1))},d.prototype.calcBars=function(){var a,b,c,d,e,f,g;for(f=this.data,g=[],a=d=0,e=f.length;d<e;a=++d)b=f[a],b._x=this.xStart+this.xSize*(a+.5)/this.data.length,g.push(b._y=function(){var a,d,e,f;for(e=b.y,f=[],a=0,d=e.length;a<d;a++)c=e[a],null!=c?f.push(this.transY(c)):f.push(null);return f}.call(this));return g},d.prototype.draw=function(){var a;return!0!==(a=this.options.axes)&&"both"!==a&&"x"!==a||this.drawXAxis(),this.drawSeries()},d.prototype.drawXAxis=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(b=this.options.horizontal?this.getYAxisLabelX():this.getXAxisLabelY(),j=null,i=null,q=[],c=o=0,p=this.data.length;0<=p?o<p:o>p;c=0<=p?++o:--o)k=this.data[this.data.length-1-c],d=this.options.horizontal?this.drawYAxisLabel(b,k._x-.5*this.options.gridTextSize,k.label):this.drawXAxisLabel(k._x,b,k.label),a=this.options.horizontal?0:this.options.xLabelAngle,n=d.getBBox(),d.transform("r"+-a),e=d.getBBox(),d.transform("t0,"+e.height/2+"..."),0!==a&&(h=-.5*n.width*Math.cos(a*Math.PI/180),d.transform("t"+h+",0...")),this.options.horizontal?(m=e.y,l=e.height,g=this.el.height()):(m=e.x,l=e.width,g=this.el.width()),(null==j||j>=m+l||null!=i&&i>=m)&&m>=0&&m+l<g?(0!==a&&(f=1.25*this.options.gridTextSize/Math.sin(a*Math.PI/180),i=m-f),this.options.horizontal?q.push(j=m):q.push(j=m-this.options.xLabelMargin)):q.push(d.remove());return q},d.prototype.getXAxisLabelY=function(){return this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2)},d.prototype.drawSeries=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(c=this.xSize/this.options.data.length,this.options.stacked)i=1;else for(i=0,d=q=0,r=this.options.ykeys.length-1;0<=r?q<=r:q>=r;d=0<=r?++q:--q)this.hasToShow(d)&&(i+=1);return a=(c*this.options.barSizeRatio-this.options.barGap*(i-1))/i,this.options.barSize&&(a=Math.min(a,this.options.barSize)),m=c-a*i-this.options.barGap*(i-1),h=m/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var d,i,m,q;for(m=this.data,q=[],e=d=0,i=m.length;d<i;e=++d)j=m[e],f=0,q.push(function(){var d,i,m,q;for(m=j._y,q=[],k=d=0,i=m.length;d<i;k=++d)o=m[k],this.hasToShow(k)&&(null!==o?(p?(n=Math.min(o,p),b=Math.max(o,p)):(n=o,b=this.bottom),g=this.xStart+e*c+h,this.options.stacked||(g+=k*(a+this.options.barGap)),l=b-n,this.options.verticalGridCondition&&this.options.verticalGridCondition(j.x)&&(this.options.horizontal?this.drawBar(this.yStart,this.xStart+e*c,this.ySize,c,this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius):this.drawBar(this.xStart+e*c,this.yEnd,c,this.ySize,this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius)),this.options.stacked&&(n-=f),this.options.horizontal?(this.drawBar(n,g,l,a,this.colorFor(j,k,"bar"),this.options.barOpacity,this.options.barRadius),q.push(f-=l)):(this.drawBar(g,n,a,l,this.colorFor(j,k,"bar"),this.options.barOpacity,this.options.barRadius),q.push(f+=l))):q.push(null));return q}.call(this));return q}.call(this)},d.prototype.colorFor=function(a,b,c){var d,e;return"function"==typeof this.options.barColors?(d={x:a.x,y:a.y[b],label:a.label},e={index:b,key:this.options.ykeys[b],label:this.options.labels[b]},this.options.barColors.call(this,d,e,c)):this.options.barColors[b%this.options.barColors.length]},d.prototype.hitTest=function(a,b){var c;return 0===this.data.length?null:(c=this.options.horizontal?b:a,c=Math.max(Math.min(c,this.xEnd),this.xStart),Math.min(this.data.length-1,Math.floor((c-this.xStart)/(this.xSize/this.data.length))))},d.prototype.onGridClick=function(a,b){var c;return c=this.hitTest(a,b),this.fire("click",c,this.data[c].src,a,b)},d.prototype.onHoverMove=function(a,b){var c,d;return c=this.hitTest(a,b),(d=this.hover).update.apply(d,this.hoverContentForRow(c))},d.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.hover.hide()},d.prototype.hoverContentForRow=function(b){var c,d,e,f,g,h;for(e=this.data[b],c=a("<div class='morris-hover-row-label'>").text(e.label),c=c.prop("outerHTML"),h=e.y,d=h.length-1;d>=0;d--)g=h[d],!1!==this.options.labels[d]&&(c+="<div class='morris-hover-point' style='color: "+this.colorFor(e,d,"label")+"'>\n  "+this.options.labels[d]+":\n  "+this.yLabelFormat(g,d)+"\n</div>");return"function"==typeof this.options.hoverCallback&&(c=this.options.hoverCallback(b,this.options,c,e.src)),this.options.horizontal?(f=this.left+.5*this.width,g=this.top+(b+.5)*this.height/this.data.length,[c,f,g,!0]):(f=this.left+(b+.5)*this.width/this.data.length,[c,f])},d.prototype.drawXAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},d.prototype.drawBar=function(a,b,c,d,e,f,g){var h,i;return h=Math.max.apply(Math,g),i=0===h||h>d?this.raphael.rect(a,b,c,d):this.raphael.path(this.roundedRect(a,b,c,d,g)),i.attr("fill",e).attr("fill-opacity",f).attr("stroke","none")},d.prototype.roundedRect=function(a,b,c,d,e){return null==e&&(e=[0,0,0,0]),["M",a,e[0]+b,"Q",a,b,a+e[0],b,"L",a+c-e[1],b,"Q",a+c,b,a+c,b+e[1],"L",a+c,b+d-e[2],"Q",a+c,b+d,a+c-e[2],b+d,"L",a+e[3],b+d,"Q",a,b+d,a,b+d-e[3],"Z"]},d}(b.Grid),b.Donut=function(c){function d(c){this.resizeHandler=f(this.resizeHandler,this),this.select=f(this.select,this),this.click=f(this.click,this);var d=this;if(!(this instanceof b.Donut))return new b.Donut(c);if(this.options=a.extend({},this.defaults,c),"string"==typeof c.element?this.el=a(document.getElementById(c.element)):this.el=a(c.element),
null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==c.data&&0!==c.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&a(window).bind("resize",function(a){return null!=d.timeoutId&&window.clearTimeout(d.timeoutId),d.timeoutId=window.setTimeout(d.resizeHandler,100)}),this.setData(c.data))}return h(d,c),d.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:b.commas,resize:!1},d.prototype.redraw=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(this.raphael.clear(),c=this.el.width()/2,d=this.el.height()/2,n=(Math.min(c,d)-10)/3,l=0,u=this.values,o=0,r=u.length;o<r;o++)m=u[o],l+=m;for(i=5/(2*n),a=1.9999*Math.PI-i*this.data.length,g=0,f=0,this.segments=[],v=this.values,e=p=0,s=v.length;p<s;e=++p)m=v[e],j=g+i+a*(m/l),k=new b.DonutSegment(c,d,2*n,n,g,j,this.data[e].color||this.options.colors[f%this.options.colors.length],this.options.backgroundColor,f,this.raphael),k.render(),this.segments.push(k),k.on("hover",this.select),k.on("click",this.click),g=j,f+=1;for(this.text1=this.drawEmptyDonutLabel(c,d-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(c,d+10,this.options.labelColor,14),h=Math.max.apply(Math,this.values),f=0,w=this.values,x=[],q=0,t=w.length;q<t;q++){if((m=w[q])===h){this.select(f);break}x.push(f+=1)}return x},d.prototype.setData=function(a){var b;return this.data=a,this.values=function(){var a,c,d,e;for(d=this.data,e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(parseFloat(b.value));return e}.call(this),this.redraw()},d.prototype.click=function(a){return this.fire("click",a,this.data[a])},d.prototype.select=function(a){var b,c,d,e,f,g;for(g=this.segments,e=0,f=g.length;e<f;e++)c=g[e],c.deselect();return d=this.segments[a],d.select(),b=this.data[a],this.setLabels(b.label,this.options.formatter(b.value,b))},d.prototype.setLabels=function(a,b){var c,d,e,f,g,h,i,j;return c=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,f=1.8*c,e=c/2,d=c/3,this.text1.attr({text:a,transform:""}),g=this.text1.getBBox(),h=Math.min(f/g.width,e/g.height),this.text1.attr({transform:"S"+h+","+h+","+(g.x+g.width/2)+","+(g.y+g.height)}),this.text2.attr({text:b,transform:""}),i=this.text2.getBBox(),j=Math.min(f/i.width,d/i.height),this.text2.attr({transform:"S"+j+","+j+","+(i.x+i.width/2)+","+i.y})},d.prototype.drawEmptyDonutLabel=function(a,b,c,d,e){var f;return f=this.raphael.text(a,b,"").attr("font-size",d).attr("fill",c),null!=e&&f.attr("font-weight",e),f},d.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},d}(b.EventEmitter),b.DonutSegment=function(a){function b(a,b,c,d,e,g,h,i,j,k){this.cx=a,this.cy=b,this.inner=c,this.outer=d,this.color=h,this.backgroundColor=i,this.index=j,this.raphael=k,this.deselect=f(this.deselect,this),this.select=f(this.select,this),this.sin_p0=Math.sin(e),this.cos_p0=Math.cos(e),this.sin_p1=Math.sin(g),this.cos_p1=Math.cos(g),this.is_long=g-e>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return h(b,a),b.prototype.calcArcPoints=function(a){return[this.cx+a*this.sin_p0,this.cy+a*this.cos_p0,this.cx+a*this.sin_p1,this.cy+a*this.cos_p1]},b.prototype.calcSegment=function(a,b){var c,d,e,f,g,h,i,j,k,l;return k=this.calcArcPoints(a),c=k[0],e=k[1],d=k[2],f=k[3],l=this.calcArcPoints(b),g=l[0],i=l[1],h=l[2],j=l[3],"M"+c+","+e+"A"+a+","+a+",0,"+this.is_long+",0,"+d+","+f+"L"+h+","+j+"A"+b+","+b+",0,"+this.is_long+",1,"+g+","+i+"Z"},b.prototype.calcArc=function(a){var b,c,d,e,f;return f=this.calcArcPoints(a),b=f[0],d=f[1],c=f[2],e=f[3],"M"+b+","+d+"A"+a+","+a+",0,"+this.is_long+",0,"+c+","+e},b.prototype.render=function(){var a=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return a.fire("hover",a.index)},function(){return a.fire("click",a.index)})},b.prototype.drawDonutArc=function(a,b){return this.raphael.path(a).attr({stroke:b,"stroke-width":2,opacity:0})},b.prototype.drawDonutSegment=function(a,b,c,d,e){return this.raphael.path(a).attr({fill:b,stroke:c,"stroke-width":3}).hover(d).click(e)},b.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},b.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},b}(b.EventEmitter)}.call(this),function(){"use strict";angular.module("angular.morris",[])}(),function(){"use strict";angular.module("angular.morris").factory("angularMorris",["$injector",function(a){var b={keyToAttr:function(a,b){return a+b.substring(0,1).toUpperCase()+b.substring(1)},populateScopeDefinition:function(a,c,d,e){return angular.forEach(d,function(d){a[b.keyToAttr(c,d)]=d===e?"@":"="}),a},populateOptions:function(a,c,d,e){return angular.forEach(c,function(c){var f=b.keyToAttr(d,c);if(e.hasOwnProperty(f)&&void 0!==e[f])if("string"==typeof e[f]&&"formatter"!=f)try{a[c]=JSON.parse(e[f])}catch(b){a[c]=e[f]}else a[c]=e[f]}),a},processFilterOptions:function(b,c){angular.forEach(b,function(b){if("string"==typeof c[b]&&a.has(c[b]+"Filter")){var d=a.get(c[b]+"Filter");c[b]=function(a){return d.call(this,a)}}})}};return b}])}(),function(){angular.module("angular.morris").directive("areaChart",["angularMorris",function(a){var b=["data","xkey","ykeys","labels","lineColors","lineWidth","pointSize","pointFillColors","pointStrokeColors","ymax","ymin","smooth","hideHover","hoverCallback","parseTime","units","postUnits","preUnits","dateFormat","xLabels","xLabelFormat","xLabelAngle","yLabelFormat","goals","goalStrokeWidth","goalLineColors","events","eventStrokeWidth","eventLineColors","continuousLine","axes","grid","gridTextColor","gridTextSize","gridTextFamily","gridTextWeight","fillOpacity","resize","behaveLikeLine"];return{restrict:"A",scope:a.populateScopeDefinition({lineColors:"="},"area",b,"xkey"),link:function(c,d){c.$watchCollection("areaData",function(e,f){if(c.areaData)if("string"==typeof c.areaData&&(c.areaData=JSON.parse(c.areaData)),"string"==typeof c.areaYkeys&&(c.areaYkeys=JSON.parse(c.areaYkeys)),"string"==typeof c.areaLabels&&(c.areaLabels=JSON.parse(c.areaLabels)),"string"==typeof c.lineColors&&(c.lineColors=JSON.parse(c.lineColors)),c.areaInstance)c.areaInstance.setData(c.areaData);else{var g=a.populateOptions({element:d,lineColors:c.lineColors||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"]},b,"area",c);a.processFilterOptions(["dateFormat","xLabelFormat","yLabelFormat"],g),c.areaInstance=new Morris.Area(g)}},!0)}}}])}(),function(){angular.module("angular.morris").directive("barChart",["angularMorris",function(a){var b=["data","xkey","ykeys","labels","barColors","stacked","hideHover","hoverCallback","axes","grid","gridTextColor","gridTextSize","gridTextFamily","gridTextWeight","resize","ymax","ymin","goals","goalStrokeWidth","goalLineColors","yLabelAlign","parseTime","postUnits","preUnits","xLabelAngle","yLabelFormat","events","eventStrokeWidth","eventLineColors"];return{restrict:"A",scope:a.populateScopeDefinition({barColors:"=",barX:"@",barY:"="},"bar",b),link:function(c,d){c.$watchCollection("barData",function(e,f){if(c.barData)if("string"==typeof c.barY&&(c.barY=JSON.parse(c.barY)),"string"==typeof c.barLabels&&(c.barLabels=JSON.parse(c.barLabels)),"string"==typeof c.barData&&(c.barData=JSON.parse(c.barData)),"string"==typeof c.barColors&&(c.barColors=JSON.parse(c.barColors)),"string"==typeof c.barStacked&&(c.barStacked=JSON.parse(c.barStacked)),c.barInstance)c.barInstance.setData(c.barData);else{var g=a.populateOptions({element:d,barColors:c.barColors||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],xkey:c.barX,ykeys:c.barY,xLabelMargin:2},b,"bar",c);c.barInstance=new Morris.Bar(g)}},!0)}}}])}(),function(){angular.module("angular.morris").directive("donutChart",["angularMorris",function(a){var b=["data","colors","formatter","resize","backgroundColor","labelColor"];return{restrict:"A",scope:a.populateScopeDefinition({},"donut",b),link:function(c,d){c.$watch("donutData",function(){if(c.donutData)if("string"==typeof c.donutData&&(c.donutData=JSON.parse(c.donutData)),"string"==typeof c.donutColors&&(c.donutColors=JSON.parse(c.donutColors)),c.donutInstance)c.donutInstance.setData(c.donutData);else{var e=a.populateOptions({element:d,colors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"]},b,"donut",c);a.processFilterOptions(["formatter"],e),c.donutInstance=new Morris.Donut(e)}})}}}])}(),function(){angular.module("angular.morris").directive("lineChart",["angularMorris",function(a){var b=["data","xkey","ykeys","labels","lineColors","lineWidth","pointSize","pointFillColors","pointStrokeColors","ymax","ymin","smooth","hideHover","hoverCallback","parseTime","units","postUnits","preUnits","dateFormat","xLabels","xLabelFormat","xLabelAngle","yLabelFormat","goals","goalStrokeWidth","goalLineColors","events","eventStrokeWidth","eventLineColors","continuousLine","axes","grid","gridTextColor","gridTextSize","gridTextFamily","gridTextWeight","fillOpacity","resize"];return{restrict:"A",scope:a.populateScopeDefinition({lineColors:"=",parseTime:"="},"line",b,"xkey"),link:function(c,d){c.$watch("lineData",function(){if(c.lineData)if("string"==typeof c.lineData&&(c.lineData=JSON.parse(c.lineData)),"string"==typeof c.lineLabels&&(c.lineLabels=JSON.parse(c.lineLabels)),"string"==typeof c.lineColors&&(c.lineColors=JSON.parse(c.lineColors)),"boolean"==typeof c.parseTime&&(c.parseTime=JSON.parse(c.parseTime)),c.lineInstance)c.lineInstance.setData(c.lineData);else{var e=a.populateOptions({element:d,lineColors:c.lineColors||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],parseTime:c.parseTime},b,"line",c);a.processFilterOptions(["dateFormat","xLabelFormat","yLabelFormat"],e),c.lineInstance=new Morris.Line(e)}})}}}])}(),JustGage=function(a){var b=this;if(null===a||void 0===a)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;var c;if(null!==a.id&&void 0!==a.id){if(!(c=document.getElementById(a.id)))return console.log("* justgage: No element with id : %s found",a.id),!1}else{if(null===a.parentNode||void 0===a.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;c=a.parentNode}var d=c.dataset?c.dataset:{},e=null!==a.defaults&&void 0!==a.defaults&&a.defaults;!1!==e&&(a=extend({},a,e),delete a.defaults),b.config={id:a.id,value:kvLookup("value",a,d,0,"float"),defaults:kvLookup("defaults",a,d,0,!1),parentNode:kvLookup("parentNode",a,d,null),width:kvLookup("width",a,d,null),height:kvLookup("height",a,d,null),valueFontColor:kvLookup("valueFontColor",a,d,"#010101"),valueFontFamily:kvLookup("valueFontFamily",a,d,"Arial"),symbol:kvLookup("symbol",a,d,""),min:kvLookup("min",a,d,0,"float"),minTxt:kvLookup("minTxt",a,d,!1),max:kvLookup("max",a,d,100,"float"),maxTxt:kvLookup("maxTxt",a,d,!1),reverse:kvLookup("reverse",a,d,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",a,d,0),textRenderer:kvLookup("textRenderer",a,d,null),onAnimationEnd:kvLookup("onAnimationEnd",a,d,null),gaugeWidthScale:kvLookup("gaugeWidthScale",a,d,1),gaugeColor:kvLookup("gaugeColor",a,d,"#edebeb"),label:kvLookup("label",a,d,""),labelFontColor:kvLookup("labelFontColor",a,d,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",a,d,.2),shadowSize:kvLookup("shadowSize",a,d,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",a,d,3),levelColors:kvLookup("levelColors",a,d,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",a,d,700),startAnimationType:kvLookup("startAnimationType",a,d,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",a,d,700),refreshAnimationType:kvLookup("refreshAnimationType",a,d,">"),donutStartAngle:kvLookup("donutStartAngle",a,d,90),valueMinFontSize:kvLookup("valueMinFontSize",a,d,16),labelMinFontSize:kvLookup("labelMinFontSize",a,d,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",a,d,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",a,d,10),hideValue:kvLookup("hideValue",a,d,!1),hideMinMax:kvLookup("hideMinMax",a,d,!1),showInnerShadow:kvLookup("showInnerShadow",a,d,!1),humanFriendly:kvLookup("humanFriendly",a,d,!1),noGradient:kvLookup("noGradient",a,d,!1),donut:kvLookup("donut",a,d,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",a,d,!1),counter:kvLookup("counter",a,d,!1),decimals:kvLookup("decimals",a,d,0),customSectors:kvLookup("customSectors",a,d,[]),formatNumber:kvLookup("formatNumber",a,d,!1),pointer:kvLookup("pointer",a,d,!1),pointerOptions:kvLookup("pointerOptions",a,d,[])};var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;b.config.value>b.config.max&&(b.config.value=b.config.max),b.config.value<b.config.min&&(b.config.value=b.config.min),b.originalValue=kvLookup("value",a,d,-1,"float"),null!==b.config.id&&null!==document.getElementById(b.config.id)?b.canvas=Raphael(b.config.id,"100%","100%"):null!==b.config.parentNode&&(b.canvas=Raphael(b.config.parentNode,"100%","100%")),!0===b.config.relativeGaugeSize?!0===b.config.donut?(b.canvas.setViewBox(0,0,200,200,!0),f=200,g=200):(b.canvas.setViewBox(0,0,200,100,!0),f=200,g=100):null!==b.config.width&&null!==b.config.height?(f=b.config.width,g=b.config.height):null!==b.config.parentNode?(b.canvas.setViewBox(0,0,200,100,!0),f=200,g=100):(f=1*getStyle(document.getElementById(b.config.id),"width").slice(0,-2),g=1*getStyle(document.getElementById(b.config.id),"height").slice(0,-2)),!0===b.config.donut?(f>g?(i=g,h=i):(h=f,i=h),k=(f-h)/2,l=(g-i)/2,m=i/6.4>16?i/5.4:18,n=k+h/2,o=""!==b.config.label?l+i/1.85:l+i/1.7,p=i/16>10?i/16:10,q=k+h/2,r=o+p,s=i/16>10?i/16:10,t=k+h/10+h/6.666666666666667*b.config.gaugeWidthScale/2,u=r,v=i/16>10?i/16:10,w=k+h-h/10-h/6.666666666666667*b.config.gaugeWidthScale/2,x=r):(f>g?(i=g,(h=2*i)>f&&(j=h/f,h/=j,i/=j)):f<g?(h=f,i=h/2):(h=f,i=.5*h),k=(f-h)/2,l=(g-i)/2,m=i/6.5>b.config.valueMinFontSize?i/6.5:b.config.valueMinFontSize,n=k+h/2,o=l+i/1.275,p=i/16>b.config.labelMinFontSize?i/16:b.config.labelMinFontSize,q=k+h/2,r=o+m/2+5,s=i/16>b.config.minLabelMinFontSize?i/16:b.config.minLabelMinFontSize,t=k+h/10+h/6.666666666666667*b.config.gaugeWidthScale/2,u=r,v=i/16>b.config.maxLabelMinFontSize?i/16:b.config.maxLabelMinFontSize,w=k+h-h/10-h/6.666666666666667*b.config.gaugeWidthScale/2,x=r),b.params={canvasW:f,canvasH:g,widgetW:h,widgetH:i,dx:k,dy:l,valueFontSize:m,valueX:n,valueY:o,labelFontSize:p,labelX:q,labelY:r,minFontSize:s,minX:t,minY:u,maxFontSize:v,maxX:w,maxY:x},x=null,b.canvas.customAttributes.pki=function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t;return i?(k=(1-2*(a-b)/(c-b))*Math.PI,l=d/2-d/30,m=l-d/6.666666666666667*h,n=d/2+f,o=e/2+g,p=n+l*Math.cos(k),q=o-l*Math.sin(k),r=n+m*Math.cos(k),s=o-m*Math.sin(k),t="M"+(n-m)+","+o+" ",t+="L"+(n-l)+","+o+" ",a>(c-b)/2&&(t+="A"+l+","+l+" 0 0 1 "+(n+l)+","+o+" "),t+="A"+l+","+l+" 0 0 1 "+p+","+q+" ",t+="L"+r+","+s+" ",a>(c-b)/2&&(t+="A"+m+","+m+" 0 0 0 "+(n+m)+","+o+" "),t+="A"+m+","+m+" 0 0 0 "+(n-m)+","+o+" ",t+="Z ",{path:t}):(k=(1-(a-b)/(c-b))*Math.PI,l=d/2-d/10,m=l-d/6.666666666666667*h,n=d/2+f,o=e/1.25+g,p=n+l*Math.cos(k),q=o-l*Math.sin(k),r=n+m*Math.cos(k),s=o-m*Math.sin(k),t="M"+(n-m)+","+o+" ",t+="L"+(n-l)+","+o+" ",t+="A"+l+","+l+" 0 0 1 "+p+","+q+" ",t+="L"+r+","+s+" ",t+="A"+m+","+m+" 0 0 0 "+(n-m)+","+o+" ",t+="Z ",{path:t})},b.canvas.customAttributes.ndl=function(a,c,d,e,f,g,h,i,j){var k=3.5*e/100,l=e/15,m=e/100;null!=b.config.pointerOptions.toplength&&void 0!=b.config.pointerOptions.toplength&&(k=b.config.pointerOptions.toplength),null!=b.config.pointerOptions.bottomlength&&void 0!=b.config.pointerOptions.bottomlength&&(l=b.config.pointerOptions.bottomlength),null!=b.config.pointerOptions.bottomwidth&&void 0!=b.config.pointerOptions.bottomwidth&&(m=b.config.pointerOptions.bottomwidth);var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;return j?(n=(1-2*(a-c)/(d-c))*Math.PI,o=e/2-e/30,p=o-e/6.666666666666667*i,e/2+g,q=f/2+h,r=e/2+g+o*Math.cos(n),s=f-(f-q)-o*Math.sin(n),t=e/2+g+p*Math.cos(n),u=f-(f-q)-p*Math.sin(n),v=r+k*Math.cos(n),w=s-k*Math.sin(n),x=t-l*Math.cos(n),y=u+l*Math.sin(n),z=x+m*Math.sin(n),A=y+m*Math.cos(n),B=x-m*Math.sin(n),C=y-m*Math.cos(n),D="M"+z+","+A+" ",D+="L"+B+","+C+" ",D+="L"+v+","+w+" ",D+="Z ",{path:D}):(n=(1-(a-c)/(d-c))*Math.PI,o=e/2-e/10,p=o-e/6.666666666666667*i,e/2+g,q=f/1.25+h,r=e/2+g+o*Math.cos(n),s=f-(f-q)-o*Math.sin(n),t=e/2+g+p*Math.cos(n),u=f-(f-q)-p*Math.sin(n),v=r+k*Math.cos(n),w=s-k*Math.sin(n),x=t-l*Math.cos(n),y=u+l*Math.sin(n),z=x+m*Math.sin(n),A=y+m*Math.cos(n),B=x-m*Math.sin(n),C=y-m*Math.cos(n),D="M"+z+","+A+" ",D+="L"+B+","+C+" ",D+="L"+v+","+w+" ",D+="Z ",{path:D})},b.gauge=b.canvas.path().attr({stroke:"none",fill:b.config.gaugeColor,pki:[b.config.max,b.config.min,b.config.max,b.params.widgetW,b.params.widgetH,b.params.dx,b.params.dy,b.config.gaugeWidthScale,b.config.donut,b.config.reverse]}),b.level=b.canvas.path().attr({stroke:"none",fill:getColor(b.config.value,(b.config.value-b.config.min)/(b.config.max-b.config.min),b.config.levelColors,b.config.noGradient,b.config.customSectors),pki:[b.config.min,b.config.min,b.config.max,b.params.widgetW,b.params.widgetH,b.params.dx,b.params.dy,b.config.gaugeWidthScale,b.config.donut,b.config.reverse]}),b.config.donut&&b.level.transform("r"+b.config.donutStartAngle+", "+(b.params.widgetW/2+b.params.dx)+", "+(b.params.widgetH/2+b.params.dy)),b.config.pointer&&(b.needle=b.canvas.path().attr({stroke:null!==b.config.pointerOptions.stroke&&void 0!==b.config.pointerOptions.stroke?b.config.pointerOptions.stroke:"none","stroke-width":null!==b.config.pointerOptions.stroke_width&&void 0!==b.config.pointerOptions.stroke_width?b.config.pointerOptions.stroke_width:0,"stroke-linecap":null!==b.config.pointerOptions.stroke_linecap&&void 0!==b.config.pointerOptions.stroke_linecap?b.config.pointerOptions.stroke_linecap:"square",fill:null!==b.config.pointerOptions.color&&void 0!==b.config.pointerOptions.color?b.config.pointerOptions.color:"#000000",ndl:[b.config.min,b.config.min,b.config.max,b.params.widgetW,b.params.widgetH,b.params.dx,b.params.dy,b.config.gaugeWidthScale,b.config.donut]}),b.config.donut&&b.needle.transform("r"+b.config.donutStartAngle+", "+(b.params.widgetW/2+b.params.dx)+", "+(b.params.widgetH/2+b.params.dy))),b.txtValue=b.canvas.text(b.params.valueX,b.params.valueY,0),b.txtValue.attr({"font-size":b.params.valueFontSize,"font-weight":"bold","font-family":b.config.valueFontFamily,fill:b.config.valueFontColor,"fill-opacity":"0"}),setDy(b.txtValue,b.params.valueFontSize,b.params.valueY),b.txtLabel=b.canvas.text(b.params.labelX,b.params.labelY,b.config.label),b.txtLabel.attr({"font-size":b.params.labelFontSize,"font-weight":"normal","font-family":b.config.valueFontFamily,fill:b.config.labelFontColor,"fill-opacity":"0"}),setDy(b.txtLabel,b.params.labelFontSize,b.params.labelY);var y=b.config.min;b.config.reverse&&(y=b.config.max),b.txtMinimum=y,b.config.minTxt?b.txtMinimum=b.config.minTxt:b.config.humanFriendly?b.txtMinimum=humanFriendlyNumber(y,b.config.humanFriendlyDecimal):b.config.formatNumber&&(b.txtMinimum=formatNumber(y)),b.txtMin=b.canvas.text(b.params.minX,b.params.minY,b.txtMinimum),b.txtMin.attr({"font-size":b.params.minFontSize,"font-weight":"normal","font-family":b.config.valueFontFamily,fill:b.config.labelFontColor,"fill-opacity":b.config.hideMinMax||b.config.donut?"0":"1"}),setDy(b.txtMin,b.params.minFontSize,b.params.minY);var z=b.config.max;b.config.reverse&&(z=b.config.min),b.txtMaximum=z,b.config.maxTxt?b.txtMaximum=b.config.maxTxt:b.config.humanFriendly?b.txtMaximum=humanFriendlyNumber(z,b.config.humanFriendlyDecimal):b.config.formatNumber&&(b.txtMaximum=formatNumber(z)),b.txtMax=b.canvas.text(b.params.maxX,b.params.maxY,b.txtMaximum),b.txtMax.attr({"font-size":b.params.maxFontSize,"font-weight":"normal","font-family":b.config.valueFontFamily,fill:b.config.labelFontColor,"fill-opacity":b.config.hideMinMax||b.config.donut?"0":"1"}),setDy(b.txtMax,b.params.maxFontSize,b.params.maxY);var A=b.canvas.canvas.childNodes[1],B="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){b.generateShadow(B,A)}):b.generateShadow(B,A)),B=null,b.config.textRenderer?b.originalValue=b.config.textRenderer(b.originalValue):b.config.humanFriendly?b.originalValue=humanFriendlyNumber(b.originalValue,b.config.humanFriendlyDecimal)+b.config.symbol:b.config.formatNumber?b.originalValue=formatNumber(b.originalValue)+b.config.symbol:b.originalValue=(1*b.originalValue).toFixed(b.config.decimals)+b.config.symbol,!0===b.config.counter?(eve.on("raphael.anim.frame."+b.level.id,function(){var a=b.level.attr("pki")[0];b.config.reverse&&(a=1*b.config.max+1*b.config.min-1*b.level.attr("pki")[0]),b.config.textRenderer?b.txtValue.attr("text",b.config.textRenderer(Math.floor(a))):b.config.humanFriendly?b.txtValue.attr("text",humanFriendlyNumber(Math.floor(a),b.config.humanFriendlyDecimal)+b.config.symbol):b.config.formatNumber?b.txtValue.attr("text",formatNumber(Math.floor(a))+b.config.symbol):b.txtValue.attr("text",(1*a).toFixed(b.config.decimals)+b.config.symbol),setDy(b.txtValue,b.params.valueFontSize,b.params.valueY),a=null}),eve.on("raphael.anim.finish."+b.level.id,function(){b.txtValue.attr({text:b.originalValue}),setDy(b.txtValue,b.params.valueFontSize,b.params.valueY)})):eve.on("raphael.anim.start."+b.level.id,function(){b.txtValue.attr({text:b.originalValue}),setDy(b.txtValue,b.params.valueFontSize,b.params.valueY)});var C=b.config.value;b.config.reverse&&(C=1*b.config.max+1*b.config.min-1*b.config.value),b.level.animate({pki:[C,b.config.min,b.config.max,b.params.widgetW,b.params.widgetH,b.params.dx,b.params.dy,b.config.gaugeWidthScale,b.config.donut,b.config.reverse]},b.config.startAnimationTime,b.config.startAnimationType,b.config.onAnimationEnd),b.config.pointer&&b.needle.animate({ndl:[C,b.config.min,b.config.max,b.params.widgetW,b.params.widgetH,b.params.dx,b.params.dy,b.config.gaugeWidthScale,b.config.donut]},b.config.startAnimationTime,b.config.startAnimationType),b.txtValue.animate({"fill-opacity":b.config.hideValue?"0":"1"},b.config.startAnimationTime,b.config.startAnimationType),b.txtLabel.animate({"fill-opacity":"1"},b.config.startAnimationTime,b.config.startAnimationType)},JustGage.prototype.refresh=function(a,b){var c,d,e=this,b=b||null;null!==b&&(e.config.max=b,e.txtMaximum=e.config.max,e.config.maxTxt?e.txtMaximum=e.config.maxTxt:e.config.humanFriendly?e.txtMaximum=humanFriendlyNumber(e.config.max,e.config.humanFriendlyDecimal):e.config.formatNumber&&(e.txtMaximum=formatNumber(e.config.max)),e.config.reverse?(e.txtMinimum=e.config.min,e.config.minTxt?e.txtMinimum=e.config.minTxt:e.config.humanFriendly?e.txtMinimum=humanFriendlyNumber(e.config.min,e.config.humanFriendlyDecimal):e.config.formatNumber&&(e.txtMinimum=formatNumber(e.config.min)),e.txtMin.attr({text:e.txtMaximum}),e.txtMax.attr({text:e.txtMinimum}),setDy(e.txtMin,e.params.minFontSize,e.params.minY),setDy(e.txtMax,e.params.minFontSize,e.params.minY)):(e.txtMax.attr({text:e.txtMaximum}),setDy(e.txtMax,e.params.maxFontSize,e.params.maxY))),c=a,1*a>1*e.config.max&&(a=1*e.config.max),1*a<1*e.config.min&&(a=1*e.config.min),d=getColor(a,(a-e.config.min)/(e.config.max-e.config.min),e.config.levelColors,e.config.noGradient,e.config.customSectors),c=e.config.textRenderer?e.config.textRenderer(c):e.config.humanFriendly?humanFriendlyNumber(c,e.config.humanFriendlyDecimal)+e.config.symbol:e.config.formatNumber?formatNumber((1*c).toFixed(e.config.decimals))+e.config.symbol:(1*c).toFixed(e.config.decimals)+e.config.symbol,e.originalValue=c,e.config.value=1*a,e.config.counter||(e.txtValue.attr({text:c}),setDy(e.txtValue,e.params.valueFontSize,e.params.valueY));var f=e.config.value;e.config.reverse&&(f=1*e.config.max+1*e.config.min-1*e.config.value),e.level.animate({pki:[f,e.config.min,e.config.max,e.params.widgetW,e.params.widgetH,e.params.dx,e.params.dy,e.config.gaugeWidthScale,e.config.donut,e.config.reverse],fill:d},e.config.refreshAnimationTime,e.config.refreshAnimationType,e.config.onAnimationEnd),e.config.pointer&&e.needle.animate({ndl:[f,e.config.min,e.config.max,e.params.widgetW,e.params.widgetH,e.params.dx,e.params.dy,e.config.gaugeWidthScale,e.config.donut]},e.config.refreshAnimationTime,e.config.refreshAnimationType),b=null},JustGage.prototype.destroy=function(){document.getElementById(this.config.id).innerHTML=""},JustGage.prototype.generateShadow=function(a,b){var c,d,e,f,g,h,i,j=this,k="inner-shadow-"+j.config.id;c=document.createElementNS(a,"filter"),c.setAttribute("id",k),b.appendChild(c),d=document.createElementNS(a,"feOffset"),d.setAttribute("dx",0),d.setAttribute("dy",j.config.shadowVerticalOffset),c.appendChild(d),e=document.createElementNS(a,"feGaussianBlur"),e.setAttribute("result","offset-blur"),e.setAttribute("stdDeviation",j.config.shadowSize),c.appendChild(e),f=document.createElementNS(a,"feComposite"),f.setAttribute("operator","out"),f.setAttribute("in","SourceGraphic"),f.setAttribute("in2","offset-blur"),f.setAttribute("result","inverse"),c.appendChild(f),g=document.createElementNS(a,"feFlood"),g.setAttribute("flood-color","black"),g.setAttribute("flood-opacity",j.config.shadowOpacity),g.setAttribute("result","color"),c.appendChild(g),h=document.createElementNS(a,"feComposite"),h.setAttribute("operator","in"),h.setAttribute("in","color"),h.setAttribute("in2","inverse"),h.setAttribute("result","shadow"),c.appendChild(h),i=document.createElementNS(a,"feComposite"),i.setAttribute("operator","over"),i.setAttribute("in","shadow"),i.setAttribute("in2","SourceGraphic"),c.appendChild(i),j.config.showInnerShadow&&(j.canvas.canvas.childNodes[2].setAttribute("filter","url("+window.location.pathname+"#"+k+")"),j.canvas.canvas.childNodes[3].setAttribute("filter","url("+window.location.pathname+"#"+k+")")),i=null};var ie=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return a>4?a:void 0}();angular.module("frapontillo.gage",["frapontillo.gage.directives","frapontillo.gage.controllers"]),angular.module("frapontillo.gage.controllers",[]).controller("justgageCtrl",["$scope","$filter",function(a,b){var c=this;c.getOptionValueOverrides={customSectors:angular.fromJson,levelColors:angular.fromJson,textRenderer:function(a){if(a)return angular.isFunction(a)?a():a}},c.getOptionValue=function(a,b){var d=c.getOptionValueOverrides[a];if(d)return d(b);if(""!==b)return"true"===b||"false"!==b&&b},c.getOptionsNames=function(c){var d=[],e=c||[];return angular.isDefined(c)&&!angular.isArray(c)&&(e=[c]),angular.forEach(a,function(a,c){"this"!==c&&"$"!==c.substring(0,1)&&0===b("filter")(e,c).length&&d.push(c)}),d},c.getDefinedOptions=function(){var b={},d=c.getOptionsNames();return angular.forEach(d,function(d){"this"!==d&&"$"!==d.substring(0,1)&&a[d]&&(b[d]=c.getOptionValue(d,a[d]))}),b}}]),angular.module("frapontillo.gage.directives",["frapontillo.gage.controllers"]).directive("justgage",function(){return{restrict:"EAC",scope:{value:"@",valueFontColor:"@",valueFontFamily:"@",width:"@",height:"@",relativeGaugeSize:"@",min:"@",max:"@",valueMinFontSize:"@",labelMinFontSize:"@",minLabelMinFontSize:"@",maxLabelMinFontSize:"@",hideValue:"@",hideMinMax:"@",hideInnerShadow:"@",gaugeWidthScale:"@",gaugeColor:"@",showInnerShadow:"@",shadowOpacity:"@",shadowSize:"@",shadowVerticalOffset:"@",levelColors:"@",customSectors:"@",noGradient:"@",label:"@",labelFontColor:"@",startAnimationTime:"@",startAnimationType:"@",refreshAnimationTime:"@",refreshAnimationType:"@",donut:"@",donutStartAngle:"@",counter:"@",decimals:"@",pointer:"@",symbol:"@",formatNumber:"@",humanFriendly:"@",humanFriendlyDecimal:"@",textRenderer:"&",reverse:"@"},controller:"justgageCtrl",link:function(a,b,c,d){var e,f=[],g=function(){f.push(a.$watch("value",function(b,c){b!==c&&e.refresh(b,a.max)})),f.push(a.$watch("max",function(b,c){b!==c&&e.refresh(a.value,b)}))},h=function(){var b=d.getOptionsNames(["value","max"]);angular.forEach(b,function(b){f.push(a.$watch(b,function(a,b){a!==b&&i()}))})},i=function(){b.attr("id",a.$id);var c={parentNode:b[0],id:a.$id};if(angular.extend(c,d.getDefinedOptions()),e){var i=e.canvas.canvas;i.parentNode.removeChild(i)}for(;f.length>0;){f.pop()()}e=new JustGage(c),g(),h()};i()}}}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./metergauge.link"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(){return{restrict:"E",scope:{gaugeconfig:"="},link:e.default}};c.default=f},{"./metergauge.link":3}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./metergauge.component"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=angular.module("meterGauge",[]).directive("meterGauge",e.default);c.default=f},{"./metergauge.component":1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){var b=b[0],d=a.gaugeconfig;if(!d)return void console.error("No config found");var e=function(a){function c(c){function e(a,b){var e=a+90,f=d(e),g=c.labelFontSize/(z[b].toString().length/2);return p+(m-g)*Math.cos(f)}function f(a,b){var e=a+90,f=d(e);return q+m*Math.sin(f)+c.labelFontSize/2}if(void 0===c)var c={};void 0===c.gaugeRadius&&(c.gaugeRadius=150),void 0===c.minVal&&(c.minVal=0),void 0===c.maxVal&&(c.maxVal=100),void 0===c.tickSpaceMinVal&&(c.tickSpaceMinVal=1),void 0===c.tickSpaceMajVal&&(c.tickSpaceMajVal=10),void 0===c.divID&&(c.divID="vizBox"),void 0===c.needleVal&&(c.needleVal=60),void 0===c.gaugeUnits&&(c.gaugeUnits="%"),void 0===c.padding&&(c.padding=.05),void 0===c.edgeWidth&&(c.edgeWidth=.05),void 0===c.tickEdgeGap&&(c.tickEdgeGap=.05),void 0===c.tickLengthMaj&&(c.tickLengthMaj=.15),void 0===c.tickLengthMin&&(c.tickLengthMin=.05),void 0===c.needleTickGap&&(c.needleTickGap=.05),void 0===c.needleLengthNeg&&(c.needleLengthNeg=.2),void 0===c.pivotRadius&&(c.pivotRadius=.1),void 0===c.ticknessGaugeBasis&&(c.ticknessGaugeBasis=200),void 0===c.needleWidth&&(c.needleWidth=5),void 0===c.tickWidthMaj&&(c.tickWidthMaj=3),void 0===c.tickWidthMin&&(c.tickWidthMin=1),void 0===c.labelFontSize&&(c.labelFontSize=18),void 0===c.zeroTickAngle&&(c.zeroTickAngle=60),void 0===c.maxTickAngle&&(c.maxTickAngle=300),void 0===c.zeroNeedleAngle&&(c.zeroNeedleAngle=40),void 0===c.maxNeedleAngle&&(c.maxNeedleAngle=320),void 0===c.tickColMaj&&(c.tickColMaj="#0099CC"),void 0===c.tickColMin&&(c.tickColMin="#000"),void 0===c.outerEdgeCol&&(c.outerEdgeCol="#0099CC"),void 0===c.pivotCol&&(c.pivotCol="#999"),void 0===c.innerCol&&(c.innerCol="#fff"),void 0===c.unitsLabelCol&&(c.unitsLabelCol="#000"),void 0===c.tickLabelCol&&(c.tickLabelCol="#000"),void 0===c.needleCol&&(c.needleCol="#0099CC");var g='"Helvetica Neue", Helvetica, Arial, sans-serif';void 0===c.tickFont&&(c.tickFont=g),void 0===c.unitsFont&&(c.unitsFont=g),c.padding=c.padding*c.gaugeRadius,c.edgeWidth=c.edgeWidth*c.gaugeRadius,c.tickEdgeGap=c.tickEdgeGap*c.gaugeRadius,c.tickLengthMaj=c.tickLengthMaj*c.gaugeRadius,c.tickLengthMin=c.tickLengthMin*c.gaugeRadius,c.needleTickGap=c.needleTickGap*c.gaugeRadius,
c.needleLengthNeg=c.needleLengthNeg*c.gaugeRadius,c.pivotRadius=c.pivotRadius*c.gaugeRadius,c.needleWidth=c.needleWidth*(c.gaugeRadius/c.ticknessGaugeBasis),c.tickWidthMaj=c.tickWidthMaj*(c.gaugeRadius/c.ticknessGaugeBasis),c.tickWidthMin=c.tickWidthMin*(c.gaugeRadius/c.ticknessGaugeBasis),c.labelFontSize=c.labelFontSize*(c.gaugeRadius/c.ticknessGaugeBasis);var h=c.gaugeRadius-c.padding-c.edgeWidth-c.tickEdgeGap-c.tickLengthMaj-c.needleTickGap,i=c.needleLengthNeg+h,j=-1*c.needleLengthNeg,k=c.gaugeRadius-c.padding-c.edgeWidth-c.tickEdgeGap-c.tickLengthMaj,l=c.gaugeRadius-c.padding-c.edgeWidth-c.tickEdgeGap-c.tickLengthMin,m=k-c.labelFontSize,n=c.gaugeRadius-c.padding-c.edgeWidth,o=c.gaugeRadius-c.padding,p=c.gaugeRadius,q=c.gaugeRadius;c.labelFontSize<6&&(c.labelFontSize=0);for(var r=a.scaleLinear().domain([c.minVal,c.maxVal]).range([c.zeroTickAngle,c.maxTickAngle]),s=0,t=[],u=[],v=r(c.tickSpaceMajVal)-r(0),w=r(c.tickSpaceMinVal)-r(0),x=c.zeroTickAngle;x<=c.maxTickAngle;x+=v)t.push(c.zeroTickAngle+v*s),s++;s=0;for(var x=c.zeroTickAngle;x<=c.maxTickAngle;x+=w){var y=0;t.forEach(function(a){c.zeroTickAngle+w*s==a&&(y=1)}),0==y&&u.push(c.zeroTickAngle+w*s),s++}s=0;for(var z=[],x=c.zeroTickAngle;x<=c.maxTickAngle;x+=v)z.push(c.minVal+c.tickSpaceMajVal*s),s++;var A=2*c.gaugeRadius,B=2*c.gaugeRadius,C=a.select(b).append("svg").attr("id","SVGbox-"+c.divID).attr("width",A).attr("height",B),D=C.append("svg:g").attr("id","circles"),E=(D.append("svg:circle").attr("cx",p).attr("cy",q).attr("r",o).style("fill",c.outerEdgeCol).style("stroke","none"),D.append("svg:circle").attr("cx",p).attr("cy",q).attr("r",n).style("fill",c.innerCol).style("stroke","none"),D.append("svg:circle").attr("cx",p).attr("cy",q).attr("r",c.pivotRadius).style("fill",c.pivotCol).style("stroke","none"),function(){function b(b,e){var f=b+90,g=d(f),h=q+k*Math.sin(g),i=q+(k+c.tickLengthMaj)*Math.sin(g),j=p+k*Math.cos(g),l=p+(k+c.tickLengthMaj)*Math.cos(g),m=[{x:j,y:h},{x:l,y:i}];return a.line().x(function(a){return a.x}).y(function(a){return a.y})(m)}return b}),F=E(),G=function(){function b(b,e){var f=b+90,g=d(f),h=q+l*Math.sin(g),i=q+(l+c.tickLengthMin)*Math.sin(g),j=p+l*Math.cos(g),k=p+(l+c.tickLengthMin)*Math.cos(g),m=[{x:j,y:h},{x:k,y:i}];return a.line().x(function(a){return a.x}).y(function(a){return a.y})(m)}return b}(),H=C.append("svg:g").attr("id","tickMarks"),I=H.append("svg:g").attr("id","minorTickMarks"),J=H.append("svg:g").attr("id","majorTickMarks"),K=(I.selectAll("path").data(u).enter().append("path").attr("d",G).style("stroke",c.tickColMin).style("stroke-width",c.tickWidthMin+"px"),J.selectAll("path").data(t).enter().append("path").attr("d",F).style("stroke",c.tickColMaj).style("stroke-width",c.tickWidthMaj+"px"),C.append("svg:g").attr("id","tickLabels")),L=(K.selectAll("text").data(t).enter().append("text").attr("x",function(a,b){return e(a,b)}).attr("y",function(a,b){return f(a,b)}).attr("font-size",c.labelFontSize).attr("text-anchor","middle").style("fill",c.tickLabelCol).style("font-weight","bold").attr("font-family",c.tickFont).text(function(a,b){return z[b]}),C.append("svg:g").attr("id","unitLabels")),M=L.selectAll("text").data([0]).enter().append("text").attr("x",function(a,b){return e(a,b)}).attr("y",function(a,b){return f(a,b)}).attr("font-size",1.5*c.labelFontSize).attr("text-anchor","middle").style("fill",c.unitsLabelCol).style("font-weight","bold").attr("font-family",c.unitsFont).text(c.gaugeUnits),N=[c.zeroNeedleAngle],O=function(){function b(b,c){var e=d(b+90),f=q+j*Math.sin(e),g=q+(j+i)*Math.sin(e),h=p+j*Math.cos(e),k=p+(j+i)*Math.cos(e),l=[{x:h,y:f},{x:k,y:g}];return a.line().x(function(a){return a.x}).y(function(a){return a.y})(l)}return b}(),P=C.append("svg:g").attr("id","needle");P.selectAll("path").data(N).enter().append("path").attr("d",O).style("stroke",c.needleCol).style("stroke-width",c.needleWidth+"px").transition().duration(1e3).attrTween("transform",function(b,d,e){N=r(c.needleVal),N>c.maxTickAngle&&(N=c.maxNeedleAngle),N<c.zeroTickAngle&&(N=c.zeroNeedleAngle);var f=p+","+q,g=N-c.zeroNeedleAngle;return a.interpolateString("rotate(0,"+f+")","rotate("+g+","+f+")")}),M.transition().duration(1e3).tween("text",function(b){var d=a.interpolateString(c.minVal,c.needleVal),e=this;return function(a){e.textContent=Math.round(d(a))+" "+c.gaugeUnits}}),this.updateGauge=function(b){void 0==b&&c.minVal;var d=P.selectAll("path"),e=c.needleVal;d.transition().duration(3e3).ease(a.easeCubicIn).attrTween("transform",function(d,f,g){var h=r(e)-c.zeroNeedleAngle,i=r(b)-c.zeroNeedleAngle;h+c.zeroNeedleAngle>c.maxTickAngle&&(h=c.maxNeedleAngle-c.zeroNeedleAngle),h+c.zeroNeedleAngle<c.zeroTickAngle&&(h=0),i+c.zeroNeedleAngle>c.maxTickAngle&&(i=c.maxNeedleAngle-c.zeroNeedleAngle),i+c.zeroNeedleAngle<c.zeroTickAngle&&(i=0);var j=p+","+q;return a.interpolateString("rotate("+h+","+j+")","rotate("+i+","+j+")")}),M.transition().duration(3e3).ease(a.easeCubicIn).tween("text",function(d){var f=a.interpolateString(e,b),g=this;return function(a){g.textContent=Math.round(f(a))+" "+c.gaugeUnits}}),c.needleVal=b}}function d(a){return a*(Math.PI/180)}return c}(d3),f=new e(d);a.$watch("gaugeconfig.needleVal",function(a){f.updateGauge(a)})};c.default=d},{}]},{},[2]),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.d3=a.d3||{})}(this,function(a){"use strict";function b(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function c(a){return 1===a.length&&(a=function(a){return function(c,d){return b(a(c),d)}}(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function d(a,b){return[a,b]}function e(a){return null===a?NaN:+a}function f(a,b){var c,d,f=a.length,g=0,h=-1,i=0,j=0;if(null==b)for(;++h<f;)isNaN(c=e(a[h]))||(j+=(d=c-i)*(c-(i+=d/++g)));else for(;++h<f;)isNaN(c=e(b(a[h],h,a)))||(j+=(d=c-i)*(c-(i+=d/++g)));if(g>1)return j/(g-1)}function g(a,b){var c=f(a,b);return c?Math.sqrt(c):c}function h(a,b){var c,d,e,f=a.length,g=-1;if(null==b){for(;++g<f;)if(null!=(c=a[g])&&c>=c)for(d=e=c;++g<f;)null!=(c=a[g])&&(d>c&&(d=c),e<c&&(e=c))}else for(;++g<f;)if(null!=(c=b(a[g],g,a))&&c>=c)for(d=e=c;++g<f;)null!=(c=b(a[g],g,a))&&(d>c&&(d=c),e<c&&(e=c));return[d,e]}function i(a){return function(){return a}}function j(a){return a}function k(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f}function l(a,b,c){var d,e,f,g,h=-1;if(b=+b,a=+a,c=+c,a===b&&c>0)return[a];if((d=b<a)&&(e=a,a=b,b=e),0===(g=m(a,b,c))||!isFinite(g))return[];if(g>0)for(a=Math.ceil(a/g),b=Math.floor(b/g),f=new Array(e=Math.ceil(b-a+1));++h<e;)f[h]=(a+h)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),f=new Array(e=Math.ceil(a-b+1));++h<e;)f[h]=(a-h)/g;return d&&f.reverse(),f}function m(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=Qj?10:f>=Rj?5:f>=Sj?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=Qj?10:f>=Rj?5:f>=Sj?2:1)}function n(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;return f>=Qj?e*=10:f>=Rj?e*=5:f>=Sj&&(e*=2),b<a?-e:e}function o(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function p(a,b,c){if(null==c&&(c=e),d=a.length){if((b=+b)<=0||d<2)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,f=(d-1)*b,g=Math.floor(f),h=+c(a[g],g,a);return h+(+c(a[g+1],g+1,a)-h)*(f-g)}}function q(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(b=(d=a[e]).length;--b>=0;)c[--g]=d[b];return c}function r(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&d>c&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&d>c&&(d=c);return d}function s(a){if(!(e=a.length))return[];for(var b=-1,c=r(a,t),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d}function t(a){return a.length}function u(a){return a}function v(a){return"translate("+(a+.5)+",0)"}function w(a){return"translate(0,"+(a+.5)+")"}function x(){return!this.__axis}function y(a,b){function c(c){var m=null==e?b.ticks?b.ticks.apply(b,d):b.domain():e,n=null==f?b.tickFormat?b.tickFormat.apply(b,d):u:f,o=Math.max(g,0)+i,p=b.range(),q=+p[0]+.5,r=+p[p.length-1]+.5,s=(b.bandwidth?function(a){var b=Math.max(0,a.bandwidth()-1)/2;return a.round()&&(b=Math.round(b)),function(c){return+a(c)+b}}:function(a){return function(b){return+a(b)}})(b.copy()),t=c.selection?c.selection():c,v=t.selectAll(".domain").data([null]),w=t.selectAll(".tick").data(m,b).order(),y=w.exit(),z=w.enter().append("g").attr("class","tick"),A=w.select("line"),B=w.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(z),A=A.merge(z.append("line").attr("stroke","#000").attr(k+"2",j*g)),B=B.merge(z.append("text").attr("fill","#000").attr(k,j*o).attr("dy",a===Uj?"0em":a===Wj?"0.71em":"0.32em")),c!==t&&(v=v.transition(c),w=w.transition(c),A=A.transition(c),B=B.transition(c),y=y.transition(c).attr("opacity",Yj).attr("transform",function(a){return isFinite(a=s(a))?l(a):this.getAttribute("transform")}),z.attr("opacity",Yj).attr("transform",function(a){var b=this.parentNode.__axis;return l(b&&isFinite(b=b(a))?b:s(a))})),y.remove(),v.attr("d",a===Xj||a==Vj?"M"+j*h+","+q+"H0.5V"+r+"H"+j*h:"M"+q+","+j*h+"V0.5H"+r+"V"+j*h),w.attr("opacity",1).attr("transform",function(a){return l(s(a))}),A.attr(k+"2",j*g),B.attr(k,j*o).text(n),t.filter(x).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===Vj?"start":a===Xj?"end":"middle"),t.each(function(){this.__axis=s})}var d=[],e=null,f=null,g=6,h=6,i=3,j=a===Uj||a===Xj?-1:1,k=a===Xj||a===Vj?"x":"y",l=a===Uj||a===Wj?v:w;return c.scale=function(a){return arguments.length?(b=a,c):b},c.ticks=function(){return d=Tj.call(arguments),c},c.tickArguments=function(a){return arguments.length?(d=null==a?[]:Tj.call(a),c):d.slice()},c.tickValues=function(a){return arguments.length?(e=null==a?null:Tj.call(a),c):e&&e.slice()},c.tickFormat=function(a){return arguments.length?(f=a,c):f},c.tickSize=function(a){return arguments.length?(g=h=+a,c):g},c.tickSizeInner=function(a){return arguments.length?(g=+a,c):g},c.tickSizeOuter=function(a){return arguments.length?(h=+a,c):h},c.tickPadding=function(a){return arguments.length?(i=+a,c):i},c}function z(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d)throw new Error("illegal type: "+a);d[a]=[]}return new A(d)}function A(a){this._=a}function B(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=Zj,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function C(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),_j.hasOwnProperty(b)?{space:_j[b],local:a}:a}function D(a){var b=C(a);return(b.local?function(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}:function(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===$j&&b.documentElement.namespaceURI===$j?b.createElement(a):b.createElementNS(c,a)}})(b)}function E(){}function F(a){return null==a?E:function(){return this.querySelector(a)}}function G(){return[]}function H(a){return null==a?G:function(){return this.querySelectorAll(a)}}function I(a){return new Array(a.length)}function J(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function K(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;h<j;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new J(a,f[h]);for(;h<i;++h)(g=b[h])&&(e[h]=g)}function L(a,b,c,d,e,f,g){var h,i,j,k={},l=b.length,m=f.length,n=new Array(l);for(h=0;h<l;++h)(i=b[h])&&(n[h]=j=ek+g.call(i,i.__data__,h,b),j in k?e[h]=i:k[j]=i);for(h=0;h<m;++h)(i=k[j=ek+g.call(a,f[h],h,f)])?(d[h]=i,i.__data__=f[h],k[j]=null):c[h]=new J(a,f[h]);for(h=0;h<l;++h)(i=b[h])&&k[n[h]]===i&&(e[h]=i)}function M(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function N(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function O(a,b){return a.style.getPropertyValue(b)||N(a).getComputedStyle(a,null).getPropertyValue(b)}function P(a){return a.trim().split(/^|\s+/)}function Q(a){return a.classList||new R(a)}function R(a){this._node=a,this._names=P(a.getAttribute("class")||"")}function S(a,b){for(var c=Q(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function T(a,b){for(var c=Q(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function U(){this.textContent=""}function V(){this.innerHTML=""}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y(){return null}function Z(){var a=this.parentNode;a&&a.removeChild(this)}function $(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function _(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function aa(a,b,c){return a=ba(a,b,c),function(b){var c=b.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||a.call(this,b)}}function ba(b,c,d){return function(e){var f=a.event;a.event=e;try{b.call(this,this.__data__,c,d)}finally{a.event=f}}}function ca(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;d<f;++d)c=b[d],a.type&&c.type!==a.type||c.name!==a.name?b[++e]=c:this.removeEventListener(c.type,c.listener,c.capture);++e?b.length=e:delete this.__on}}}function da(a,b,c){var d=fk.hasOwnProperty(a.type)?aa:ba;return function(e,f,g){var h,i=this.__on,j=d(b,f,g);if(i)for(var k=0,l=i.length;k<l;++k)if((h=i[k]).type===a.type&&h.name===a.name)return this.removeEventListener(h.type,h.listener,h.capture),this.addEventListener(h.type,h.listener=j,h.capture=c),void(h.value=b);this.addEventListener(a.type,j,c),h={type:a.type,name:a.name,value:b,listener:j,capture:c},i?i.push(h):this.__on=[h]}}function ea(b,c,d,e){var f=a.event;b.sourceEvent=a.event,a.event=b;try{return c.apply(d,e)}finally{a.event=f}}function fa(a,b,c){var d=N(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}function ga(a,b){this._groups=a,this._parents=b}function ha(){return new ga([[document.documentElement]],gk)}function ia(a){return"string"==typeof a?new ga([[document.querySelector(a)]],[document.documentElement]):new ga([[a]],gk)}function ja(){return new ka}function ka(){this._="@"+(++hk).toString(36)}function la(){for(var b,c=a.event;b=c.sourceEvent;)c=b;return c}function ma(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();return d.x=b.clientX,d.y=b.clientY,d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var e=a.getBoundingClientRect();return[b.clientX-e.left-a.clientLeft,b.clientY-e.top-a.clientTop]}function na(a){var b=la();return b.changedTouches&&(b=b.changedTouches[0]),ma(a,b)}function oa(a,b,c){arguments.length<3&&(c=b,b=la().changedTouches);for(var d,e=0,f=b?b.length:0;e<f;++e)if((d=b[e]).identifier===c)return ma(a,d);return null}function pa(){a.event.stopImmediatePropagation()}function qa(){a.event.preventDefault(),a.event.stopImmediatePropagation()}function ra(a){var b=a.document.documentElement,c=ia(a).on("dragstart.drag",qa,!0);"onselectstart"in b?c.on("selectstart.drag",qa,!0):(b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none")}function sa(a,b){var c=a.document.documentElement,d=ia(a).on("dragstart.drag",null);b&&(d.on("click.drag",qa,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in c?d.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}function ta(a){return function(){return a}}function ua(a,b,c,d,e,f,g,h,i,j){this.target=a,this.type=b,this.subject=c,this.identifier=d,this.active=e,this.x=f,this.y=g,this.dx=h,this.dy=i,this._=j}function va(){return!a.event.button}function wa(){return this.parentNode}function xa(b){return null==b?{x:a.event.x,y:a.event.y}:b}function ya(){return"ontouchstart"in this}function za(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function Aa(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function Ba(){}function Ca(a){var b;return a=(a+"").trim().toLowerCase(),(b=lk.exec(a))?(b=parseInt(b[1],16),new Ha(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1)):(b=mk.exec(a))?Da(parseInt(b[1],16)):(b=nk.exec(a))?new Ha(b[1],b[2],b[3],1):(b=ok.exec(a))?new Ha(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=pk.exec(a))?Ea(b[1],b[2],b[3],b[4]):(b=qk.exec(a))?Ea(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=rk.exec(a))?Ia(b[1],b[2]/100,b[3]/100,1):(b=sk.exec(a))?Ia(b[1],b[2]/100,b[3]/100,b[4]):tk.hasOwnProperty(a)?Da(tk[a]):"transparent"===a?new Ha(NaN,NaN,NaN,0):null}function Da(a){return new Ha(a>>16&255,a>>8&255,255&a,1)}function Ea(a,b,c,d){return d<=0&&(a=b=c=NaN),new Ha(a,b,c,d)}function Fa(a){return a instanceof Ba||(a=Ca(a)),a?(a=a.rgb(),new Ha(a.r,a.g,a.b,a.opacity)):new Ha}function Ga(a,b,c,d){return 1===arguments.length?Fa(a):new Ha(a,b,c,null==d?1:d)}function Ha(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function Ia(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new Ka(a,b,c,d)}function Ja(a,b,c,d){return 1===arguments.length?function(a){if(a instanceof Ka)return new Ka(a.h,a.s,a.l,a.opacity);if(a instanceof Ba||(a=Ca(a)),!a)return new Ka;if(a instanceof Ka)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+6*(c<d):c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new Ka(g,h,i,a.opacity)}(a):new Ka(a,b,c,null==d?1:d)}function Ka(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function La(a,b,c){return 255*(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)}function Ma(a){if(a instanceof Oa)return new Oa(a.l,a.a,a.b,a.opacity);if(a instanceof Ua){var b=a.h*uk;return new Oa(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof Ha||(a=Fa(a));var c=Sa(a.r),d=Sa(a.g),e=Sa(a.b),f=Pa((.4124564*c+.3575761*d+.1804375*e)/wk),g=Pa((.2126729*c+.7151522*d+.072175*e)/xk);return new Oa(116*g-16,500*(f-g),200*(g-Pa((.0193339*c+.119192*d+.9503041*e)/yk)),a.opacity)}function Na(a,b,c,d){return 1===arguments.length?Ma(a):new Oa(a,b,c,null==d?1:d)}function Oa(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function Pa(a){return a>Ck?Math.pow(a,1/3):a/Bk+zk}function Qa(a){return a>Ak?a*a*a:Bk*(a-zk)}function Ra(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Sa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ta(a,b,c,d){return 1===arguments.length?function(a){if(a instanceof Ua)return new Ua(a.h,a.c,a.l,a.opacity);a instanceof Oa||(a=Ma(a));var b=Math.atan2(a.b,a.a)*vk;return new Ua(b<0?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}(a):new Ua(a,b,c,null==d?1:d)}function Ua(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function Va(a,b,c,d){return 1===arguments.length?function(a){if(a instanceof Wa)return new Wa(a.h,a.s,a.l,a.opacity);a instanceof Ha||(a=Fa(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(Ik*d+Gk*b-Hk*c)/(Ik+Gk-Hk),f=d-e,g=(Fk*(c-e)-Dk*f)/Ek,h=Math.sqrt(g*g+f*f)/(Fk*e*(1-e)),i=h?Math.atan2(g,f)*vk-120:NaN;return new Wa(i<0?i+360:i,h,e,a.opacity)}(a):new Wa(a,b,c,null==d?1:d)}function Wa(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Xa(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function Ya(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return Xa((c-d/b)*b,g,e,f,h)}}function Za(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return Xa((c-d/b)*b,e,f,g,h)}}function $a(a){return function(){return a}}function _a(a,b){return function(c){return a+c*b}}function ab(a,b){var c=b-a;return c?_a(a,c>180||c<-180?c-360*Math.round(c/360):c):$a(isNaN(a)?b:a)}function bb(a){return 1==(a=+a)?cb:function(b,c){return c-b?function(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}(b,c,a):$a(isNaN(b)?c:b)}}function cb(a,b){var c=b-a;return c?_a(a,c):$a(isNaN(a)?b:a)}function db(a){return function(b){var c,d,e=b.length,f=new Array(e),g=new Array(e),h=new Array(e);for(c=0;c<e;++c)d=Ga(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}function eb(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=new Array(e),g=new Array(d);for(c=0;c<e;++c)f[c]=jb(a[c],b[c]);for(;c<d;++c)g[c]=b[c];return function(a){for(c=0;c<e;++c)g[c]=f[c](a);return g}}function fb(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}}function gb(a,b){return a=+a,b-=a,function(c){return a+b*c}}function hb(a,b){var c,d={},e={};null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={});for(c in b)c in a?d[c]=jb(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}}function ib(a,b){var c,d,e,f=Sk.lastIndex=Tk.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=Sk.exec(a))&&(d=Tk.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:gb(c,d)})),f=Tk.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?function(a){return function(b){return a(b)+""}}(i[0].x):function(a){return function(){return a}}(b):(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function jb(a,b){var c,d=typeof b;return null==b||"boolean"===d?$a(b):("number"===d?gb:"string"===d?(c=Ca(b))?(b=c,Pk):ib:b instanceof Ca?Pk:b instanceof Date?fb:Array.isArray(b)?eb:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?hb:gb)(a,b)}function kb(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}}function lb(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*Uk,skewX:Math.atan(i)*Uk,scaleX:g,scaleY:h}}function mb(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var h=[],i=[];return f=a(f),g=a(g),function(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:gb(a,e)},{i:i-2,x:gb(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}(f.translateX,f.translateY,g.translateX,g.translateY,h,i),function(a,b,c,f){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:gb(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}(f.rotate,g.rotate,h,i),function(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:gb(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}(f.skewX,g.skewX,h,i),function(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:gb(a,c)},{i:h-2,x:gb(b,d)})}else 1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,h,i),f=g=null,function(a){for(var b,c=-1,d=i.length;++c<d;)h[(b=i[c]).i]=b.x(a);return h.join("")}}}function nb(a){return((a=Math.exp(a))+1/a)/2}function ob(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<_k)d=Math.log(j/g)/Yk,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Yk*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+$k*m)/(2*g*Zk*n),p=(j*j-g*g-$k*m)/(2*j*Zk*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Yk,c=function(a){var b=a*d,c=nb(q),h=g/(Zk*n)*(c*function(a){return((a=Math.exp(2*a))-1)/(a+1)}(Yk*b+q)-function(a){return((a=Math.exp(a))-1/a)/2}(q));return[e+h*k,f+h*l,g*c/nb(Yk*b+q)]}}return c.duration=1e3*d,c}function pb(a){return function(b,c){var d=a((b=Ja(b)).h,(c=Ja(c)).h),e=cb(b.s,c.s),f=cb(b.l,c.l),g=cb(b.opacity,c.opacity);return function(a){return b.h=d(a),b.s=e(a),b.l=f(a),b.opacity=g(a),b+""}}}function qb(a){return function(b,c){var d=a((b=Ta(b)).h,(c=Ta(c)).h),e=cb(b.c,c.c),f=cb(b.l,c.l),g=cb(b.opacity,c.opacity);return function(a){return b.h=d(a),b.c=e(a),b.l=f(a),b.opacity=g(a),b+""}}}function rb(a){return function b(c){function d(b,d){var e=a((b=Va(b)).h,(d=Va(d)).h),f=cb(b.s,d.s),g=cb(b.l,d.l),h=cb(b.opacity,d.opacity);return function(a){return b.h=e(a),b.s=f(a),b.l=g(Math.pow(a,c)),b.opacity=h(a),b+""}}return c=+c,d.gamma=b,d}(1)}function sb(){return ll||(ol(tb),ll=nl.now()+ml)}function tb(){ll=0}function ub(){this._call=this._time=this._next=null}function vb(a,b,c){var d=new ub;return d.restart(a,b,c),d}function wb(){sb(),++gl;for(var a,b=Nk;b;)(a=ll-b._time)>=0&&b._call.call(null,a),b=b._next;--gl}function xb(){ll=(kl=nl.now())+ml,gl=hl=0;try{wb()}finally{gl=0,function(){for(var a,b,c=Nk,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:Nk=b);Ok=a,zb(d)}(),ll=0}}function yb(){var a=nl.now(),b=a-kl;b>jl&&(ml-=b,kl=a)}function zb(a){gl||(hl&&(hl=clearTimeout(hl)),a-ll>24?(a<1/0&&(hl=setTimeout(xb,a-nl.now()-ml)),il&&(il=clearInterval(il))):(il||(kl=nl.now(),il=setInterval(yb,jl)),gl=1,ol(xb)))}function Ab(a,b,c){var d=new ub;return b=null==b?0:+b,d.restart(function(c){d.stop(),a(c+b)},b,c),d}function Bb(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};!function(a,b,c){function d(i){var j,k,l,m;if(c.state!==sl)return f();for(j in h)if((m=h[j]).name===c.name){if(m.state===ul)return Ab(d);m.state===vl?(m.state=xl,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete h[j]):+j<b&&(m.state=xl,m.timer.stop(),delete h[j])}if(Ab(function(){c.state===ul&&(c.state=vl,c.timer.restart(e,c.delay,c.time),e(i))}),c.state=tl,c.on.call("start",a,a.__data__,c.index,c.group),c.state===tl){for(c.state=ul,g=new Array(l=c.tween.length),j=0,k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(g[++k]=m);g.length=k+1}}function e(b){for(var d=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(f),c.state=wl,1),e=-1,h=g.length;++e<h;)g[e].call(null,d);c.state===wl&&(c.on.call("end",a,a.__data__,c.index,c.group),f())}function f(){c.state=xl,c.timer.stop(),delete h[b];for(var d in h)return;delete a.__transition}var g,h=a.__transition;h[b]=c,c.timer=vb(function(a){c.state=sl,c.timer.restart(d,c.delay,c.time),c.delay<=a&&d(a-c.delay)},0,c.time)}(a,c,{name:b,index:d,group:e,on:pl,tween:ql,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:rl})}function Cb(a,b){var c=Eb(a,b);if(c.state>rl)throw new Error("too late; already scheduled");return c}function Db(a,b){var c=Eb(a,b);if(c.state>tl)throw new Error("too late; already started");return c}function Eb(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw new Error("transition not found");return c}function Fb(a,b){var c,d,e,f=a.__transition,g=!0;if(f){b=null==b?null:b+"";for(e in f)(c=f[e]).name===b?(d=c.state>tl&&c.state<wl,c.state=xl,c.timer.stop(),d&&c.on.call("interrupt",a,a.__data__,c.index,c.group),delete f[e]):g=!1;g&&delete a.__transition}}function Gb(a,b,c){var d=a._id;return a.each(function(){var a=Db(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return Eb(a,d).value[b]}}function Hb(a,b){var c;return("number"==typeof b?gb:b instanceof Ca?Pk:(c=Ca(b))?(b=c,Pk):ib)(a,b)}function Ib(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}function Jb(a){return ha().transition(a)}function Kb(){return++zl}function Lb(a){return((a*=2)<=1?a*a:--a*(2-a)+1)/2}function Mb(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}function Nb(a){return(1-Math.cos(El*a))/2}function Ob(a){return((a*=2)<=1?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function Pb(a){return((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function Qb(a){return(a=+a)<Gl?Pl*a*a:a<Il?Pl*(a-=Hl)*a+Jl:a<Ll?Pl*(a-=Kl)*a+Ml:Pl*(a-=Nl)*a+Ol}function Rb(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))return Xl.time=sb(),Xl;return c}function Sb(a){return function(){return a}}function Tb(){a.event.stopImmediatePropagation()}function Ub(){a.event.preventDefault(),a.event.stopImmediatePropagation()}function Vb(a){return{type:a}}function Wb(){return!a.event.button}function Xb(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function Yb(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function Zb(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function $b(b){function c(a){var c=a.property("__brush",h).selectAll(".overlay").data([Vb("overlay")]);c.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",em.overlay).merge(c).each(function(){var a=Yb(this).extent;ia(this).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1])}),a.selectAll(".selection").data([Vb("selection")]).enter().append("rect").attr("class","selection").attr("cursor",em.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var e=a.selectAll(".handle").data(b.handles,function(a){return a.type});e.exit().remove(),e.enter().append("rect").attr("class",function(a){return"handle handle--"+a.type}).attr("cursor",function(a){return em[a.type]}),a.each(d).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",g)}function d(){var a=ia(this),b=Yb(this).selection;b?(a.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),a.selectAll(".handle").style("display",null).attr("x",function(a){return"e"===a.type[a.type.length-1]?b[1][0]-m/2:b[0][0]-m/2}).attr("y",function(a){return"s"===a.type[0]?b[1][1]-m/2:b[0][1]-m/2}).attr("width",function(a){return"n"===a.type||"s"===a.type?b[1][0]-b[0][0]+m:m}).attr("height",function(a){return"e"===a.type||"w"===a.type?b[1][1]-b[0][1]+m:m})):a.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function e(a,b){return a.__brush.emitter||new f(a,b)}function f(a,b){this.that=a,this.args=b,this.state=a.__brush,this.active=0}function g(){function c(){var a=na(w);!I||u||v||(Math.abs(a[0]-K[0])>Math.abs(a[1]-K[1])?v=!0:u=!0),K=a,t=!0,Ub(),f()}function f(){var a;switch(r=K[0]-J[0],s=K[1]-J[1],y){case $l:case Zl:z&&(r=Math.max(E-h,Math.min(G-n,r)),j=h+r,o=n+r),A&&(s=Math.max(F-l,Math.min(H-p,s)),m=l+s,q=p+s);break;case _l:z<0?(r=Math.max(E-h,Math.min(G-h,r)),j=h+r,o=n):z>0&&(r=Math.max(E-n,Math.min(G-n,r)),j=h,o=n+r),A<0?(s=Math.max(F-l,Math.min(H-l,s)),m=l+s,q=p):A>0&&(s=Math.max(F-p,Math.min(H-p,s)),m=l,q=p+s);break;case am:z&&(j=Math.max(E,Math.min(G,h-r*z)),o=Math.max(E,Math.min(G,n+r*z))),A&&(m=Math.max(F,Math.min(H,l-s*A)),q=Math.max(F,Math.min(H,p+s*A)))}o<j&&(z*=-1,a=h,h=n,n=a,a=j,j=o,o=a,x in fm&&N.attr("cursor",em[x=fm[x]])),q<m&&(A*=-1,a=l,l=p,p=a,a=m,m=q,q=a,x in gm&&N.attr("cursor",em[x=gm[x]])),B.selection&&(D=B.selection),u&&(j=D[0][0],o=D[1][0]),v&&(m=D[0][1],q=D[1][1]),D[0][0]===j&&D[0][1]===m&&D[1][0]===o&&D[1][1]===q||(B.selection=[[j,m],[o,q]],d.call(w),L.brush())}function g(){if(Tb(),a.event.touches){if(a.event.touches.length)return;i&&clearTimeout(i),i=setTimeout(function(){i=null},500),M.on("touchmove.brush touchend.brush touchcancel.brush",null)}else sa(a.event.view,t),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),N.attr("cursor",em.overlay),B.selection&&(D=B.selection),Zb(D)&&(B.selection=null,d.call(w)),L.end()}if(a.event.touches){if(a.event.changedTouches.length<a.event.touches.length)return Ub()}else if(i)return
;if(k.apply(this,arguments)){var h,j,l,m,n,o,p,q,r,s,t,u,v,w=this,x=a.event.target.__data__.type,y="selection"===(a.event.metaKey?x="overlay":x)?Zl:a.event.altKey?am:_l,z=b===cm?null:hm[x],A=b===bm?null:im[x],B=Yb(w),C=B.extent,D=B.selection,E=C[0][0],F=C[0][1],G=C[1][0],H=C[1][1],I=z&&A&&a.event.shiftKey,J=na(w),K=J,L=e(w,arguments).beforestart();"overlay"===x?B.selection=D=[[h=b===cm?E:J[0],l=b===bm?F:J[1]],[n=b===cm?G:h,p=b===bm?H:l]]:(h=D[0][0],l=D[0][1],n=D[1][0],p=D[1][1]),j=h,m=l,o=n,q=p;var M=ia(w).attr("pointer-events","none"),N=M.selectAll(".overlay").attr("cursor",em[x]);if(a.event.touches)M.on("touchmove.brush",c,!0).on("touchend.brush touchcancel.brush",g,!0);else{var O=ia(a.event.view).on("keydown.brush",function(){switch(a.event.keyCode){case 16:I=z&&A;break;case 18:y===_l&&(z&&(n=o-r*z,h=j+r*z),A&&(p=q-s*A,l=m+s*A),y=am,f());break;case 32:y!==_l&&y!==am||(z<0?n=o-r:z>0&&(h=j-r),A<0?p=q-s:A>0&&(l=m-s),y=$l,N.attr("cursor",em.selection),f());break;default:return}Ub()},!0).on("keyup.brush",function(){switch(a.event.keyCode){case 16:I&&(u=v=I=!1,f());break;case 18:y===am&&(z<0?n=o:z>0&&(h=j),A<0?p=q:A>0&&(l=m),y=_l,f());break;case 32:y===$l&&(a.event.altKey?(z&&(n=o-r*z,h=j+r*z),A&&(p=q-s*A,l=m+s*A),y=am):(z<0?n=o:z>0&&(h=j),A<0?p=q:A>0&&(l=m),y=_l),N.attr("cursor",em[x]),f());break;default:return}Ub()},!0).on("mousemove.brush",c,!0).on("mouseup.brush",g,!0);ra(a.event.view)}Tb(),Fb(w),d.call(w),L.start()}}function h(){var a=this.__brush||{selection:null};return a.extent=j.apply(this,arguments),a.dim=b,a}var i,j=Xb,k=Wb,l=z(c,"start","brush","end"),m=6;return c.move=function(a,c){a.selection?a.on("start.brush",function(){e(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){e(this,arguments).end()}).tween("brush",function(){function a(a){g.selection=1===a&&Zb(j)?null:k(a),d.call(f),h.brush()}var f=this,g=f.__brush,h=e(f,arguments),i=g.selection,j=b.input("function"==typeof c?c.apply(this,arguments):c,g.extent),k=jb(i,j);return i&&j?a:a(1)}):a.each(function(){var a=arguments,f=this.__brush,g=b.input("function"==typeof c?c.apply(this,a):c,f.extent),h=e(this,a).beforestart();Fb(this),f.selection=null==g||Zb(g)?null:g,d.call(this),h.start().brush().end()})},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(a){ea(new function(a,b,c){this.target=a,this.type=b,this.selection=c}(c,a,b.output(this.state.selection)),l.apply,l,[a,this.that,this.args])}},c.extent=function(a){return arguments.length?(j="function"==typeof a?a:Sb([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),c):j},c.filter=function(a){return arguments.length?(k="function"==typeof a?a:Sb(!!a),c):k},c.handleSize=function(a){return arguments.length?(m=+a,c):m},c.on=function(){var a=l.on.apply(l,arguments);return a===l?c:a},c}function _b(a){return function(){return a}}function ac(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bc(){return new ac}function cc(a){return a.source}function dc(a){return a.target}function ec(a){return a.radius}function fc(a){return a.startAngle}function gc(a){return a.endAngle}function hc(){}function ic(a,b){var c=new hc;if(a instanceof hc)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(null==b)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b(d=a[e],e,a),d)}else if(a)for(var g in a)c.set(g,a[g]);return c}function jc(){return{}}function kc(a,b,c){a[b]=c}function lc(){return ic()}function mc(a,b,c){a.set(b,c)}function nc(){}function oc(a,b){var c=new nc;if(a instanceof nc)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}function pc(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function qc(a){function b(a,b){function c(){if(j)return vm;if(k)return k=!1,um;var b,c,d=h;if(a.charCodeAt(d)===wm){for(;h++<g&&a.charCodeAt(h)!==wm||a.charCodeAt(++h)===wm;);return(b=h)>=g?j=!0:(c=a.charCodeAt(h++))===xm?k=!0:c===ym&&(k=!0,a.charCodeAt(h)===xm&&++h),a.slice(d+1,b-1).replace(/""/g,'"')}for(;h<g;){if((c=a.charCodeAt(b=h++))===xm)k=!0;else if(c===ym)k=!0,a.charCodeAt(h)===xm&&++h;else if(c!==f)continue;return a.slice(d,b)}return j=!0,a.slice(d,g)}var d,e=[],g=a.length,h=0,i=0,j=g<=0,k=!1;for(a.charCodeAt(g-1)===xm&&--g,a.charCodeAt(g-1)===ym&&--g;(d=c())!==vm;){for(var l=[];d!==um&&d!==vm;)l.push(d),d=c();b&&null==(l=b(l,i++))||e.push(l)}return e}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);return{parse:function(a,c){var d,e,f=b(a,function(a,b){if(d)return d(a,b-1);e=a,d=c?function(a,b){var c=pc(a);return function(d,e){return b(c(d),e,a)}}(a,c):pc(a)});return f.columns=e||[],f},parseRows:b,format:function(b,c){return null==c&&(c=function(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}(b)),[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function rc(a){return function(){return a}}function sc(){return 1e-6*(Math.random()-.5)}function tc(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,f,g,h,i,j,k,l,m,n=a._root,o={data:d},p=a._x0,q=a._y0,r=a._x1,s=a._y1;if(!n)return a._root=o,a;for(;n.length;)if((j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g,e=n,!(n=n[l=k<<1|j]))return e[l]=o,a;if(h=+a._x.call(null,n.data),i=+a._y.call(null,n.data),b===h&&c===i)return o.next=n,e?e[l]=o:a._root=o,a;do{e=e?e[l]=new Array(4):a._root=new Array(4),(j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g}while((l=k<<1|j)==(m=(i>=g)<<1|h>=f));return e[m]=n,e[l]=o,a}function uc(a,b,c,d,e){this.node=a,this.x0=b,this.y0=c,this.x1=d,this.y1=e}function vc(a){return a[0]}function wc(a){return a[1]}function xc(a,b,c){var d=new yc(null==b?vc:b,null==c?wc:c,NaN,NaN,NaN,NaN);return null==a?d:d.addAll(a)}function yc(a,b,c,d,e,f){this._x=a,this._y=b,this._x0=c,this._y0=d,this._x1=e,this._y1=f,this._root=void 0}function zc(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}function Ac(a){return a.x+a.vx}function Bc(a){return a.y+a.vy}function Cc(a){return a.index}function Dc(a,b){var c=a.get(b);if(!c)throw new Error("missing: "+b);return c}function Ec(a){return a.x}function Fc(a){return a.y}function Gc(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function Hc(a){return(a=Gc(Math.abs(a)))?a[1]:NaN}function Ic(a,b){var c=Gc(a,b);if(!c)return a+"";var d=c[0],e=c[1];return e<0?"0."+new Array(-e).join("0")+d:d.length>e+1?d.slice(0,e+1)+"."+d.slice(e+1):d+new Array(e-d.length+2).join("0")}function Jc(a){return new Kc(a)}function Kc(a){if(!(b=Om.exec(a)))throw new Error("invalid format: "+a);var b,c=b[1]||" ",d=b[2]||">",e=b[3]||"-",f=b[4]||"",g=!!b[5],h=b[6]&&+b[6],i=!!b[7],j=b[8]&&+b[8].slice(1),k=b[9]||"";"n"===k?(i=!0,k="g"):Nm[k]||(k=""),(g||"0"===c&&"="===d)&&(g=!0,c="0",d="="),this.fill=c,this.align=d,this.sign=e,this.symbol=f,this.zero=g,this.width=h,this.comma=i,this.precision=j,this.type=k}function Lc(a){return a}function Mc(a){function b(a){function b(a){var b,d,g,k=q,u=r;if("c"===p)u=s(a)+u,a="";else{var v=(a=+a)<0;if(a=s(Math.abs(a),o),v&&0==+a&&(v=!1),k=(v?"("===j?j:"-":"-"===j||"("===j?"":j)+k,u=("s"===p?Qm[8+Km/3]:"")+u+(v&&"("===j?")":""),t)for(b=-1,d=a.length;++b<d;)if(48>(g=a.charCodeAt(b))||g>57){u=(46===g?e+a.slice(b+1):a.slice(b))+u,a=a.slice(0,b);break}}n&&!l&&(a=c(a,1/0));var w=k.length+a.length+u.length,x=w<m?new Array(m-w+1).join(h):"";switch(n&&l&&(a=c(x+a,x.length?m-u.length:1/0),x=""),i){case"<":a=k+a+u+x;break;case"=":a=k+x+a+u;break;case"^":a=x.slice(0,w=x.length>>1)+k+a+u+x.slice(w);break;default:a=x+k+a+u}return f(a)}var h=(a=Jc(a)).fill,i=a.align,j=a.sign,k=a.symbol,l=a.zero,m=a.width,n=a.comma,o=a.precision,p=a.type,q="$"===k?d[0]:"#"===k&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",r="$"===k?d[1]:/[%p]/.test(p)?g:"",s=Nm[p],t=!p||/[defgprs%]/.test(p);return o=null==o?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,o)):Math.max(0,Math.min(20,o)),b.toString=function(){return a+""},b}var c=a.grouping&&a.thousands?function(a,b){return function(c,d){for(var e=c.length,f=[],g=0,h=a[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(c.substring(e-=h,e+h)),!((i+=h+1)>d));)h=a[g=(g+1)%a.length];return f.reverse().join(b)}}(a.grouping,a.thousands):Lc,d=a.currency,e=a.decimal,f=a.numerals?function(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}(a.numerals):Lc,g=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Jc(a),a.type="f",a)),e=3*Math.max(-8,Math.min(8,Math.floor(Hc(c)/3))),f=Math.pow(10,-e),g=Qm[8+e/3];return function(a){return d(f*a)+g}}}}function Nc(b){return Pm=Mc(b),a.format=Pm.format,a.formatPrefix=Pm.formatPrefix,Pm}function Oc(a){return Math.max(0,-Hc(Math.abs(a)))}function Pc(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hc(b)/3)))-Hc(Math.abs(a)))}function Qc(a,b){return a=Math.abs(a),b=Math.abs(b)-a,Math.max(0,Hc(b)-Hc(a))+1}function Rc(){return new Sc}function Sc(){this.reset()}function Tc(a,b,c){var d=a.s=b+c,e=d-b,f=d-e;a.t=b-f+(c-e)}function Uc(a){return a>1?0:a<-1?xn:Math.acos(a)}function Vc(a){return a>1?yn:a<-1?-yn:Math.asin(a)}function Wc(a){return(a=Ln(a/2))*a}function Xc(){}function Yc(a,b){a&&Qn.hasOwnProperty(a.type)&&Qn[a.type](a,b)}function Zc(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function $c(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Zc(a[c],b,1);b.polygonEnd()}function _c(a,b){a&&Pn.hasOwnProperty(a.type)?Pn[a.type](a,b):Yc(a,b)}function ad(){Tn.point=cd}function bd(){dd(Rm,Sm)}function cd(a,b){Tn.point=dd,Rm=a,Sm=b,Tm=a*=Cn,Um=Gn(b=(b*=Cn)/2+zn),Vm=Ln(b)}function dd(a,b){b=(b*=Cn)/2+zn;var c=(a*=Cn)-Tm,d=c>=0?1:-1,e=d*c,f=Gn(b),g=Ln(b),h=Vm*g,i=Um*f+h*Gn(e),j=h*d*Ln(e);Rn.add(Fn(j,i)),Tm=a,Um=f,Vm=g}function ed(a){return[Fn(a[1],a[0]),Vc(a[2])]}function fd(a){var b=a[0],c=a[1],d=Gn(c);return[d*Gn(b),d*Ln(b),Ln(c)]}function gd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function hd(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function id(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function jd(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function kd(a){var b=Nn(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function ld(a,b){cn.push(dn=[Wm=a,Ym=a]),b<Xm&&(Xm=b),b>Zm&&(Zm=b)}function md(a,b){var c=fd([a*Cn,b*Cn]);if(bn){var d=hd(bn,c),e=hd([d[1],-d[0],0],d);kd(e),e=ed(e);var f,g=a-$m,h=g>0?1:-1,i=e[0]*Bn*h,j=Dn(g)>180;j^(h*$m<i&&i<h*a)?(f=e[1]*Bn)>Zm&&(Zm=f):(i=(i+360)%360-180,j^(h*$m<i&&i<h*a)?(f=-e[1]*Bn)<Xm&&(Xm=f):(b<Xm&&(Xm=b),b>Zm&&(Zm=b))),j?a<$m?sd(Wm,a)>sd(Wm,Ym)&&(Ym=a):sd(a,Ym)>sd(Wm,Ym)&&(Wm=a):Ym>=Wm?(a<Wm&&(Wm=a),a>Ym&&(Ym=a)):a>$m?sd(Wm,a)>sd(Wm,Ym)&&(Ym=a):sd(a,Ym)>sd(Wm,Ym)&&(Wm=a)}else cn.push(dn=[Wm=a,Ym=a]);b<Xm&&(Xm=b),b>Zm&&(Zm=b),bn=c,$m=a}function nd(){Vn.point=md}function od(){dn[0]=Wm,dn[1]=Ym,Vn.point=ld,bn=null}function pd(a,b){if(bn){var c=a-$m;Un.add(Dn(c)>180?c+(c>0?360:-360):c)}else _m=a,an=b;Tn.point(a,b),md(a,b)}function qd(){Tn.lineStart()}function rd(){pd(_m,an),Tn.lineEnd(),Dn(Un)>wn&&(Wm=-(Ym=180)),dn[0]=Wm,dn[1]=Ym,bn=null}function sd(a,b){return(b-=a)<0?b+360:b}function td(a,b){return a[0]-b[0]}function ud(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function vd(a,b){a*=Cn;var c=Gn(b*=Cn);wd(c*Gn(a),c*Ln(a),Ln(b))}function wd(a,b,c){gn+=(a-gn)/++en,hn+=(b-hn)/en,jn+=(c-jn)/en}function xd(){Wn.point=yd}function yd(a,b){a*=Cn;var c=Gn(b*=Cn);sn=c*Gn(a),tn=c*Ln(a),un=Ln(b),Wn.point=zd,wd(sn,tn,un)}function zd(a,b){a*=Cn;var c=Gn(b*=Cn),d=c*Gn(a),e=c*Ln(a),f=Ln(b),g=Fn(Nn((g=tn*f-un*e)*g+(g=un*d-sn*f)*g+(g=sn*e-tn*d)*g),sn*d+tn*e+un*f);fn+=g,kn+=g*(sn+(sn=d)),ln+=g*(tn+(tn=e)),mn+=g*(un+(un=f)),wd(sn,tn,un)}function Ad(){Wn.point=vd}function Bd(){Wn.point=Dd}function Cd(){Ed(qn,rn),Wn.point=vd}function Dd(a,b){qn=a,rn=b,a*=Cn,b*=Cn,Wn.point=Ed;var c=Gn(b);sn=c*Gn(a),tn=c*Ln(a),un=Ln(b),wd(sn,tn,un)}function Ed(a,b){a*=Cn;var c=Gn(b*=Cn),d=c*Gn(a),e=c*Ln(a),f=Ln(b),g=tn*f-un*e,h=un*d-sn*f,i=sn*e-tn*d,j=Nn(g*g+h*h+i*i),k=Vc(j),l=j&&-k/j;nn+=l*g,on+=l*h,pn+=l*i,fn+=k,kn+=k*(sn+(sn=d)),ln+=k*(tn+(tn=e)),mn+=k*(un+(un=f)),wd(sn,tn,un)}function Fd(a){return function(){return a}}function Gd(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return(c=b.invert(c,d))&&a.invert(c[0],c[1])}),c}function Hd(a,b){return[a>xn?a-An:a<-xn?a+An:a,b]}function Id(a,b,c){return(a%=An)?b||c?Gd(Kd(a),Ld(b,c)):Kd(a):b||c?Ld(b,c):Hd}function Jd(a){return function(b,c){return b+=a,[b>xn?b-An:b<-xn?b+An:b,c]}}function Kd(a){var b=Jd(a);return b.invert=Jd(-a),b}function Ld(a,b){function c(a,b){var c=Gn(b),h=Gn(a)*c,i=Ln(a)*c,j=Ln(b),k=j*d+h*e;return[Fn(i*f-k*g,h*d-j*e),Vc(k*f+i*g)]}var d=Gn(a),e=Ln(a),f=Gn(b),g=Ln(b);return c.invert=function(a,b){var c=Gn(b),h=Gn(a)*c,i=Ln(a)*c,j=Ln(b),k=j*f-i*g;return[Fn(i*f+j*g,h*d+k*e),Vc(k*d-h*e)]},c}function Md(a){function b(b){return b=a(b[0]*Cn,b[1]*Cn),b[0]*=Bn,b[1]*=Bn,b}return a=Id(a[0]*Cn,a[1]*Cn,a.length>2?a[2]*Cn:0),b.invert=function(b){return b=a.invert(b[0]*Cn,b[1]*Cn),b[0]*=Bn,b[1]*=Bn,b},b}function Nd(a,b,c,d,e,f){if(c){var g=Gn(b),h=Ln(b),i=d*c;null==e?(e=b+d*An,f=b-i/2):(e=Od(g,e),f=Od(g,f),(d>0?e<f:e>f)&&(e+=d*An));for(var j,k=e;d>0?k>f:k<f;k-=i)j=ed([g,-h*Gn(k),-h*Ln(k)]),a.point(j[0],j[1])}}function Od(a,b){(b=fd(b))[0]-=a,kd(b);var c=Uc(-b[1]);return((-b[2]<0?-c:c)+An-wn)%An}function Pd(){var a,b=[];return{point:function(b,c){a.push([b,c])},lineStart:function(){b.push(a=[])},lineEnd:Xc,rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))},result:function(){var c=b;return b=[],a=null,c}}}function Qd(a,b){return Dn(a[0]-b[0])<wn&&Dn(a[1]-b[1])<wn}function Rd(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Sd(a,b,c,d,e){var f,g,h=[],i=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c,d=a[0],g=a[b];if(Qd(d,g)){for(e.lineStart(),f=0;f<b;++f)e.point((d=a[f])[0],d[1]);e.lineEnd()}else h.push(c=new Rd(d,a,null,!0)),i.push(c.o=new Rd(d,null,c,!1)),h.push(c=new Rd(g,a,null,!1)),i.push(c.o=new Rd(g,null,c,!0))}}),h.length){for(i.sort(b),Td(h),Td(i),f=0,g=i.length;f<g;++f)i[f].e=c=!c;for(var j,k,l=h[0];;){for(var m=l,n=!0;m.v;)if((m=m.n)===l)return;j=m.z,e.lineStart();do{if(m.v=m.o.v=!0,m.e){if(n)for(f=0,g=j.length;f<g;++f)e.point((k=j[f])[0],k[1]);else d(m.x,m.n.x,1,e);m=m.n}else{if(n)for(j=m.p.z,f=j.length-1;f>=0;--f)e.point((k=j[f])[0],k[1]);else d(m.x,m.p.x,-1,e);m=m.p}j=(m=m.o).z,n=!n}while(!m.v);e.lineEnd()}}}function Td(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Ud(a,b){var c=b[0],d=b[1],e=[Ln(c),-Gn(c),0],f=0,g=0;ho.reset();for(var h=0,i=a.length;h<i;++h)if(k=(j=a[h]).length)for(var j,k,l=j[k-1],m=l[0],n=l[1]/2+zn,o=Ln(n),p=Gn(n),q=0;q<k;++q,m=s,o=u,p=v,l=r){var r=j[q],s=r[0],t=r[1]/2+zn,u=Ln(t),v=Gn(t),w=s-m,x=w>=0?1:-1,y=x*w,z=y>xn,A=o*u;if(ho.add(Fn(A*x*Ln(y),p*v+A*Gn(y))),f+=z?w+x*An:w,z^m>=c^s>=c){var B=hd(fd(l),fd(r));kd(B);var C=hd(e,B);kd(C);var D=(z^w>=0?-1:1)*Vc(C[2]);(d>D||d===D&&(B[0]||B[1]))&&(g+=z^w>=0?1:-1)}}return(f<-wn||f<wn&&ho<-wn)^1&g}function Vd(a,b,c,d){return function(e){function f(b,c){a(b,c)&&e.point(b,c)}function g(a,b){p.point(a,b)}function h(){u.point=g,p.lineStart()}function i(){u.point=f,p.lineEnd()}function j(a,b){o.push([a,b]),s.point(a,b)}function k(){s.lineStart(),o=[]}function l(){j(o[0][0],o[0][1]),s.lineEnd();var a,b,c,d,f=s.clean(),g=r.result(),h=g.length;if(o.pop(),m.push(o),o=null,h)if(1&f){if(c=g[0],(b=c.length-1)>0){for(t||(e.polygonStart(),t=!0),e.lineStart(),a=0;a<b;++a)e.point((d=c[a])[0],d[1]);e.lineEnd()}}else h>1&&2&f&&g.push(g.pop().concat(g.shift())),n.push(g.filter(Wd))}var m,n,o,p=b(e),r=Pd(),s=b(r),t=!1,u={point:f,lineStart:h,lineEnd:i,polygonStart:function(){u.point=j,u.lineStart=k,u.lineEnd=l,n=[],m=[]},polygonEnd:function(){u.point=f,u.lineStart=h,u.lineEnd=i,n=q(n);var a=Ud(m,d);n.length?(t||(e.polygonStart(),t=!0),Sd(n,Xd,a,c,e)):a&&(t||(e.polygonStart(),t=!0),e.lineStart(),c(null,null,1,e),e.lineEnd()),t&&(e.polygonEnd(),t=!1),n=m=null},sphere:function(){e.polygonStart(),e.lineStart(),c(null,null,1,e),e.lineEnd(),e.polygonEnd()}};return u}}function Wd(a){return a.length>1}function Xd(a,b){return((a=a.x)[0]<0?a[1]-yn-wn:yn-a[1])-((b=b.x)[0]<0?b[1]-yn-wn:yn-b[1])}function Yd(a){function b(a,b){return Gn(a)*Gn(b)>e}function c(a,b,c){var d=[1,0,0],f=hd(fd(a),fd(b)),g=gd(f,f),h=f[0],i=g-h*h;if(!i)return!c&&a;var j=e*g/i,k=-e*h/i,l=hd(d,f),m=jd(d,j);id(m,jd(f,k));var n=l,o=gd(m,n),p=gd(n,n),q=o*o-p*(gd(m,m)-1);if(!(q<0)){var r=Nn(q),s=jd(n,(-o-r)/p);if(id(s,m),s=ed(s),!c)return s;var t,u=a[0],v=b[0],w=a[1],x=b[1];v<u&&(t=u,u=v,v=t);var y=v-u,z=Dn(y-xn)<wn;if(!z&&x<w&&(t=w,w=x,x=t),z||y<wn?z?w+x>0^s[1]<(Dn(s[0]-u)<wn?w:x):w<=s[1]&&s[1]<=x:y>xn^(u<=s[0]&&s[0]<=v)){var A=jd(n,(-o+r)/p);return id(A,m),[s,ed(A)]}}}function d(b,c){var d=g?a:xn-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var e=Gn(a),f=6*Cn,g=e>0,h=Dn(e)>wn;return Vd(b,function(a){var e,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:d(l,m):p?d(l+(l<0?xn:-xn),m):0;if(!e&&(j=i=p)&&a.lineStart(),p!==i&&(!(n=c(e,o))||Qd(e,n)||Qd(o,n))&&(o[0]+=wn,o[1]+=wn,p=b(o[0],o[1])),p!==i)k=0,p?(a.lineStart(),n=c(o,e),a.point(n[0],n[1])):(n=c(e,o),a.point(n[0],n[1]),a.lineEnd()),e=n;else if(h&&e&&g^p){var r;q&f||!(r=c(o,e,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||e&&Qd(e,o)||a.point(o[0],o[1]),e=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),e=null},clean:function(){return k|(j&&i)<<1}}},function(b,c,d,e){Nd(e,a,f,d,b,c)},g?[0,-a]:[-xn,a-xn])}function Zd(a,b,c,d){function e(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function f(e,f,h,j){var k=0,l=0;if(null==e||(k=g(e,h))!==(l=g(f,h))||i(e,f)<0^h>0)do{j.point(0===k||3===k?a:c,k>1?d:b)}while((k=(k+h+4)%4)!==l);else j.point(f[0],f[1])}function g(d,e){return Dn(d[0]-a)<wn?e>0?0:3:Dn(d[0]-c)<wn?e>0?2:1:Dn(d[1]-b)<wn?e>0?1:0:e>0?3:2}function h(a,b){return i(a.x,b.x)}function i(a,b){var c=g(a,1),d=g(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(g){function i(a,b){e(a,b)&&w.point(a,b)}function j(f,g){var h=e(f,g);if(l&&m.push([f,g]),u)n=f,o=g,p=h,u=!1,h&&(w.lineStart(),w.point(f,g));else if(h&&t)w.point(f,g);else{var i=[r=Math.max(ko,Math.min(jo,r)),s=Math.max(ko,Math.min(jo,s))],j=[f=Math.max(ko,Math.min(jo,f)),g=Math.max(ko,Math.min(jo,g))];!function(a,b,c,d,e,f){var g,h=a[0],i=a[1],j=0,k=1,l=b[0]-h,m=b[1]-i;if(g=c-h,l||!(g>0)){if(g/=l,l<0){if(g<j)return;g<k&&(k=g)}else if(l>0){if(g>k)return;g>j&&(j=g)}if(g=e-h,l||!(g<0)){if(g/=l,l<0){if(g>k)return;g>j&&(j=g)}else if(l>0){if(g<j)return;g<k&&(k=g)}if(g=d-i,m||!(g>0)){if(g/=m,m<0){if(g<j)return;g<k&&(k=g)}else if(m>0){if(g>k)return;g>j&&(j=g)}if(g=f-i,m||!(g<0)){if(g/=m,m<0){if(g>k)return;g>j&&(j=g)}else if(m>0){if(g<j)return;g<k&&(k=g)}return j>0&&(a[0]=h+j*l,a[1]=i+j*m),k<1&&(b[0]=h+k*l,b[1]=i+k*m),!0}}}}}(i,j,a,b,c,d)?h&&(w.lineStart(),w.point(f,g),v=!1):(t||(w.lineStart(),w.point(i[0],i[1])),w.point(j[0],j[1]),h||w.lineEnd(),v=!1)}r=f,s=g,t=h}var k,l,m,n,o,p,r,s,t,u,v,w=g,x=Pd(),y={point:i,lineStart:function(){y.point=j,l&&l.push(m=[]),u=!0,t=!1,r=s=NaN},lineEnd:function(){k&&(j(n,o),p&&t&&x.rejoin(),k.push(x.result())),y.point=i,t&&w.lineEnd()},polygonStart:function(){w=x,k=[],l=[],v=!0},polygonEnd:function(){var b=function(){for(var b=0,c=0,e=l.length;c<e;++c)for(var f,g,h=l[c],i=1,j=h.length,k=h[0],m=k[0],n=k[1];i<j;++i)f=m,g=n,m=(k=h[i])[0],n=k[1],g<=d?n>d&&(m-f)*(d-g)>(n-g)*(a-f)&&++b:n<=d&&(m-f)*(d-g)<(n-g)*(a-f)&&--b;return b}(),c=v&&b,e=(k=q(k)).length;(c||e)&&(g.polygonStart(),c&&(g.lineStart(),f(null,null,1,g),g.lineEnd()),e&&Sd(k,h,b,f,g),g.polygonEnd()),w=g,k=l=m=null}};return y}}function $d(){mo.point=mo.lineEnd=Xc}function _d(a,b){Xn=a*=Cn,Yn=Ln(b*=Cn),Zn=Gn(b),mo.point=ae}function ae(a,b){a*=Cn;var c=Ln(b*=Cn),d=Gn(b),e=Dn(a-Xn),f=Gn(e),g=d*Ln(e),h=Zn*c-Yn*d*f,i=Yn*c+Zn*d*f;lo.add(Fn(Nn(g*g+h*h),i)),Xn=a,Yn=c,Zn=d}function be(a){return lo.reset(),_c(a,mo),+lo}function ce(a,b){return no[0]=a,no[1]=b,be(oo)}function de(a,b){return!(!a||!qo.hasOwnProperty(a.type))&&qo[a.type](a,b)}function ee(a,b){return 0===ce(a,b)}function fe(a,b){var c=ce(a[0],a[1]);return ce(a[0],b)+ce(b,a[1])<=c+wn}function ge(a,b){return!!Ud(a.map(he),ie(b))}function he(a){return(a=a.map(ie)).pop(),a}function ie(a){return[a[0]*Cn,a[1]*Cn]}function je(a,b,c){var d=k(a,b-wn,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function ke(a,b,c){var d=k(a,b-wn,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function le(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return k(Hn(f/r)*r,e,r).map(n).concat(k(Hn(j/s)*s,i,s).map(o)).concat(k(Hn(d/p)*p,c,p).filter(function(a){return Dn(a%r)>wn}).map(l)).concat(k(Hn(h/q)*q,g,q).filter(function(a){return Dn(a%s)>wn}).map(m))}var c,d,e,f,g,h,i,j,l,m,n,o,p=10,q=p,r=90,s=360,t=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[n(f).concat(o(i).slice(1),n(e).reverse().slice(1),o(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.extentMajor(b).extentMinor(b):a.extentMinor()},a.extentMajor=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(t)):[[f,j],[e,i]]},a.extentMinor=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(t)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.stepMajor(b).stepMinor(b):a.stepMinor()},a.stepMajor=function(b){return arguments.length?(r=+b[0],s=+b[1],a):[r,s]},a.stepMinor=function(b){return arguments.length?(p=+b[0],q=+b[1],a):[p,q]},a.precision=function(b){return arguments.length?(t=+b,l=je(h,g,90),m=ke(d,c,t),n=je(j,i,90),o=ke(f,e,t),a):t},a.extentMajor([[-180,-90+wn],[180,90-wn]]).extentMinor([[-180,-80-wn],[180,80+wn]])}function me(a){return a}function ne(){to.point=oe}function oe(a,b){to.point=pe,$n=ao=a,_n=bo=b}function pe(a,b){so.add(bo*a-ao*b),ao=a,bo=b}function qe(){pe($n,_n)}function re(a,b){zo+=a,Ao+=b,++Bo}function se(){Io.point=te}function te(a,b){Io.point=ue,re(fo=a,go=b)}function ue(a,b){var c=a-fo,d=b-go,e=Nn(c*c+d*d);Co+=e*(fo+a)/2,Do+=e*(go+b)/2,Eo+=e,re(fo=a,go=b)}function ve(){Io.point=re}function we(){Io.point=ye}function xe(){ze(co,eo)}function ye(a,b){Io.point=ze,re(co=fo=a,eo=go=b)}function ze(a,b){var c=a-fo,d=b-go,e=Nn(c*c+d*d);Co+=e*(fo+a)/2,Do+=e*(go+b)/2,Eo+=e,Fo+=(e=go*a-fo*b)*(fo+a),Go+=e*(go+b),Ho+=3*e,re(fo=a,go=b)}function Ae(a){this._context=a}function Be(a,b){Po.point=Ce,Ko=Mo=a,Lo=No=b}function Ce(a,b){Mo-=a,No-=b,Oo.add(Nn(Mo*Mo+No*No)),Mo=a,No=b}function De(){this._string=[]}function Ee(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Fe(a){return function(b){var c=new Ge;for(var d in a)c[d]=a[d];return c.stream=b,c}}function Ge(){}function He(a,b,c){var d=a.clipExtent&&a.clipExtent();return a.scale(150).translate([0,0]),null!=d&&a.clipExtent(null),_c(c,a.stream(yo)),b(yo.result()),null!=d&&a.clipExtent(d),a}function Ie(a,b,c){return He(a,function(c){var d=b[1][0]-b[0][0],e=b[1][1]-b[0][1],f=Math.min(d/(c[1][0]-c[0][0]),e/(c[1][1]-c[0][1])),g=+b[0][0]+(d-f*(c[1][0]+c[0][0]))/2,h=+b[0][1]+(e-f*(c[1][1]+c[0][1]))/2;a.scale(150*f).translate([g,h])},c)}function Je(a,b,c){return Ie(a,[[0,0],b],c)}function Ke(a,b,c){return He(a,function(c){var d=+b,e=d/(c[1][0]-c[0][0]),f=(d-e*(c[1][0]+c[0][0]))/2,g=-e*c[0][1];a.scale(150*e).translate([f,g])},c)}function Le(a,b,c){return He(a,function(c){var d=+b,e=d/(c[1][1]-c[0][1]),f=-e*c[0][0],g=(d-e*(c[1][1]+c[0][1]))/2;a.scale(150*e).translate([f,g])},c)}function Me(a,b){return+b?function(a,b){function c(d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j-d,s=k-e,t=r*r+s*s;if(t>4*b&&p--){var u=g+m,v=h+n,w=i+o,x=Nn(u*u+v*v+w*w),y=Vc(w/=x),z=Dn(Dn(w)-1)<wn||Dn(f-l)<wn?(f+l)/2:Fn(v,u),A=a(z,y),B=A[0],C=A[1],D=B-d,E=C-e,F=s*D-r*E;(F*F/t>b||Dn((r*D+s*E)/t-.5)>.3||g*m+h*n+i*o<Ro)&&(c(d,e,f,g,h,i,B,C,z,u/=x,v/=x,w,p,q),q.point(B,C),c(B,C,z,u,v,w,j,k,l,m,n,o,p,q))}}return function(b){function d(c,d){c=a(c,d),b.point(c[0],c[1])}function e(){r=NaN,w.point=f,b.lineStart()}function f(d,e){var f=fd([d,e]),g=a(d,e);c(r,s,q,t,u,v,r=g[0],s=g[1],q=d,t=f[0],u=f[1],v=f[2],Qo,b),b.point(r,s)}function g(){w.point=d,b.lineEnd()}function h(){e(),w.point=i,w.lineEnd=j}function i(a,b){f(k=a,b),l=r,m=s,n=t,o=u,p=v,w.point=f}function j(){c(r,s,q,t,u,v,l,m,k,n,o,p,Qo,b),w.lineEnd=g,g()}var k,l,m,n,o,p,q,r,s,t,u,v,w={point:d,lineStart:e,lineEnd:g,polygonStart:function(){b.polygonStart(),w.lineStart=h},polygonEnd:function(){b.polygonEnd(),w.lineStart=e}};return w}}(a,b):function(a){return Fe({point:function(b,c){b=a(b,c),this.stream.point(b[0],b[1])}})}(a)}function Ne(a){return Oe(function(){return a})()}function Oe(a){function b(a){return a=j(a[0]*Cn,a[1]*Cn),[a[0]*p+g,h-a[1]*p]}function c(a,b){return a=f(a,b),[a[0]*p+g,h-a[1]*p]}function d(){j=Gd(i=Id(u,v,w),f);var a=f(s,t);return g=q-a[0]*p,h=r+a[1]*p,e()}function e(){return n=o=null,b}var f,g,h,i,j,k,l,m,n,o,p=150,q=480,r=250,s=0,t=0,u=0,v=0,w=0,x=null,y=io,z=null,A=me,B=.5,C=Me(c,B);return b.stream=function(a){return n&&o===a?n:n=So(function(a){return Fe({point:function(b,c){var d=a(b,c);return this.stream.point(d[0],d[1])}})}(i)(y(C(A(o=a)))))},b.preclip=function(a){return arguments.length?(y=a,x=void 0,e()):y},b.postclip=function(a){return arguments.length?(A=a,z=k=l=m=null,e()):A},b.clipAngle=function(a){return arguments.length?(y=+a?Yd(x=a*Cn):(x=null,io),e()):x*Bn},b.clipExtent=function(a){return arguments.length?(A=null==a?(z=k=l=m=null,me):Zd(z=+a[0][0],k=+a[0][1],l=+a[1][0],m=+a[1][1]),e()):null==z?null:[[z,k],[l,m]]},b.scale=function(a){return arguments.length?(p=+a,d()):p},b.translate=function(a){return arguments.length?(q=+a[0],r=+a[1],d()):[q,r]},b.center=function(a){return arguments.length?(s=a[0]%360*Cn,t=a[1]%360*Cn,d()):[s*Bn,t*Bn]},b.rotate=function(a){return arguments.length?(u=a[0]%360*Cn,v=a[1]%360*Cn,w=a.length>2?a[2]%360*Cn:0,d()):[u*Bn,v*Bn,w*Bn]},b.precision=function(a){return arguments.length?(C=Me(c,B=a*a),e()):Nn(B)},b.fitExtent=function(a,c){return Ie(b,a,c)},b.fitSize=function(a,c){return Je(b,a,c)},b.fitWidth=function(a,c){return Ke(b,a,c)},b.fitHeight=function(a,c){return Le(b,a,c)},function(){return f=a.apply(this,arguments),b.invert=f.invert&&function(a){return(a=j.invert((a[0]-g)/p,(h-a[1])/p))&&[a[0]*Bn,a[1]*Bn]},d()}}function Pe(a){var b=0,c=xn/3,d=Oe(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Cn,c=a[1]*Cn):[b*Bn,c*Bn]},e}function Qe(a,b){function c(a,b){var c=Nn(f-2*e*Ln(b))/e;return[c*Ln(a*=e),g-c*Gn(a)]}var d=Ln(a),e=(d+Ln(b))/2;if(Dn(e)<wn)return function(a){function b(a,b){return[a*c,Ln(b)/c]}var c=Gn(a);return b.invert=function(a,b){return[a/c,Vc(b*c)]},b}(a);var f=1+d*(2*e-d),g=Nn(f)/e;return c.invert=function(a,b){var c=g-b;return[Fn(a,Dn(c))/e*Mn(c),Vc((f-(a*a+c*c)*e*e)/(2*e))]},c}function Re(){return Pe(Qe).scale(155.424).center([0,33.6442])}function Se(){return Re().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Te(a){return function(b,c){var d=Gn(b),e=Gn(c),f=a(d*e);return[f*e*Ln(b),f*Ln(c)]}}function Ue(a){return function(b,c){var d=Nn(b*b+c*c),e=a(d),f=Ln(e),g=Gn(e);return[Fn(b*f,d*g),Vc(d&&c*f/d)]}}function Ve(a,b){return[a,Jn(On((yn+b)/2))]}function We(a){function b(){var b=xn*h(),g=f(Md(f.rotate()).invert([0,0]));return j(null==k?[[g[0]-b,g[1]-b],[g[0]+b,g[1]+b]]:a===Ve?[[Math.max(g[0]-b,k),c],[Math.min(g[0]+b,d),e]]:[[k,Math.max(g[1]-b,c)],[d,Math.min(g[1]+b,e)]])}var c,d,e,f=Ne(a),g=f.center,h=f.scale,i=f.translate,j=f.clipExtent,k=null;return f.scale=function(a){return arguments.length?(h(a),b()):h()},f.translate=function(a){return arguments.length?(i(a),b()):i()},f.center=function(a){return arguments.length?(g(a),b()):g()},f.clipExtent=function(a){return arguments.length?(null==a?k=c=d=e=null:(k=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),b()):null==k?null:[[k,c],[d,e]]},b()}function Xe(a){return On((yn+a)/2)}function Ye(a,b){function c(a,b){f>0?b<-yn+wn&&(b=-yn+wn):b>yn-wn&&(b=yn-wn);var c=f/Kn(Xe(b),e);return[c*Ln(e*a),f-c*Gn(e*a)]}var d=Gn(a),e=a===b?Ln(a):Jn(d/Gn(b))/Jn(Xe(b)/Xe(a)),f=d*Kn(Xe(a),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=Mn(e)*Nn(a*a+c*c);return[Fn(a,Dn(c))/e*Mn(c),2*En(Kn(f/d,1/e))-yn]},c):Ve}function Ze(a,b){return[a,b]}function $e(a,b){function c(a,b){var c=f-b,d=e*a;return[c*Ln(d),f-c*Gn(d)]}var d=Gn(a),e=a===b?Ln(a):(d-Gn(b))/(b-a),f=d/e+a;return Dn(e)<wn?Ze:(c.invert=function(a,b){var c=f-b;return[Fn(a,Dn(c))/e*Mn(c),f-Mn(e)*Nn(a*a+c*c)]},c)}function _e(a,b){var c=Gn(b),d=Gn(a)*c;return[c*Ln(a)/d,Ln(b)/d]}function af(a,b,c,d){return 1===a&&1===b&&0===c&&0===d?me:Fe({point:function(e,f){this.stream.point(e*a+c,f*b+d)}})}function bf(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791)),b*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))]}function cf(a,b){return[Gn(b)*Ln(a),Ln(b)]}function df(a,b){var c=Gn(b),d=1+Gn(a)*c;return[c*Ln(a)/d,Ln(b)/d]}function ef(a,b){return[Jn(On((yn+b)/2)),-a]}function ff(a,b){return a.parent===b.parent?1:2}function gf(a,b){return a+b.x}function hf(a,b){return Math.max(a,b.y)}function jf(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;--d>=0;)b+=c[d].value;else b=1;a.value=b}function kf(a,b){var c,d,e,f,g,h=new of(a),i=+a.value&&(h.value=a.value),j=[h];for(null==b&&(b=lf);c=j.pop();)if(i&&(c.value=+c.data.value),(e=b(c.data))&&(g=e.length))for(c.children=new Array(g),f=g-1;f>=0;--f)j.push(d=c.children[f]=new of(e[f])),d.parent=c,d.depth=c.depth+1;return h.eachBefore(nf)}function lf(a){return a.children}function mf(a){a.data=a.data.data}function nf(a){var b=0;do{a.height=b}while((a=a.parent)&&a.height<++b)}function of(a){this.data=a,this.depth=this.height=0,this.parent=null}function pf(a){for(var b,c,d=0,e=(a=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a}(Vo.call(a))).length,f=[];d<e;)b=a[d],c&&rf(c,b)?++d:(c=function(a){switch(a.length){case 1:return function(a){return{x:a.x,y:a.y,r:a.r}}(a[0]);case 2:return tf(a[0],a[1]);case 3:return uf(a[0],a[1],a[2])}}(f=function(a,b){var c,d;if(sf(b,a))return[b];for(c=0;c<a.length;++c)if(qf(b,a[c])&&sf(tf(a[c],b),a))return[a[c],b];for(c=0;c<a.length-1;++c)for(d=c+1;d<a.length;++d)if(qf(tf(a[c],a[d]),b)&&qf(tf(a[c],b),a[d])&&qf(tf(a[d],b),a[c])&&sf(uf(a[c],a[d],b),a))return[a[c],a[d],b];throw new Error}(f,b)),d=0);return c}function qf(a,b){var c=a.r-b.r,d=b.x-a.x,e=b.y-a.y;return c<0||c*c<d*d+e*e}function rf(a,b){var c=a.r-b.r+1e-6,d=b.x-a.x,e=b.y-a.y;return c>0&&c*c>d*d+e*e}function sf(a,b){for(var c=0;c<b.length;++c)if(!rf(a,b[c]))return!1;return!0}function tf(a,b){var c=a.x,d=a.y,e=a.r,f=b.x,g=b.y,h=b.r,i=f-c,j=g-d,k=h-e,l=Math.sqrt(i*i+j*j);return{x:(c+f+i/l*k)/2,y:(d+g+j/l*k)/2,r:(l+e+h)/2}}function uf(a,b,c){var d=a.x,e=a.y,f=a.r,g=b.x,h=b.y,i=b.r,j=c.x,k=c.y,l=c.r,m=d-g,n=d-j,o=e-h,p=e-k,q=i-f,r=l-f,s=d*d+e*e-f*f,t=s-g*g-h*h+i*i,u=s-j*j-k*k+l*l,v=n*o-m*p,w=(o*u-p*t)/(2*v)-d,x=(p*q-o*r)/v,y=(n*t-m*u)/(2*v)-e,z=(m*r-n*q)/v,A=x*x+z*z-1,B=2*(f+w*x+y*z),C=w*w+y*y-f*f,D=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{
x:d+w+x*D,y:e+y+z*D,r:D}}function vf(a,b,c){var d=a.x,e=a.y,f=b.r+c.r,g=a.r+c.r,h=b.x-d,i=b.y-e,j=h*h+i*i;if(j){var k=.5+((g*=g)-(f*=f))/(2*j),l=Math.sqrt(Math.max(0,2*f*(g+j)-(g-=j)*g-f*f))/(2*j);c.x=d+k*h+l*i,c.y=e+k*i-l*h}else c.x=d+g,c.y=e}function wf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-1e-6>c*c+d*d}function xf(a){var b=a._,c=a.next._,d=b.r+c.r,e=(b.x*c.r+c.x*b.r)/d,f=(b.y*c.r+c.y*b.r)/d;return e*e+f*f}function yf(a){this._=a,this.next=null,this.previous=null}function zf(a){if(!(e=a.length))return 0;var b,c,d,e,f,g,h,i,j,k,l;if(b=a[0],b.x=0,b.y=0,!(e>1))return b.r;if(c=a[1],b.x=-c.r,c.x=b.r,c.y=0,!(e>2))return b.r+c.r;vf(c,b,d=a[2]),b=new yf(b),c=new yf(c),d=new yf(d),b.next=d.previous=c,c.next=b.previous=d,d.next=c.previous=b;a:for(h=3;h<e;++h){vf(b._,c._,d=a[h]),d=new yf(d),i=c.next,j=b.previous,k=c._.r,l=b._.r;do{if(k<=l){if(wf(i._,d._)){c=i,b.next=c,c.previous=b,--h;continue a}k+=i._.r,i=i.next}else{if(wf(j._,d._)){(b=j).next=c,c.previous=b,--h;continue a}l+=j._.r,j=j.previous}}while(i!==j.next);for(d.previous=b,d.next=c,b.next=c.previous=c=d,f=xf(b);(d=d.next)!==c;)(g=xf(d))<f&&(b=d,f=g);c=b.next}for(b=[c._],d=c;(d=d.next)!==c;)b.push(d._);for(d=pf(b),h=0;h<e;++h)b=a[h],b.x-=d.x,b.y-=d.y;return d.r}function Af(a){if("function"!=typeof a)throw new Error;return a}function Bf(){return 0}function Cf(a){return function(){return a}}function Df(a){return Math.sqrt(a.value)}function Ef(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function Ff(a,b){return function(c){if(d=c.children){var d,e,f,g=d.length,h=a(c)*b||0;if(h)for(e=0;e<g;++e)d[e].r+=h;if(f=zf(d),h)for(e=0;e<g;++e)d[e].r-=h;c.r=f+h}}}function Gf(a){return function(b){var c=b.parent;b.r*=a,c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function Hf(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function If(a,b,c,d,e){for(var f,g=a.children,h=-1,i=g.length,j=a.value&&(d-b)/a.value;++h<i;)(f=g[h]).y0=c,f.y1=e,f.x0=b,f.x1=b+=f.value*j}function Jf(a){return a.id}function Kf(a){return a.parentId}function Lf(a,b){return a.parent===b.parent?1:2}function Mf(a){var b=a.children;return b?b[0]:a.t}function Nf(a){var b=a.children;return b?b[b.length-1]:a.t}function Of(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Pf(a,b,c){return a.a.parent===b.parent?a.a:c}function Qf(a,b){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=b}function Rf(a,b,c,d,e){for(var f,g=a.children,h=-1,i=g.length,j=a.value&&(e-c)/a.value;++h<i;)(f=g[h]).x0=b,f.x1=d,f.y0=c,f.y1=c+=f.value*j}function Sf(a,b,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q,r=[],s=b.children,t=0,u=0,v=s.length,w=b.value;t<v;){i=e-c,j=f-d;do{k=s[u++].value}while(!k&&u<v);for(l=m=k,q=k*k*(p=Math.max(j/i,i/j)/(w*a)),o=Math.max(m/q,q/l);u<v;++u){if(k+=h=s[u].value,h<l&&(l=h),h>m&&(m=h),q=k*k*p,(n=Math.max(m/q,q/l))>o){k-=h;break}o=n}r.push(g={value:k,dice:i<j,children:s.slice(t,u)}),g.dice?If(g,c,d,e,w?d+=j*k/w:f):Rf(g,c,d,w?c+=i*k/w:e,f),w-=k,t=u}return r}function Tf(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Uf(a,b){return a[0]-b[0]||a[1]-b[1]}function Vf(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;++e){for(;d>1&&Tf(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Wf(a){this._size=a,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Xf(a){if(!a._start)try{!function(a){for(;a._start=a._waiting&&a._active<a._size;){var b=a._ended+a._active,c=a._tasks[b],d=c.length-1,e=c[d];c[d]=function(a,b){return function(c,d){a._tasks[b]&&(--a._active,++a._ended,a._tasks[b]=null,null==a._error&&(null!=c?Yf(a,c):(a._data[b]=d,a._waiting?Xf(a):Zf(a))))}}(a,b),--a._waiting,++a._active,c=e.apply(null,c),a._tasks[b]&&(a._tasks[b]=c||bp)}}(a)}catch(b){if(a._tasks[a._ended+a._active-1])Yf(a,b);else if(!a._data)throw b}}function Yf(a,b){var c,d=a._tasks.length;for(a._error=b,a._data=void 0,a._waiting=NaN;--d>=0;)if((c=a._tasks[d])&&(a._tasks[d]=null,c.abort))try{c.abort()}catch(b){}a._active=NaN,Zf(a)}function Zf(a){if(!a._active&&a._call){var b=a._data;a._data=void 0,a._call(a._error,b)}}function $f(a){if(null==a)a=1/0;else if(!((a=+a)>=1))throw new Error("invalid concurrency");return new Wf(a)}function _f(){return Math.random()}function ag(a,b){function c(a){var b,c=j.status;if(!c&&function(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}(j)||c>=200&&c<300||304===c){if(f)try{b=f.call(d,j)}catch(a){return void h.call("error",d,a)}else b=j;h.call("load",d,b)}else h.call("error",d,a)}var d,e,f,g,h=z("beforesend","progress","load","error"),i=ic(),j=new XMLHttpRequest,k=null,l=null,m=0;if("undefined"==typeof XDomainRequest||"withCredentials"in j||!/^(http(s)?:)?\/\//.test(a)||(j=new XDomainRequest),"onload"in j?j.onload=j.onerror=j.ontimeout=c:j.onreadystatechange=function(a){j.readyState>3&&c(a)},j.onprogress=function(a){h.call("progress",d,a)},d={header:function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?i.get(a):(null==b?i.remove(a):i.set(a,b+""),d)},mimeType:function(a){return arguments.length?(e=null==a?null:a+"",d):e},responseType:function(a){return arguments.length?(g=a,d):g},timeout:function(a){return arguments.length?(m=+a,d):m},user:function(a){return arguments.length<1?k:(k=null==a?null:a+"",d)},password:function(a){return arguments.length<1?l:(l=null==a?null:a+"",d)},response:function(a){return f=a,d},get:function(a,b){return d.send("GET",a,b)},post:function(a,b){return d.send("POST",a,b)},send:function(b,c,f){return j.open(b,a,!0,k,l),null==e||i.has("accept")||i.set("accept",e+",*/*"),j.setRequestHeader&&i.each(function(a,b){j.setRequestHeader(b,a)}),null!=e&&j.overrideMimeType&&j.overrideMimeType(e),null!=g&&(j.responseType=g),m>0&&(j.timeout=m),null==f&&"function"==typeof c&&(f=c,c=null),null!=f&&1===f.length&&(f=function(a){return function(b,c){a(null==b?c:null)}}(f)),null!=f&&d.on("error",f).on("load",function(a){f(null,a)}),h.call("beforesend",d,j),j.send(null==c?null:c),d},abort:function(){return j.abort(),d},on:function(){var a=h.on.apply(h,arguments);return a===h?d:a}},null!=b){if("function"!=typeof b)throw new Error("invalid callback: "+b);return d.get(b)}return d}function bg(a,b){return function(c,d){var e=ag(c).mimeType(a).response(b);if(null!=d){if("function"!=typeof d)throw new Error("invalid callback: "+d);return e.get(d)}return e}}function cg(a,b){return function(c,d,e){arguments.length<3&&(e=d,d=null);var f=ag(c).mimeType(a);return f.row=function(a){return arguments.length?f.response(function(a,b){return function(c){return a(c.responseText,b)}}(b,d=a)):d},f.row(d),e?f.get(e):f}}function dg(a){function b(b){var f=b+"",g=c.get(f);if(!g){if(e!==rp)return e;c.set(f,g=d.push(b))}return a[(g-1)%a.length]}var c=ic(),d=[],e=rp;return a=null==a?[]:qp.call(a),b.domain=function(a){if(!arguments.length)return d.slice();d=[],c=ic();for(var e,f,g=-1,h=a.length;++g<h;)c.has(f=(e=a[g])+"")||c.set(f,d.push(e));return b},b.range=function(c){return arguments.length?(a=qp.call(c),b):a.slice()},b.unknown=function(a){return arguments.length?(e=a,b):e},b.copy=function(){return dg().domain(d).range(a).unknown(e)},b}function eg(){function a(){var a=e().length,d=g[1]<g[0],m=g[d-0],n=g[1-d];b=(n-m)/Math.max(1,a-i+2*j),h&&(b=Math.floor(b)),m+=(n-m-b*(a-i))*l,c=b*(1-i),h&&(m=Math.round(m),c=Math.round(c));var o=k(a).map(function(a){return m+b*a});return f(d?o.reverse():o)}var b,c,d=dg().unknown(void 0),e=d.domain,f=d.range,g=[0,1],h=!1,i=0,j=0,l=.5;return delete d.unknown,d.domain=function(b){return arguments.length?(e(b),a()):e()},d.range=function(b){return arguments.length?(g=[+b[0],+b[1]],a()):g.slice()},d.rangeRound=function(b){return g=[+b[0],+b[1]],h=!0,a()},d.bandwidth=function(){return c},d.step=function(){return b},d.round=function(b){return arguments.length?(h=!!b,a()):h},d.padding=function(b){return arguments.length?(i=j=Math.max(0,Math.min(1,b)),a()):i},d.paddingInner=function(b){return arguments.length?(i=Math.max(0,Math.min(1,b)),a()):i},d.paddingOuter=function(b){return arguments.length?(j=Math.max(0,Math.min(1,b)),a()):j},d.align=function(b){return arguments.length?(l=Math.max(0,Math.min(1,b)),a()):l},d.copy=function(){return eg().domain(e()).range(g).round(h).paddingInner(i).paddingOuter(j).align(l)},a()}function fg(a){var b=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return fg(b())},a}function gg(a){return function(){return a}}function hg(a){return+a}function ig(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:gg(b)}function jg(a,b,c,d){var e=a[0],f=a[1],g=b[0],h=b[1];return f<e?(e=c(f,e),g=d(h,g)):(e=c(e,f),g=d(g,h)),function(a){return g(e(a))}}function kg(a,b,c,d){var e=Math.min(a.length,b.length)-1,f=new Array(e),g=new Array(e),h=-1;for(a[e]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++h<e;)f[h]=c(a[h],a[h+1]),g[h]=d(b[h],b[h+1]);return function(b){var c=Lj(a,b,1,e)-1;return g[c](f[c](b))}}function lg(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function mg(a,b){function c(){return e=Math.min(h.length,i.length)>2?kg:jg,f=g=null,d}function d(b){return(f||(f=e(h,i,k?function(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return a<=b?0:a>=c?1:d(a)}}}(a):a,j)))(+b)}var e,f,g,h=sp,i=sp,j=jb,k=!1;return d.invert=function(a){return(g||(g=e(i,h,ig,k?function(a){return function(b,c){var d=a(b=+b,c=+c);return function(a){return a<=0?b:a>=1?c:d(a)}}}(b):b)))(+a)},d.domain=function(a){return arguments.length?(h=pp.call(a,hg),c()):h.slice()},d.range=function(a){return arguments.length?(i=qp.call(a),c()):i.slice()},d.rangeRound=function(a){return i=qp.call(a),j=kb,c()},d.clamp=function(a){return arguments.length?(k=!!a,c()):k},d.interpolate=function(a){return arguments.length?(j=a,c()):j},c()}function ng(b){var c=b.domain;return b.ticks=function(a){var b=c();return l(b[0],b[b.length-1],null==a?10:a)},b.tickFormat=function(b,d){return function(b,c,d){var e,f=b[0],g=b[b.length-1],h=n(f,g,null==c?10:c);switch((d=Jc(null==d?",f":d)).type){case"s":var i=Math.max(Math.abs(f),Math.abs(g));return null!=d.precision||isNaN(e=Pc(h,i))||(d.precision=e),a.formatPrefix(d,i);case"":case"e":case"g":case"p":case"r":null!=d.precision||isNaN(e=Qc(h,Math.max(Math.abs(f),Math.abs(g))))||(d.precision=e-("e"===d.type));break;case"f":case"%":null!=d.precision||isNaN(e=Oc(h))||(d.precision=e-2*("%"===d.type))}return a.format(d)}(c(),b,d)},b.nice=function(a){null==a&&(a=10);var d,e=c(),f=0,g=e.length-1,h=e[f],i=e[g];return i<h&&(d=h,h=i,i=d,d=f,f=g,g=d),(d=m(h,i,a))>0?d=m(h=Math.floor(h/d)*d,i=Math.ceil(i/d)*d,a):d<0&&(d=m(h=Math.ceil(h*d)/d,i=Math.floor(i*d)/d,a)),d>0?(e[f]=Math.floor(h/d)*d,e[g]=Math.ceil(i/d)*d,c(e)):d<0&&(e[f]=Math.ceil(h*d)/d,e[g]=Math.floor(i*d)/d,c(e)),b},b}function og(){var a=mg(ig,gb);return a.copy=function(){return lg(a,og())},ng(a)}function pg(){function a(a){return+a}var b=[0,1];return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=pp.call(c,hg),a):b.slice()},a.copy=function(){return pg().domain(b)},ng(a)}function qg(a,b){var c,d=0,e=(a=a.slice()).length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function rg(a,b){return(b=Math.log(b/a))?function(c){return Math.log(c/a)/b}:gg(b)}function sg(a,b){return a<0?function(c){return-Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,c)*Math.pow(a,1-c)}}function tg(a){return isFinite(a)?+("1e"+a):a<0?0:a}function ug(a){return 10===a?tg:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function vg(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function wg(a){return function(b){return-a(-b)}}function xg(){function b(){return f=vg(e),g=ug(e),d()[0]<0&&(f=wg(f),g=wg(g)),c}var c=mg(rg,sg).domain([1,10]),d=c.domain,e=10,f=vg(10),g=ug(10);return c.base=function(a){return arguments.length?(e=+a,b()):e},c.domain=function(a){return arguments.length?(d(a),b()):d()},c.ticks=function(a){var b,c=d(),h=c[0],i=c[c.length-1];(b=i<h)&&(n=h,h=i,i=n);var j,k,m,n=f(h),o=f(i),p=null==a?10:+a,q=[];if(!(e%1)&&o-n<p){if(n=Math.round(n)-1,o=Math.round(o)+1,h>0){for(;n<o;++n)for(k=1,j=g(n);k<e;++k)if(!((m=j*k)<h)){if(m>i)break;q.push(m)}}else for(;n<o;++n)for(k=e-1,j=g(n);k>=1;--k)if(!((m=j*k)<h)){if(m>i)break;q.push(m)}}else q=l(n,o,Math.min(o-n,p)).map(g);return b?q.reverse():q},c.tickFormat=function(b,d){if(null==d&&(d=10===e?".0e":","),"function"!=typeof d&&(d=a.format(d)),b===1/0)return d;null==b&&(b=10);var h=Math.max(1,e*b/c.ticks().length);return function(a){var b=a/g(Math.round(f(a)));return b*e<e-.5&&(b*=e),b<=h?d(a):""}},c.nice=function(){return d(qg(d(),{floor:function(a){return g(Math.floor(f(a)))},ceil:function(a){return g(Math.ceil(f(a)))}}))},c.copy=function(){return lg(c,xg().base(e))},c}function yg(a,b){return a<0?-Math.pow(-a,b):Math.pow(a,b)}function zg(){var a=1,b=mg(function(b,c){return(c=yg(c,a)-(b=yg(b,a)))?function(d){return(yg(d,a)-b)/c}:gg(c)},function(b,c){return c=yg(c,a)-(b=yg(b,a)),function(d){return yg(b+c*d,1/a)}}),c=b.domain;return b.exponent=function(b){return arguments.length?(a=+b,c(c())):a},b.copy=function(){return lg(b,zg().exponent(a))},ng(b)}function Ag(){function a(){var a=0,b=Math.max(1,e.length);for(f=new Array(b-1);++a<b;)f[a-1]=p(d,a/b);return c}function c(a){if(!isNaN(a=+a))return e[Lj(f,a)]}var d=[],e=[],f=[];return c.invertExtent=function(a){var b=e.indexOf(a);return b<0?[NaN,NaN]:[b>0?f[b-1]:d[0],b<f.length?f[b]:d[d.length-1]]},c.domain=function(c){if(!arguments.length)return d.slice();d=[];for(var e,f=0,g=c.length;f<g;++f)null==(e=c[f])||isNaN(e=+e)||d.push(e);return d.sort(b),a()},c.range=function(b){return arguments.length?(e=qp.call(b),a()):e.slice()},c.quantiles=function(){return f.slice()},c.copy=function(){return Ag().domain(d).range(e)},c}function Bg(){function a(a){if(a<=a)return g[Lj(f,a,0,e)]}function b(){var b=-1;for(f=new Array(e);++b<e;)f[b]=((b+1)*d-(b-e)*c)/(e+1);return a}var c=0,d=1,e=1,f=[.5],g=[0,1];return a.domain=function(a){return arguments.length?(c=+a[0],d=+a[1],b()):[c,d]},a.range=function(a){return arguments.length?(e=(g=qp.call(a)).length-1,b()):g.slice()},a.invertExtent=function(a){var b=g.indexOf(a);return b<0?[NaN,NaN]:b<1?[c,f[0]]:b>=e?[f[e-1],d]:[f[b-1],f[b]]},a.copy=function(){return Bg().domain([c,d]).range(g)},ng(a)}function Cg(){function a(a){if(a<=a)return c[Lj(b,a,0,d)]}var b=[.5],c=[0,1],d=1;return a.domain=function(e){return arguments.length?(b=qp.call(e),d=Math.min(b.length,c.length-1),a):b.slice()},a.range=function(e){return arguments.length?(c=qp.call(e),d=Math.min(b.length,c.length-1),a):c.slice()},a.invertExtent=function(a){var d=c.indexOf(a);return[b[d-1],b[d]]},a.copy=function(){return Cg().domain(b).range(c)},a}function Dg(a,b,c,d){function e(b){return a(b=new Date(+b)),b}return e.floor=e,e.ceil=function(c){return a(c=new Date(c-1)),b(c,1),a(c),c},e.round=function(a){var b=e(a),c=e.ceil(a);return a-b<c-a?b:c},e.offset=function(a,c){return b(a=new Date(+a),null==c?1:Math.floor(c)),a},e.range=function(c,d,f){var g,h=[];if(c=e.ceil(c),f=null==f?1:Math.floor(f),!(c<d&&f>0))return h;do{h.push(g=new Date(+c)),b(c,f),a(c)}while(g<c&&c<d);return h},e.filter=function(c){return Dg(function(b){if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},function(a,d){if(a>=a)if(d<0)for(;++d<=0;)for(;b(a,-1),!c(a););else for(;--d>=0;)for(;b(a,1),!c(a););})},c&&(e.count=function(b,d){return tp.setTime(+b),up.setTime(+d),a(tp),a(up),Math.floor(c(tp,up))},e.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?e.filter(d?function(b){return d(b)%a==0}:function(b){return e.count(0,b)%a==0}):e:null}),e}function Eg(a){return Dg(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7),b.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+7*b)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*xp)/yp})}function Fg(a){return Dg(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7),b.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+7*b)},function(a,b){return(b-a)/yp})}function Gg(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Hg(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Ig(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function Jg(a){function b(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=wq[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function c(a,b){return function(c){var e,f,g=Ig(1900);if(d(g,a,c+="",0)!=c.length)return null;if("Q"in g)return new Date(g.Q);if("p"in g&&(g.H=g.H%12+12*g.p),"V"in g){if(g.V<1||g.V>53)return null;"w"in g||(g.w=1),"Z"in g?(e=(f=(e=Hg(Ig(g.y))).getUTCDay())>4||0===f?eq.ceil(e):eq(e),e=bq.offset(e,7*(g.V-1)),g.y=e.getUTCFullYear(),g.m=e.getUTCMonth(),g.d=e.getUTCDate()+(g.w+6)%7):(e=(f=(e=b(Ig(g.y))).getDay())>4||0===f?Ip.ceil(e):Ip(e),e=Fp.offset(e,7*(g.V-1)),g.y=e.getFullYear(),g.m=e.getMonth(),g.d=e.getDate()+(g.w+6)%7)}else("W"in g||"U"in g)&&("w"in g||(g.w="u"in g?g.u%7:"W"in g?1:0),f="Z"in g?Hg(Ig(g.y)).getUTCDay():b(Ig(g.y)).getDay(),g.m=0,g.d="W"in g?(g.w+6)%7+7*g.W-(f+5)%7:g.w+7*g.U-(f+6)%7);return"Z"in g?(g.H+=g.Z/100|0,g.M+=g.Z%100,Hg(g)):b(g)}}function d(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;g<h;){if(d>=i)return-1;if(37===(e=b.charCodeAt(g++))){if(e=b.charAt(g++),!(f=y[e in wq?b.charAt(g++):e])||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var e=a.dateTime,f=a.date,g=a.time,h=a.periods,i=a.days,j=a.shortDays,k=a.months,l=a.shortMonths,m=Mg(h),n=Ng(h),o=Mg(i),p=Ng(i),q=Mg(j),r=Ng(j),s=Mg(k),t=Ng(k),u=Mg(l),v=Ng(l),w={a:function(a){return j[a.getDay()]},A:function(a){return i[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return k[a.getMonth()]},c:null,d:fh,e:fh,f:kh,H:gh,I:hh,j:ih,L:jh,m:lh,M:mh,p:function(a){return h[+(a.getHours()>=12)]},Q:Oh,s:Ph,S:nh,u:oh,U:ph,V:qh,w:rh,W:sh,x:null,X:null,y:th,Y:uh,Z:vh,"%":Nh},x={a:function(a){return j[a.getUTCDay()]},A:function(a){return i[a.getUTCDay()]},b:function(a){return l[a.getUTCMonth()]},B:function(a){return k[a.getUTCMonth()]},c:null,d:wh,e:wh,f:Bh,H:xh,I:yh,j:zh,L:Ah,m:Ch,M:Dh,p:function(a){return h[+(a.getUTCHours()>=12)]},Q:Oh,s:Ph,S:Eh,u:Fh,U:Gh,V:Hh,w:Ih,W:Jh,x:null,X:null,y:Kh,Y:Lh,Z:Mh,"%":Nh},y={a:function(a,b,c){var d=q.exec(b.slice(c));return d?(a.w=r[d[0].toLowerCase()],c+d[0].length):-1},A:function(a,b,c){var d=o.exec(b.slice(c));return d?(a.w=p[d[0].toLowerCase()],c+d[0].length):-1},b:function(a,b,c){var d=u.exec(b.slice(c));return d?(a.m=v[d[0].toLowerCase()],c+d[0].length):-1},B:function(a,b,c){var d=s.exec(b.slice(c));return d?(a.m=t[d[0].toLowerCase()],c+d[0].length):-1},c:function(a,b,c){return d(a,e,b,c)},d:Xg,e:Xg,f:bh,H:Zg,I:Zg,j:Yg,L:ah,m:Wg,M:$g,p:function(a,b,c){var d=m.exec(b.slice(c));return d?(a.p=n[d[0].toLowerCase()],c+d[0].length):-1},Q:dh,s:eh,S:_g,u:Pg,U:Qg,V:Rg,w:Og,W:Sg,x:function(a,b,c){return d(a,f,b,c)},X:function(a,b,c){return d(a,g,b,c)},y:Ug,Y:Tg,Z:Vg,"%":ch};return w.x=b(f,w),w.X=b(g,w),w.c=b(e,w),x.x=b(f,x),x.X=b(g,x),x.c=b(e,x),{format:function(a){var c=b(a+="",w);return c.toString=function(){return a},c},parse:function(a){var b=c(a+="",Gg);return b.toString=function(){return a},b},utcFormat:function(a){var c=b(a+="",x);return c.toString=function(){return a},c},utcParse:function(a){var b=c(a,Hg);return b.toString=function(){return a},b}}}function Kg(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Lg(a){return a.replace(zq,"\\$&")}function Mg(a){return new RegExp("^(?:"+a.map(Lg).join("|")+")","i")}function Ng(a){for(var b={},c=-1,d=a.length;++c<d;)b[a[c].toLowerCase()]=c;return b}function Og(a,b,c){var d=xq.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Pg(a,b,c){var d=xq.exec(b.slice(c,c+1));return d?(a.u=+d[0],c+d[0].length):-1}function Qg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.U=+d[0],c+d[0].length):-1}function Rg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.V=+d[0],c+d[0].length):-1}function Sg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.W=+d[0],c+d[0].length):-1}function Tg(a,b,c){var d=xq.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ug(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function Vg(a,b,c){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function Wg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Xg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Yg(a,b,c){var d=xq.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function Zg(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function $g(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function _g(a,b,c){var d=xq.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function ah(a,b,c){var d=xq.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function bh(a,b,c){var d=xq.exec(b.slice(c,c+6));return d?(a.L=Math.floor(d[0]/1e3),c+d[0].length):-1}function ch(a,b,c){var d=yq.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function dh(a,b,c){var d=xq.exec(b.slice(c));return d?(a.Q=+d[0],c+d[0].length):-1}function eh(a,b,c){var d=xq.exec(b.slice(c));return d?(a.Q=1e3*+d[0],c+d[0].length):-1}function fh(a,b){return Kg(a.getDate(),b,2)}function gh(a,b){return Kg(a.getHours(),b,2)}function hh(a,b){return Kg(a.getHours()%12||12,b,2)}function ih(a,b){return Kg(1+Fp.count(Xp(a),a),b,3)}function jh(a,b){return Kg(a.getMilliseconds(),b,3)}function kh(a,b){return jh(a,b)+"000"}function lh(a,b){return Kg(a.getMonth()+1,b,2)}function mh(a,b){return Kg(a.getMinutes(),b,2)}function nh(a,b){return Kg(a.getSeconds(),b,2)}function oh(a){var b=a.getDay();return 0===b?7:b}function ph(a,b){return Kg(Hp.count(Xp(a),a),b,2)}function qh(a,b){var c=a.getDay();return a=c>=4||0===c?Lp(a):Lp.ceil(a),Kg(Lp.count(Xp(a),a)+(4===Xp(a).getDay()),b,2)}function rh(a){return a.getDay()}function sh(a,b){return Kg(Ip.count(Xp(a),a),b,2)}function th(a,b){return Kg(a.getFullYear()%100,b,2)}function uh(a,b){return Kg(a.getFullYear()%1e4,b,4)}function vh(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+Kg(b/60|0,"0",2)+Kg(b%60,"0",2)}function wh(a,b){return Kg(a.getUTCDate(),b,2)}function xh(a,b){return Kg(a.getUTCHours(),b,2)}function yh(a,b){return Kg(a.getUTCHours()%12||12,b,2)}function zh(a,b){return Kg(1+bq.count(tq(a),a),b,3)}function Ah(a,b){return Kg(a.getUTCMilliseconds(),b,3)}function Bh(a,b){return Ah(a,b)+"000"}function Ch(a,b){return Kg(a.getUTCMonth()+1,b,2)}function Dh(a,b){return Kg(a.getUTCMinutes(),b,2)}function Eh(a,b){return Kg(a.getUTCSeconds(),b,2)}function Fh(a){var b=a.getUTCDay();return 0===b?7:b}function Gh(a,b){return Kg(dq.count(tq(a),a),b,2)}function Hh(a,b){var c=a.getUTCDay();return a=c>=4||0===c?hq(a):hq.ceil(a),Kg(hq.count(tq(a),a)+(4===tq(a).getUTCDay()),b,2)}function Ih(a){return a.getUTCDay()}function Jh(a,b){return Kg(eq.count(tq(a),a),b,2)}function Kh(a,b){return Kg(a.getUTCFullYear()%100,b,2)}function Lh(a,b){return Kg(a.getUTCFullYear()%1e4,b,4)}function Mh(){return"+0000"}function Nh(){return"%"}function Oh(a){return+a}function Ph(a){return Math.floor(+a/1e3)}function Qh(b){return uq=Jg(b),a.timeFormat=uq.format,a.timeParse=uq.parse,a.utcFormat=uq.utcFormat,a.utcParse=uq.utcParse,uq}function Rh(a){return new Date(a)}function Sh(a){return a instanceof Date?+a:+new Date(+a)}function Th(a,b,d,e,f,g,h,i,j){function k(c){return(h(c)<c?q:g(c)<c?r:f(c)<c?s:e(c)<c?t:b(c)<c?d(c)<c?u:v:a(c)<c?w:x)(c)}function l(b,d,e,f){if(null==b&&(b=10),"number"==typeof b){var g=Math.abs(e-d)/b,h=c(function(a){return a[2]}).right(y,g);h===y.length?(f=n(d/Jq,e/Jq,b),b=a):h?(f=(h=y[g/y[h-1][2]<y[h][2]/g?h-1:h])[1],b=h[0]):(f=Math.max(n(d,e,b),1),b=i)}return null==f?b:b.every(f)}var m=mg(ig,gb),o=m.invert,p=m.domain,q=j(".%L"),r=j(":%S"),s=j("%I:%M"),t=j("%I %p"),u=j("%a %d"),v=j("%b %d"),w=j("%B"),x=j("%Y"),y=[[h,1,Dq],[h,5,5*Dq],[h,15,15*Dq],[h,30,30*Dq],[g,1,Eq],[g,5,5*Eq],[g,15,15*Eq],[g,30,30*Eq],[f,1,Fq],[f,3,3*Fq],[f,6,6*Fq],[f,12,12*Fq],[e,1,Gq],[e,2,2*Gq],[d,1,Hq],[b,1,Iq],[b,3,3*Iq],[a,1,Jq]];return m.invert=function(a){return new Date(o(a))},m.domain=function(a){return arguments.length?p(pp.call(a,Sh)):p().map(Rh)},m.ticks=function(a,b){var c,d=p(),e=d[0],f=d[d.length-1],g=f<e;return g&&(c=e,e=f,f=c),c=l(a,e,f,b),c=c?c.range(e,f+1):[],g?c.reverse():c},m.tickFormat=function(a,b){return null==b?k:j(b)},m.nice=function(a,b){var c=p();return(a=l(a,c[0],c[c.length-1],b))?p(qg(c,a)):m},m.copy=function(){return lg(m,Th(a,b,d,e,f,g,h,i,j))},m}function Uh(a){return a.match(/.{6}/g).map(function(a){return"#"+a})}function Vh(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}}function Wh(a){function b(b){var f=(b-c)/(d-c);return a(e?Math.max(0,Math.min(1,f)):f)}var c=0,d=1,e=!1;return b.domain=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]},b.clamp=function(a){return arguments.length?(e=!!a,b):e},b.interpolator=function(c){return arguments.length?(a=c,b):a},b.copy=function(){return Wh(a).domain([c,d]).clamp(e)},ng(b)}function Xh(a){return function(){return a}}function Yh(a){return a>=1?dr:a<=-1?-dr:Math.asin(a)}function Zh(a){return a.innerRadius}function $h(a){return a.outerRadius}function _h(a){return a.startAngle}function ai(a){return a.endAngle}function bi(a){return a&&a.padAngle}function ci(a,b,c,d,e,f,g){var h=a-c,i=b-d,j=(g?f:-f)/ar(h*h+i*i),k=j*i,l=-j*h,m=a+k,n=b+l,o=c+k,p=d+l,q=(m+o)/2,r=(n+p)/2,s=o-m,t=p-n,u=s*s+t*t,v=e-f,w=m*p-o*n,x=(t<0?-1:1)*ar(Zq(0,v*v*u-w*w)),y=(w*t-s*x)/u,z=(-w*s-t*x)/u,A=(w*t+s*x)/u,B=(-w*s+t*x)/u,C=y-q,D=z-r,E=A-q,F=B-r;return C*C+D*D>E*E+F*F&&(y=A,z=B),{cx:y,cy:z,x01:-k,y01:-l,x11:y*(e/v-1),y11:z*(e/v-1)}}function di(a){this._context=a}function ei(a){return new di(a)}function fi(a){return a[0]}function gi(a){return a[1]}function hi(){function a(a){var h,i,j,k=a.length,l=!1;for(null==e&&(g=f(j=bc())),h=0;h<=k;++h)!(h<k&&d(i=a[h],h,a))===l&&((l=!l)?g.lineStart():g.lineEnd()),l&&g.point(+b(i,h,a),+c(i,h,a));if(j)return g=null,j+""||null}var b=fi,c=gi,d=Xh(!0),e=null,f=ei,g=null;return a.x=function(c){return arguments.length?(b="function"==typeof c?c:Xh(+c),a):b},a.y=function(b){return arguments.length?(c="function"==typeof b?b:Xh(+b),a):c},a.defined=function(b){return arguments.length?(d="function"==typeof b?b:Xh(!!b),a):d},a.curve=function(b){return arguments.length?(f=b,null!=e&&(g=f(e)),a):f},a.context=function(b){return arguments.length?(null==b?e=g=null:g=f(e=b),a):e},a}function ii(){function a(a){var b,k,l,m,n,o=a.length,p=!1,q=new Array(o),r=new Array(o);for(null==h&&(j=i(n=bc())),b=0;b<=o;++b){if(!(b<o&&g(m=a[b],b,a))===p)if(p=!p)k=b,j.areaStart(),j.lineStart();else{for(j.lineEnd(),j.lineStart(),l=b-1;l>=k;--l)j.point(q[l],r[l]);j.lineEnd(),j.areaEnd()}p&&(q[b]=+c(m,b,a),r[b]=+e(m,b,a),j.point(d?+d(m,b,a):q[b],f?+f(m,b,a):r[b]))}if(n)return j=null,n+""||null}function b(){return hi().defined(g).curve(i).context(h)}var c=fi,d=null,e=Xh(0),f=gi,g=Xh(!0),h=null,i=ei,j=null;return a.x=function(b){return arguments.length?(c="function"==typeof b?b:Xh(+b),d=null,a):c},a.x0=function(b){return arguments.length?(c="function"==typeof b?b:Xh(+b),a):c},a.x1=function(b){return arguments.length?(d=null==b?null:"function"==typeof b?b:Xh(+b),a):d},a.y=function(b){return arguments.length?(e="function"==typeof b?b:Xh(+b),f=null,a):e},a.y0=function(b){return arguments.length?(e="function"==typeof b?b:Xh(+b),a):e},a.y1=function(b){return arguments.length?(f=null==b?null:"function"==typeof b?b:Xh(+b),a):f},a.lineX0=a.lineY0=function(){return b().x(c).y(e)},a.lineY1=function(){return b().x(c).y(f)},a.lineX1=function(){return b().x(d).y(e)},a.defined=function(b){return arguments.length?(g="function"==typeof b?b:Xh(!!b),a):g},a.curve=function(b){return arguments.length?(i=b,null!=h&&(j=i(h)),a):i},a.context=function(b){return arguments.length?(null==b?h=j=null:j=i(h=b),a):h},a}function ji(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function ki(a){return a}function li(a){this._curve=a}function mi(a){function b(b){return new li(a(b))}return b._curve=a,b}function ni(a){var b=a.curve;return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a.curve=function(a){return arguments.length?b(mi(a)):b()._curve},a}function oi(){return ni(hi().curve(fr))}function pi(){var a=ii().curve(fr),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,f=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return ni(c())},delete a.lineX0,a.lineEndAngle=function(){return ni(d())},delete a.lineX1,a.lineInnerRadius=function(){return ni(e())},delete a.lineY0,a.lineOuterRadius=function(){return ni(f())},delete a.lineY1,a.curve=function(a){return arguments.length?b(mi(a)):b()._curve},a}function qi(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function ri(a){return a.source}function si(a){return a.target}function ti(a){function b(){var b,h=gr.call(arguments),i=c.apply(this,h),j=d.apply(this,h);if(g||(g=b=bc()),a(g,+e.apply(this,(h[0]=i,h)),+f.apply(this,h),+e.apply(this,(h[0]=j,h)),+f.apply(this,h)),b)return g=null,b+""||null}var c=ri,d=si,e=fi,f=gi,g=null;return b.source=function(a){return arguments.length?(c=a,b):c},b.target=function(a){return arguments.length?(d=a,b):d},b.x=function(a){return arguments.length?(e="function"==typeof a?a:Xh(+a),b):e},b.y=function(a){return arguments.length?(f="function"==typeof a?a:Xh(+a),b):f},b.context=function(a){return arguments.length?(g=null==a?null:a,b):g},b}function ui(a,b,c,d,e){a.moveTo(b,c),a.bezierCurveTo(b=(b+d)/2,c,b,e,d,e)}function vi(a,b,c,d,e){a.moveTo(b,c),a.bezierCurveTo(b,c=(c+e)/2,d,c,d,e)}function wi(a,b,c,d,e){var f=qi(b,c),g=qi(b,c=(c+e)/2),h=qi(d,c),i=qi(d,e);a.moveTo(f[0],f[1]),a.bezierCurveTo(g[0],g[1],h[0],h[1],i[0],i[1])}function xi(){}function yi(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function zi(a){this._context=a}function Ai(a){this._context=a}function Bi(a){this._context=a}function Ci(a,b){this._basis=new zi(a),this._beta=b}function Di(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function Ei(a,b){this._context=a,this._k=(1-b)/6}function Fi(a,b){this._context=a,this._k=(1-b)/6}function Gi(a,b){this._context=a,this._k=(1-b)/6}function Hi(a,b,c){var d=a._x1,e=a._y1,f=a._x2,g=a._y2;if(a._l01_a>br){var h=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,i=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*h-a._x0*a._l12_2a+a._x2*a._l01_2a)/i,e=(e*h-a._y0*a._l12_2a+a._y2*a._l01_2a)/i}if(a._l23_a>br){var j=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,k=3*a._l23_a*(a._l23_a+a._l12_a);f=(f*j+a._x1*a._l23_2a-b*a._l12_2a)/k,g=(g*j+a._y1*a._l23_2a-c*a._l12_2a)/k}a._context.bezierCurveTo(d,e,f,g,a._x2,a._y2)}function Ii(a,b){this._context=a,this._alpha=b}function Ji(a,b){this._context=a,this._alpha=b}function Ki(a,b){this._context=a,this._alpha=b}function Li(a){this._context=a}function Mi(a){return a<0?-1:1}function Ni(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||e<0&&-0),g=(c-a._y1)/(e||d<0&&-0),h=(f*e+g*d)/(d+e);return(Mi(f)+Mi(g))*Math.min(Math.abs(f),Math.abs(g),.5*Math.abs(h))||0}function Oi(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function Pi(a,b,c){
var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function Qi(a){this._context=a}function Ri(a){this._context=new Si(a)}function Si(a){this._context=a}function Ti(a){this._context=a}function Ui(a){var b,c,d=a.length-1,e=new Array(d),f=new Array(d),g=new Array(d);for(e[0]=0,f[0]=2,g[0]=a[0]+2*a[1],b=1;b<d-1;++b)e[b]=1,f[b]=4,g[b]=4*a[b]+2*a[b+1];for(e[d-1]=2,f[d-1]=7,g[d-1]=8*a[d-1]+a[d],b=1;b<d;++b)c=e[b]/f[b-1],f[b]-=c,g[b]-=c*g[b-1];for(e[d-1]=g[d-1]/f[d-1],b=d-2;b>=0;--b)e[b]=(g[b]-e[b+1])/f[b];for(f[d-1]=(a[d]+e[d-1])/2,b=0;b<d-1;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function Vi(a,b){this._context=a,this._t=b}function Wi(a,b){if((e=a.length)>1)for(var c,d,e,f=1,g=a[b[0]],h=g.length;f<e;++f)for(d=g,g=a[b[f]],c=0;c<h;++c)g[c][1]+=g[c][0]=isNaN(d[c][1])?d[c][0]:d[c][1]}function Xi(a){for(var b=a.length,c=new Array(b);--b>=0;)c[b]=b;return c}function Yi(a,b){return a[b]}function Zi(a){var b=a.map($i);return Xi(a).sort(function(a,c){return b[a]-b[c]})}function $i(a){for(var b,c=0,d=-1,e=a.length;++d<e;)(b=+a[d][1])&&(c+=b);return c}function _i(a){return function(){return a}}function aj(a){return a[0]}function bj(a){return a[1]}function cj(){this._=null}function dj(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ej(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fj(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gj(a){for(;a.L;)a=a.L;return a}function hj(a,b,c,d){var e=[null,null],f=Jr.push(e)-1;return e.left=a,e.right=b,c&&jj(e,a,b,c),d&&jj(e,b,a,d),Hr[a.index].halfedges.push(f),Hr[b.index].halfedges.push(f),e}function ij(a,b,c){var d=[b,c];return d.left=a,d}function jj(a,b,c,d){a[0]||a[1]?a.left===c?a[1]=d:a[0]=d:(a[0]=d,a.left=b,a.right=c)}function kj(a,b,c,d,e){var f,g=a[0],h=a[1],i=g[0],j=g[1],k=0,l=1,m=h[0]-i,n=h[1]-j;if(f=b-i,m||!(f>0)){if(f/=m,m<0){if(f<k)return;f<l&&(l=f)}else if(m>0){if(f>l)return;f>k&&(k=f)}if(f=d-i,m||!(f<0)){if(f/=m,m<0){if(f>l)return;f>k&&(k=f)}else if(m>0){if(f<k)return;f<l&&(l=f)}if(f=c-j,n||!(f>0)){if(f/=n,n<0){if(f<k)return;f<l&&(l=f)}else if(n>0){if(f>l)return;f>k&&(k=f)}if(f=e-j,n||!(f<0)){if(f/=n,n<0){if(f>l)return;f>k&&(k=f)}else if(n>0){if(f<k)return;f<l&&(l=f)}return!(k>0||l<1)||(k>0&&(a[0]=[i+k*m,j+k*n]),l<1&&(a[1]=[i+l*m,j+l*n]),!0)}}}}}function lj(a,b,c,d,e){var f=a[1];if(f)return!0;var g,h,i=a[0],j=a.left,k=a.right,l=j[0],m=j[1],n=k[0],o=k[1],p=(l+n)/2,q=(m+o)/2;if(o===m){if(p<b||p>=d)return;if(l>n){if(i){if(i[1]>=e)return}else i=[p,c];f=[p,e]}else{if(i){if(i[1]<c)return}else i=[p,e];f=[p,c]}}else if(g=(l-n)/(o-m),h=q-g*p,g<-1||g>1)if(l>n){if(i){if(i[1]>=e)return}else i=[(c-h)/g,c];f=[(e-h)/g,e]}else{if(i){if(i[1]<c)return}else i=[(e-h)/g,e];f=[(c-h)/g,c]}else if(m<o){if(i){if(i[0]>=d)return}else i=[b,g*b+h];f=[d,g*d+h]}else{if(i){if(i[0]<b)return}else i=[d,g*d+h];f=[b,g*b+h]}return a[0]=i,a[1]=f,!0}function mj(a,b){var c=a.site,d=b.left,e=b.right;return c===e&&(e=d,d=c),e?Math.atan2(e[1]-d[1],e[0]-d[0]):(c===d?(d=b[1],e=b[0]):(d=b[0],e=b[1]),Math.atan2(d[0]-e[0],e[1]-d[1]))}function nj(a,b){return b[+(b.left!==a.site)]}function oj(a,b){return b[+(b.left===a.site)]}function pj(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e[0],h=e[1],i=d[0]-g,j=d[1]-h,k=f[0]-g,l=f[1]-h,m=2*(i*l-j*k);if(!(m>=-Nr)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,r=Kr.pop()||new function(){dj(this),this.x=this.y=this.arc=this.site=this.cy=null};r.arc=a,r.site=e,r.x=p+g,r.y=(r.cy=q+h)+Math.sqrt(p*p+q*q),a.circle=r;for(var s=null,t=Ir._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}Ir.insert(s,r),s||(Fr=r)}}}}function qj(a){var b=a.circle;b&&(b.P||(Fr=b.N),Ir.remove(b),Kr.push(b),dj(b),a.circle=null)}function rj(a){var b=Lr.pop()||new function(){dj(this),this.edge=this.site=this.circle=null};return b.site=a,b}function sj(a){qj(a),Gr.remove(a),Lr.push(a),dj(a)}function tj(a){var b=a.circle,c=b.x,d=b.cy,e=[c,d],f=a.P,g=a.N,h=[a];sj(a);for(var i=f;i.circle&&Math.abs(c-i.circle.x)<Mr&&Math.abs(d-i.circle.cy)<Mr;)f=i.P,h.unshift(i),sj(i),i=f;h.unshift(i),qj(i);for(var j=g;j.circle&&Math.abs(c-j.circle.x)<Mr&&Math.abs(d-j.circle.cy)<Mr;)g=j.N,h.push(j),sj(j),j=g;h.push(j),qj(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],jj(j.edge,i.site,j.site,e);i=h[0],(j=h[l-1]).edge=hj(i.site,j.site,null,e),pj(i),pj(j)}function uj(a){for(var b,c,d,e,f=a[0],g=a[1],h=Gr._;h;)if((d=vj(h,g)-f)>Mr)h=h.L;else{if(!((e=f-function(a,b){var c=a.N;if(c)return vj(c,b);var d=a.site;return d[1]===b?d[0]:1/0}(h,g))>Mr)){d>-Mr?(b=h.P,c=h):e>-Mr?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}!function(a){Hr[a.index]={site:a,halfedges:[]}}(a);var i=rj(a);if(Gr.insert(b,i),b||c){if(b===c)return qj(b),c=rj(b.site),Gr.insert(i,c),i.edge=c.edge=hj(b.site,i.site),pj(b),void pj(c);if(c){qj(b),qj(c);var j=b.site,k=j[0],l=j[1],m=a[0]-k,n=a[1]-l,o=c.site,p=o[0]-k,q=o[1]-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u=[(q*s-n*t)/r+k,(m*t-p*s)/r+l];jj(c.edge,j,o,u),i.edge=hj(j,a,null,u),c.edge=hj(a,o,null,u),pj(b),pj(c)}else i.edge=hj(b.site,i.site)}}function vj(a,b){var c=a.site,d=c[0],e=c[1],f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;var h=(c=g.site)[0],i=c[1],j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function wj(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function xj(a,b){return b[1]-a[1]||b[0]-a[0]}function yj(a,b){var c,d,e,f=a.sort(xj).pop();for(Jr=[],Hr=new Array(a.length),Gr=new cj,Ir=new cj;;)if(e=Fr,f&&(!e||f[1]<e.y||f[1]===e.y&&f[0]<e.x))f[0]===c&&f[1]===d||(uj(f),c=f[0],d=f[1]),f=a.pop();else{if(!e)break;tj(e.arc)}if(function(){for(var a,b,c,d,e=0,f=Hr.length;e<f;++e)if((a=Hr[e])&&(d=(b=a.halfedges).length)){var g=new Array(d),h=new Array(d);for(c=0;c<d;++c)g[c]=c,h[c]=mj(a,Jr[b[c]]);for(g.sort(function(a,b){return h[b]-h[a]}),c=0;c<d;++c)h[c]=b[g[c]];for(c=0;c<d;++c)b[c]=h[c]}}(),b){var g=+b[0][0],h=+b[0][1],i=+b[1][0],j=+b[1][1];(function(a,b,c,d){for(var e,f=Jr.length;f--;)lj(e=Jr[f],a,b,c,d)&&kj(e,a,b,c,d)&&(Math.abs(e[0][0]-e[1][0])>Mr||Math.abs(e[0][1]-e[1][1])>Mr)||delete Jr[f]})(g,h,i,j),function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=Hr.length,r=!0;for(e=0;e<q;++e)if(f=Hr[e]){for(g=f.site,h=(i=f.halfedges).length;h--;)Jr[i[h]]||i.splice(h,1);for(h=0,j=i.length;h<j;)o=(n=oj(f,Jr[i[h]]))[0],p=n[1],l=(k=nj(f,Jr[i[++h%j]]))[0],m=k[1],(Math.abs(o-l)>Mr||Math.abs(p-m)>Mr)&&(i.splice(h,0,Jr.push(ij(g,n,Math.abs(o-a)<Mr&&d-p>Mr?[a,Math.abs(l-a)<Mr?m:d]:Math.abs(p-d)<Mr&&c-o>Mr?[Math.abs(m-d)<Mr?l:c,d]:Math.abs(o-c)<Mr&&p-b>Mr?[c,Math.abs(l-c)<Mr?m:b]:Math.abs(p-b)<Mr&&o-a>Mr?[Math.abs(m-b)<Mr?l:a,b]:null))-1),++j);j&&(r=!1)}if(r){var s,t,u,v=1/0;for(e=0,r=null;e<q;++e)(f=Hr[e])&&(u=(s=(g=f.site)[0]-a)*s+(t=g[1]-b)*t)<v&&(v=u,r=f);if(r){var w=[a,b],x=[a,d],y=[c,d],z=[c,b];r.halfedges.push(Jr.push(ij(g=r.site,w,x))-1,Jr.push(ij(g,x,y))-1,Jr.push(ij(g,y,z))-1,Jr.push(ij(g,z,w))-1)}}for(e=0;e<q;++e)(f=Hr[e])&&(f.halfedges.length||delete Hr[e])}(g,h,i,j)}this.edges=Jr,this.cells=Hr,Gr=Ir=Jr=Hr=null}function zj(a){return function(){return a}}function Aj(a,b,c){this.k=a,this.x=b,this.y=c}function Bj(a){return a.__zoom||Or}function Cj(){a.event.stopImmediatePropagation()}function Dj(){a.event.preventDefault(),a.event.stopImmediatePropagation()}function Ej(){return!a.event.button}function Fj(){var a,b,c=this;return c instanceof SVGElement?(a=(c=c.ownerSVGElement||c).width.baseVal.value,b=c.height.baseVal.value):(a=c.clientWidth,b=c.clientHeight),[[0,0],[a,b]]}function Gj(){return this.__zoom||Or}function Hj(){return-a.event.deltaY*(a.event.deltaMode?120:1)/500}function Ij(){return"ontouchstart"in this}function Jj(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1],g=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}var Kj=c(b),Lj=Kj.right,Mj=Kj.left,Nj=Array.prototype,Oj=Nj.slice,Pj=Nj.map,Qj=Math.sqrt(50),Rj=Math.sqrt(10),Sj=Math.sqrt(2),Tj=Array.prototype.slice,Uj=1,Vj=2,Wj=3,Xj=4,Yj=1e-6,Zj={value:function(){}};A.prototype=z.prototype={constructor:A,on:function(a,b){var c,d=this._,e=function(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}(a+"",d),f=-1,g=e.length;if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=B(d[c],a.name,b);else if(null==b)for(c in d)d[c]=B(d[c],a.name,null);return this}for(;++f<g;)if((c=(a=e[f]).type)&&(c=function(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}(d[c],a.name)))return c},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new A(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(f=0,c=(d=this._[a]).length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};var $j="http://www.w3.org/1999/xhtml",_j={svg:"http://www.w3.org/2000/svg",xhtml:$j,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ak=function(a){return function(){return this.matches(a)}};if("undefined"!=typeof document){var bk=document.documentElement;if(!bk.matches){var ck=bk.webkitMatchesSelector||bk.msMatchesSelector||bk.mozMatchesSelector||bk.oMatchesSelector;ak=function(a){return function(){return ck.call(this,a)}}}}var dk=ak;J.prototype={constructor:J,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var ek="$";R.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var fk={};a.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(fk={mouseenter:"mouseover",mouseleave:"mouseout"}));var gk=[null];ga.prototype=ha.prototype={constructor:ga,select:function(a){"function"!=typeof a&&(a=F(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=new Array(i),k=0;k<i;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new ga(d,this._parents)},selectAll:function(a){"function"!=typeof a&&(a=H(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;f<c;++f)for(var g,h=b[f],i=h.length,j=0;j<i;++j)(g=h[j])&&(d.push(a.call(g,g.__data__,j,h)),e.push(g));return new ga(d,e)},filter:function(a){"function"!=typeof a&&(a=dk(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new ga(d,this._parents)},data:function(a,b){if(!a)return n=new Array(this.size()),j=-1,this.each(function(a){n[++j]=a}),n;var c=b?L:K,d=this._parents,e=this._groups;"function"!=typeof a&&(a=function(a){return function(){return a}}(a));for(var f=e.length,g=new Array(f),h=new Array(f),i=new Array(f),j=0;j<f;++j){var k=d[j],l=e[j],m=l.length,n=a.call(k,k&&k.__data__,j,d),o=n.length,p=h[j]=new Array(o),q=g[j]=new Array(o);c(k,l,p,q,i[j]=new Array(m),n,b);for(var r,s,t=0,u=0;t<o;++t)if(r=p[t]){for(t>=u&&(u=t+1);!(s=q[u])&&++u<o;);r._next=s||null}}return g=new ga(g,d),g._enter=h,g._exit=i,g},enter:function(){return new ga(this._enter||this._groups.map(I),this._parents)},exit:function(){return new ga(this._exit||this._groups.map(I),this._parents)},merge:function(a){for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new ga(g,this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&g!==d.nextSibling&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=M);for(var c=this._groups,d=c.length,e=new Array(d),f=0;f<d;++f){for(var g,h=c[f],i=h.length,j=e[f]=new Array(i),k=0;k<i;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new ga(e,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){var a=new Array(this.size()),b=-1;return this.each(function(){a[++b]=this}),a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){var a=0;return this.each(function(){++a}),a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e,f=b[c],g=0,h=f.length;g<h;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=C(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}}:"function"==typeof b?c.local?function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}:function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}:c.local?function(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}:function(a,b){return function(){this.setAttribute(a,b)}})(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?function(a){return function(){this.style.removeProperty(a)}}:"function"==typeof b?function(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}:function(a,b,c){return function(){this.style.setProperty(a,b,c)}})(a,b,null==c?"":c)):O(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?function(a){return function(){delete this[a]}}:"function"==typeof b?function(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}:function(a,b){return function(){this[a]=b}})(a,b)):this.node()[a]},classed:function(a,b){var c=P(a+"");if(arguments.length<2){for(var d=Q(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?function(a,b){return function(){(b.apply(this,arguments)?S:T)(this,a)}}:b?function(a){return function(){S(this,a)}}:function(a){return function(){T(this,a)}})(c,b))},text:function(a){return arguments.length?this.each(null==a?U:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}:function(a){return function(){this.textContent=a}})(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?V:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}:function(a){return function(){this.innerHTML=a}})(a)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(X)},append:function(a){var b="function"==typeof a?a:D(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:D(a),d=null==b?Y:"function"==typeof b?b:F(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(Z)},clone:function(a){return this.select(a?_:$)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=function(a){return a.trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}})}(a+""),g=f.length;if(!(arguments.length<2)){for(h=b?da:ca,null==c&&(c=!1),d=0;d<g;++d)this.each(h(f[d],b,c));return this}var h=this.node().__on;if(h)for(var i,j=0,k=h.length;j<k;++j)for(d=0,i=h[j];d<g;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value},dispatch:function(a,b){return this.each(("function"==typeof b?function(a,b){return function(){return fa(this,a,b.apply(this,arguments))}}:function(a,b){return function(){return fa(this,a,b)}})(a,b))}};var hk=0;ka.prototype=ja.prototype={constructor:ka,get:function(a){for(var b=this._;!(b in a);)if(!(a=a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}},ua.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var ik="\\s*([+-]?\\d+)\\s*",jk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",kk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lk=/^#([0-9a-f]{3})$/,mk=/^#([0-9a-f]{6})$/,nk=new RegExp("^rgb\\("+[ik,ik,ik]+"\\)$"),ok=new RegExp("^rgb\\("+[kk,kk,kk]+"\\)$"),pk=new RegExp("^rgba\\("+[ik,ik,ik,jk]+"\\)$"),qk=new RegExp("^rgba\\("+[kk,kk,kk,jk]+"\\)$"),rk=new RegExp("^hsl\\("+[jk,kk,kk]+"\\)$"),sk=new RegExp("^hsla\\("+[jk,kk,kk,jk]+"\\)$"),tk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};za(Ba,Ca,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),za(Ha,Ga,Aa(Ba,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Ha(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Ha(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),za(Ka,Ja,Aa(Ba,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Ka(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Ka(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new Ha(La(a>=240?a-240:a+120,e,d),La(a,e,d),La(a<120?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var uk=Math.PI/180,vk=180/Math.PI,wk=.95047,xk=1,yk=1.08883,zk=4/29,Ak=6/29,Bk=3*Ak*Ak,Ck=Ak*Ak*Ak;za(Oa,Na,Aa(Ba,{brighter:function(a){return new Oa(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new Oa(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return a=xk*Qa(a),b=wk*Qa(b),c=yk*Qa(c),new Ha(Ra(3.2404542*b-1.5371385*a-.4985314*c),Ra(-.969266*b+1.8760108*a+.041556*c),Ra(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}})),za(Ua,Ta,Aa(Ba,{brighter:function(a){return new Ua(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new Ua(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Ma(this).rgb()}}));var Dk=-.29227,Ek=-.90649,Fk=1.97294,Gk=Fk*Ek,Hk=1.78277*Fk,Ik=1.78277*Dk- -.14861*Ek;za(Wa,Va,Aa(Ba,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Wa(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Wa(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*uk,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new Ha(255*(b+c*(-.14861*d+1.78277*e)),255*(b+c*(Dk*d+Ek*e)),255*(b+c*(Fk*d)),this.opacity)}}));var Jk,Kk,Lk,Mk,Nk,Ok,Pk=function a(b){function c(a,b){var c=d((a=Ga(a)).r,(b=Ga(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=cb(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}var d=bb(b);return c.gamma=a,c}(1),Qk=db(Ya),Rk=db(Za),Sk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tk=new RegExp(Sk.source,"g"),Uk=180/Math.PI,Vk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Wk=mb(function(a){return"none"===a?Vk:(Jk||(Jk=document.createElement("DIV"),Kk=document.documentElement,Lk=document.defaultView),Jk.style.transform=a,a=Lk.getComputedStyle(Kk.appendChild(Jk),null).getPropertyValue("transform"),Kk.removeChild(Jk),a=a.slice(7,-1).split(","),lb(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5]))},"px, ","px)","deg)"),Xk=mb(function(a){return null==a?Vk:(Mk||(Mk=document.createElementNS("http://www.w3.org/2000/svg","g")),Mk.setAttribute("transform",a),(a=Mk.transform.baseVal.consolidate())?(a=a.matrix,lb(a.a,a.b,a.c,a.d,a.e,a.f)):Vk)},", ",")",")"),Yk=Math.SQRT2,Zk=2,$k=4,_k=1e-12,al=pb(ab),bl=pb(cb),cl=qb(ab),dl=qb(cb),el=rb(ab),fl=rb(cb),gl=0,hl=0,il=0,jl=1e3,kl=0,ll=0,ml=0,nl="object"==typeof performance&&performance.now?performance:Date,ol="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};ub.prototype=vb.prototype={constructor:ub,restart:function(a,b,c){if("function"!=typeof a)throw new TypeError("callback is not a function");c=(null==c?sb():+c)+(null==b?0:+b),this._next||Ok===this||(Ok?Ok._next=this:Nk=this,Ok=this),this._call=a,this._time=c,zb()},stop:function(){this._call&&(this._call=null,this._time=1/0,zb())}};var pl=z("start","end","interrupt"),ql=[],rl=0,sl=1,tl=2,ul=3,vl=4,wl=5,xl=6,yl=ha.prototype.constructor,zl=0,Al=ha.prototype;Ib.prototype=Jb.prototype={constructor:Ib,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=F(a));for(var d=this._groups,e=d.length,f=new Array(e),g=0;g<e;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=new Array(k),m=0;m<k;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,Bb(l[m],b,c,m,l,Eb(h,c)));return new Ib(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=H(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h)for(var i,j=d[h],k=j.length,l=0;l<k;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=Eb(i,c),p=0,q=n.length;p<q;++p)(m=n[p])&&Bb(m,b,c,p,n,o);f.push(n),g.push(i)}return new Ib(f,g,b,c)},filter:function(a){"function"!=typeof a&&(a=dk(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new Ib(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw new Error;for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new Ib(g,this._parents,this._name,this._id)},selection:function(){return new yl(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=Kb(),d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)if(g=h[j]){var k=Eb(g,b);Bb(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new Ib(d,this._parents,a,c)},call:Al.call,nodes:Al.nodes,node:Al.node,size:Al.size,empty:Al.empty,each:Al.each,on:function(a,b){var c=this._id;return arguments.length<2?Eb(this.node(),c).on.on(a):this.each(function(a,b,c){var d,e,f=function(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})}(b)?Cb:Db;return function(){var g=f(this,a),h=g.on;h!==d&&(e=(d=h).copy()).on(b,c),g.on=e}}(c,a,b))},attr:function(a,b){var c=C(a),d="transform"===c?Xk:Hb;return this.attrTween(a,"function"==typeof b?(c.local?function(a,b,c){var d,e,f;return function(){var g,h=c(this);if(null!=h)return(g=this.getAttributeNS(a.space,a.local))===h?null:g===d&&h===e?f:f=b(d=g,e=h);this.removeAttributeNS(a.space,a.local)}}:function(a,b,c){var d,e,f;return function(){var g,h=c(this);if(null!=h)return(g=this.getAttribute(a))===h?null:g===d&&h===e?f:f=b(d=g,e=h);this.removeAttribute(a)}})(c,d,Gb(this,"attr."+a,b)):null==b?(c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}})(c):(c.local?function(a,b,c){var d,e;return function(){var f=this.getAttributeNS(a.space,a.local);return f===c?null:f===d?e:e=b(d=f,c)}}:function(a,b,c){var d,e;return function(){var f=this.getAttribute(a);return f===c?null:f===d?e:e=b(d=f,c)}})(c,d,b+""))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw new Error;var d=C(a);return this.tween(c,(d.local?function(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttributeNS(a.space,a.local,d(b))}}return c._value=b,c}:function(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttribute(a,d(b))}}return c._value=b,c})(d,b))},style:function(a,b,c){var d="transform"==(a+="")?Wk:Hb;return null==b?this.styleTween(a,function(a,b){var c,d,e;return function(){var f=O(this,a),g=(this.style.removeProperty(a),O(this,a));return f===g?null:f===c&&g===d?e:e=b(c=f,d=g)}}(a,d)).on("end.style."+a,function(a){return function(){this.style.removeProperty(a)}}(a)):this.styleTween(a,"function"==typeof b?function(a,b,c){var d,e,f;return function(){var g=O(this,a),h=c(this);return null==h&&(this.style.removeProperty(a),h=O(this,a)),g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}(a,d,Gb(this,"style."+a,b)):function(a,b,c){var d,e;return function(){var f=O(this,a);return f===c?null:f===d?e:e=b(d=f,c)}}(a,d,b+""),c)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw new Error;return this.tween(d,function(a,b,c){function d(){var d=this,e=b.apply(d,arguments);return e&&function(b){d.style.setProperty(a,e(b),c)}}return d._value=b,d}(a,b,null==c?"":c))},text:function(a){return this.tween("text","function"==typeof a?function(a){return function(){var b=a(this);this.textContent=null==b?"":b}}(Gb(this,"text",a)):function(a){return function(){this.textContent=a}}(null==a?"":a+""))},remove:function(){return this.on("end.remove",function(a){return function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}(this._id))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=Eb(this.node(),c).tween,f=0,g=e.length;f<g;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?function(a,b){var c,d;return function(){var e=Db(this,a),f=e.tween;if(f!==c)for(var g=0,h=(d=c=f).length;g<h;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}e.tween=d}}:function(a,b,c){var d,e;if("function"!=typeof c)throw new Error;return function(){var f=Db(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}})(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){Cb(this,a).delay=+b.apply(this,arguments)}}:function(a,b){return b=+b,function(){Cb(this,a).delay=b}})(b,a)):Eb(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){Db(this,a).duration=+b.apply(this,arguments)}}:function(a,b){return b=+b,function(){Db(this,a).duration=b}})(b,a)):Eb(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(function(a,b){if("function"!=typeof b)throw new Error;return function(){Db(this,a).ease=b}}(b,a)):Eb(this.node(),b).ease}};var Bl=function a(b){function c(a){return Math.pow(a,b)}return b=+b,c.exponent=a,c}(3),Cl=function a(b){function c(a){return 1-Math.pow(1-a,b)}return b=+b,c.exponent=a,c}(3),Dl=function a(b){function c(a){return((a*=2)<=1?Math.pow(a,b):2-Math.pow(2-a,b))/2}return b=+b,c.exponent=a,c}(3),El=Math.PI,Fl=El/2,Gl=4/11,Hl=6/11,Il=8/11,Jl=.75,Kl=9/11,Ll=10/11,Ml=.9375,Nl=21/22,Ol=63/64,Pl=1/Gl/Gl,Ql=function a(b){function c(a){return a*a*((b+1)*a-b)}return b=+b,c.overshoot=a,c}(1.70158),Rl=function a(b){function c(a){return--a*a*((b+1)*a+b)+1}return b=+b,c.overshoot=a,c}(1.70158),Sl=function a(b){function c(a){return((a*=2)<1?a*a*((b+1)*a-b):(a-=2)*a*((b+1)*a+b)+2)/2}return b=+b,c.overshoot=a,c}(1.70158),Tl=2*Math.PI,Ul=function a(b,c){function d(a){
return b*Math.pow(2,10*--a)*Math.sin((e-a)/c)}var e=Math.asin(1/(b=Math.max(1,b)))*(c/=Tl);return d.amplitude=function(b){return a(b,c*Tl)},d.period=function(c){return a(b,c)},d}(1,.3),Vl=function a(b,c){function d(a){return 1-b*Math.pow(2,-10*(a=+a))*Math.sin((a+e)/c)}var e=Math.asin(1/(b=Math.max(1,b)))*(c/=Tl);return d.amplitude=function(b){return a(b,c*Tl)},d.period=function(c){return a(b,c)},d}(1,.3),Wl=function a(b,c){function d(a){return((a=2*a-1)<0?b*Math.pow(2,10*a)*Math.sin((e-a)/c):2-b*Math.pow(2,-10*a)*Math.sin((e+a)/c))/2}var e=Math.asin(1/(b=Math.max(1,b)))*(c/=Tl);return d.amplitude=function(b){return a(b,c*Tl)},d.period=function(c){return a(b,c)},d}(1,.3),Xl={time:null,delay:0,duration:250,ease:Mb};ha.prototype.interrupt=function(a){return this.each(function(){Fb(this,a)})},ha.prototype.transition=function(a){var b,c;a instanceof Ib?(b=a._id,a=a._name):(b=Kb(),(c=Xl).time=sb(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)(g=h[j])&&Bb(g,a,b,j,h,c||Rb(g,b));return new Ib(d,this._parents,a,b)};var Yl=[null],Zl={name:"drag"},$l={name:"space"},_l={name:"handle"},am={name:"center"},bm={name:"x",handles:["e","w"].map(Vb),input:function(a,b){return a&&[[a[0],b[0][1]],[a[1],b[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},cm={name:"y",handles:["n","s"].map(Vb),input:function(a,b){return a&&[[b[0][0],a[0]],[b[1][0],a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},dm={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Vb),input:function(a){return a},output:function(a){return a}},em={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},gm={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},hm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},im={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},jm=Math.cos,km=Math.sin,lm=Math.PI,mm=lm/2,nm=2*lm,om=Math.max,pm=Array.prototype.slice,qm=Math.PI,rm=2*qm,sm=rm-1e-6;ac.prototype=bc.prototype={constructor:ac,moveTo:function(a,b){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,b){this._+="L"+(this._x1=+a)+","+(this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._+="Q"+ +a+","+ +b+","+(this._x1=+c)+","+(this._y1=+d)},bezierCurveTo:function(a,b,c,d,e,f){this._+="C"+ +a+","+ +b+","+ +c+","+ +d+","+(this._x1=+e)+","+(this._y1=+f)},arcTo:function(a,b,c,d,e){a=+a,b=+b,c=+c,d=+d,e=+e;var f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(e<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=b);else if(l>1e-6)if(Math.abs(k*h-i*j)>1e-6&&e){var m=c-f,n=d-g,o=h*h+i*i,p=m*m+n*n,q=Math.sqrt(o),r=Math.sqrt(l),s=e*Math.tan((qm-Math.acos((o+l-p)/(2*q*r)))/2),t=s/r,u=s/q;Math.abs(t-1)>1e-6&&(this._+="L"+(a+t*j)+","+(b+t*k)),this._+="A"+e+","+e+",0,0,"+ +(k*m>j*n)+","+(this._x1=a+u*h)+","+(this._y1=b+u*i)}else this._+="L"+(this._x1=a)+","+(this._y1=b)},arc:function(a,b,c,d,e,f){a=+a,b=+b;var g=(c=+c)*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;if(c<0)throw new Error("negative radius: "+c);null===this._x1?this._+="M"+i+","+j:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-j)>1e-6)&&(this._+="L"+i+","+j),c&&(l<0&&(l=l%rm+rm),l>sm?this._+="A"+c+","+c+",0,1,"+k+","+(a-g)+","+(b-h)+"A"+c+","+c+",0,1,"+k+","+(this._x1=i)+","+(this._y1=j):l>1e-6&&(this._+="A"+c+","+c+",0,"+ +(l>=qm)+","+k+","+(this._x1=a+c*Math.cos(e))+","+(this._y1=b+c*Math.sin(e))))},rect:function(a,b,c,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)+"h"+ +c+"v"+ +d+"h"+-c+"Z"},toString:function(){return this._}},hc.prototype=ic.prototype={constructor:hc,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){return this["$"+a]=b,this},remove:function(a){var b="$"+a;return b in this&&delete this[b]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(this[b]);return a},entries:function(){var a=[];for(var b in this)"$"===b[0]&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0;for(var b in this)"$"===b[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var b in this)"$"===b[0]&&a(this[b],b.slice(1),this)}};var tm=ic.prototype;nc.prototype=oc.prototype={constructor:nc,has:tm.has,add:function(a){return a+="",this["$"+a]=a,this},remove:tm.remove,clear:tm.clear,values:tm.keys,size:tm.size,empty:tm.empty,each:tm.each};var um={},vm={},wm=34,xm=10,ym=13,zm=qc(","),Am=zm.parse,Bm=zm.parseRows,Cm=zm.format,Dm=zm.formatRows,Em=qc("\t"),Fm=Em.parse,Gm=Em.parseRows,Hm=Em.format,Im=Em.formatRows,Jm=xc.prototype=yc.prototype;Jm.copy=function(){var a,b,c=new yc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return c;if(!d.length)return c._root=zc(d),c;for(a=[{source:d,target:c._root=new Array(4)}];d=a.pop();)for(var e=0;e<4;++e)(b=d.source[e])&&(b.length?a.push({source:b,target:d.target[e]=new Array(4)}):d.target[e]=zc(b));return c},Jm.add=function(a){var b=+this._x.call(null,a),c=+this._y.call(null,a);return tc(this.cover(b,c),b,c,a)},Jm.addAll=function(a){var b,c,d,e,f=a.length,g=new Array(f),h=new Array(f),i=1/0,j=1/0,k=-1/0,l=-1/0;for(c=0;c<f;++c)isNaN(d=+this._x.call(null,b=a[c]))||isNaN(e=+this._y.call(null,b))||(g[c]=d,h[c]=e,d<i&&(i=d),d>k&&(k=d),e<j&&(j=e),e>l&&(l=e));for(k<i&&(i=this._x0,k=this._x1),l<j&&(j=this._y0,l=this._y1),this.cover(i,j).cover(k,l),c=0;c<f;++c)tc(this,g[c],h[c],a[c]);return this},Jm.cover=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,f=(d=Math.floor(b))+1;else{if(!(c>a||a>e||d>b||b>f))return this;var g,h,i=e-c,j=this._root;switch(h=(b<(d+f)/2)<<1|a<(c+e)/2){case 0:do{g=new Array(4),g[h]=j,j=g}while(i*=2,e=c+i,f=d+i,a>e||b>f);break;case 1:do{g=new Array(4),g[h]=j,j=g}while(i*=2,c=e-i,f=d+i,c>a||b>f);break;case 2:do{g=new Array(4),g[h]=j,j=g}while(i*=2,e=c+i,d=f-i,a>e||d>b);break;case 3:do{g=new Array(4),g[h]=j,j=g}while(i*=2,c=e-i,d=f-i,c>a||d>b)}this._root&&this._root.length&&(this._root=j)}return this._x0=c,this._y0=d,this._x1=e,this._y1=f,this},Jm.data=function(){var a=[];return this.visit(function(b){if(!b.length)do{a.push(b.data)}while(b=b.next)}),a},Jm.extent=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Jm.find=function(a,b,c){var d,e,f,g,h,i,j,k=this._x0,l=this._y0,m=this._x1,n=this._y1,o=[],p=this._root;for(p&&o.push(new uc(p,k,l,m,n)),null==c?c=1/0:(k=a-c,l=b-c,m=a+c,n=b+c,c*=c);i=o.pop();)if(!(!(p=i.node)||(e=i.x0)>m||(f=i.y0)>n||(g=i.x1)<k||(h=i.y1)<l))if(p.length){var q=(e+g)/2,r=(f+h)/2;o.push(new uc(p[3],q,r,g,h),new uc(p[2],e,r,q,h),new uc(p[1],q,f,g,r),new uc(p[0],e,f,q,r)),(j=(b>=r)<<1|a>=q)&&(i=o[o.length-1],o[o.length-1]=o[o.length-1-j],o[o.length-1-j]=i)}else{var s=a-+this._x.call(null,p.data),t=b-+this._y.call(null,p.data),u=s*s+t*t;if(u<c){var v=Math.sqrt(c=u);k=a-v,l=b-v,m=a+v,n=b+v,d=p.data}}return d},Jm.remove=function(a){if(isNaN(f=+this._x.call(null,a))||isNaN(g=+this._y.call(null,a)))return this;var b,c,d,e,f,g,h,i,j,k,l,m,n=this._root,o=this._x0,p=this._y0,q=this._x1,r=this._y1;if(!n)return this;if(n.length)for(;;){if((j=f>=(h=(o+q)/2))?o=h:q=h,(k=g>=(i=(p+r)/2))?p=i:r=i,b=n,!(n=n[l=k<<1|j]))return this;if(!n.length)break;(b[l+1&3]||b[l+2&3]||b[l+3&3])&&(c=b,m=l)}for(;n.data!==a;)if(d=n,!(n=n.next))return this;return(e=n.next)&&delete n.next,d?(e?d.next=e:delete d.next,this):b?(e?b[l]=e:delete b[l],(n=b[0]||b[1]||b[2]||b[3])&&n===(b[3]||b[2]||b[1]||b[0])&&!n.length&&(c?c[m]=n:this._root=n),this):(this._root=e,this)},Jm.removeAll=function(a){for(var b=0,c=a.length;b<c;++b)this.remove(a[b]);return this},Jm.root=function(){return this._root},Jm.size=function(){var a=0;return this.visit(function(b){if(!b.length)do{++a}while(b=b.next)}),a},Jm.visit=function(a){var b,c,d,e,f,g,h=[],i=this._root;for(i&&h.push(new uc(i,this._x0,this._y0,this._x1,this._y1));b=h.pop();)if(!a(i=b.node,d=b.x0,e=b.y0,f=b.x1,g=b.y1)&&i.length){var j=(d+f)/2,k=(e+g)/2;(c=i[3])&&h.push(new uc(c,j,k,f,g)),(c=i[2])&&h.push(new uc(c,d,k,j,g)),(c=i[1])&&h.push(new uc(c,j,e,f,k)),(c=i[0])&&h.push(new uc(c,d,e,j,k))}return this},Jm.visitAfter=function(a){var b,c=[],d=[];for(this._root&&c.push(new uc(this._root,this._x0,this._y0,this._x1,this._y1));b=c.pop();){var e=b.node;if(e.length){var f,g=b.x0,h=b.y0,i=b.x1,j=b.y1,k=(g+i)/2,l=(h+j)/2;(f=e[0])&&c.push(new uc(f,g,h,k,l)),(f=e[1])&&c.push(new uc(f,k,h,i,l)),(f=e[2])&&c.push(new uc(f,g,l,k,j)),(f=e[3])&&c.push(new uc(f,k,l,i,j))}d.push(b)}for(;b=d.pop();)a(b.node,b.x0,b.y0,b.x1,b.y1);return this},Jm.x=function(a){return arguments.length?(this._x=a,this):this._x},Jm.y=function(a){return arguments.length?(this._y=a,this):this._y};var Km,Lm=10,Mm=Math.PI*(3-Math.sqrt(5)),Nm={"":function(a,b){a:for(var c,d=(a=a.toPrecision(b)).length,e=1,f=-1;e<d;++e)switch(a[e]){case".":f=c=e;break;case"0":0===f&&(f=e),c=e;break;case"e":break a;default:f>0&&(f=0)}return f>0?a.slice(0,f)+a.slice(c+1):a},"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return Ic(100*a,b)},r:Ic,s:function(a,b){var c=Gc(a,b);if(!c)return a+"";var d=c[0],e=c[1],f=e-(Km=3*Math.max(-8,Math.min(8,Math.floor(e/3))))+1,g=d.length;return f===g?d:f>g?d+new Array(f-g+1).join("0"):f>0?d.slice(0,f)+"."+d.slice(f):"0."+new Array(1-f).join("0")+Gc(a,Math.max(0,b+f-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},Om=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Jc.prototype=Kc.prototype,Kc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Pm,Qm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Nc({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Sc.prototype={constructor:Sc,reset:function(){this.s=this.t=0},add:function(a){Tc(vn,a,this.t),Tc(this,vn.s,this.s),this.s?this.t+=vn.t:this.s=vn.t},valueOf:function(){return this.s}};var Rm,Sm,Tm,Um,Vm,Wm,Xm,Ym,Zm,$m,_m,an,bn,cn,dn,en,fn,gn,hn,jn,kn,ln,mn,nn,on,pn,qn,rn,sn,tn,un,vn=new Sc,wn=1e-6,xn=Math.PI,yn=xn/2,zn=xn/4,An=2*xn,Bn=180/xn,Cn=xn/180,Dn=Math.abs,En=Math.atan,Fn=Math.atan2,Gn=Math.cos,Hn=Math.ceil,In=Math.exp,Jn=Math.log,Kn=Math.pow,Ln=Math.sin,Mn=Math.sign||function(a){return a>0?1:a<0?-1:0},Nn=Math.sqrt,On=Math.tan,Pn={Feature:function(a,b){Yc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Yc(c[d].geometry,b)}},Qn={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Zc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Zc(c[d],b,0)},Polygon:function(a,b){$c(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)$c(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Yc(c[d],b)}},Rn=Rc(),Sn=Rc(),Tn={point:Xc,lineStart:Xc,lineEnd:Xc,polygonStart:function(){Rn.reset(),Tn.lineStart=ad,Tn.lineEnd=bd},polygonEnd:function(){var a=+Rn;Sn.add(a<0?An+a:a),this.lineStart=this.lineEnd=this.point=Xc},sphere:function(){Sn.add(An)}},Un=Rc(),Vn={point:ld,lineStart:nd,lineEnd:od,polygonStart:function(){Vn.point=pd,Vn.lineStart=qd,Vn.lineEnd=rd,Un.reset(),Tn.polygonStart()},polygonEnd:function(){Tn.polygonEnd(),Vn.point=ld,Vn.lineStart=nd,Vn.lineEnd=od,Rn<0?(Wm=-(Ym=180),Xm=-(Zm=90)):Un>wn?Zm=90:Un<-wn&&(Xm=-90),dn[0]=Wm,dn[1]=Ym}},Wn={sphere:Xc,point:vd,lineStart:xd,lineEnd:Ad,polygonStart:function(){Wn.lineStart=Bd,Wn.lineEnd=Cd},polygonEnd:function(){Wn.lineStart=xd,Wn.lineEnd=Ad}};Hd.invert=Hd;var Xn,Yn,Zn,$n,_n,ao,bo,co,eo,fo,go,ho=Rc(),io=Vd(function(){return!0},function(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?xn:-xn,i=Dn(f-c);Dn(i-xn)<wn?(a.point(c,d=(d+g)/2>0?yn:-yn),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=xn&&(Dn(c-e)<wn&&(c-=e*wn),Dn(f-h)<wn&&(f-=h*wn),d=function(a,b,c,d){var e,f,g=Ln(a-c);return Dn(g)>wn?En((Ln(b)*(f=Gn(d))*Ln(c)-Ln(d)*(e=Gn(b))*Ln(a))/(e*f*g)):(b+d)/2}(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}},function(a,b,c,d){var e;if(null==a)e=c*yn,d.point(-xn,e),d.point(0,e),d.point(xn,e),d.point(xn,0),d.point(xn,-e),d.point(0,-e),d.point(-xn,-e),d.point(-xn,0),d.point(-xn,e);else if(Dn(a[0]-b[0])>wn){var f=a[0]<b[0]?xn:-xn;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])},[-xn,-yn]),jo=1e9,ko=-jo,lo=Rc(),mo={sphere:Xc,point:Xc,lineStart:function(){mo.point=_d,mo.lineEnd=$d},lineEnd:Xc,polygonStart:Xc,polygonEnd:Xc},no=[null,null],oo={type:"LineString",coordinates:no},po={Feature:function(a,b){return de(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)if(de(c[d].geometry,b))return!0;return!1}},qo={Sphere:function(){return!0},Point:function(a,b){return ee(a.coordinates,b)},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(ee(c[d],b))return!0;return!1},LineString:function(a,b){return fe(a.coordinates,b)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(fe(c[d],b))return!0;return!1},Polygon:function(a,b){return ge(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)if(ge(c[d],b))return!0;return!1},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)if(de(c[d],b))return!0;return!1}},ro=Rc(),so=Rc(),to={point:Xc,lineStart:Xc,lineEnd:Xc,polygonStart:function(){to.lineStart=ne,to.lineEnd=qe},polygonEnd:function(){to.lineStart=to.lineEnd=to.point=Xc,ro.add(Dn(so)),so.reset()},result:function(){var a=ro/2;return ro.reset(),a}},uo=1/0,vo=uo,wo=-uo,xo=wo,yo={point:function(a,b){a<uo&&(uo=a),a>wo&&(wo=a),b<vo&&(vo=b),b>xo&&(xo=b)},lineStart:Xc,lineEnd:Xc,polygonStart:Xc,polygonEnd:Xc,result:function(){var a=[[uo,vo],[wo,xo]];return wo=xo=-(vo=uo=1/0),a}},zo=0,Ao=0,Bo=0,Co=0,Do=0,Eo=0,Fo=0,Go=0,Ho=0,Io={point:re,lineStart:se,lineEnd:ve,polygonStart:function(){Io.lineStart=we,Io.lineEnd=xe},polygonEnd:function(){Io.point=re,Io.lineStart=se,Io.lineEnd=ve},result:function(){var a=Ho?[Fo/Ho,Go/Ho]:Eo?[Co/Eo,Do/Eo]:Bo?[zo/Bo,Ao/Bo]:[NaN,NaN];return zo=Ao=Bo=Co=Do=Eo=Fo=Go=Ho=0,a}};Ae.prototype={_radius:4.5,pointRadius:function(a){return this._radius=a,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(a,b){switch(this._point){case 0:this._context.moveTo(a,b),this._point=1;break;case 1:this._context.lineTo(a,b);break;default:this._context.moveTo(a+this._radius,b),this._context.arc(a,b,this._radius,0,An)}},result:Xc};var Jo,Ko,Lo,Mo,No,Oo=Rc(),Po={point:Xc,lineStart:function(){Po.point=Be},lineEnd:function(){Jo&&Ce(Ko,Lo),Po.point=Xc},polygonStart:function(){Jo=!0},polygonEnd:function(){Jo=null},result:function(){var a=+Oo;return Oo.reset(),a}};De.prototype={_radius:4.5,_circle:Ee(4.5),pointRadius:function(a){return(a=+a)!==this._radius&&(this._radius=a,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(a,b){switch(this._point){case 0:this._string.push("M",a,",",b),this._point=1;break;case 1:this._string.push("L",a,",",b);break;default:null==this._circle&&(this._circle=Ee(this._radius)),this._string.push("M",a,",",b,this._circle)}},result:function(){if(this._string.length){var a=this._string.join("");return this._string=[],a}return null}},Ge.prototype={constructor:Ge,point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qo=16,Ro=Gn(30*Cn),So=Fe({point:function(a,b){this.stream.point(a*Cn,b*Cn)}}),To=Te(function(a){return Nn(2/(1+a))});To.invert=Ue(function(a){return 2*Vc(a/2)});var Uo=Te(function(a){return(a=Uc(a))&&a/Ln(a)});Uo.invert=Ue(function(a){return a}),Ve.invert=function(a,b){return[a,2*En(In(b))-yn]},Ze.invert=Ze,_e.invert=Ue(En),bf.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))-b)/(1.007226+f*(.045255+g*(.259866*f-.311325-.005916*11*g)))}while(Dn(c)>wn&&--e>0);return[a/(.8707+(f=d*d)*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979)),d]},cf.invert=Ue(Vc),df.invert=Ue(function(a){return 2*En(a)}),ef.invert=function(a,b){return[-b,2*En(In(a))-yn]},of.prototype=kf.prototype={constructor:of,count:function(){return this.eachAfter(jf)},each:function(a){var b,c,d,e,f=this,g=[f];do{for(b=g.reverse(),g=[];f=b.pop();)if(a(f),c=f.children)for(d=0,e=c.length;d<e;++d)g.push(c[d])}while(g.length);return this},eachAfter:function(a){for(var b,c,d,e=this,f=[e],g=[];e=f.pop();)if(g.push(e),b=e.children)for(c=0,d=b.length;c<d;++c)f.push(b[c]);for(;e=g.pop();)a(e);return this},eachBefore:function(a){for(var b,c,d=this,e=[d];d=e.pop();)if(a(d),b=d.children)for(c=b.length-1;c>=0;--c)e.push(b[c]);return this},sum:function(a){return this.eachAfter(function(b){for(var c=+a(b.data)||0,d=b.children,e=d&&d.length;--e>=0;)c+=d[e].value;b.value=c})},sort:function(a){return this.eachBefore(function(b){b.children&&b.children.sort(a)})},path:function(a){for(var b=this,c=function(a,b){if(a===b)return a;var c=a.ancestors(),d=b.ancestors(),e=null;for(a=c.pop(),b=d.pop();a===b;)e=a,a=c.pop(),b=d.pop();return e}(b,a),d=[b];b!==c;)b=b.parent,d.push(b);for(var e=d.length;a!==c;)d.splice(e,0,a),a=a.parent;return d},ancestors:function(){for(var a=this,b=[a];a=a.parent;)b.push(a);return b},descendants:function(){var a=[];return this.each(function(b){a.push(b)}),a},leaves:function(){var a=[];return this.eachBefore(function(b){b.children||a.push(b)}),a},links:function(){var a=this,b=[];return a.each(function(c){c!==a&&b.push({source:c.parent,target:c})}),b},copy:function(){return kf(this).eachBefore(mf)}};var Vo=Array.prototype.slice,Wo="$",Xo={depth:-1},Yo={};Qf.prototype=Object.create(of.prototype);var Zo=(1+Math.sqrt(5))/2,$o=function a(b){function c(a,c,d,e,f){Sf(b,a,c,d,e,f)}return c.ratio=function(b){return a((b=+b)>1?b:1)},c}(Zo),_o=function a(b){function c(a,c,d,e,f){if((g=a._squarify)&&g.ratio===b)for(var g,h,i,j,k,l=-1,m=g.length,n=a.value;++l<m;){for(i=(h=g[l]).children,j=h.value=0,k=i.length;j<k;++j)h.value+=i[j].value;h.dice?If(h,c,d,e,d+=(f-d)*h.value/n):Rf(h,c,d,c+=(e-c)*h.value/n,f),n-=h.value}else a._squarify=g=Sf(b,a,c,d,e,f),g.ratio=b}return c.ratio=function(b){return a((b=+b)>1?b:1)},c}(Zo),ap=[].slice,bp={};Wf.prototype=$f.prototype={constructor:Wf,defer:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var b=ap.call(arguments,1);return b.push(a),++this._waiting,this._tasks.push(b),Xf(this),this},abort:function(){return null==this._error&&Yf(this,new Error("abort")),this},await:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(b,c){a.apply(null,[b].concat(c))},Zf(this),this},awaitAll:function(a){if("function"!=typeof a)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=a,Zf(this),this}};var cp=function a(b){function c(a,c){return a=null==a?0:+a,c=null==c?1:+c,1===arguments.length?(c=a,a=0):c-=a,function(){return b()*c+a}}return c.source=a,c}(_f),dp=function a(b){function c(a,c){var d,e;return a=null==a?0:+a,c=null==c?1:+c,function(){var f;if(null!=d)f=d,d=null;else do{d=2*b()-1,f=2*b()-1,e=d*d+f*f}while(!e||e>1);return a+c*f*Math.sqrt(-2*Math.log(e)/e)}}return c.source=a,c}(_f),ep=function a(b){function c(){var a=dp.source(b).apply(this,arguments);return function(){return Math.exp(a())}}return c.source=a,c}(_f),fp=function a(b){function c(a){return function(){for(var c=0,d=0;d<a;++d)c+=b();return c}}return c.source=a,c}(_f),gp=function a(b){function c(a){var c=fp.source(b)(a);return function(){return c()/a}}return c.source=a,c}(_f),hp=function a(b){function c(a){return function(){return-Math.log(1-b())/a}}return c.source=a,c}(_f),ip=bg("text/html",function(a){return document.createRange().createContextualFragment(a.responseText)}),jp=bg("application/json",function(a){return JSON.parse(a.responseText)}),kp=bg("text/plain",function(a){return a.responseText}),lp=bg("application/xml",function(a){var b=a.responseXML;if(!b)throw new Error("parse error");return b}),mp=cg("text/csv",Am),np=cg("text/tab-separated-values",Fm),op=Array.prototype,pp=op.map,qp=op.slice,rp={name:"implicit"},sp=[0,1],tp=new Date,up=new Date,vp=Dg(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});vp.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?Dg(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a}):vp:null};var wp=vp.range,xp=6e4,yp=6048e5,zp=Dg(function(a){a.setTime(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getUTCSeconds()}),Ap=zp.range,Bp=Dg(function(a){a.setTime(Math.floor(a/xp)*xp)},function(a,b){a.setTime(+a+b*xp)},function(a,b){return(b-a)/xp},function(a){return a.getMinutes()}),Cp=Bp.range,Dp=Dg(function(a){var b=a.getTimezoneOffset()*xp%36e5;b<0&&(b+=36e5),a.setTime(36e5*Math.floor((+a-b)/36e5)+b)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getHours()}),Ep=Dp.range,Fp=Dg(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*xp)/864e5},function(a){return a.getDate()-1}),Gp=Fp.range,Hp=Eg(0),Ip=Eg(1),Jp=Eg(2),Kp=Eg(3),Lp=Eg(4),Mp=Eg(5),Np=Eg(6),Op=Hp.range,Pp=Ip.range,Qp=Jp.range,Rp=Kp.range,Sp=Lp.range,Tp=Mp.range,Up=Np.range,Vp=Dg(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+12*(b.getFullYear()-a.getFullYear())},function(a){return a.getMonth()}),Wp=Vp.range,Xp=Dg(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Xp.every=function(a){return isFinite(a=Math.floor(a))&&a>0?Dg(function(b){b.setFullYear(Math.floor(b.getFullYear()/a)*a),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*a)}):null};var Yp=Xp.range,Zp=Dg(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+b*xp)},function(a,b){return(b-a)/xp},function(a){return a.getUTCMinutes()}),$p=Zp.range,_p=Dg(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getUTCHours()}),aq=_p.range,bq=Dg(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return(b-a)/864e5},function(a){return a.getUTCDate()-1}),cq=bq.range,dq=Fg(0),eq=Fg(1),fq=Fg(2),gq=Fg(3),hq=Fg(4),iq=Fg(5),jq=Fg(6),kq=dq.range,lq=eq.range,mq=fq.range,nq=gq.range,oq=hq.range,pq=iq.range,qq=jq.range,rq=Dg(function(a){a.setUTCDate(1),a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+12*(b.getUTCFullYear()-a.getUTCFullYear())},function(a){return a.getUTCMonth()}),sq=rq.range,tq=Dg(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});tq.every=function(a){return isFinite(a=Math.floor(a))&&a>0?Dg(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*a)}):null};var uq,vq=tq.range,wq={"-":"",_:" ",0:"0"},xq=/^\s*\d+/,yq=/^%/,zq=/[\\^$*+?|[\]().{}]/g;Qh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Aq="%Y-%m-%dT%H:%M:%S.%LZ",Bq=Date.prototype.toISOString?function(a){return a.toISOString()}:a.utcFormat(Aq),Cq=+new Date("2000-01-01T00:00:00.000Z")?function(a){var b=new Date(a);return isNaN(b)?null:b
}:a.utcParse(Aq),Dq=1e3,Eq=60*Dq,Fq=60*Eq,Gq=24*Fq,Hq=7*Gq,Iq=30*Gq,Jq=365*Gq,Kq=Uh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lq=Uh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Mq=Uh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Nq=Uh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Oq=fl(Va(300,.5,0),Va(-240,.5,1)),Pq=fl(Va(-100,.75,.35),Va(80,1.5,.8)),Qq=fl(Va(260,.75,.35),Va(80,1.5,.8)),Rq=Va(),Sq=Vh(Uh("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Tq=Vh(Uh("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Uq=Vh(Uh("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Vq=Vh(Uh("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Wq=Math.abs,Xq=Math.atan2,Yq=Math.cos,Zq=Math.max,$q=Math.min,_q=Math.sin,ar=Math.sqrt,br=1e-12,cr=Math.PI,dr=cr/2,er=2*cr;di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}};var fr=mi(ei);li.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,b){this._curve.point(b*Math.sin(a),b*-Math.cos(a))}};var gr=Array.prototype.slice,hr={draw:function(a,b){var c=Math.sqrt(b/cr);a.moveTo(c,0),a.arc(0,0,c,0,er)}},ir={draw:function(a,b){var c=Math.sqrt(b/5)/2;a.moveTo(-3*c,-c),a.lineTo(-c,-c),a.lineTo(-c,-3*c),a.lineTo(c,-3*c),a.lineTo(c,-c),a.lineTo(3*c,-c),a.lineTo(3*c,c),a.lineTo(c,c),a.lineTo(c,3*c),a.lineTo(-c,3*c),a.lineTo(-c,c),a.lineTo(-3*c,c),a.closePath()}},jr=Math.sqrt(1/3),kr=2*jr,lr={draw:function(a,b){var c=Math.sqrt(b/kr),d=c*jr;a.moveTo(0,-c),a.lineTo(d,0),a.lineTo(0,c),a.lineTo(-d,0),a.closePath()}},mr=Math.sin(cr/10)/Math.sin(7*cr/10),nr=Math.sin(er/10)*mr,or=-Math.cos(er/10)*mr,pr={draw:function(a,b){var c=Math.sqrt(.8908130915292852*b),d=nr*c,e=or*c;a.moveTo(0,-c),a.lineTo(d,e);for(var f=1;f<5;++f){var g=er*f/5,h=Math.cos(g),i=Math.sin(g);a.lineTo(i*c,-h*c),a.lineTo(h*d-i*e,i*d+h*e)}a.closePath()}},qr={draw:function(a,b){var c=Math.sqrt(b),d=-c/2;a.rect(d,d,c,c)}},rr=Math.sqrt(3),sr={draw:function(a,b){var c=-Math.sqrt(b/(3*rr));a.moveTo(0,2*c),a.lineTo(-rr*c,-c),a.lineTo(rr*c,-c),a.closePath()}},tr=Math.sqrt(3)/2,ur=1/Math.sqrt(12),vr=3*(ur/2+1),wr={draw:function(a,b){var c=Math.sqrt(b/vr),d=c/2,e=c*ur,f=d,g=c*ur+c,h=-f,i=g;a.moveTo(d,e),a.lineTo(f,g),a.lineTo(h,i),a.lineTo(-.5*d-tr*e,tr*d+-.5*e),a.lineTo(-.5*f-tr*g,tr*f+-.5*g),a.lineTo(-.5*h-tr*i,tr*h+-.5*i),a.lineTo(-.5*d+tr*e,-.5*e-tr*d),a.lineTo(-.5*f+tr*g,-.5*g-tr*f),a.lineTo(-.5*h+tr*i,-.5*i-tr*h),a.closePath()}},xr=[hr,ir,lr,qr,pr,sr,wr];zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yi(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},Ai.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._x2=a,this._y2=b;break;case 1:this._point=2,this._x3=a,this._y3=b;break;case 2:this._point=3,this._x4=a,this._y4=b,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:yi(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},Bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:yi(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},Ci.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var a=this._x,b=this._y,c=a.length-1;if(c>0)for(var d,e=a[0],f=b[0],g=a[c]-e,h=b[c]-f,i=-1;++i<=c;)d=i/c,this._basis.point(this._beta*a[i]+(1-this._beta)*(e+d*g),this._beta*b[i]+(1-this._beta)*(f+d*h));this._x=this._y=null,this._basis.lineEnd()},point:function(a,b){this._x.push(+a),this._y.push(+b)}};var yr=function a(b){function c(a){return 1===b?new zi(a):new Ci(a,b)}return c.beta=function(b){return a(+b)},c}(.85);Ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Di(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2,this._x1=a,this._y1=b;break;case 2:this._point=3;default:Di(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var zr=function a(b){function c(a){return new Ei(a,b)}return c.tension=function(b){return a(+b)},c}(0);Fi.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:Di(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var Ar=function a(b){function c(a){return new Fi(a,b)}return c.tension=function(b){return a(+b)},c}(0);Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Di(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var Br=function a(b){function c(a){return new Gi(a,b)}return c.tension=function(b){return a(+b)},c}(0);Ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:Hi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var Cr=function a(b){function c(a){return b?new Ii(a,b):new Ei(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);Ji.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:Hi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var Dr=function a(b){function c(a){return b?new Ji(a,b):new Fi(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);Ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a=+a,b=+b,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hi(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};var Er=function a(b){function c(a){return b?new Ki(a,b):new Gi(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);Li.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a=+a,b=+b,this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}},Qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pi(this,this._t0,Oi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){var c=NaN;if(a=+a,b=+b,a!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,Pi(this,Oi(this,c=Ni(this,a,b)),c);break;default:Pi(this,this._t0,c=Ni(this,a,b))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b,this._t0=c}}},(Ri.prototype=Object.create(Qi.prototype)).point=function(a,b){Qi.prototype.point.call(this,b,a)},Si.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}},Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=Ui(a),e=Ui(b),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,b){this._x.push(+a),this._y.push(+b)}},Vi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){switch(a=+a,b=+b,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,b)}}this._x=a,this._y=b}},cj.prototype={constructor:cj,insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gj(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)c===(d=c.U).L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ej(this,c),c=(a=c).U),c.C=!1,d.C=!0,fj(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fj(this,c),c=(a=c).U),c.C=!1,d.C=!0,ej(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gj(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===e.L){if((b=e.R).C&&(b.C=!1,e.C=!0,ej(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fj(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ej(this,e),a=this._;break}}else if((b=e.L).C&&(b.C=!1,e.C=!0,fj(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ej(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fj(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}};var Fr,Gr,Hr,Ir,Jr,Kr=[],Lr=[],Mr=1e-6,Nr=1e-12;yj.prototype={constructor:yj,polygons:function(){var a=this.edges;return this.cells.map(function(b){var c=b.halfedges.map(function(c){return nj(b,a[c])});return c.data=b.site.data,c})},triangles:function(){var a=[],b=this.edges;return this.cells.forEach(function(c,d){if(f=(e=c.halfedges).length)for(var e,f,g,h=c.site,i=-1,j=b[e[f-1]],k=j.left===h?j.right:j.left;++i<f;)g=k,k=(j=b[e[i]]).left===h?j.right:j.left,g&&k&&d<g.index&&d<k.index&&wj(h,g,k)<0&&a.push([h.data,g.data,k.data])}),a},links:function(){return this.edges.filter(function(a){return a.right}).map(function(a){return{source:a.left.data,target:a.right.data}})},find:function(a,b,c){for(var d,e,f=this,g=f._found||0,h=f.cells.length;!(e=f.cells[g]);)if(++g>=h)return null;var i=a-e.site[0],j=b-e.site[1],k=i*i+j*j;do{e=f.cells[d=g],g=null,e.halfedges.forEach(function(c){var d=f.edges[c],h=d.left;if(h!==e.site&&h||(h=d.right)){var i=a-h[0],j=b-h[1],l=i*i+j*j;l<k&&(k=l,g=h.index)}})}while(null!==g);return f._found=d,null==c||k<=c*c?e.site:null}},Aj.prototype={constructor:Aj,scale:function(a){return 1===a?this:new Aj(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new Aj(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Or=new Aj(1,0,0);Bj.prototype=Aj.prototype,a.version="4.13.0",a.bisect=Lj,a.bisectRight=Lj,a.bisectLeft=Mj,a.ascending=b,a.bisector=c,a.cross=function(a,b,c){var e,f,g,h,i=a.length,j=b.length,k=new Array(i*j);for(null==c&&(c=d),e=g=0;e<i;++e)for(h=a[e],f=0;f<j;++f,++g)k[g]=c(h,b[f]);return k},a.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},a.deviation=g,a.extent=h,a.histogram=function(){function a(a){var e,f,g=a.length,h=new Array(g);for(e=0;e<g;++e)h[e]=b(a[e],e,a);var i=c(h),j=i[0],l=i[1],m=d(h,j,l);Array.isArray(m)||(m=n(j,l,m),m=k(Math.ceil(j/m)*m,Math.floor(l/m)*m,m));for(var o=m.length;m[0]<=j;)m.shift(),--o;for(;m[o-1]>l;)m.pop(),--o;var p,q=new Array(o+1);for(e=0;e<=o;++e)(p=q[e]=[]).x0=e>0?m[e-1]:j,p.x1=e<o?m[e]:l;for(e=0;e<g;++e)j<=(f=h[e])&&f<=l&&q[Lj(m,f,0,o)].push(a[e]);return q}var b=j,c=h,d=o;return a.value=function(c){return arguments.length?(b="function"==typeof c?c:i(c),a):b},a.domain=function(b){return arguments.length?(c="function"==typeof b?b:i([b[0],b[1]]),a):c},a.thresholds=function(b){return arguments.length?(d="function"==typeof b?b:i(Array.isArray(b)?Oj.call(b):b),a):d},a},a.thresholdFreedmanDiaconis=function(a,c,d){return a=Pj.call(a,e).sort(b),Math.ceil((d-c)/(2*(p(a,.75)-p(a,.25))*Math.pow(a.length,-1/3)))},a.thresholdScott=function(a,b,c){return Math.ceil((c-b)/(3.5*g(a)*Math.pow(a.length,-1/3)))},a.thresholdSturges=o,a.max=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&c>d&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&c>d&&(d=c);return d},a.mean=function(a,b){var c,d=a.length,f=d,g=-1,h=0;if(null==b)for(;++g<d;)isNaN(c=e(a[g]))?--f:h+=c;else for(;++g<d;)isNaN(c=e(b(a[g],g,a)))?--f:h+=c;if(f)return h/f},a.median=function(a,c){var d,f=a.length,g=-1,h=[];if(null==c)for(;++g<f;)isNaN(d=e(a[g]))||h.push(d);else for(;++g<f;)isNaN(d=e(c(a[g],g,a)))||h.push(d);return p(h.sort(b),.5)},a.merge=q,a.min=r,a.pairs=function(a,b){null==b&&(b=d);for(var c=0,e=a.length-1,f=a[0],g=new Array(e<0?0:e);c<e;)g[c]=b(f,f=a[++c]);return g},a.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},a.quantile=p,a.range=k,a.scan=function(a,c){if(d=a.length){var d,e,f=0,g=0,h=a[g];for(null==c&&(c=b);++f<d;)(c(e=a[f],h)<0||0!==c(h,h))&&(h=e,g=f);return 0===c(h,h)?g:void 0}},a.shuffle=function(a,b,c){for(var d,e,f=(null==c?a.length:c)-(b=null==b?0:+b);f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},a.sum=function(a,b){var c,d=a.length,e=-1,f=0;if(null==b)for(;++e<d;)(c=+a[e])&&(f+=c);else for(;++e<d;)(c=+b(a[e],e,a))&&(f+=c);return f},a.ticks=l,a.tickIncrement=m,a.tickStep=n,a.transpose=s,a.variance=f,a.zip=function(){return s(arguments)},a.axisTop=function(a){return y(Uj,a)},a.axisRight=function(a){return y(Vj,a)},a.axisBottom=function(a){return y(Wj,a)},a.axisLeft=function(a){return y(Xj,a)},a.brush=function(){return $b(dm)},a.brushX=function(){return $b(bm)},a.brushY=function(){return $b(cm)},a.brushSelection=function(a){var b=a.__brush;return b?b.dim.output(b.selection):null},a.chord=function(){function a(a){var f,g,h,i,j,l,m=a.length,n=[],o=k(m),p=[],q=[],r=q.groups=new Array(m),s=new Array(m*m);for(f=0,j=-1;++j<m;){for(g=0,l=-1;++l<m;)g+=a[j][l];n.push(g),p.push(k(m)),f+=g}for(c&&o.sort(function(a,b){return c(n[a],n[b])}),d&&p.forEach(function(b,c){b.sort(function(b,e){return d(a[c][b],a[c][e])})}),i=(f=om(0,nm-b*m)/f)?b:nm/m,g=0,j=-1;++j<m;){for(h=g,l=-1;++l<m;){var t=o[j],u=p[t][l],v=a[t][u],w=g,x=g+=v*f;s[u*m+t]={index:t,subindex:u,startAngle:w,endAngle:x,value:v}}r[t]={index:t,startAngle:h,endAngle:g,value:n[t]},g+=i}for(j=-1;++j<m;)for(l=j-1;++l<m;){var y=s[l*m+j],z=s[j*m+l];(y.value||z.value)&&q.push(y.value<z.value?{source:z,target:y}:{source:y,target:z})}return e?q.sort(e):q}var b=0,c=null,d=null,e=null;return a.padAngle=function(c){return arguments.length?(b=om(0,c),a):b},a.sortGroups=function(b){return arguments.length?(c=b,a):c},a.sortSubgroups=function(b){return arguments.length?(d=b,a):d},a.sortChords=function(b){return arguments.length?(null==b?e=null:(e=function(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}(b))._=b,a):e&&e._},a},a.ribbon=function(){function a(){var a,h=pm.call(arguments),i=b.apply(this,h),j=c.apply(this,h),k=+d.apply(this,(h[0]=i,h)),l=e.apply(this,h)-mm,m=f.apply(this,h)-mm,n=k*jm(l),o=k*km(l),p=+d.apply(this,(h[0]=j,h)),q=e.apply(this,h)-mm,r=f.apply(this,h)-mm;if(g||(g=a=bc()),g.moveTo(n,o),g.arc(0,0,k,l,m),l===q&&m===r||(g.quadraticCurveTo(0,0,p*jm(q),p*km(q)),g.arc(0,0,p,q,r)),g.quadraticCurveTo(0,0,n,o),g.closePath(),a)return g=null,a+""||null}var b=cc,c=dc,d=ec,e=fc,f=gc,g=null;return a.radius=function(b){return arguments.length?(d="function"==typeof b?b:_b(+b),a):d},a.startAngle=function(b){return arguments.length?(e="function"==typeof b?b:_b(+b),a):e},a.endAngle=function(b){return arguments.length?(f="function"==typeof b?b:_b(+b),a):f},a.source=function(c){return arguments.length?(b=c,a):b},a.target=function(b){return arguments.length?(c=b,a):c},a.context=function(b){return arguments.length?(g=null==b?null:b,a):g},a},a.nest=function(){function a(b,e,g,h){if(e>=f.length)return null!=c&&b.sort(c),null!=d?d(b):b;for(var i,j,k,l=-1,m=b.length,n=f[e++],o=ic(),p=g();++l<m;)(k=o.get(i=n(j=b[l])+""))?k.push(j):o.set(i,[j]);return o.each(function(b,c){h(p,c,a(b,e,g,h))}),p}function b(a,c){if(++c>f.length)return a;var e,h=g[c-1];return null!=d&&c>=f.length?e=a.entries():(e=[],a.each(function(a,d){e.push({key:d,values:b(a,c)})})),null!=h?e.sort(function(a,b){return h(a.key,b.key)}):e}var c,d,e,f=[],g=[];return e={object:function(b){return a(b,0,jc,kc)},map:function(b){return a(b,0,lc,mc)},entries:function(c){return b(a(c,0,lc,mc),0)},key:function(a){return f.push(a),e},sortKeys:function(a){return g[f.length-1]=a,e},sortValues:function(a){return c=a,e},rollup:function(a){return d=a,e}}},a.set=oc,a.map=ic,a.keys=function(a){var b=[];for(var c in a)b.push(c);return b},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},a.color=Ca,a.rgb=Ga,a.hsl=Ja,a.lab=Na,a.hcl=Ta,a.cubehelix=Va,a.dispatch=z,a.drag=function(){function b(a){a.on("mousedown.drag",c).filter(q).on("touchstart.drag",f).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){if(!m&&n.apply(this,arguments)){var b=i("mouse",o.apply(this,arguments),na,this,arguments);b&&(ia(a.event.view).on("mousemove.drag",d,!0).on("mouseup.drag",e,!0),ra(a.event.view),pa(),l=!1,j=a.event.clientX,k=a.event.clientY,b("start"))}}function d(){if(qa(),!l){var b=a.event.clientX-j,c=a.event.clientY-k;l=b*b+c*c>u}r.mouse("drag")}function e(){ia(a.event.view).on("mousemove.drag mouseup.drag",null),sa(a.event.view,l),qa(),r.mouse("end")}function f(){if(n.apply(this,arguments)){var b,c,d=a.event.changedTouches,e=o.apply(this,arguments),f=d.length;for(b=0;b<f;++b)(c=i(d[b].identifier,e,oa,this,arguments))&&(pa(),c("start"))}}function g(){var b,c,d=a.event.changedTouches,e=d.length;for(b=0;b<e;++b)(c=r[d[b].identifier])&&(qa(),c("drag"))}function h(){var b,c,d=a.event.changedTouches,e=d.length;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),b=0;b<e;++b)(c=r[d[b].identifier])&&(pa(),c("end"))}function i(c,d,e,f,g){var h,i,j,k=e(d,c),l=s.copy();if(ea(new ua(b,"beforestart",h,c,t,k[0],k[1],0,0,l),function(){return null!=(a.event.subject=h=p.apply(f,g))&&(i=h.x-k[0]||0,j=h.y-k[1]||0,!0)}))return function a(m){var n,o=k;switch(m){case"start":r[c]=a,n=t++;break;case"end":delete r[c],--t;case"drag":k=e(d,c),n=t}ea(new ua(b,m,h,c,n,k[0]+i,k[1]+j,k[0]-o[0],k[1]-o[1],l),l.apply,l,[m,f,g])}}var j,k,l,m,n=va,o=wa,p=xa,q=ya,r={},s=z("start","drag","end"),t=0,u=0;return b.filter=function(a){return arguments.length?(n="function"==typeof a?a:ta(!!a),b):n},b.container=function(a){return arguments.length?(o="function"==typeof a?a:ta(a),b):o},b.subject=function(a){return arguments.length?(p="function"==typeof a?a:ta(a),b):p},b.touchable=function(a){return arguments.length?(q="function"==typeof a?a:ta(!!a),b):q},b.on=function(){var a=s.on.apply(s,arguments);return a===s?b:a},b.clickDistance=function(a){return arguments.length?(u=(a=+a)*a,b):Math.sqrt(u)},b},a.dragDisable=ra,a.dragEnable=sa,a.dsvFormat=qc,a.csvParse=Am,
a.csvParseRows=Bm,a.csvFormat=Cm,a.csvFormatRows=Dm,a.tsvParse=Fm,a.tsvParseRows=Gm,a.tsvFormat=Hm,a.tsvFormatRows=Im,a.easeLinear=function(a){return+a},a.easeQuad=Lb,a.easeQuadIn=function(a){return a*a},a.easeQuadOut=function(a){return a*(2-a)},a.easeQuadInOut=Lb,a.easeCubic=Mb,a.easeCubicIn=function(a){return a*a*a},a.easeCubicOut=function(a){return--a*a*a+1},a.easeCubicInOut=Mb,a.easePoly=Dl,a.easePolyIn=Bl,a.easePolyOut=Cl,a.easePolyInOut=Dl,a.easeSin=Nb,a.easeSinIn=function(a){return 1-Math.cos(a*Fl)},a.easeSinOut=function(a){return Math.sin(a*Fl)},a.easeSinInOut=Nb,a.easeExp=Ob,a.easeExpIn=function(a){return Math.pow(2,10*a-10)},a.easeExpOut=function(a){return 1-Math.pow(2,-10*a)},a.easeExpInOut=Ob,a.easeCircle=Pb,a.easeCircleIn=function(a){return 1-Math.sqrt(1-a*a)},a.easeCircleOut=function(a){return Math.sqrt(1- --a*a)},a.easeCircleInOut=Pb,a.easeBounce=Qb,a.easeBounceIn=function(a){return 1-Qb(1-a)},a.easeBounceOut=Qb,a.easeBounceInOut=function(a){return((a*=2)<=1?1-Qb(1-a):Qb(a-1)+1)/2},a.easeBack=Sl,a.easeBackIn=Ql,a.easeBackOut=Rl,a.easeBackInOut=Sl,a.easeElastic=Vl,a.easeElasticIn=Ul,a.easeElasticOut=Vl,a.easeElasticInOut=Wl,a.forceCenter=function(a,b){function c(){var c,e,f=d.length,g=0,h=0;for(c=0;c<f;++c)g+=(e=d[c]).x,h+=e.y;for(g=g/f-a,h=h/f-b,c=0;c<f;++c)(e=d[c]).x-=g,e.y-=h}var d;return null==a&&(a=0),null==b&&(b=0),c.initialize=function(a){d=a},c.x=function(b){return arguments.length?(a=+b,c):a},c.y=function(a){return arguments.length?(b=+a,c):b},c},a.forceCollide=function(a){function b(){for(var a,b,d,i,j,k,l,m=e.length,n=0;n<h;++n)for(b=xc(e,Ac,Bc).visitAfter(c),a=0;a<m;++a)d=e[a],k=f[d.index],l=k*k,i=d.x+d.vx,j=d.y+d.vy,b.visit(function(a,b,c,e,f){var h=a.data,m=a.r,n=k+m;if(!h)return b>i+n||e<i-n||c>j+n||f<j-n;if(h.index>d.index){var o=i-h.x-h.vx,p=j-h.y-h.vy,q=o*o+p*p;q<n*n&&(0===o&&(o=sc(),q+=o*o),0===p&&(p=sc(),q+=p*p),q=(n-(q=Math.sqrt(q)))/q*g,d.vx+=(o*=q)*(n=(m*=m)/(l+m)),d.vy+=(p*=q)*n,h.vx-=o*(n=1-n),h.vy-=p*n)}})}function c(a){if(a.data)return a.r=f[a.data.index];for(var b=a.r=0;b<4;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function d(){if(e){var b,c,d=e.length;for(f=new Array(d),b=0;b<d;++b)c=e[b],f[c.index]=+a(c,b,e)}}var e,f,g=1,h=1;return"function"!=typeof a&&(a=rc(null==a?1:+a)),b.initialize=function(a){e=a,d()},b.iterations=function(a){return arguments.length?(h=+a,b):h},b.strength=function(a){return arguments.length?(g=+a,b):g},b.radius=function(c){return arguments.length?(a="function"==typeof c?c:rc(+c),d(),b):a},b},a.forceLink=function(a){function b(b){for(var c=0,d=a.length;c<n;++c)for(var e,h,i,k,l,m,o,p=0;p<d;++p)h=(e=a[p]).source,k=(i=e.target).x+i.vx-h.x-h.vx||sc(),l=i.y+i.vy-h.y-h.vy||sc(),k*=m=((m=Math.sqrt(k*k+l*l))-g[p])/m*b*f[p],l*=m,i.vx-=k*(o=j[p]),i.vy-=l*o,h.vx+=k*(o=1-o),h.vy+=l*o}function c(){if(h){var b,c,l=h.length,m=a.length,n=ic(h,k);for(b=0,i=new Array(l);b<m;++b)(c=a[b]).index=b,"object"!=typeof c.source&&(c.source=Dc(n,c.source)),"object"!=typeof c.target&&(c.target=Dc(n,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(b=0,j=new Array(m);b<m;++b)c=a[b],j[b]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);f=new Array(m),d(),g=new Array(m),e()}}function d(){if(h)for(var b=0,c=a.length;b<c;++b)f[b]=+l(a[b],b,a)}function e(){if(h)for(var b=0,c=a.length;b<c;++b)g[b]=+m(a[b],b,a)}var f,g,h,i,j,k=Cc,l=function(a){return 1/Math.min(i[a.source.index],i[a.target.index])},m=rc(30),n=1;return null==a&&(a=[]),b.initialize=function(a){h=a,c()},b.links=function(d){return arguments.length?(a=d,c(),b):a},b.id=function(a){return arguments.length?(k=a,b):k},b.iterations=function(a){return arguments.length?(n=+a,b):n},b.strength=function(a){return arguments.length?(l="function"==typeof a?a:rc(+a),d(),b):l},b.distance=function(a){return arguments.length?(m="function"==typeof a?a:rc(+a),e(),b):m},b},a.forceManyBody=function(){function a(a){var b,h=e.length,i=xc(e,Ec,Fc).visitAfter(c);for(g=a,b=0;b<h;++b)f=e[b],i.visit(d)}function b(){if(e){var a,b,c=e.length;for(h=new Array(c),a=0;a<c;++a)b=e[a],h[b.index]=+i(b,a,e)}}function c(a){var b,c,d,e,f,g=0,i=0;if(a.length){for(d=e=f=0;f<4;++f)(b=a[f])&&(c=Math.abs(b.value))&&(g+=b.value,i+=c,d+=c*b.x,e+=c*b.y);a.x=d/i,a.y=e/i}else{(b=a).x=b.data.x,b.y=b.data.y;do{g+=h[b.data.index]}while(b=b.next)}a.value=g}function d(a,b,c,d){if(!a.value)return!0;var e=a.x-f.x,i=a.y-f.y,m=d-b,n=e*e+i*i;if(m*m/l<n)return n<k&&(0===e&&(e=sc(),n+=e*e),0===i&&(i=sc(),n+=i*i),n<j&&(n=Math.sqrt(j*n)),f.vx+=e*a.value*g/n,f.vy+=i*a.value*g/n),!0;if(!(a.length||n>=k)){(a.data!==f||a.next)&&(0===e&&(e=sc(),n+=e*e),0===i&&(i=sc(),n+=i*i),n<j&&(n=Math.sqrt(j*n)));do{a.data!==f&&(m=h[a.data.index]*g/n,f.vx+=e*m,f.vy+=i*m)}while(a=a.next)}}var e,f,g,h,i=rc(-30),j=1,k=1/0,l=.81;return a.initialize=function(a){e=a,b()},a.strength=function(c){return arguments.length?(i="function"==typeof c?c:rc(+c),b(),a):i},a.distanceMin=function(b){return arguments.length?(j=b*b,a):Math.sqrt(j)},a.distanceMax=function(b){return arguments.length?(k=b*b,a):Math.sqrt(k)},a.theta=function(b){return arguments.length?(l=b*b,a):Math.sqrt(l)},a},a.forceRadial=function(a,b,c){function d(a){for(var d=0,e=f.length;d<e;++d){var i=f[d],j=i.x-b||1e-6,k=i.y-c||1e-6,l=Math.sqrt(j*j+k*k),m=(h[d]-l)*g[d]*a/l;i.vx+=j*m,i.vy+=k*m}}function e(){if(f){var b,c=f.length;for(g=new Array(c),h=new Array(c),b=0;b<c;++b)h[b]=+a(f[b],b,f),g[b]=isNaN(h[b])?0:+i(f[b],b,f)}}var f,g,h,i=rc(.1);return"function"!=typeof a&&(a=rc(+a)),null==b&&(b=0),null==c&&(c=0),d.initialize=function(a){f=a,e()},d.strength=function(a){return arguments.length?(i="function"==typeof a?a:rc(+a),e(),d):i},d.radius=function(b){return arguments.length?(a="function"==typeof b?b:rc(+b),e(),d):a},d.x=function(a){return arguments.length?(b=+a,d):b},d.y=function(a){return arguments.length?(c=+a,d):c},d},a.forceSimulation=function(a){function b(){c(),n.call("tick",f),g<h&&(m.stop(),n.call("end",f))}function c(){var b,c,d=a.length;for(g+=(j-g)*i,l.each(function(a){a(g)}),b=0;b<d;++b)null==(c=a[b]).fx?c.x+=c.vx*=k:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=k:(c.y=c.fy,c.vy=0)}function d(){for(var b,c=0,d=a.length;c<d;++c){if(b=a[c],b.index=c,isNaN(b.x)||isNaN(b.y)){var e=Lm*Math.sqrt(c),f=c*Mm;b.x=e*Math.cos(f),b.y=e*Math.sin(f)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function e(b){return b.initialize&&b.initialize(a),b}var f,g=1,h=.001,i=1-Math.pow(h,1/300),j=0,k=.6,l=ic(),m=vb(b),n=z("tick","end");return null==a&&(a=[]),d(),f={tick:c,restart:function(){return m.restart(b),f},stop:function(){return m.stop(),f},nodes:function(b){return arguments.length?(a=b,d(),l.each(e),f):a},alpha:function(a){return arguments.length?(g=+a,f):g},alphaMin:function(a){return arguments.length?(h=+a,f):h},alphaDecay:function(a){return arguments.length?(i=+a,f):+i},alphaTarget:function(a){return arguments.length?(j=+a,f):j},velocityDecay:function(a){return arguments.length?(k=1-a,f):1-k},force:function(a,b){return arguments.length>1?(null==b?l.remove(a):l.set(a,e(b)),f):l.get(a)},find:function(b,c,d){var e,f,g,h,i,j=0,k=a.length;for(null==d?d=1/0:d*=d,j=0;j<k;++j)(g=(e=b-(h=a[j]).x)*e+(f=c-h.y)*f)<d&&(i=h,d=g);return i},on:function(a,b){return arguments.length>1?(n.on(a,b),f):n.on(a)}}},a.forceX=function(a){function b(a){for(var b,c=0,g=d.length;c<g;++c)(b=d[c]).vx+=(f[c]-b.x)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;b<c;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=rc(.1);return"function"!=typeof a&&(a=rc(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:rc(+a),c(),b):g},b.x=function(d){return arguments.length?(a="function"==typeof d?d:rc(+d),c(),b):a},b},a.forceY=function(a){function b(a){for(var b,c=0,g=d.length;c<g;++c)(b=d[c]).vy+=(f[c]-b.y)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;b<c;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=rc(.1);return"function"!=typeof a&&(a=rc(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:rc(+a),c(),b):g},b.y=function(d){return arguments.length?(a="function"==typeof d?d:rc(+d),c(),b):a},b},a.formatDefaultLocale=Nc,a.formatLocale=Mc,a.formatSpecifier=Jc,a.precisionFixed=Oc,a.precisionPrefix=Pc,a.precisionRound=Qc,a.geoArea=function(a){return Sn.reset(),_c(a,Tn),2*Sn},a.geoBounds=function(a){var b,c,d,e,f,g,h;if(Zm=Ym=-(Wm=Xm=1/0),cn=[],_c(a,Vn),c=cn.length){for(cn.sort(td),b=1,f=[d=cn[0]];b<c;++b)ud(d,(e=cn[b])[0])||ud(d,e[1])?(sd(d[0],e[1])>sd(d[0],d[1])&&(d[1]=e[1]),sd(e[0],d[1])>sd(d[0],d[1])&&(d[0]=e[0])):f.push(d=e);for(g=-1/0,b=0,d=f[c=f.length-1];b<=c;d=e,++b)e=f[b],(h=sd(d[1],e[0]))>g&&(g=h,Wm=e[0],Ym=d[1])}return cn=dn=null,Wm===1/0||Xm===1/0?[[NaN,NaN],[NaN,NaN]]:[[Wm,Xm],[Ym,Zm]]},a.geoCentroid=function(a){en=fn=gn=hn=jn=kn=ln=mn=nn=on=pn=0,_c(a,Wn);var b=nn,c=on,d=pn,e=b*b+c*c+d*d;return e<1e-12&&(b=kn,c=ln,d=mn,fn<wn&&(b=gn,c=hn,d=jn),(e=b*b+c*c+d*d)<1e-12)?[NaN,NaN]:[Fn(c,b)*Bn,Vc(d/Nn(e))*Bn]},a.geoCircle=function(){function a(){var a=d.apply(this,arguments),h=e.apply(this,arguments)*Cn,i=f.apply(this,arguments)*Cn;return b=[],c=Id(-a[0]*Cn,-a[1]*Cn,0).invert,Nd(g,h,i,1),a={type:"Polygon",coordinates:[b]},b=c=null,a}var b,c,d=Fd([0,0]),e=Fd(90),f=Fd(6),g={point:function(a,d){b.push(a=c(a,d)),a[0]*=Bn,a[1]*=Bn}};return a.center=function(b){return arguments.length?(d="function"==typeof b?b:Fd([+b[0],+b[1]]),a):d},a.radius=function(b){return arguments.length?(e="function"==typeof b?b:Fd(+b),a):e},a.precision=function(b){return arguments.length?(f="function"==typeof b?b:Fd(+b),a):f},a},a.geoClipAntimeridian=io,a.geoClipCircle=Yd,a.geoClipExtent=function(){var a,b,c,d=0,e=0,f=960,g=500;return c={stream:function(c){return a&&b===c?a:a=Zd(d,e,f,g)(b=c)},extent:function(h){return arguments.length?(d=+h[0][0],e=+h[0][1],f=+h[1][0],g=+h[1][1],a=b=null,c):[[d,e],[f,g]]}}},a.geoClipRectangle=Zd,a.geoContains=function(a,b){return(a&&po.hasOwnProperty(a.type)?po[a.type]:de)(a,b)},a.geoDistance=ce,a.geoGraticule=le,a.geoGraticule10=function(){return le()()},a.geoInterpolate=function(a,b){var c=a[0]*Cn,d=a[1]*Cn,e=b[0]*Cn,f=b[1]*Cn,g=Gn(d),h=Ln(d),i=Gn(f),j=Ln(f),k=g*Gn(c),l=g*Ln(c),m=i*Gn(e),n=i*Ln(e),o=2*Vc(Nn(Wc(f-d)+g*i*Wc(e-c))),p=Ln(o),q=o?function(a){var b=Ln(a*=o)/p,c=Ln(o-a)/p,d=c*k+b*m,e=c*l+b*n,f=c*h+b*j;return[Fn(e,d)*Bn,Fn(f,Nn(d*d+e*e))*Bn]}:function(){return[c*Bn,d*Bn]};return q.distance=o,q},a.geoLength=be,a.geoPath=function(a,b){function c(a){return a&&("function"==typeof f&&e.pointRadius(+f.apply(this,arguments)),_c(a,d(e))),e.result()}var d,e,f=4.5;return c.area=function(a){return _c(a,d(to)),to.result()},c.measure=function(a){return _c(a,d(Po)),Po.result()},c.bounds=function(a){return _c(a,d(yo)),yo.result()},c.centroid=function(a){return _c(a,d(Io)),Io.result()},c.projection=function(b){return arguments.length?(d=null==b?(a=null,me):(a=b).stream,c):a},c.context=function(a){return arguments.length?(e=null==a?(b=null,new De):new Ae(b=a),"function"!=typeof f&&e.pointRadius(f),c):b},c.pointRadius=function(a){return arguments.length?(f="function"==typeof a?a:(e.pointRadius(+a),+a),c):f},c.projection(a).context(b)},a.geoAlbers=Se,a.geoAlbersUsa=function(){function a(a){var b=a[0],c=a[1];return h=null,e.point(b,c),h||(f.point(b,c),h)||(g.point(b,c),h)}function b(){return c=d=null,a}var c,d,e,f,g,h,i=Se(),j=Re().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=Re().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(a,b){h=[a,b]}};return a.invert=function(a){var b=i.scale(),c=i.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?j:e>=.166&&e<.234&&d>=-.214&&d<-.115?k:i).invert(a)},a.stream=function(a){return c&&d===a?c:c=function(a){var b=a.length;return{point:function(c,d){for(var e=-1;++e<b;)a[e].point(c,d)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}([i.stream(d=a),j.stream(a),k.stream(a)])},a.precision=function(a){return arguments.length?(i.precision(a),j.precision(a),k.precision(a),b()):i.precision()},a.scale=function(b){return arguments.length?(i.scale(b),j.scale(.35*b),k.scale(b),a.translate(i.translate())):i.scale()},a.translate=function(a){if(!arguments.length)return i.translate();var c=i.scale(),d=+a[0],h=+a[1];return e=i.translate(a).clipExtent([[d-.455*c,h-.238*c],[d+.455*c,h+.238*c]]).stream(l),f=j.translate([d-.307*c,h+.201*c]).clipExtent([[d-.425*c+wn,h+.12*c+wn],[d-.214*c-wn,h+.234*c-wn]]).stream(l),g=k.translate([d-.205*c,h+.212*c]).clipExtent([[d-.214*c+wn,h+.166*c+wn],[d-.115*c-wn,h+.234*c-wn]]).stream(l),b()},a.fitExtent=function(b,c){return Ie(a,b,c)},a.fitSize=function(b,c){return Je(a,b,c)},a.fitWidth=function(b,c){return Ke(a,b,c)},a.fitHeight=function(b,c){return Le(a,b,c)},a.scale(1070)},a.geoAzimuthalEqualArea=function(){return Ne(To).scale(124.75).clipAngle(179.999)},a.geoAzimuthalEqualAreaRaw=To,a.geoAzimuthalEquidistant=function(){return Ne(Uo).scale(79.4188).clipAngle(179.999)},a.geoAzimuthalEquidistantRaw=Uo,a.geoConicConformal=function(){return Pe(Ye).scale(109.5).parallels([30,30])},a.geoConicConformalRaw=Ye,a.geoConicEqualArea=Re,a.geoConicEqualAreaRaw=Qe,a.geoConicEquidistant=function(){return Pe($e).scale(131.154).center([0,13.9389])},a.geoConicEquidistantRaw=$e,a.geoEquirectangular=function(){return Ne(Ze).scale(152.63)},a.geoEquirectangularRaw=Ze,a.geoGnomonic=function(){return Ne(_e).scale(144.049).clipAngle(60)},a.geoGnomonicRaw=_e,a.geoIdentity=function(){function a(){return e=f=null,g}var b,c,d,e,f,g,h=1,i=0,j=0,k=1,l=1,m=me,n=null,o=me;return g={stream:function(a){return e&&f===a?e:e=m(o(f=a))},postclip:function(e){return arguments.length?(o=e,n=b=c=d=null,a()):o},clipExtent:function(e){return arguments.length?(o=null==e?(n=b=c=d=null,me):Zd(n=+e[0][0],b=+e[0][1],c=+e[1][0],d=+e[1][1]),a()):null==n?null:[[n,b],[c,d]]},scale:function(b){return arguments.length?(m=af((h=+b)*k,h*l,i,j),a()):h},translate:function(b){return arguments.length?(m=af(h*k,h*l,i=+b[0],j=+b[1]),a()):[i,j]},reflectX:function(b){return arguments.length?(m=af(h*(k=b?-1:1),h*l,i,j),a()):k<0},reflectY:function(b){return arguments.length?(m=af(h*k,h*(l=b?-1:1),i,j),a()):l<0},fitExtent:function(a,b){return Ie(g,a,b)},fitSize:function(a,b){return Je(g,a,b)},fitWidth:function(a,b){return Ke(g,a,b)},fitHeight:function(a,b){return Le(g,a,b)}}},a.geoProjection=Ne,a.geoProjectionMutator=Oe,a.geoMercator=function(){return We(Ve).scale(961/An)},a.geoMercatorRaw=Ve,a.geoNaturalEarth1=function(){return Ne(bf).scale(175.295)},a.geoNaturalEarth1Raw=bf,a.geoOrthographic=function(){return Ne(cf).scale(249.5).clipAngle(90+wn)},a.geoOrthographicRaw=cf,a.geoStereographic=function(){return Ne(df).scale(250).clipAngle(142)},a.geoStereographicRaw=df,a.geoTransverseMercator=function(){var a=We(ef),b=a.center,c=a.rotate;return a.center=function(a){return arguments.length?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return arguments.length?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90]).scale(159.155)},a.geoTransverseMercatorRaw=ef,a.geoRotation=Md,a.geoStream=_c,a.geoTransform=function(a){return{stream:Fe(a)}},a.cluster=function(){function a(a){var f,g=0;a.eachAfter(function(a){var c=a.children;c?(a.x=function(a){return a.reduce(gf,0)/a.length}(c),a.y=function(a){return 1+a.reduce(hf,0)}(c)):(a.x=f?g+=b(a,f):0,a.y=0,f=a)});var h=function(a){for(var b;b=a.children;)a=b[0];return a}(a),i=function(a){for(var b;b=a.children;)a=b[b.length-1];return a}(a),j=h.x-b(h,i)/2,k=i.x+b(i,h)/2;return a.eachAfter(e?function(b){b.x=(b.x-a.x)*c,b.y=(a.y-b.y)*d}:function(b){b.x=(b.x-j)/(k-j)*c,b.y=(1-(a.y?b.y/a.y:1))*d})}var b=ff,c=1,d=1,e=!1;return a.separation=function(c){return arguments.length?(b=c,a):b},a.size=function(b){return arguments.length?(e=!1,c=+b[0],d=+b[1],a):e?null:[c,d]},a.nodeSize=function(b){return arguments.length?(e=!0,c=+b[0],d=+b[1],a):e?[c,d]:null},a},a.hierarchy=kf,a.pack=function(){function a(a){return a.x=c/2,a.y=d/2,b?a.eachBefore(Ef(b)).eachAfter(Ff(e,.5)).eachBefore(Gf(1)):a.eachBefore(Ef(Df)).eachAfter(Ff(Bf,1)).eachAfter(Ff(e,a.r/Math.min(c,d))).eachBefore(Gf(Math.min(c,d)/(2*a.r))),a}var b=null,c=1,d=1,e=Bf;return a.radius=function(c){return arguments.length?(b=function(a){return null==a?null:Af(a)}(c),a):b},a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]},a.padding=function(b){return arguments.length?(e="function"==typeof b?b:Cf(+b),a):e},a},a.packSiblings=function(a){return zf(a),a},a.packEnclose=pf,a.partition=function(){function a(a){var f=a.height+1;return a.x0=a.y0=d,a.x1=b,a.y1=c/f,a.eachBefore(function(a,b){return function(c){c.children&&If(c,c.x0,a*(c.depth+1)/b,c.x1,a*(c.depth+2)/b);var e=c.x0,f=c.y0,g=c.x1-d,h=c.y1-d;g<e&&(e=g=(e+g)/2),h<f&&(f=h=(f+h)/2),c.x0=e,c.y0=f,c.x1=g,c.y1=h}}(c,f)),e&&a.eachBefore(Hf),a}var b=1,c=1,d=0,e=!1;return a.round=function(b){return arguments.length?(e=!!b,a):e},a.size=function(d){return arguments.length?(b=+d[0],c=+d[1],a):[b,c]},a.padding=function(b){return arguments.length?(d=+b,a):d},a},a.stratify=function(){function a(a){var d,e,f,g,h,i,j,k=a.length,l=new Array(k),m={};for(e=0;e<k;++e)d=a[e],h=l[e]=new of(d),null!=(i=b(d,e,a))&&(i+="")&&(m[j=Wo+(h.id=i)]=j in m?Yo:h);for(e=0;e<k;++e)if(h=l[e],null!=(i=c(a[e],e,a))&&(i+="")){if(!(g=m[Wo+i]))throw new Error("missing: "+i);if(g===Yo)throw new Error("ambiguous: "+i);g.children?g.children.push(h):g.children=[h],h.parent=g}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(f.parent=Xo,f.eachBefore(function(a){a.depth=a.parent.depth+1,--k}).eachBefore(nf),f.parent=null,k>0)throw new Error("cycle");return f}var b=Jf,c=Kf;return a.id=function(c){return arguments.length?(b=Af(c),a):b},a.parentId=function(b){return arguments.length?(c=Af(b),a):c},a},a.tree=function(){function a(a){var i=function(a){for(var b,c,d,e,f,g=new Qf(a,0),h=[g];b=h.pop();)if(d=b._.children)for(b.children=new Array(f=d.length),e=f-1;e>=0;--e)h.push(c=b.children[e]=new Qf(d[e],e)),c.parent=b;return(g.parent=new Qf(null,0)).children=[g],g}(a);if(i.eachAfter(b),i.parent.m=-i.z,i.eachBefore(c),h)a.eachBefore(d);else{var j=a,k=a,l=a;a.eachBefore(function(a){a.x<j.x&&(j=a),a.x>k.x&&(k=a),a.depth>l.depth&&(l=a)});var m=j===k?1:e(j,k)/2,n=m-j.x,o=f/(k.x+m+n),p=g/(l.depth||1);a.eachBefore(function(a){a.x=(a.x+n)*o,a.y=a.depth*p})}return a}function b(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b){!function(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)(b=e[f]).z+=c,b.m+=c,c+=b.s+(d+=b.c)}(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+e(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+e(a._,d._));a.parent.A=function(a,b,c){if(b){for(var d,f=a,g=a,h=b,i=f.parent.children[0],j=f.m,k=g.m,l=h.m,m=i.m;h=Nf(h),f=Mf(f),h&&f;)i=Mf(i),(g=Nf(g)).a=a,(d=h.z+l-f.z-j+e(h._,f._))>0&&(Of(Pf(h,a,c),a,d),j+=d,k+=d),l+=h.m,j+=f.m,m+=i.m,k+=g.m;h&&!Nf(g)&&(g.t=h,g.m+=l-k),f&&!Mf(i)&&(i.t=f,i.m+=j-m,c=a)}return c}(a,d,a.parent.A||c[0])}function c(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function d(a){a.x*=f,a.y=a.depth*g}var e=Lf,f=1,g=1,h=null;return a.separation=function(b){return arguments.length?(e=b,a):e},a.size=function(b){return arguments.length?(h=!1,f=+b[0],g=+b[1],a):h?null:[f,g]},a.nodeSize=function(b){return arguments.length?(h=!0,f=+b[0],g=+b[1],a):h?[f,g]:null},a},a.treemap=function(){function a(a){return a.x0=a.y0=0,a.x1=e,a.y1=f,a.eachBefore(b),g=[0],d&&a.eachBefore(Hf),a}function b(a){var b=g[a.depth],d=a.x0+b,e=a.y0+b,f=a.x1-b,m=a.y1-b;f<d&&(d=f=(d+f)/2),m<e&&(e=m=(e+m)/2),a.x0=d,a.y0=e,a.x1=f,a.y1=m,a.children&&(b=g[a.depth+1]=h(a)/2,d+=l(a)-b,e+=i(a)-b,f-=j(a)-b,m-=k(a)-b,f<d&&(d=f=(d+f)/2),m<e&&(e=m=(e+m)/2),c(a,d,e,f,m))}var c=$o,d=!1,e=1,f=1,g=[0],h=Bf,i=Bf,j=Bf,k=Bf,l=Bf;return a.round=function(b){return arguments.length?(d=!!b,a):d},a.size=function(b){return arguments.length?(e=+b[0],f=+b[1],a):[e,f]},a.tile=function(b){return arguments.length?(c=Af(b),a):c},a.padding=function(b){return arguments.length?a.paddingInner(b).paddingOuter(b):a.paddingInner()},a.paddingInner=function(b){return arguments.length?(h="function"==typeof b?b:Cf(+b),a):h},a.paddingOuter=function(b){return arguments.length?a.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):a.paddingTop()},a.paddingTop=function(b){return arguments.length?(i="function"==typeof b?b:Cf(+b),a):i},a.paddingRight=function(b){return arguments.length?(j="function"==typeof b?b:Cf(+b),a):j},a.paddingBottom=function(b){return arguments.length?(k="function"==typeof b?b:Cf(+b),a):k},a.paddingLeft=function(b){return arguments.length?(l="function"==typeof b?b:Cf(+b),a):l},a},a.treemapBinary=function(a,b,c,d,e){function f(a,b,c,d,e,g,h){if(a>=b-1){var j=i[a];return j.x0=d,j.y0=e,j.x1=g,void(j.y1=h)}for(var l=k[a],m=c/2+l,n=a+1,o=b-1;n<o;){var p=n+o>>>1;k[p]<m?n=p+1:o=p}m-k[n-1]<k[n]-m&&a+1<n&&--n;var q=k[n]-l,r=c-q;if(g-d>h-e){var s=(d*r+g*q)/c;f(a,n,q,d,e,s,h),f(n,b,r,s,e,g,h)}else{var t=(e*r+h*q)/c;f(a,n,q,d,e,g,t),f(n,b,r,d,t,g,h)}}var g,h,i=a.children,j=i.length,k=new Array(j+1);for(k[0]=h=g=0;g<j;++g)k[g+1]=h+=i[g].value;f(0,j,a.value,b,c,d,e)},a.treemapDice=If,a.treemapSlice=Rf,a.treemapSliceDice=function(a,b,c,d,e){(1&a.depth?Rf:If)(a,b,c,d,e)},a.treemapSquarify=$o,a.treemapResquarify=_o,a.interpolate=jb,a.interpolateArray=eb,a.interpolateBasis=Ya,a.interpolateBasisClosed=Za,a.interpolateDate=fb,a.interpolateNumber=gb,a.interpolateObject=hb,a.interpolateRound=kb,a.interpolateString=ib,a.interpolateTransformCss=Wk,a.interpolateTransformSvg=Xk,a.interpolateZoom=ob,a.interpolateRgb=Pk,a.interpolateRgbBasis=Qk,a.interpolateRgbBasisClosed=Rk,a.interpolateHsl=al,a.interpolateHslLong=bl,a.interpolateLab=function(a,b){var c=cb((a=Na(a)).l,(b=Na(b)).l),d=cb(a.a,b.a),e=cb(a.b,b.b),f=cb(a.opacity,b.opacity);return function(b){return a.l=c(b),a.a=d(b),a.b=e(b),a.opacity=f(b),a+""}},a.interpolateHcl=cl,a.interpolateHclLong=dl,a.interpolateCubehelix=el,a.interpolateCubehelixLong=fl,a.quantize=function(a,b){for(var c=new Array(b),d=0;d<b;++d)c[d]=a(d/(b-1));return c},a.path=bc,a.polygonArea=function(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[1]*e[0]-b[0]*e[1];return f/2},a.polygonCentroid=function(a){for(var b,c,d=-1,e=a.length,f=0,g=0,h=a[e-1],i=0;++d<e;)b=h,h=a[d],i+=c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return i*=3,[f/i,g/i]},a.polygonHull=function(a){if((c=a.length)<3)return null;var b,c,d=new Array(c),e=new Array(c);for(b=0;b<c;++b)d[b]=[+a[b][0],+a[b][1],b];for(d.sort(Uf),b=0;b<c;++b)e[b]=[d[b][0],-d[b][1]];var f=Vf(d),g=Vf(e),h=g[0]===f[0],i=g[g.length-1]===f[f.length-1],j=[];for(b=f.length-1;b>=0;--b)j.push(a[d[f[b]][2]]);for(b=+h;b<g.length-i;++b)j.push(a[d[g[b]][2]]);return j},a.polygonContains=function(a,b){for(var c,d,e=a.length,f=a[e-1],g=b[0],h=b[1],i=f[0],j=f[1],k=!1,l=0;l<e;++l)c=(f=a[l])[0],(d=f[1])>h!=j>h&&g<(i-c)*(h-d)/(j-d)+c&&(k=!k),i=c,j=d;return k},a.polygonLength=function(a){for(var b,c,d=-1,e=a.length,f=a[e-1],g=f[0],h=f[1],i=0;++d<e;)b=g,c=h,b-=g=(f=a[d])[0],c-=h=f[1],i+=Math.sqrt(b*b+c*c);return i},a.quadtree=xc,a.queue=$f,a.randomUniform=cp,a.randomNormal=dp,a.randomLogNormal=ep,a.randomBates=gp,a.randomIrwinHall=fp,a.randomExponential=hp,a.request=ag,a.html=ip,a.json=jp,a.text=kp,a.xml=lp,a.csv=mp,a.tsv=np,a.scaleBand=eg,a.scalePoint=function(){return fg(eg().paddingInner(1))},a.scaleIdentity=pg,a.scaleLinear=og,a.scaleLog=xg,a.scaleOrdinal=dg,a.scaleImplicit=rp,a.scalePow=zg,a.scaleSqrt=function(){return zg().exponent(.5)},a.scaleQuantile=Ag,a.scaleQuantize=Bg,a.scaleThreshold=Cg,a.scaleTime=function(){return Th(Xp,Vp,Hp,Fp,Dp,Bp,zp,vp,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},a.scaleUtc=function(){return Th(tq,rq,dq,bq,_p,Zp,zp,vp,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},a.schemeCategory10=Kq,a.schemeCategory20b=Lq,a.schemeCategory20c=Mq,a.schemeCategory20=Nq,a.interpolateCubehelixDefault=Oq,a.interpolateRainbow=function(a){(a<0||a>1)&&(a-=Math.floor(a));var b=Math.abs(a-.5);return Rq.h=360*a-100,Rq.s=1.5-1.5*b,Rq.l=.8-.9*b,Rq+""},a.interpolateWarm=Pq,a.interpolateCool=Qq,a.interpolateViridis=Sq,a.interpolateMagma=Tq,a.interpolateInferno=Uq,a.interpolatePlasma=Vq,a.scaleSequential=Wh,a.create=function(a){return ia(D(a).call(document.documentElement))},a.creator=D,a.local=ja,a.matcher=dk,a.mouse=na,a.namespace=C,a.namespaces=_j,a.clientPoint=ma,a.select=ia,a.selectAll=function(a){return"string"==typeof a?new ga([document.querySelectorAll(a)],[document.documentElement]):new ga([null==a?[]:a],gk)},a.selection=ha,a.selector=F,a.selectorAll=H,a.style=O,a.touch=oa,a.touches=function(a,b){null==b&&(b=la().touches);for(var c=0,d=b?b.length:0,e=new Array(d);c<d;++c)e[c]=ma(a,b[c]);return e},a.window=N,a.customEvent=ea,a.arc=function(){function a(){var a,j,k=+b.apply(this,arguments),l=+c.apply(this,arguments),m=f.apply(this,arguments)-dr,n=g.apply(this,arguments)-dr,o=Wq(n-m),p=n>m;if(i||(i=a=bc()),l<k&&(j=l,l=k,k=j),l>br)if(o>er-br)i.moveTo(l*Yq(m),l*_q(m)),i.arc(0,0,l,m,n,!p),k>br&&(i.moveTo(k*Yq(n),k*_q(n)),i.arc(0,0,k,n,m,p));else{var q,r,s=m,t=n,u=m,v=n,w=o,x=o,y=h.apply(this,arguments)/2,z=y>br&&(e?+e.apply(this,arguments):ar(k*k+l*l)),A=$q(Wq(l-k)/2,+d.apply(this,arguments)),B=A,C=A;if(z>br){var D=Yh(z/k*_q(y)),E=Yh(z/l*_q(y));(w-=2*D)>br?(D*=p?1:-1,u+=D,v-=D):(w=0,u=v=(m+n)/2),(x-=2*E)>br?(E*=p?1:-1,s+=E,t-=E):(x=0,s=t=(m+n)/2)}var F=l*Yq(s),G=l*_q(s),H=k*Yq(v),I=k*_q(v);if(A>br){var J=l*Yq(t),K=l*_q(t),L=k*Yq(u),M=k*_q(u);if(o<cr){var N=w>br?function(a,b,c,d,e,f,g,h){var i=c-a,j=d-b,k=g-e,l=h-f,m=(k*(b-f)-l*(a-e))/(l*i-k*j);return[a+m*i,b+m*j]}(F,G,L,M,J,K,H,I):[H,I],O=F-N[0],P=G-N[1],Q=J-N[0],R=K-N[1],S=1/_q(function(a){return a>1?0:a<-1?cr:Math.acos(a)}((O*Q+P*R)/(ar(O*O+P*P)*ar(Q*Q+R*R)))/2),T=ar(N[0]*N[0]+N[1]*N[1]);B=$q(A,(k-T)/(S-1)),C=$q(A,(l-T)/(S+1))}}x>br?C>br?(q=ci(L,M,F,G,l,C,p),r=ci(J,K,H,I,l,C,p),i.moveTo(q.cx+q.x01,q.cy+q.y01),C<A?i.arc(q.cx,q.cy,C,Xq(q.y01,q.x01),Xq(r.y01,r.x01),!p):(i.arc(q.cx,q.cy,C,Xq(q.y01,q.x01),Xq(q.y11,q.x11),!p),i.arc(0,0,l,Xq(q.cy+q.y11,q.cx+q.x11),Xq(r.cy+r.y11,r.cx+r.x11),!p),i.arc(r.cx,r.cy,C,Xq(r.y11,r.x11),Xq(r.y01,r.x01),!p))):(i.moveTo(F,G),i.arc(0,0,l,s,t,!p)):i.moveTo(F,G),k>br&&w>br?B>br?(q=ci(H,I,J,K,k,-B,p),r=ci(F,G,L,M,k,-B,p),i.lineTo(q.cx+q.x01,q.cy+q.y01),B<A?i.arc(q.cx,q.cy,B,Xq(q.y01,q.x01),Xq(r.y01,r.x01),!p):(i.arc(q.cx,q.cy,B,Xq(q.y01,q.x01),Xq(q.y11,q.x11),!p),i.arc(0,0,k,Xq(q.cy+q.y11,q.cx+q.x11),Xq(r.cy+r.y11,r.cx+r.x11),p),i.arc(r.cx,r.cy,B,Xq(r.y11,r.x11),Xq(r.y01,r.x01),!p))):i.arc(0,0,k,v,u,p):i.lineTo(H,I)}else i.moveTo(0,0);if(i.closePath(),a)return i=null,a+""||null}var b=Zh,c=$h,d=Xh(0),e=null,f=_h,g=ai,h=bi,i=null;return a.centroid=function(){var a=(+b.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+f.apply(this,arguments)+ +g.apply(this,arguments))/2-cr/2;return[Yq(d)*a,_q(d)*a]},a.innerRadius=function(c){return arguments.length?(b="function"==typeof c?c:Xh(+c),a):b},a.outerRadius=function(b){return arguments.length?(c="function"==typeof b?b:Xh(+b),a):c},a.cornerRadius=function(b){return arguments.length?(d="function"==typeof b?b:Xh(+b),a):d},a.padRadius=function(b){return arguments.length?(e=null==b?null:"function"==typeof b?b:Xh(+b),a):e},a.startAngle=function(b){return arguments.length?(f="function"==typeof b?b:Xh(+b),a):f},a.endAngle=function(b){return arguments.length?(g="function"==typeof b?b:Xh(+b),a):g},a.padAngle=function(b){return arguments.length?(h="function"==typeof b?b:Xh(+b),a):h},a.context=function(b){return arguments.length?(i=null==b?null:b,a):i},a},a.area=ii,a.line=hi,a.pie=function(){function a(a){var h,i,j,k,l,m=a.length,n=0,o=new Array(m),p=new Array(m),q=+e.apply(this,arguments),r=Math.min(er,Math.max(-er,f.apply(this,arguments)-q)),s=Math.min(Math.abs(r)/m,g.apply(this,arguments)),t=s*(r<0?-1:1);for(h=0;h<m;++h)(l=p[o[h]=h]=+b(a[h],h,a))>0&&(n+=l);for(null!=c?o.sort(function(a,b){return c(p[a],p[b])}):null!=d&&o.sort(function(b,c){return d(a[b],a[c])}),h=0,j=n?(r-m*t)/n:0;h<m;++h,q=k)i=o[h],k=q+((l=p[i])>0?l*j:0)+t,p[i]={data:a[i],index:h,value:l,startAngle:q,endAngle:k,padAngle:s};return p}var b=ki,c=ji,d=null,e=Xh(0),f=Xh(er),g=Xh(0);return a.value=function(c){return arguments.length?(b="function"==typeof c?c:Xh(+c),a):b},a.sortValues=function(b){return arguments.length?(c=b,d=null,a):c},a.sort=function(b){return arguments.length?(d=b,c=null,a):d},a.startAngle=function(b){return arguments.length?(e="function"==typeof b?b:Xh(+b),a):e},a.endAngle=function(b){return arguments.length?(f="function"==typeof b?b:Xh(+b),a):f},a.padAngle=function(b){return arguments.length?(g="function"==typeof b?b:Xh(+b),a):g},a},a.areaRadial=pi,a.radialArea=pi,a.lineRadial=oi,a.radialLine=oi,a.pointRadial=qi,a.linkHorizontal=function(){return ti(ui)},a.linkVertical=function(){return ti(vi)},a.linkRadial=function(){var a=ti(wi);return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a},a.symbol=function(){function a(){var a;if(d||(d=a=bc()),b.apply(this,arguments).draw(d,+c.apply(this,arguments)),a)return d=null,a+""||null}var b=Xh(hr),c=Xh(64),d=null;return a.type=function(c){return arguments.length?(b="function"==typeof c?c:Xh(c),a):b},a.size=function(b){return arguments.length?(c="function"==typeof b?b:Xh(+b),a):c},a.context=function(b){return arguments.length?(d=null==b?null:b,a):d},a},a.symbols=xr,a.symbolCircle=hr,a.symbolCross=ir,a.symbolDiamond=lr,a.symbolSquare=qr,a.symbolStar=pr,a.symbolTriangle=sr,a.symbolWye=wr,a.curveBasisClosed=function(a){return new Ai(a)},a.curveBasisOpen=function(a){return new Bi(a)},a.curveBasis=function(a){return new zi(a)},a.curveBundle=yr,a.curveCardinalClosed=Ar,a.curveCardinalOpen=Br,a.curveCardinal=zr,a.curveCatmullRomClosed=Dr,a.curveCatmullRomOpen=Er,a.curveCatmullRom=Cr,a.curveLinearClosed=function(a){return new Li(a)},a.curveLinear=ei,a.curveMonotoneX=function(a){return new Qi(a)},a.curveMonotoneY=function(a){return new Ri(a)},a.curveNatural=function(a){return new Ti(a)},a.curveStep=function(a){return new Vi(a,.5)},a.curveStepAfter=function(a){return new Vi(a,1)},a.curveStepBefore=function(a){return new Vi(a,0)},a.stack=function(){function a(a){var f,g,h=b.apply(this,arguments),i=a.length,j=h.length,k=new Array(j);for(f=0;f<j;++f){for(var l,m=h[f],n=k[f]=new Array(i),o=0;o<i;++o)n[o]=l=[0,+e(a[o],m,o,a)],l.data=a[o];n.key=m}for(f=0,g=c(k);f<j;++f)k[g[f]].index=f;return d(k,g),k}var b=Xh([]),c=Xi,d=Wi,e=Yi;return a.keys=function(c){return arguments.length?(b="function"==typeof c?c:Xh(gr.call(c)),a):b},a.value=function(b){return arguments.length?(e="function"==typeof b?b:Xh(+b),a):e},a.order=function(b){return arguments.length?(c=null==b?Xi:"function"==typeof b?b:Xh(gr.call(b)),a):c},a.offset=function(b){return arguments.length?(d=null==b?Wi:b,a):d},a},a.stackOffsetExpand=function(a,b){if((d=a.length)>0){for(var c,d,e,f=0,g=a[0].length;f<g;++f){for(e=c=0;c<d;++c)e+=a[c][f][1]||0;if(e)for(c=0;c<d;++c)a[c][f][1]/=e}Wi(a,b)}},a.stackOffsetDiverging=function(a,b){if((h=a.length)>1)for(var c,d,e,f,g,h,i=0,j=a[b[0]].length;i<j;++i)for(f=g=0,c=0;c<h;++c)(e=(d=a[b[c]][i])[1]-d[0])>=0?(d[0]=f,d[1]=f+=e):e<0?(d[1]=g,d[0]=g+=e):d[0]=f},a.stackOffsetNone=Wi,a.stackOffsetSilhouette=function(a,b){if((c=a.length)>0){for(var c,d=0,e=a[b[0]],f=e.length;d<f;++d){for(var g=0,h=0;g<c;++g)h+=a[g][d][1]||0;e[d][1]+=e[d][0]=-h/2}Wi(a,b)}},a.stackOffsetWiggle=function(a,b){if((e=a.length)>0&&(d=(c=a[b[0]]).length)>0){for(var c,d,e,f=0,g=1;g<d;++g){for(var h=0,i=0,j=0;h<e;++h){for(var k=a[b[h]],l=k[g][1]||0,m=(l-(k[g-1][1]||0))/2,n=0;n<h;++n){var o=a[b[n]];m+=(o[g][1]||0)-(o[g-1][1]||0)}i+=l,j+=m*l}c[g-1][1]+=c[g-1][0]=f,i&&(f-=j/i)}c[g-1][1]+=c[g-1][0]=f,Wi(a,b)}},a.stackOrderAscending=Zi,a.stackOrderDescending=function(a){return Zi(a).reverse()},
a.stackOrderInsideOut=function(a){var b,c,d=a.length,e=a.map($i),f=Xi(a).sort(function(a,b){return e[b]-e[a]}),g=0,h=0,i=[],j=[];for(b=0;b<d;++b)c=f[b],g<h?(g+=e[c],i.push(c)):(h+=e[c],j.push(c));return j.reverse().concat(i)},a.stackOrderNone=Xi,a.stackOrderReverse=function(a){return Xi(a).reverse()},a.timeInterval=Dg,a.timeMillisecond=vp,a.timeMilliseconds=wp,a.utcMillisecond=vp,a.utcMilliseconds=wp,a.timeSecond=zp,a.timeSeconds=Ap,a.utcSecond=zp,a.utcSeconds=Ap,a.timeMinute=Bp,a.timeMinutes=Cp,a.timeHour=Dp,a.timeHours=Ep,a.timeDay=Fp,a.timeDays=Gp,a.timeWeek=Hp,a.timeWeeks=Op,a.timeSunday=Hp,a.timeSundays=Op,a.timeMonday=Ip,a.timeMondays=Pp,a.timeTuesday=Jp,a.timeTuesdays=Qp,a.timeWednesday=Kp,a.timeWednesdays=Rp,a.timeThursday=Lp,a.timeThursdays=Sp,a.timeFriday=Mp,a.timeFridays=Tp,a.timeSaturday=Np,a.timeSaturdays=Up,a.timeMonth=Vp,a.timeMonths=Wp,a.timeYear=Xp,a.timeYears=Yp,a.utcMinute=Zp,a.utcMinutes=$p,a.utcHour=_p,a.utcHours=aq,a.utcDay=bq,a.utcDays=cq,a.utcWeek=dq,a.utcWeeks=kq,a.utcSunday=dq,a.utcSundays=kq,a.utcMonday=eq,a.utcMondays=lq,a.utcTuesday=fq,a.utcTuesdays=mq,a.utcWednesday=gq,a.utcWednesdays=nq,a.utcThursday=hq,a.utcThursdays=oq,a.utcFriday=iq,a.utcFridays=pq,a.utcSaturday=jq,a.utcSaturdays=qq,a.utcMonth=rq,a.utcMonths=sq,a.utcYear=tq,a.utcYears=vq,a.timeFormatDefaultLocale=Qh,a.timeFormatLocale=Jg,a.isoFormat=Bq,a.isoParse=Cq,a.now=sb,a.timer=vb,a.timerFlush=wb,a.timeout=Ab,a.interval=function(a,b,c){var d=new ub,e=b;return null==b?(d.restart(a,b,c),d):(b=+b,c=null==c?sb():+c,d.restart(function f(g){g+=e,d.restart(f,e+=b,c),a(g)},b,c),d)},a.transition=Jb,a.active=function(a,b){var c,d,e=a.__transition;if(e){b=null==b?null:b+"";for(d in e)if((c=e[d]).state>sl&&c.name===b)return new Ib([[a]],Yl,b,+d)}return null},a.interrupt=Fb,a.voronoi=function(){function a(a){return new yj(a.map(function(d,e){var f=[Math.round(b(d,e,a)/Mr)*Mr,Math.round(c(d,e,a)/Mr)*Mr];return f.index=e,f.data=d,f}),d)}var b=aj,c=bj,d=null;return a.polygons=function(b){return a(b).polygons()},a.links=function(b){return a(b).links()},a.triangles=function(b){return a(b).triangles()},a.x=function(c){return arguments.length?(b="function"==typeof c?c:_i(+c),a):b},a.y=function(b){return arguments.length?(c="function"==typeof b?b:_i(+b),a):c},a.extent=function(b){return arguments.length?(d=null==b?null:[[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]],a):d&&[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},a.size=function(b){return arguments.length?(d=null==b?null:[[0,0],[+b[0],+b[1]]],a):d&&[d[1][0]-d[0][0],d[1][1]-d[0][1]]},a},a.zoom=function(){function b(a){a.property("__zoom",Gj).on("wheel.zoom",i).on("mousedown.zoom",j).on("dblclick.zoom",k).filter(u).on("touchstart.zoom",l).on("touchmove.zoom",m).on("touchend.zoom touchcancel.zoom",n).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(a,b){return(b=Math.max(v[0],Math.min(v[1],b)))===a.k?a:new Aj(b,a.x,a.y)}function d(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new Aj(a.k,d,e)}function e(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function f(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,d=g(this,a),f=r.apply(this,a),h=c||e(f),i=Math.max(f[1][0]-f[0][0],f[1][1]-f[0][1]),j=this.__zoom,k="function"==typeof b?b.apply(this,a):b,l=y(j.invert(h).concat(i/j.k),k.invert(h).concat(i/k.k));return function(a){if(1===a)a=k;else{var b=l(a),c=i/b[2];a=new Aj(c,h[0]-b[0]*c,h[1]-b[1]*c)}d.zoom(null,a)}})}function g(a,b){for(var c,d=0,e=A.length;d<e;++d)if((c=A[d]).that===a)return c;return new h(a,b)}function h(a,b){this.that=a,this.args=b,this.index=-1,this.active=0,this.extent=r.apply(a,b)}function i(){if(q.apply(this,arguments)){var a=g(this,arguments),b=this.__zoom,e=Math.max(v[0],Math.min(v[1],b.k*Math.pow(2,t.apply(this,arguments)))),f=na(this);if(a.wheel)a.mouse[0][0]===f[0]&&a.mouse[0][1]===f[1]||(a.mouse[1]=b.invert(a.mouse[0]=f)),clearTimeout(a.wheel);else{if(b.k===e)return;a.mouse=[f,b.invert(f)],Fb(this),a.start()}Dj(),a.wheel=setTimeout(function(){a.wheel=null,a.end()},D),a.zoom("mouse",s(d(c(b,e),a.mouse[0],a.mouse[1]),a.extent,w))}}function j(){if(!p&&q.apply(this,arguments)){var b=g(this,arguments),c=ia(a.event.view).on("mousemove.zoom",function(){if(Dj(),!b.moved){var c=a.event.clientX-f,e=a.event.clientY-h;b.moved=c*c+e*e>E}b.zoom("mouse",s(d(b.that.__zoom,b.mouse[0]=na(b.that),b.mouse[1]),b.extent,w))},!0).on("mouseup.zoom",function(){c.on("mousemove.zoom mouseup.zoom",null),sa(a.event.view,b.moved),Dj(),b.end()},!0),e=na(this),f=a.event.clientX,h=a.event.clientY;ra(a.event.view),Cj(),b.mouse=[e,this.__zoom.invert(e)],Fb(this),b.start()}}function k(){if(q.apply(this,arguments)){var e=this.__zoom,g=na(this),h=e.invert(g),i=e.k*(a.event.shiftKey?.5:2),j=s(d(c(e,i),g,h),r.apply(this,arguments),w);Dj(),x>0?ia(this).transition().duration(x).call(f,j,g):ia(this).call(b.transform,j)}}function l(){if(q.apply(this,arguments)){var b,c,d,e,f=g(this,arguments),h=a.event.changedTouches,i=h.length;for(Cj(),c=0;c<i;++c)e=[e=oa(this,h,(d=h[c]).identifier),this.__zoom.invert(e),d.identifier],f.touch0?f.touch1||(f.touch1=e):(f.touch0=e,b=!0);if(o&&(o=clearTimeout(o),!f.touch1))return f.end(),void((e=ia(this).on("dblclick.zoom"))&&e.apply(this,arguments));b&&(o=setTimeout(function(){o=null},C),Fb(this),f.start())}}function m(){var b,e,f,h,i=g(this,arguments),j=a.event.changedTouches,k=j.length;for(Dj(),o&&(o=clearTimeout(o)),b=0;b<k;++b)f=oa(this,j,(e=j[b]).identifier),i.touch0&&i.touch0[2]===e.identifier?i.touch0[0]=f:i.touch1&&i.touch1[2]===e.identifier&&(i.touch1[0]=f);if(e=i.that.__zoom,i.touch1){var l=i.touch0[0],m=i.touch0[1],n=i.touch1[0],p=i.touch1[1],q=(q=n[0]-l[0])*q+(q=n[1]-l[1])*q,r=(r=p[0]-m[0])*r+(r=p[1]-m[1])*r;e=c(e,Math.sqrt(q/r)),f=[(l[0]+n[0])/2,(l[1]+n[1])/2],h=[(m[0]+p[0])/2,(m[1]+p[1])/2]}else{if(!i.touch0)return;f=i.touch0[0],h=i.touch0[1]}i.zoom("touch",s(d(e,f,h),i.extent,w))}function n(){var b,c,d=g(this,arguments),e=a.event.changedTouches,f=e.length;for(Cj(),p&&clearTimeout(p),p=setTimeout(function(){p=null},C),b=0;b<f;++b)c=e[b],d.touch0&&d.touch0[2]===c.identifier?delete d.touch0:d.touch1&&d.touch1[2]===c.identifier&&delete d.touch1;d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0?d.touch0[1]=this.__zoom.invert(d.touch0[0]):d.end()}var o,p,q=Ej,r=Fj,s=Jj,t=Hj,u=Ij,v=[0,1/0],w=[[-1/0,-1/0],[1/0,1/0]],x=250,y=ob,A=[],B=z("start","zoom","end"),C=500,D=150,E=0;return b.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Gj),a!==c?f(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"==typeof b?b.apply(this,arguments):b).end()})},b.scaleBy=function(a,c){b.scaleTo(a,function(){return this.__zoom.k*("function"==typeof c?c.apply(this,arguments):c)})},b.scaleTo=function(a,f){b.transform(a,function(){var a=r.apply(this,arguments),b=this.__zoom,g=e(a),h=b.invert(g),i="function"==typeof f?f.apply(this,arguments):f;return s(d(c(b,i),g,h),a,w)})},b.translateBy=function(a,c,d){b.transform(a,function(){return s(this.__zoom.translate("function"==typeof c?c.apply(this,arguments):c,"function"==typeof d?d.apply(this,arguments):d),r.apply(this,arguments),w)})},b.translateTo=function(a,c,d){b.transform(a,function(){var a=r.apply(this,arguments),b=this.__zoom,f=e(a);return s(Or.translate(f[0],f[1]).scale(b.k).translate("function"==typeof c?-c.apply(this,arguments):-c,"function"==typeof d?-d.apply(this,arguments):-d),a,w)})},h.prototype={start:function(){return 1==++this.active&&(this.index=A.push(this)-1,this.emit("start")),this},zoom:function(a,b){return this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return 0==--this.active&&(A.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(a){ea(new function(a,b,c){this.target=a,this.type=b,this.transform=c}(b,a,this.that.__zoom),B.apply,B,[a,this.that,this.args])}},b.wheelDelta=function(a){return arguments.length?(t="function"==typeof a?a:zj(+a),b):t},b.filter=function(a){return arguments.length?(q="function"==typeof a?a:zj(!!a),b):q},b.touchable=function(a){return arguments.length?(u="function"==typeof a?a:zj(!!a),b):u},b.extent=function(a){return arguments.length?(r="function"==typeof a?a:zj([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),b):r},b.scaleExtent=function(a){return arguments.length?(v[0]=+a[0],v[1]=+a[1],b):[v[0],v[1]]},b.translateExtent=function(a){return arguments.length?(w[0][0]=+a[0][0],w[1][0]=+a[1][0],w[0][1]=+a[0][1],w[1][1]=+a[1][1],b):[[w[0][0],w[0][1]],[w[1][0],w[1][1]]]},b.constrain=function(a){return arguments.length?(s=a,b):s},b.duration=function(a){return arguments.length?(x=+a,b):x},b.interpolate=function(a){return arguments.length?(y=a,b):y},b.on=function(){var a=B.on.apply(B,arguments);return a===B?b:a},b.clickDistance=function(a){return arguments.length?(E=(a=+a)*a,b):Math.sqrt(E)},b},a.zoomTransform=Bj,a.zoomIdentity=Or,Object.defineProperty(a,"__esModule",{value:!0})}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=[].slice;q='<span class="odometer-value"></span>',n='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+q+"</span></span>",d='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+n+"</span></span>",g='<span class="odometer-formatting-mark"></span>',c="(,ddd).dd",h=/^\(?([^)]*)\)?(?:(.)(d+))?$/,i=30,f=2e3,a=20,j=2,e=.5,k=1e3/i,b=1e3/a,o="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",y=document.createElement("div").style,p=null!=y.transition||null!=y.webkitTransition||null!=y.mozTransition||null!=y.oTransition,w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,l=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},v=function(a,b){return a.className=a.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")},r=function(a,b){return v(a,b),a.className+=" "+b},z=function(a,b){var c;return null!=document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)):void 0},u=function(){var a,b;return null!=(a=null!=(b=window.performance)&&"function"==typeof b.now?b.now():void 0)?a:+new Date},x=function(a,b){return null==b&&(b=0),b?(a*=Math.pow(10,b),a+=.5,a=Math.floor(a),a/=Math.pow(10,b)):Math.round(a)},A=function(a){return 0>a?Math.ceil(a):Math.floor(a)},t=function(a){return a-x(a)},C=!1,(B=function(){var a,b,c,d,e;if(!C&&null!=window.jQuery){for(C=!0,d=["html","text"],e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(function(a){var b;return b=window.jQuery.fn[a],window.jQuery.fn[a]=function(a){var c;return null==a||null==(null!=(c=this[0])?c.odometer:void 0)?b.apply(this,arguments):this[0].odometer.update(a)}}(a));return e}})(),setTimeout(B,0),m=function(){function a(b){var c,d,e,g,h,i,l,m,n,o=this;if(this.options=b,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;this.el.odometer=this,l=a.options;for(c in l)e=l[c],null==this.options[c]&&(this.options[c]=e);null==(g=this.options).duration&&(g.duration=f),this.MAX_VALUES=this.options.duration/k/j|0,this.resetFormat(),this.value=this.cleanValue(null!=(m=this.options.value)?m:""),this.renderInside(),this.render();try{for(n=["innerHTML","innerText","textContent"],h=0,i=n.length;i>h;h++)d=n[h],null!=this.el[d]&&function(a){Object.defineProperty(o.el,a,{get:function(){var b;return"innerHTML"===a?o.inside.outerHTML:null!=(b=o.inside.innerText)?b:o.inside.textContent},set:function(a){return o.update(a)}})}(d)}catch(a){a,this.watchForMutations()}}return a.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},a.prototype.watchForMutations=function(){var a=this;if(null!=l)try{return null==this.observer&&(this.observer=new l(function(){var b;return b=a.el.innerText,a.renderInside(),a.render(a.value),a.update(b)})),this.watchMutations=!0,this.startWatchingMutations()}catch(a){a}},a.prototype.startWatchingMutations=function(){return this.watchMutations?this.observer.observe(this.el,{childList:!0}):void 0},a.prototype.stopWatchingMutations=function(){var a;return null!=(a=this.observer)?a.disconnect():void 0},a.prototype.cleanValue=function(a){var b;return"string"==typeof a&&(a=a.replace(null!=(b=this.format.radix)?b:".","<radix>"),a=a.replace(/[.,]/g,""),a=a.replace("<radix>","."),a=parseFloat(a,10)||0),x(a,this.format.precision)},a.prototype.bindTransitionEnd=function(){var a,b,c,d,e,f,g=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,b=!1,e=o.split(" "),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.el.addEventListener(a,function(){return!!b||(b=!0,setTimeout(function(){return g.render(),b=!1,z(g.el,"odometerdone")},0),!0)},!1));return f}},a.prototype.resetFormat=function(){var a,b,d,e,f,g,i,j;if(a=null!=(i=this.options.format)?i:c,a||(a="d"),!(d=h.exec(a)))throw new Error("Odometer: Unparsable digit format");return j=d.slice(1,4),g=j[0],f=j[1],b=j[2],e=(null!=b?b.length:void 0)||0,this.format={repeating:g,radix:f,precision:e}},a.prototype.render=function(a){var b,c,d,e,f,g,h;for(null==a&&(a=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",f=this.options.theme,b=this.el.className.split(" "),e=[],g=0,h=b.length;h>g;g++)c=b[g],c.length&&((d=/^odometer-theme-(.+)$/.exec(c))?f=d[1]:/^odometer(-|$)/.test(c)||e.push(c));return e.push("odometer"),p||e.push("odometer-no-transitions"),e.push(f?"odometer-theme-"+f:"odometer-auto-theme"),this.el.className=e.join(" "),this.ribbons={},this.formatDigits(a),this.startWatchingMutations()},a.prototype.formatDigits=function(a){var b,c,d,e,f,g,h,i,j,k;if(this.digits=[],this.options.formatFunction)for(d=this.options.formatFunction(a),j=d.split("").reverse(),f=0,h=j.length;h>f;f++)c=j[f],c.match(/0-9/)?(b=this.renderDigit(),b.querySelector(".odometer-value").innerHTML=c,this.digits.push(b),this.insertDigit(b)):this.addSpacer(c);else for(e=!this.format.precision||!t(a)||!1,k=a.toString().split("").reverse(),g=0,i=k.length;i>g;g++)b=k[g],"."===b&&(e=!0),this.addDigit(b,e)},a.prototype.update=function(a){var b,c=this;return a=this.cleanValue(a),(b=a-this.value)?(v(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),b>0?r(this.el,"odometer-animating-up"):r(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(a),this.startWatchingMutations(),setTimeout(function(){return c.el.offsetHeight,r(c.el,"odometer-animating")},0),this.value=a):void 0},a.prototype.renderDigit=function(){return s(d)},a.prototype.insertDigit=function(a,b){return null!=b?this.inside.insertBefore(a,b):this.inside.children.length?this.inside.insertBefore(a,this.inside.children[0]):this.inside.appendChild(a)},a.prototype.addSpacer=function(a,b,c){var d;return d=s(g),d.innerHTML=a,c&&r(d,c),this.insertDigit(d,b)},a.prototype.addDigit=function(a,b){var c,d,e,f;if(null==b&&(b=!0),"-"===a)return this.addSpacer(a,null,"odometer-negation-mark");if("."===a)return this.addSpacer(null!=(f=this.format.radix)?f:".",null,"odometer-radix-mark");if(b)for(e=!1;;){if(!this.format.repeating.length){if(e)throw new Error("Bad odometer format without digits");this.resetFormat(),e=!0}if(c=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===c)break;this.addSpacer(c)}return d=this.renderDigit(),d.querySelector(".odometer-value").innerHTML=a,this.digits.push(d),this.insertDigit(d)},a.prototype.animate=function(a){return p&&"count"!==this.options.animation?this.animateSlide(a):this.animateCount(a)},a.prototype.animateCount=function(a){var c,d,e,f,g,h=this;if(d=+a-this.value)return f=e=u(),c=this.value,(g=function(){var i,j,k;return u()-f>h.options.duration?(h.value=a,h.render(),void z(h.el,"odometerdone")):(i=u()-e,i>b&&(e=u(),k=i/h.options.duration,j=d*k,c+=j,h.render(Math.round(c))),null!=w?w(g):setTimeout(g,b))})()},a.prototype.getDigitCount=function(){var a,b,c,d,e,f;for(d=1<=arguments.length?G.call(arguments,0):[],a=e=0,f=d.length;f>e;a=++e)c=d[a],d[a]=Math.abs(c);return b=Math.max.apply(Math,d),Math.ceil(Math.log(b+1)/Math.log(10))},a.prototype.getFractionalDigitCount=function(){var a,b,c,d,e,f,g;for(e=1<=arguments.length?G.call(arguments,0):[],b=/^\-?\d*\.(\d*?)0*$/,a=f=0,g=e.length;g>f;a=++f)d=e[a],e[a]=d.toString(),c=b.exec(e[a]),e[a]=null==c?0:c[1].length;return Math.max.apply(Math,e)},a.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},a.prototype.animateSlide=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,B,C,D,E;if(s=this.value,j=this.getFractionalDigitCount(s,a),j&&(a*=Math.pow(10,j),s*=Math.pow(10,j)),d=a-s){for(this.bindTransitionEnd(),f=this.getDigitCount(s,a),g=[],b=0,m=v=0;f>=0?f>v:v>f;m=f>=0?++v:--v){if(t=A(s/Math.pow(10,f-m-1)),i=A(a/Math.pow(10,f-m-1)),h=i-t,Math.abs(h)>this.MAX_VALUES){for(l=[],n=h/(this.MAX_VALUES+this.MAX_VALUES*b*e),c=t;h>0&&i>c||0>h&&c>i;)l.push(Math.round(c)),c+=n;l[l.length-1]!==i&&l.push(i),b++}else l=function(){E=[];for(var a=t;i>=t?i>=a:a>=i;i>=t?a++:a--)E.push(a);return E}.apply(this);for(m=w=0,y=l.length;y>w;m=++w)k=l[m],l[m]=Math.abs(k%10);g.push(l)}for(this.resetDigits(),D=g.reverse(),m=x=0,z=D.length;z>x;m=++x)for(l=D[m],this.digits[m]||this.addDigit(" ",m>=j),null==(u=this.ribbons)[m]&&(u[m]=this.digits[m].querySelector(".odometer-ribbon-inner")),this.ribbons[m].innerHTML="",0>d&&(l=l.reverse()),o=C=0,B=l.length;B>C;o=++C)k=l[o],q=document.createElement("div"),q.className="odometer-value",q.innerHTML=k,this.ribbons[m].appendChild(q),o===l.length-1&&r(q,"odometer-last-value"),0===o&&r(q,"odometer-first-value");return 0>t&&this.addDigit("-"),p=this.inside.querySelector(".odometer-radix-mark"),null!=p&&p.parent.removeChild(p),j?this.addSpacer(this.format.radix,this.digits[j-1],"odometer-radix-mark"):void 0}},a}(),m.options=null!=(E=window.odometerOptions)?E:{},setTimeout(function(){var a,b,c,d,e;if(window.odometerOptions){d=window.odometerOptions,e=[];for(a in d)b=d[a],e.push(null!=(c=m.options)[a]?(c=m.options)[a]:c[a]=b);return e}},0),m.init=function(){var a,b,c,d,e,f;if(null!=document.querySelectorAll){for(b=document.querySelectorAll(m.options.selector||".odometer"),f=[],c=0,d=b.length;d>c;c++)a=b[c],f.push(a.odometer=new m({el:a,value:null!=(e=a.innerText)?e:a.textContent}));return f}},null!=(null!=(F=document.documentElement)?F.doScroll:void 0)&&null!=document.createEventObject?(D=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==m.options.auto&&m.init(),null!=D?D.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){return!1!==m.options.auto?m.init():void 0},!1),"function"==typeof define&&define.amd?define(["jquery"],function(){return m}):"undefined"!=typeof exports&&null!==exports?module.exports=m:window.Odometer=m}.call(this),angular.module("ui.odometer",[]).provider("odometerOptions",function(){var a;return a=this,a.defaults={value:0},this.$get=function(){return angular.copy(a.defaults)},this}).directive("odometer",["odometerOptions",function(a){return{restrict:"A",link:function(b,c,d){var e,f;f=b.$eval(d.odometerOptions)||{},angular.extend(f,a),f.el=c[0],e=new Odometer(f),b.$watch(d.odometer,function(a){e.update(a)})}}}]),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a=angular.module("angularBootstrapNavTree",[]),a.directive("abnTree",["$timeout",function(a){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="row.level != 1 && user_clicks_branch(row)"><i ng-if="(!row.branch.imgSrc || row.classes.indexOf(\'leaf\') == -1)" ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded; toggle();" class="indented tree-icon"> </i> <img ng-if="row.branch.imgSrc" ng-src="{{ row.branch.imgSrc }}" class="{{row.branch.imgCls}} indented treeImg" alt="{{ row.branch.label}}" /><span ng-click="row.level == 1 && user_clicks_branch(row)" class="indented tree-label">{{ row.branch.label }}</span></a></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"=",labelTag:"@",childrenTag:"@"},link:function(c,d,e){var f,g,h,i,j,k,l,m,n,o;if(function(a){console.log("ERROR:"+a)},null!=e.iconExpand&&""!=e.iconExpand||(e.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"),null!=e.iconCollapse&&""!=e.iconExpand||(e.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"),null!=e.labelTag&&""!=e.labelTag||(e.labelTag="label"),null!=e.childrenTag&&""!=e.childrenTag||(e.childrenTag="children"),null!=e.iconLeaf&&""!=e.iconExpand||(e.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"),null==e.expandLevel&&(e.expandLevel="3"),g=parseInt(e.expandLevel,10),!c.treeData)return void alert("no treeData defined for the tree!");if(null==c.treeData.length){if(null==treeData[c.labelsTag])return void alert("treeData should be an array of root branches");c.treeData=[treeData]}return i=function(a){var b,d,e,f,g,h;for(b=function(d,e){var f,g,h,i,j;if(a(d,e),null!=d[c.childrenTag]){for(i=d[c.childrenTag],j=[],g=0,h=i.length;g<h;g++)f=i[g],j.push(b(f,e+1));return j}},g=c.treeData,h=[],e=0,f=g.length;e<f;e++)d=g[e],h.push(b(d,1));return h},n=null,m=function(b,d){return b?(null!=n&&(n.selected=!1),b.selected=!0,n=b,f(b),null!=b.onSelect?a(function(){return b.onSelect(b,d)}):null!=c.onSelect?a(function(){return c.onSelect({branch:b,level:d})}):void 0):(null!=n&&(n.selected=!1),void(n=null))},c.user_clicks_branch=function(a){var b=a.branch,c=a.level;return m(b,c)},c.toggle=function(){l()},j=function(a){var b;return b=void 0,a.parent_uid&&i(function(c){if(c.uid===a.parent_uid)return b=c}),b},h=function(a,b){var c;if(null!=(c=j(a)))return b(c),h(c,b)},f=function(a){return h(a,function(a){return a.expanded=!0})},c.tree_rows=[],l=function(){console.log("on_treeData_change",c.treeData);var a,d,f,g,h,j;for(i(function(a,b){if(!a.uid)return a.uid=""+Math.random()}),console.log("UIDs are set."),i(function(a){var b,d,e,f,g;if(angular.isArray(a[c.childrenTag])){for(f=a[c.childrenTag],g=[],d=0,e=f.length;d<e;d++)b=f[d],g.push(b.parent_uid=a.uid);return g}}),c.tree_rows=[],i(function(a){var b,d;return a[c.childrenTag]?a[c.childrenTag].length>0?(d=function(a,b,c){if("string"==typeof a){var d={};return d[c]=a,d[b]=[],d}return a},a[c.childrenTag]=function(){var e,f,g,h;for(g=a[c.childrenTag],h=[],e=0,f=g.length;e<f;e++)b=g[e],h.push(d(b,a[c.childrenTag],a[c.labelsTag]));return h}()):void 0:a[c.childrenTag]=[]}),a=function(d,f,g){var h,i,j,k,l,m,n;if(null==f.expanded&&(f.expanded=!1),null==f.classes&&(f.classes=[]),f.noLeaf||f[c.childrenTag]&&0!==f[c.childrenTag].length?j=f.expanded?e.iconCollapse:e.iconExpand:(j=e.iconLeaf,b.call(f.classes,"leaf")<0&&f.classes.push("leaf")),c.tree_rows.push({level:d,branch:f,label:f[c.labelsTag],classes:f.classes,tree_icon:j,visible:g}),null!=f[c.childrenTag]){for(m=f[c.childrenTag],n=[],k=0,l=m.length;k<l;k++)h=m[k],i=g&&f.expanded,n.push(a(d+1,h,i));return n}},h=c.treeData,j=[],f=0,g=h.length;f<g;f++)d=h[f],j.push(a(1,d,!0));return j},c.$watchCollection(function(){return c.treeData},l,!1),null!=e.initialSelection&&i(function(b){if(b[c.labelsTag]===e.initialSelection)return a(function(){return m(b)})}),k=c.treeData.length,console.log("num root branches = "+k),i(function(a,b){return a.level=b,a.expanded=a.level<g}),null!=c.treeControl&&angular.isObject(c.treeControl)?(o=c.treeControl,o.expand_all=function(){return i(function(a,b){return a.expanded=!0})},o.collapse_all=function(){return i(function(a,b){return a.expanded=!1})},o.get_first_branch=function(){if((k=c.treeData.length)>0)return c.treeData[0]},o.select_first_branch=function(){var a;return a=o.get_first_branch(),o.select_branch(a)},o.get_selected_branch=function(){return n},o.get_parent_branch=function(a){return j(a)},o.select_branch=function(a){return m(a),a},o.get_children=function(a){return a[c.childrenTag]},o.select_parent_branch=function(a){var b;if(null==a&&(a=o.get_selected_branch()),null!=a&&null!=(b=o.get_parent_branch(a)))return o.select_branch(b),b},o.add_branch=function(a,b){return null!=a?(a[c.childrenTag].push(b),a.expanded=!0):c.treeData.push(b),b},o.add_root_branch=function(a){return o.add_branch(null,a),a},o.expand_branch=function(a){if(null==a&&(a=o.get_selected_branch()),null!=a)return a.expanded=!0,a},o.collapse_branch=function(a){if(null==a&&(a=n),null!=a)return a.expanded=!1,a},o.get_siblings=function(a){var b;if(null==a&&(a=n),null!=a)return b=o.get_parent_branch(a),b?b[c.childrenTag]:c.treeData},o.get_next_sibling=function(a){var b,c;if(null==a&&(a=n),null!=a&&(c=o.get_siblings(a),k=c.length,(b=c.indexOf(a))<k))return c[b+1]},o.get_prev_sibling=function(a){var b,c;if(null==a&&(a=n),c=o.get_siblings(a),k=c.length,(b=c.indexOf(a))>0)return c[b-1]},o.select_next_sibling=function(a){var b;if(null==a&&(a=n),null!=a&&null!=(b=o.get_next_sibling(a)))return o.select_branch(b)},o.select_prev_sibling=function(a){var b;if(null==a&&(a=n),null!=a&&null!=(b=o.get_prev_sibling(a)))return o.select_branch(b)},o.get_first_child=function(a){var b;if(null==a&&(a=n),null!=a&&(null!=(b=a[c.childrenTag])?b.length:void 0)>0)return a[c.childrenTag][0]},o.get_closest_ancestor_next_sibling=function(a){var b,c;return b=o.get_next_sibling(a),null!=b?b:(c=o.get_parent_branch(a),o.get_closest_ancestor_next_sibling(c))},o.get_next_branch=function(a){var b;if(null==a&&(a=n),null!=a)return b=o.get_first_child(a),null!=b?b:b=o.get_closest_ancestor_next_sibling(a)},o.select_next_branch=function(a){var b;if(null==a&&(a=n),null!=a&&null!=(b=o.get_next_branch(a)))return o.select_branch(b),b},o.last_descendant=function(a){var b;return k=a[c.childrenTag].length,0===k?a:(b=a[c.childrenTag][k-1],o.last_descendant(b))},o.get_prev_branch=function(a){var b;if(null==a&&(a=n),null!=a)return b=o.get_prev_sibling(a),null!=b?o.last_descendant(b):o.get_parent_branch(a)},o.select_prev_branch=function(a){var b;if(null==a&&(a=n),null!=a&&null!=(b=o.get_prev_branch(a)))return o.select_branch(b),b}):void 0}}}])}.call(this),angular.module("angularThermometer",[]).directive("tgThermometerVertical",function(){return{restrict:"E",require:"ngModel",scope:{height:"@",ticks:"<?",percent:"@",value:"@",unit:"@",sectors:"<?",mercuryColor:"<?"},templateUrl:"/UIComponents/dashboard/frontend/components/thermometer/tg_thermometer_vertical.html"}}),function(a,b){"function"==typeof define&&define.amd?define(["angular","objectpath","tv4"],b):"object"==typeof exports?module.exports=b(require("angular"),require("objectpath"),require("tv4")):a.schemaForm=b(a.angular,a.objectpath,a.tv4)}(this,function(a,b,c){var d=[];try{a.module("ngSanitize"),d.push("ngSanitize")}catch(a){}try{a.module("ui.sortable"),d.push("ui.sortable")}catch(a){}try{a.module("angularSpectrumColorpicker"),d.push("angularSpectrumColorpicker")}catch(a){}var e=a.module("schemaForm",d);return a.module("schemaForm").provider("sfPath",[function(){var c=window.ObjectPath||b,d={parse:c.parse};1===a.version.major&&a.version.minor<3?d.stringify=function(a){return Array.isArray(a)?a.join("."):a.toString()}:d.stringify=c.stringify,d.normalize=function(a,b){return d.stringify(Array.isArray(a)?a:d.parse(a),b)},this.parse=d.parse,this.stringify=d.stringify,this.normalize=d.normalize,this.$get=function(){return d}}]),a.module("schemaForm").provider("sfBuilder",["sfPathProvider",function(b){var c=/[A-Z]/g,d=function(a,b){return b=b||"_",a.replace(c,function(a,c){return(c?b:"")+a.toLowerCase()})},e=0,f={sfField:function(a){a.fieldFrag.firstChild.setAttribute("sf-field",e),a.lookup["f"+e]=a.form,e++},ngModel:function(a){if(a.form.key){var c=a.form.key;a.state.keyRedaction&&(c=c.slice(a.state.keyRedaction));var d;if(a.state.modelValue)d=a.state.modelValue;else{var e=b.stringify(c).replace(/"/g,"&quot;");d=a.state.modelName||"model",e&&(d+=("["!==e[0]?".":"")+e)}for(var f=a.fieldFrag.querySelectorAll("[sf-field-model]"),g=0;g<f.length;g++){var h=f[g],i=h.getAttribute("sf-field-model");if(i&&""!==i)if("replaceAll"===i)for(var j=h.attributes,k=0;k<j.length;k++)j[k].value&&-1!==j[k].value.indexOf("$$value")&&(j[k].value=j[k].value.replace(/\$\$value\$\$/g,d));else{var l=h.getAttribute(i);l&&l.indexOf("$$value$$")?h.setAttribute(i,l.replace(/\$\$value\$\$/g,d)):h.setAttribute(i,d)}else h.setAttribute("ng-model",d)}}},simpleTransclusion:function(a){var b=a.build(a.form.items,a.path+".items",a.state);a.fieldFrag.firstChild.appendChild(b)},ngModelOptions:function(a){a.form.ngModelOptions&&Object.keys(a.form.ngModelOptions).length>0&&a.fieldFrag.firstChild.setAttribute("ng-model-options",JSON.stringify(a.form.ngModelOptions))},transclusion:function(a){var b=a.fieldFrag.querySelectorAll("[sf-field-transclude]");if(b.length)for(var c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("sf-field-transclude")||"items",f=a.form[e];if(f){var g=a.build(f,a.path+"."+e,a.state);d.appendChild(g)}}},condition:function(a){if(a.form.condition){var c="evalExpr("+a.path+'.condition, { model: model, "arrayIndex": $index})';if(a.form.key){var d=b.stringify(a.form.key);c="evalExpr("+a.path+'.condition,{ model: model, "arrayIndex": $index, "modelValue": model'+("["===d[0]?"":".")+d+"})"}for(var e=a.fieldFrag.children||a.fieldFrag.childNodes,f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("ng-if");g.setAttribute("ng-if",h?"("+h+") || ("+c+")":c)}}},array:function(c){var d=c.fieldFrag.querySelector("[schema-form-array-items]");if(d){if(state=a.copy(c.state),state.keyRedaction=state.keyRedaction||0,state.keyRedaction+=c.form.key.length+1,c.form.schema&&c.form.schema.items&&c.form.schema.items.type&&-1===c.form.schema.items.type.indexOf("object")&&-1===c.form.schema.items.type.indexOf("array")){b.stringify(c.form.key).replace(/"/g,"&quot;");state.modelValue="modelArray[$index]"}else state.modelName="item";state.arrayCompatFlag=!0;var e=c.build(c.form.items,c.path+".items",state);d.appendChild(e)}}};this.builders=f;var g=[f.sfField,f.ngModel,f.ngModelOptions,f.condition];this.stdBuilders=g,this.$get=["$templateCache","schemaFormDecorators","sfPath",function(a,b,c){var e=function(a,b){if(a.key){var d=b[c.stringify(a.key)];if(d){for(;d.firstChild;)d.removeChild(d.firstChild);return d}}},h=function(a,b,c,f,g,i,j){i=i||{},j=j||Object.create(null),g=g||"schemaForm.form";var k=document.createDocumentFragment();return a.reduce(function(a,k,l){if(!k.type)return a;var m=b[k.type]||b.default;if(m.replace){var n;i.arrayCompatFlag=!1;var o=document.createElement("div"),p=c(k,m)||c(k,b.default);for(o.innerHTML=p,n=document.createDocumentFragment();o.childNodes.length>0;)n.appendChild(o.childNodes[0]);var q={fieldFrag:n,form:k,lookup:j,state:i,path:g+"["+l+"]",build:function(a,d,e){return h(a,b,c,f,d,e,j)}},r=k.builder||m.builder;"function"==typeof r?r(q):r.forEach(function(a){a(q)}),(e(k,f)||a).appendChild(n)}else{var s=document.createElement(d(b.__name,"-"));i.arrayCompatFlag?s.setAttribute("form","copyWithIndex($index)"):s.setAttribute("form",g+"["+l+"]"),(e(k,f)||a).appendChild(s)}return a},k),k};return{build:function(b,c,d,e){return h(b,c,function(b,c){return"template"===b.type?b.template:a.get(c.template)
},d,void 0,void 0,e)},builder:f,stdBuilders:g,internalBuild:h}}]}]),a.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(b,c){var d="",e={},f=function(a,b){"sfDecorator"===a&&(a=d);var c=e[a];return c[b.type]?c[b.type].template:c.default.template},g=function(d){b.directive(d,["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(b,e,g,h,i,j,k,l,m){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(b,n,o,p){b.$on("schemaFormPropagateNgModelController",function(a,c){a.stopPropagation(),a.preventDefault(),b.ngModel=c}),b.showTitle=function(){return b.form&&!0!==b.form.notitle&&b.form.title},b.listToCheckboxValues=function(b){var c={};return a.forEach(b,function(a){c[a]=!0}),c},b.checkboxValuesToList=function(b){var c=[];return a.forEach(b,function(a,b){a&&c.push(b)}),c},b.buttonClick=function(c,d){a.isFunction(d.onClick)?d.onClick(c,d):a.isString(d.onClick)&&(p?p.evalInParentScope(d.onClick,{$event:c,form:d}):b.$eval(d.onClick,{$event:c,form:d}))},b.evalExpr=function(a,c){return p?p.evalInParentScope(a,c):b.$eval(a,c)},b.evalInScope=function(a,c){if(a)return b.$eval(a,c)},b.interp=function(a,b){return a&&i(a)(b)},b.hasSuccess=function(){return!!b.ngModel&&(b.ngModel.$valid&&(!b.ngModel.$pristine||!b.ngModel.$isEmpty(b.ngModel.$modelValue)))},b.hasError=function(){return!!b.ngModel&&(b.ngModel.$invalid&&!b.ngModel.$pristine)},b.errorMessage=function(a){return k.interpolate(a&&a.code+""||"default",b.ngModel&&b.ngModel.$modelValue||"",b.ngModel&&b.ngModel.$viewValue||"",b.form,b.options&&b.options.validationMessage)};var q=b.$watch(o.form,function(i){if(i){i.ngModelOptions=i.ngModelOptions||{},b.form=i;var k;if("template"===i.type&&i.template)k=j.when(i.template);else{var o="template"===i.type?i.templateUrl:f(d,i);k=g.get(o,{cache:h}).then(function(a){return a.data})}k.then(function(d){if(i.key){var f=i.key?c.stringify(i.key).replace(/"/g,"&quot;"):"";d=d.replace(/\$\$value\$\$/g,"model"+("["!==f[0]?".":"")+f)}if(n.html(d),i.condition){var g='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex})';i.key&&(g='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex, "modelValue": model'+l.stringify(i.key)+"})"),a.forEach(n.children(),function(a){var b=a.getAttribute("ng-if");a.setAttribute("ng-if",b?"("+b+") || ("+g+")":g)})}e(n.contents())(b)}),i.key&&(b.$on("schemaForm.error."+i.key.join("."),function(a,c,d,e){!0!==d&&!1!==d||(e=d,d=void 0),b.ngModel&&c&&(b.ngModel.$setDirty?b.ngModel.$setDirty():(b.ngModel.$dirty=!0,b.ngModel.$pristine=!1),d&&(i.validationMessage||(i.validationMessage={}),i.validationMessage[c]=d),b.ngModel.$setValidity(c,!0===e),!0===e&&(b.ngModel.$validate(),b.$broadcast("schemaFormValidate")))}),b.$on("$destroy",function(){if(!b.externalDestructionInProgress){var a=i.destroyStrategy||b.options&&b.options.destroyStrategy||"remove";if(i.key&&"retain"!==a){var c=b.model;if(i.key.length>1&&(c=m(i.key.slice(0,i.key.length-1),c)),void 0===c)return;var d=i.schema&&i.schema.type||"";"empty"===a&&-1!==d.indexOf("string")?c[i.key.slice(-1)]="":"empty"===a&&-1!==d.indexOf("object")?c[i.key.slice(-1)]={}:"empty"===a&&-1!==d.indexOf("array")?c[i.key.slice(-1)]=[]:"null"===a?c[i.key.slice(-1)]=null:delete c[i.key.slice(-1)]}}})),q()}})}}}])},h=function(c,d,e){e=!!a.isDefined(e)&&e,b.directive("sf"+a.uppercase(c[0])+c.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:e,template:'<sf-decorator form="form"></sf-decorator>',link:function(b,d,e){var f={items:"c",titleMap:"c",schema:"c"},g={type:c},h=!0;a.forEach(e,function(c,d){if("$"!==d[0]&&0!==d.indexOf("ng")&&"sfField"!==d){var i=function(c){a.isDefined(c)&&c!==g[d]&&(g[d]=c,h&&g.type&&(g.key||a.isUndefined(e.key))&&(b.form=g,h=!1))};"model"===d?b.$watch(c,function(a){a&&b.model!==a&&(b.model=a)}):"c"===f[d]?b.$watchCollection(c,i):e.$observe(d,i)}})}}})};this.createDecorator=function(b,c){e[b]={__name:b},a.forEach(c,function(a,c){e[b][c]={template:a,replace:!1,builder:[]}}),e[d]||(d=b),g(b)},this.defineDecorator=function(b,c){e[b]={__name:b},a.forEach(c,function(c,d){c.builder=c.builder||[],c.replace=!a.isDefined(c.replace)||c.replace,e[b][d]=c}),e[d]||(d=b),g(b)},this.createDirective=h,this.createDirectives=function(b){a.forEach(b,function(a,b){h(b)})},this.decorator=function(a){return a=a||d,e[a]},this.addMapping=function(a,b,c,d,f){e[a]&&(e[a][b]={template:c,builder:d,replace:!!f})},this.defineAddOn=function(a,b,c,d){e[a]&&(e[a][b]={template:c,builder:d,replace:!0})},this.$get=function(){return{decorator:function(a){return e[a]||e[d]},defaultDecorator:d}},g("sfDecorator")}]),a.module("schemaForm").provider("sfErrorMessage",function(){var b={default:"Field does not validate",0:"Invalid type, expected {{schema.type}}",1:"No enum match for: {{viewValue}}",10:'Data does not match any schemas from "anyOf"',11:'Data does not match any schemas from "oneOf"',12:'Data is valid against more than one schema from "oneOf"',13:'Data matches schema from "not"',100:"Value is not a multiple of {{schema.multipleOf}}",101:"{{viewValue}} is less than the allowed minimum of {{schema.minimum}}",102:"{{viewValue}} is equal to the exclusive minimum {{schema.minimum}}",103:"{{viewValue}} is greater than the allowed maximum of {{schema.maximum}}",104:"{{viewValue}} is equal to the exclusive maximum {{schema.maximum}}",105:"Value is not a valid number",200:"String is too short ({{viewValue.length}} chars), minimum {{schema.minLength}}",201:"String is too long ({{viewValue.length}} chars), maximum {{schema.maxLength}}",202:"String does not match pattern: {{schema.pattern}}",300:"Too few properties defined, minimum {{schema.minProperties}}",301:"Too many properties defined, maximum {{schema.maxProperties}}",302:"Required",303:"Additional properties not allowed",304:"Dependency failed - key must exist",400:"Array is too short ({{value.length}}), minimum {{schema.minItems}}",401:"Array is too long ({{value.length}}), maximum {{schema.maxItems}}",402:"Array items are not unique",403:"Additional items not allowed",500:"Format validation failed",501:'Keyword failed: "{{title}}"',600:"Circular $refs",1e3:"Unknown property (not in schema)"};b.number=b[105],b.required=b[302],b.min=b[101],b.max=b[103],b.maxlength=b[201],b.minlength=b[200],b.pattern=b[202],this.setDefaultMessages=function(a){b=a},this.getDefaultMessages=function(){return b},this.setDefaultMessage=function(a,c){b[a]=c},this.$get=["$interpolate",function(c){var d={};return d.defaultMessages=b,d.interpolate=function(d,e,f,g,h){h=h||{};var i=g.validationMessage||{};0===d.indexOf("tv4-")&&(d=d.substring(4));var j=i.default||h.default||"";[i,h,b].some(function(b){return a.isString(b)||a.isFunction(b)?(j=b,!0):b&&b[d]?(j=b[d],!0):void 0});var k={error:d,value:e,viewValue:f,form:g,schema:g.schema,title:g.title||g.schema&&g.schema.title};return a.isFunction(j)?j(k):c(j)(k)},d}]}),a.module("schemaForm").provider("schemaForm",["sfPathProvider",function(b){var c=function(a){if(Array.isArray(a)&&2==a.length){if("null"===a[0])return a[1];if("null"===a[1])return a[0]}return a},d=function(a){var b=[];return a.forEach(function(a){b.push({name:a,value:a})}),b},e=function(b,c){if(!a.isArray(b)){var d=[];return c?a.forEach(c,function(a,c){d.push({name:b[a],value:a})}):a.forEach(b,function(a,b){d.push({name:a,value:b})}),d}return b},f=function(b,d,e){var f=p[c(d.type)];if(f)for(var g,h=0;h<f.length;h++)if(g=f[h](b,d,e))return g.schema["x-schema-form"]&&a.isObject(g.schema["x-schema-form"])&&(g=a.extend(g,g.schema["x-schema-form"])),g},g=function(b,c,d){d=d||{};var f=d.global&&d.global.formDefaults?a.copy(d.global.formDefaults):{};return d.global&&!0===d.global.supressPropertyTitles?f.title=c.title:f.title=c.title||b,c.description&&(f.description=c.description),!0!==d.required&&!0!==c.required||(f.required=!0),c.maxLength&&(f.maxlength=c.maxLength),c.minLength&&(f.minlength=c.minLength),(c.readOnly||c.readonly)&&(f.readonly=!0),c.minimum&&(f.minimum=c.minimum+(c.exclusiveMinimum?1:0)),c.maximum&&(f.maximum=c.maximum-(c.exclusiveMaximum?1:0)),c.validationMessage&&(f.validationMessage=c.validationMessage),c.enumNames&&(f.titleMap=e(c.enumNames,c.enum)),f.schema=c,f.ngModelOptions=f.ngModelOptions||{},f},h=function(a,d,e){if("string"===c(d.type)&&!d.enum){var f=g(a,d,e);return f.key=e.path,f.type="text",e.lookup[b.stringify(e.path)]=f,f}},i=function(a,d,e){if("number"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="number",e.lookup[b.stringify(e.path)]=f,f}},j=function(a,d,e){if("integer"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="number",e.lookup[b.stringify(e.path)]=f,f}},k=function(a,d,e){if("boolean"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="checkbox",e.lookup[b.stringify(e.path)]=f,f}},l=function(a,e,f){if("string"===c(e.type)&&e.enum){var h=g(a,e,f);return h.key=f.path,h.type="select",h.titleMap||(h.titleMap=d(e.enum)),f.lookup[b.stringify(f.path)]=h,h}},m=function(a,e,f){if("array"===c(e.type)&&e.items&&e.items.enum){var h=g(a,e,f);return h.key=f.path,h.type="checkboxes",h.titleMap||(h.titleMap=d(e.items.enum)),f.lookup[b.stringify(f.path)]=h,h}},n=function(d,e,h){if("object"===c(e.type)){var i=g(d,e,h);return i.type="fieldset",i.items=[],h.lookup[b.stringify(h.path)]=i,a.forEach(e.properties,function(a,c){var d=h.path.slice();if(d.push(c),!0!==h.ignore[b.stringify(d)]){var g=e.required&&-1!==e.required.indexOf(c),j=f(c,a,{path:d,required:g||!1,lookup:h.lookup,ignore:h.ignore,global:h.global});j&&i.items.push(j)}}),i}},o=function(a,d,e){if("array"===c(d.type)){var h=g(a,d,e);h.type="array",h.key=e.path,e.lookup[b.stringify(e.path)]=h;var i=d.required&&-1!==d.required.indexOf(e.path[e.path.length-1]),j=e.path.slice();return j.push(""),h.items=[f(a,d.items,{path:j,required:i||!1,lookup:e.lookup,ignore:e.ignore,global:e.global})],h}},p={string:[l,h],object:[n],number:[i],integer:[j],boolean:[k],array:[m,o]},q=function(a){return a};this.defaults=p,this.stdFormObj=g,this.defaultFormDefinition=f,this.postProcess=function(a){q=a},this.appendRule=function(a,b){p[a]||(p[a]=[]),p[a].push(b)},this.prependRule=function(a,b){p[a]||(p[a]=[]),p[a].unshift(b)},this.createStandardForm=g,this.$get=function(){var d={};return d.merge=function(c,f,g,h,i,j){f=f||["*"],h=h||{},i=i||c.readonly||c.readOnly;var k=d.defaults(c,g,h),l=f.indexOf("*");-1!==l&&(f=f.slice(0,l).concat(k.form).concat(f.slice(l+1)));var m=k.lookup;return q(f.map(function(f){if("string"==typeof f&&(f={key:f}),f.key&&"string"==typeof f.key&&(f.key=b.parse(f.key)),f.titleMap&&(f.titleMap=e(f.titleMap)),f.itemForm){f.items=[];var k=b.stringify(f.key),l=m[k];a.forEach(l.items,function(b){var c=a.copy(f.itemForm);c.key=b.key,f.items.push(c)})}if(f.key){var n=b.stringify(f.key);if(m[n]){var o=m[n];a.forEach(o,function(a,b){void 0===f[b]&&(f[b]=o[b])})}}return!0===i&&(f.readonly=!0),f.items&&(f.items=d.merge(c,f.items,g,h,f.readonly,j)),f.tabs&&a.forEach(f.tabs,function(a){a.items=d.merge(c,a.items,g,h,f.readonly,j)}),"checkbox"===f.type&&a.isUndefined(f.schema.default)&&(f.schema.default=!1),j&&"template"===f.type&&!f.template&&f.templateUrl&&j.push(f),f}))},d.defaults=function(b,d,e){var g=[],h={};if(d=d||{},e=e||{},"object"!==c(b.type))throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return a.forEach(b.properties,function(a,c){if(!0!==d[c]){var i=b.required&&-1!==b.required.indexOf(c),j=f(c,a,{path:[c],lookup:h,ignore:d,required:i,global:e});j&&g.push(j)}}),{form:g,lookup:h}},d.traverseSchema=function(b,c,d,e){e=!a.isDefined(e)||e,d=d||[];var f=function(b,c,d){if(c(b,d),a.forEach(b.properties,function(a,b){var e=d.slice();e.push(b),f(a,c,e)}),!e&&b.items){var g=d.slice();g.push(""),f(b.items,c,g)}};f(b,c,d||[])},d.traverseForm=function(b,c){c(b),a.forEach(b.items,function(a){d.traverseForm(a,c)}),b.tabs&&a.forEach(b.tabs,function(b){a.forEach(b.items,function(a){d.traverseForm(a,c)})})},d}}]),a.module("schemaForm").factory("sfSelect",["sfPath",function(a){var b=/^\d+$/;return function(c,d,e){d||(d=this);var f="string"==typeof c?a.parse(c):c;if(void 0!==e&&1===f.length)return d[f[0]]=e,d;void 0!==e&&void 0===d[f[0]]&&(d[f[0]]=f.length>2&&b.test(f[1])?[]:{});for(var g=d[f[0]],h=1;h<f.length;h++){if(""===f[h])return;if(void 0!==e){if(h===f.length-1)return g[f[h]]=e,e;var i=g[f[h]];void 0!==i&&null!==i||(i=b.test(f[h+1])?[]:{},g[f[h]]=i),g=i}else g&&(g=g[f[h]])}return g}}]),a.module("schemaForm").factory("sfValidator",[function(){var b={};return b.validate=function(b,d){if(!b)return{valid:!0};var e=b.schema;if(!e)return{valid:!0};""===d&&(d=void 0),"number"===b.type&&null===d&&(d=void 0);var f={type:"object",properties:{}},g=b.key[b.key.length-1];f.properties[g]=e,b.required&&(f.required=[g]);var h={};return a.isDefined(d)&&(h[g]=d),c.validateResult(h,f)},b}]),a.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(b,c,d,e){var f=function(a){return function(b){b.key&&(b.key[b.key.indexOf("")]=a)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(g,h,i,j){var k={};g.validateArray=a.noop,j&&g.$emit("schemaFormPropagateNgModelController",j);var l=g.$watch(i.sfArray,function(h){if(h){var i=b(h.key,g.model),m=e.normalize(h.key);if(g.$watch("model"+("["!==m[0]?".":"")+m,function(a){i=g.modelArray=a}),a.isUndefined(i)&&(i=[],b(h.key,g.model,i)),g.modelArray=i,h.items){var n=h.items[0];h.items.length>1&&(n={type:"section",items:h.items.map(function(b){return b.ngModelOptions=h.ngModelOptions,a.isUndefined(b.readonly)&&(b.readonly=h.readonly),b})})}if(g.copyWithIndex=function(b){if(!k[b]&&n){var d=a.copy(n);d.arrayIndex=b,c.traverseForm(d,f(b)),k[b]=d}return k[b]},g.appendToArray=function(){var d=i.length,e=g.copyWithIndex(d);if(c.traverseForm(e,function(c){if(c.key){var d;a.isDefined(c.default)&&(d=c.default),a.isDefined(c.schema)&&a.isDefined(c.schema.default)&&(d=c.schema.default),a.isDefined(d)&&b(c.key,g.model,d)}}),d===i.length){var f,j=b("schema.items.type",h);"object"===j?f={}:"array"===j&&(f=[]),i.push(f)}return g.validateArray(),i},g.deleteFromArray=function(a){return i.splice(a,1),g.validateArray(),j&&j.$setDirty&&j.$setDirty(),i},h.titleMap||!0===h.startEmpty||0!==i.length||g.appendToArray(),h.titleMap&&h.titleMap.length>0){g.titleMapValues=[];var o=function(a){g.titleMapValues=[],a=a||[],h.titleMap.forEach(function(b){g.titleMapValues.push(-1!==a.indexOf(b.value))})};o(g.modelArray),g.$watchCollection("modelArray",o),g.$watchCollection("titleMapValues",function(a,b){if(a&&a!==b){for(var c=g.modelArray;c.length>0;)c.pop();h.titleMap.forEach(function(b,d){a[d]&&c.push(b.value)}),g.validateArray()}})}if(j){var p;g.validateArray=function(){var a=d.validate(h,g.modelArray.length>0?g.modelArray:void 0);Object.keys(j.$error).filter(function(a){return 0===a.indexOf("tv4-")}).forEach(function(a){j.$setValidity(a,!0)}),!1!==a.valid||!a.error||""!==a.error.dataPath&&a.error.dataPath!=="/"+h.key[h.key.length-1]||(j.$setViewValue(g.modelArray),p=a.error,j.$setValidity("tv4-"+a.error.code,!1))},g.$on("schemaFormValidate",g.validateArray),g.hasSuccess=function(){return g.options&&g.options.pristine&&!1===g.options.pristine.success?j.$valid&&!j.$pristine&&!j.$isEmpty(j.$modelValue):j.$valid&&(!j.$pristine||!j.$isEmpty(j.$modelValue))},g.hasError=function(){return g.options&&g.options.pristine&&!1===g.options.pristine.errors?j.$invalid&&!j.$pristine:j.$invalid},g.schemaError=function(){return p}}l()}})}}}]),a.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(b,c,d,e){var f=b.$eval(d.sfChanged);f&&f.onChange&&e.$viewChangeListeners.push(function(){a.isFunction(f.onChange)?f.onChange(e.$modelValue,f):b.evalExpr(f.onChange,{modelValue:e.$modelValue,form:f})})}}}),a.module("schemaForm").directive("sfField",["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(b,c,d,e,f,g,h,i,j){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"^sfSchema",link:{pre:function(a,b,c,d){a.$on("schemaFormPropagateNgModelController",function(b,c){b.stopPropagation(),b.preventDefault(),a.ngModel=c}),a.form=d.lookup["f"+c.sfField]},post:function(b,c,d,e){b.showTitle=function(){return b.form&&!0!==b.form.notitle&&b.form.title},b.listToCheckboxValues=function(b){var c={};return a.forEach(b,function(a){c[a]=!0}),c},b.checkboxValuesToList=function(b){var c=[];return a.forEach(b,function(a,b){a&&c.push(b)}),c},b.buttonClick=function(c,d){a.isFunction(d.onClick)?d.onClick(c,d):a.isString(d.onClick)&&(e?e.evalInParentScope(d.onClick,{$event:c,form:d}):b.$eval(d.onClick,{$event:c,form:d}))},b.evalExpr=function(a,c){return e?e.evalInParentScope(a,c):b.$eval(a,c)},b.evalInScope=function(a,c){if(a)return b.$eval(a,c)},b.interp=function(a,b){return a&&f(a)(b)},b.hasSuccess=function(){return!!b.ngModel&&(b.options&&b.options.pristine&&!1===b.options.pristine.success?b.ngModel.$valid&&!b.ngModel.$pristine&&!b.ngModel.$isEmpty(b.ngModel.$modelValue):b.ngModel.$valid&&(!b.ngModel.$pristine||!b.ngModel.$isEmpty(b.ngModel.$modelValue)))},b.hasError=function(){return!!b.ngModel&&(b.options&&b.options.pristine&&!1===b.options.pristine.errors?b.ngModel.$invalid&&!b.ngModel.$pristine:b.ngModel.$invalid)},b.errorMessage=function(a){return h.interpolate(a&&a.code+""||"default",b.ngModel&&b.ngModel.$modelValue||"",b.ngModel&&b.ngModel.$viewValue||"",b.form,b.options&&b.options.validationMessage)};var g=b.form;g.key&&(b.$on("schemaForm.error."+g.key.join("."),function(a,c,d,e){!0!==d&&!1!==d||(e=d,d=void 0),b.ngModel&&c&&(b.ngModel.$setDirty?b.ngModel.$setDirty():(b.ngModel.$dirty=!0,b.ngModel.$pristine=!1),d&&(g.validationMessage||(g.validationMessage={}),g.validationMessage[c]=d),b.ngModel.$setValidity(c,!0===e),!0===e&&(b.ngModel.$validate(),b.$broadcast("schemaFormValidate")))}),b.$on("$destroy",function(){if(!b.externalDestructionInProgress){var a=g.destroyStrategy||b.options&&b.options.destroyStrategy||"remove";if(g.key&&"retain"!==a){var c=b.model;if(g.key.length>1&&(c=j(g.key.slice(0,g.key.length-1),c)),void 0===c)return;var d=g.schema&&g.schema.type||"";"empty"===a&&-1!==d.indexOf("string")?c[g.key.slice(-1)]="":"empty"===a&&-1!==d.indexOf("object")?c[g.key.slice(-1)]={}:"empty"===a&&-1!==d.indexOf("array")?c[g.key.slice(-1)]=[]:"null"===a?c[g.key.slice(-1)]=null:delete c[g.key.slice(-1)]}}}))}}}}]),a.module("schemaForm").directive("sfMessage",["$injector","sfErrorMessage",function(b,c){var d=b.has("$sanitize")?b.get("$sanitize"):function(a){return a};return{scope:!1,restrict:"EA",link:function(b,e,f){var g="";f.sfMessage&&b.$watch(f.sfMessage,function(a){a&&(g=d(a),j(!!b.ngModel))});var h,i=function(a){a!==h&&(e.html(a),h=a)},j=function(d){if(d)if(b.hasError()){var e=[];a.forEach(b.ngModel&&b.ngModel.$error,function(a,b){a&&e.push(b)}),e=e.filter(function(a){return"schemaForm"!==a});var f=e[0];i(f?c.interpolate(f,b.ngModel.$modelValue,b.ngModel.$viewValue,b.form,b.options&&b.options.validationMessage):g)}else i(g);else i(g)};j();var k=b.$watch("ngModel",function(a){a&&(a.$parsers.push(function(a){return j(!0),a}),a.$formatters.push(function(a){return j(!0),a}),k())});b.$watchCollection("ngModel.$error",function(){j(!!b.ngModel)})}}}]),a.module("schemaForm").directive("sfNewArray",["sfSelect","sfPath","schemaForm",function(b,c,d){return{scope:!1,link:function(e,f,g){e.min=0,e.modelArray=e.$eval(g.sfNewArray);var h=function(){e.modelArray=e.$eval(g.sfNewArray),e.ngModel&&e.ngModel.$pristine&&e.firstDigest&&(!e.options||!0!==e.options.validateOnRender)||e.validateField&&e.validateField()},i=function(){e.form&&e.form.onChange&&(a.isFunction(e.form.onChange)?e.form.onChange(e.modelArray,e.form):e.evalExpr(e.form.onChange,{modelValue:e.modelArray,form:e.form}))},j=function(){var a=e.modelArray;if(!a){var d=c.parse(g.sfNewArray);a=[],b(d,e,a),e.modelArray=a}return a},k=e.$watch("form",function(a){if(a){if(a.titleMap||!0===a.startEmpty||e.modelArray&&0!==e.modelArray.length||e.appendToArray(),e.form&&e.form.schema&&!0===e.form.schema.uniqueItems?(e.$watch(g.sfNewArray,h,!0),e.$watch([g.sfNewArray,g.sfNewArray+".length"],i)):e.$watchGroup?e.$watchGroup([g.sfNewArray,g.sfNewArray+".length"],function(){h(),i()}):(e.$watch(g.sfNewArray,function(){h(),i()}),e.$watch(g.sfNewArray+".length",function(){h(),i()})),a.titleMap&&a.titleMap.length>0){e.titleMapValues=[];var b=function(b){e.titleMapValues=[],b=b||[],a.titleMap.forEach(function(a){e.titleMapValues.push(-1!==b.indexOf(a.value))})};b(e.modelArray),e.$watchCollection("modelArray",b),e.$watchCollection("titleMapValues",function(b,c){if(b&&b!==c){for(var d=j();d.length>0;)d.pop();a.titleMap.forEach(function(a,c){b[c]&&d.push(a.value)}),e.validateField&&e.validateField()}})}k()}});e.appendToArray=function(){var c,f=j();if(e.form&&e.form.schema&&e.form.schema.items){var g=e.form.schema.items;g.type&&-1!==g.type.indexOf("object")?(c={},e.options&&!1===e.options.setSchemaDefaults||(c=a.isDefined(g.default)?g.default:c)&&d.traverseSchema(g,function(d,e){a.isDefined(d.default)&&b(e,c,d.default)})):g.type&&-1!==g.type.indexOf("array")?(c=[],e.options&&!1===e.options.setSchemaDefaults||(c=g.default||c)):e.options&&!1===e.options.setSchemaDefaults||(c=g.default||c)}return f.push(c),f},e.deleteFromArray=function(a){var b=e.modelArray;return b&&b.splice(a,1),b};var l=function(a){return function(b){b.key&&(b.key[b.key.indexOf("")]=a)}},m={};e.copyWithIndex=function(b){var c=e.form;if(!m[b]){var f=c.items[0];if(c.items.length>1&&(f={type:"section",items:c.items.map(function(b){return b.ngModelOptions=c.ngModelOptions,a.isUndefined(b.readonly)&&(b.readonly=c.readonly),b})}),f){var g=a.copy(f);g.arrayIndex=b,d.traverseForm(g,l(b)),m[b]=g}}return m[b]}}}}]),a.module("schemaForm").directive("sfSchema",["$compile","$http","$templateCache","$q","schemaForm","schemaFormDecorators","sfSelect","sfPath","sfBuilder",function(b,c,d,e,f,g,h,i,j){return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(a){this.evalInParentScope=function(b,c){return a.$parent.$eval(b,c)};var b=this;a.lookup=function(a){return a&&(b.lookup=a),b.lookup}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(i,k,l,m,n){i.formCtrl=m;var o={};n(i,function(a){if(a.addClass("schema-form-ignore"),k.prepend(a),k[0].querySelectorAll){var b=k[0].querySelectorAll("[ng-model]");if(b)for(var c=0;c<b.length;c++){var d=b[c].getAttribute("ng-model");o[d.substring(d.indexOf(".")+1)]=!0}}});var p,q={},r=function(a,b){var g=[],h=f.merge(a,b,o,i.options,void 0,g);g.length>0?e.all(g.map(function(a){return c.get(a.templateUrl,{cache:d}).then(function(b){a.template=b.data})})).then(function(){s(a,b,h)}):s(a,b,h)},s=function(c,d,e){p&&(i.externalDestructionInProgress=!0,p.$destroy(),i.externalDestructionInProgress=!1),p=i.$new(),p.schemaForm={form:e,schema:c},k.children(":not(.schema-form-ignore)").remove();for(var m={},n=k[0].querySelectorAll("*[sf-insert-field]"),o=0;o<n.length;o++)m[n[o].getAttribute("sf-insert-field")]=n[o];var q=g.decorator(l.sfUseDecorator),r=Object.create(null);i.lookup(r),k[0].appendChild(j.build(e,q,m,r)),p.firstDigest=!0,setTimeout(function(){p.firstDigest=!1},0),b(k.children())(p),i.options&&!1===i.options.setSchemaDefaults||f.traverseSchema(c,function(b,c){if(a.isDefined(b.default)){var d=h(c,i.model);a.isUndefined(d)&&h(c,i.model,b.default)}}),i.$emit("sf-render-finished",k)},t=["*"];i.$watch(function(){var a=i.schema,b=i.initialForm||t;b&&a&&a.type&&(q.form!==b||q.schema!==a)&&Object.keys(a.properties).length>0&&(q.schema=a,q.form=b,r(a,b))}),i.$on("schemaFormRedraw",function(){var b=i.schema,c=i.initialForm?a.copy(i.initialForm):["*"];b&&r(b,c)}),i.$on("$destroy",function(){i.externalDestructionInProgress=!0}),i.evalExpr=function(a,b){return i.$parent.$eval(a,b)}}}}]),a.module("schemaForm").directive("schemaValidate",["sfValidator","$parse","sfSelect",function(b,c,d){return{restrict:"A",scope:!1,priority:500,require:"ngModel",link:function(c,e,f,g){c.$emit("schemaFormPropagateNgModelController",g);var h=null,i=c.$eval(f.schemaValidate);i.copyValueTo&&g.$viewChangeListeners.push(function(){var b=i.copyValueTo;a.forEach(b,function(a){d(a,c.model,g.$modelValue)})});var j=function(a){if(!i)return a;if(c.options&&!1===c.options.tv4Validation)return a;var d=b.validate(i,a);Object.keys(g.$error).filter(function(a){return 0===a.indexOf("tv4-")}).forEach(function(a){g.$setValidity(a,!0)});{if(d.valid)return a;if(g.$setValidity("tv4-"+d.error.code,!1),h=d.error,g.$validators)return a}};"function"==typeof i.ngModel&&i.ngModel(g),["$parsers","$viewChangeListeners","$formatters"].forEach(function(a){i[a]&&g[a]&&i[a].forEach(function(b){g[a].push(b)})}),["$validators","$asyncValidators"].forEach(function(b){i[b]&&g[b]&&a.forEach(i[b],function(a,c){g[b][c]=a})}),g.$parsers.push(j),g.$validators&&(g.$validators.schemaForm=function(){return!Object.keys(g.$error).some(function(a){return"schemaForm"!==a})});var k=i.schema;c.validateField=function(a){void 0!=a&&g.$$parentForm.$name!==a||(k&&-1!==k.type.indexOf("array")&&j(g.$modelValue),g.$setDirty?(g.$setDirty(),g.$setViewValue(g.$viewValue),g.$commitViewValue(),i.required&&g.$isEmpty(g.$modelValue)&&g.$setValidity("tv4-302",!1)):g.$setViewValue(g.$viewValue))},g.$formatters.push(function(a){return!g.$pristine||!c.firstDigest||c.options&&!0===c.options.validateOnRender?(j(g.$modelValue),a):a}),c.$on("schemaFormValidate",function(a,b){c.validateField(b)}),c.schemaError=function(){return h}}}}]),e}),function(a,b){"function"==typeof define&&define.amd?define(["schemaForm"],b):"object"==typeof exports?module.exports=b(require("schemaForm")):a.bootstrapDecorator=b(a.schemaForm)}(this,function(a){return angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude=""></div>'),a.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)"><span ng-if="item.icon" class="{{item.icon}}"></span>{{item.title}}</button></div>'),a.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" class="schema-form-array {{form.htmlClass}}" ng-model="$$value$$" ng-model-options="form.ngModelOptions"><label class="control-label" ng-show="showTitle()">{{ form.title }}</label><ol class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}"><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show="form.key" type="{{form.type}}" step="{{form.step || \'any\'}}" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <input ng-show="form.key" type="{{form.type}}" step="{{form.step}}" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden="true"></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class="sr-only">{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><div ng-transclude=""></div></fieldset>'),
a.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></fieldset>'),a.put("directives/decorators/bootstrap/help.html",'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>'),a.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="form-group schema-form-radiobuttons {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><div><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" style="display: none;" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/section.html",'<div class="schema-form-section {{form.htmlClass}}"><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),a.put("directives/decorators/bootstrap/select.html",'<div class="form-group {{form.htmlClass}} schema-form-select" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name group by item.group for item in form.titleMap" name="{{form.key.slice(-1)[0]}}"></select><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><input type="submit" class="btn {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'"><span ng-if="form.icon" class="{{form.icon}}"></span> {{form.title}}</button></div>'),a.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),a.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 1 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-show="tab.hidden !== true" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane" ng-disabled="form.readonly" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),a.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <textarea ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <textarea class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span class="help-block" sf-message="form.description"></span></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(a){var b="directives/decorators/bootstrap/";a.defineDecorator("bootstrapDecorator",{textarea:{template:b+"textarea.html",replace:!1},fieldset:{template:b+"fieldset.html",replace:!1},array:{template:b+"array.html",replace:!1},tabarray:{template:b+"tabarray.html",replace:!1},tabs:{template:b+"tabs.html",replace:!1},section:{template:b+"section.html",replace:!1},conditional:{template:b+"section.html",replace:!1},actions:{template:b+"actions.html",replace:!1},select:{template:b+"select.html",replace:!1},checkbox:{template:b+"checkbox.html",replace:!1},checkboxes:{template:b+"checkboxes.html",replace:!1},number:{template:b+"default.html",replace:!1},password:{template:b+"default.html",replace:!1},submit:{template:b+"submit.html",replace:!1},button:{template:b+"submit.html",replace:!1},radios:{template:b+"radios.html",replace:!1},"radios-inline":{template:b+"radios-inline.html",replace:!1},radiobuttons:{template:b+"radio-buttons.html",replace:!1},help:{template:b+"help.html",replace:!1},default:{template:b+"default.html",replace:!1}},[]),a.createDirectives({textarea:b+"textarea.html",select:b+"select.html",checkbox:b+"checkbox.html",checkboxes:b+"checkboxes.html",number:b+"default.html",submit:b+"submit.html",button:b+"submit.html",text:b+"default.html",date:b+"default.html",password:b+"default.html",datepicker:b+"datepicker.html",input:b+"default.html",radios:b+"radios.html","radios-inline":b+"radios-inline.html",radiobuttons:b+"radio-buttons.html"})}]).directive("sfFieldset",function(){return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(a,b,c){a.title=a.$eval(c.title)}}}),a}),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/colorpicker/colorpicker.html","<div class=\"form-group\" ng-class=\"{'has-error': hasError()}\">\n  <label class=\"control-label\" ng-show=\"showTitle()\">{{form.title}}</label>\n  <div ng-init=\"defaultSpectrumOptions = {\n                  showInput: true,\n                  showAlpha: true,\n                  allowEmpty: true,\n                  showPalette: true,\n                  preferredFormat: form.colorFormat || 'rgb',\n                  palette: [['#fce94f', '#fcaf3e', '#e9b96e'],\n                  ['#8ae234', '#729fcf', '#ad7fa8'],\n                  ['#ef2929', '#888a85', '#deface']]\n                }\">\n    <spectrum-colorpicker\n      ng-model=\"$$value$$\"\n      format=\"form.colorFormat || 'rgb'\"\n      style=\"background-color: white\"\n      type=\"color\"\n      schema-validate=\"form\"\n      options=\"form.spectrumOptions || defaultSpectrumOptions\"></spectrum-colorpicker>\n</div>\n  <span class=\"help-block\">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span>\n</div>\n")}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if(("string"===d.type||"array"===d.type)&&"color"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="colorpicker",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.string.unshift(d),b.addMapping("bootstrapDecorator","colorpicker","directives/decorators/bootstrap/colorpicker/colorpicker.html"),b.createDirective("colorpicker","directives/decorators/bootstrap/colorpicker/colorpicker.html")}]),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/uiselect/multi.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}" ng-init="form.select_models=(form.schema.items| whereMulti : \'value\' : ($$value$$||[]))"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="form-group" ng-controller="UiSelectController"><ui-select multiple="" sortable-options="{{form.sortableOptions}}" ng-if="!(form.options.tagging||false)" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}</ui-select-match><ui-select-choices refresh="fetchResult(form.schema, form.options, $select.search)" refresh-delay="form.options.refreshDelay" group-by="form.options.groupBy" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-bind-html="item.label | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\'))+ \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" multiple="" ng-if="(form.options.tagging||false) && !(form.options.groupBy || false)" tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" sortable-options="{{form.sortableOptions}}" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}&nbsp;<small>{{($item.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices refresh-delay="form.options.refreshDelay" refresh="fetchResult(form.schema, form.options, $select.search)" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" multiple="" ng-if="(form.options.tagging||false) && (form.options.groupBy || false)" tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" sortable-options="{{form.sortableOptions}}" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}&nbsp;<small>{{($item.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices group-by="form.options.groupBy" refresh-delay="form.options.refreshDelay" refresh="fetchResult(form.schema, form.options, $select.search)" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><input toggle-model="" type="hidden" ng-model="insideModel" sf-changed="form" schema-validate="form"> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div></div>'),a.put("directives/decorators/bootstrap/uiselect/single.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}" ng-init="select_models=(form.schema.items | where : {value: $$value$$})"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="form-group" ng-init="select_model.selected=select_models[0]"><ui-select ng-model="select_model.selected" ng-controller="UiSelectController" ng-if="!(form.options.tagging||false)" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}</ui-select-match><ui-select-choices refresh="fetchResult(form.schema, form.options, $select.search)" refresh-delay="form.options.refreshDelay" group-by="form.options.groupBy" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-bind-html="item.label | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\'))+ \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" ng-model="select_model.selected" ng-if="(form.options.tagging||false) && !(form.options.groupBy || false)" tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}&nbsp;<small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices refresh="form.options.refreshMethod(form.schema, $select.search)" refresh-delay="form.options.refreshDelay" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag| highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" ng-model="select_model.selected" ng-if="(form.options.tagging||false) && (form.options.groupBy || false)" tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}&nbsp;<small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices group-by="form.options.groupBy" refresh="form.options.refreshMethod(form.schema, $select.search)" refresh-delay="form.options.refreshDelay" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag| highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><input type="hidden" toggle-single-model="" sf-changed="form" ng-model="insideModel" schema-validate="form"> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div></div>')}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if("string"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.string.unshift(d);var d=function(b,d,e){if("number"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.number.unshift(d);var e=function(b,d,e){if("array"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uimultiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.array.unshift(e),b.addMapping("bootstrapDecorator","uiselect","directives/decorators/bootstrap/uiselect/single.html"),b.createDirective("uiselect","directives/decorators/bootstrap/uiselect/single.html"),b.addMapping("bootstrapDecorator","uimultiselect","directives/decorators/bootstrap/uiselect/multi.html"),b.createDirective("uimultiselect","directives/decorators/bootstrap/uiselect/multi.html")}]).directive("toggleSingleModel",function(){return{require:"ngModel",restrict:"A",scope:{},replace:!0,controller:["$scope",function(a){a.$parent.$watch("select_model.selected",function(){void 0!=a.$parent.select_model.selected&&(a.$parent.insideModel=a.$parent.select_model.selected.value,a.$parent.ngModel.$setViewValue(a.$parent.select_model.selected.value))})}]}}).directive("toggleModel",function(){return{require:"ngModel",restrict:"A",scope:{},replace:!0,controller:["$scope","sfSelect",function(a,b){var c=b(a.$parent.form.key,a.$parent.model);angular.isUndefined(c)&&(c=[],b(a.$parent.form.key,a.$parent.model,c)),a.$parent.$watch("form.select_models",function(){0==a.$parent.form.select_models.length?(a.$parent.insideModel=a.$parent.$$value$$,void 0!=a.$parent.ngModel.$viewValue&&a.$parent.ngModel.$setViewValue(a.$parent.form.select_models)):(a.$parent.insideModel=a.$parent.form.select_models,a.$parent.ngModel.$setViewValue(a.$parent.form.select_models))},!0)}]}}).filter("whereMulti",function(){return function(a,b,c){var d=[];return angular.isArray(c)?c.forEach(function(c){for(var e=0;e<a.length;e++)if(c==a[e][b]){d.push(a[e]);break}}):d=a,d}}).filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f];if(a.hasOwnProperty(g)){var h=b[g].toLowerCase();if(0===a[g].toString().toLowerCase().indexOf(h)||-1!==a[g].toString().toLowerCase().indexOf(" "+h)){d=!0;break}}}d&&c.push(a)}):c=a,c}}).controller("UiSelectController",["$scope","$http",function(a,b){a.fetchResult=function(a,c,d){if(c)if(c.callback)a.items=c.callback(a,c,d),console.log("items",a.items);else{if(c.http_post)return b.post(c.http_post.url,c.http_post.parameter).then(function(b){a.items=b.data,console.log("items",a.items)},function(a,b){alert("Loading select items failed (URL: '"+String(c.http_post.url)+"' Parameter: "+String(c.http_post.parameter)+"\nError: "+b)});if(c.http_get)return b.get(c.http_get.url,c.http_get.parameter).then(function(b){a.items=b.data,console.log("items",a.items)},function(a,b){alert("Loading select items failed (URL: '"+String(c.http_get.url)+"\nError: "+b)});if(c.async)return c.async.call(a,c,d).then(function(b){a.items=b.data,console.log("items",a.items)},function(a,b){alert("Loading select items failed(Options: '"+String(c)+"\nError: "+b)})}}}]),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/codemirror/codemirror.html",'<div class="form-group" ng-class="{\'has-error\': hasError()}" ng-init="codemirrorOptions = {foo: \'bar\'}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div ng-if="form.codemirrorButtons" class="cm-buttons"><span class="btn-group" ng-repeat="buttonGroup in form.codemirrorButtons"><button ng-repeat="button in buttonGroup" ng-click="evalInScope(button.onClick)" type="button" class="btn btn-sm btn-default" id="btnBold" title="{{ button.title }}"><span ng-if="button.icon" class="glyphicon" ng-class="\'glyphicon-\' + button.icon"></span> <span ng-if="button.label" ng-bind-html="button.label"></span></button></span></div><div codemirror-buttons="" ui-codemirror="" ui-codemirror-opts="getCodemirrorOptions()" ng-style="form.style" ng-model="$$value$$" schema-validate="form"></div><span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>')}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider",function(a,b){b.addMapping("bootstrapDecorator","codemirror","directives/decorators/bootstrap/codemirror/codemirror.html"),b.createDirective("codemirror","directives/decorators/bootstrap/codemirror/codemirror.html")}]).directive("codemirrorButtons",function(){return{controller:["$scope",function(a){a.getCodemirrorOptions=function(){var b=angular.copy(a.form.codemirrorOptions);return b.onLoad=function(b){a.cm=b},b}}]}}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(b,d){function e(){b.display.wrapper.offsetHeight?(c(b,d),b.display.lastWrapHeight!=b.display.wrapper.clientHeight&&b.refresh()):d.timeout=setTimeout(e,d.delay)}d.timeout=setTimeout(e,d.delay),d.hurry=function(){clearTimeout(d.timeout),d.timeout=setTimeout(e,50)},a.on(window,"mouseup",d.hurry),a.on(window,"keyup",d.hurry)}function c(b,c){clearTimeout(c.timeout),a.off(window,"mouseup",c.hurry),a.off(window,"keyup",c.hurry)}a.defineOption("autoRefresh",!1,function(a,d){a.state.autoRefresh&&(c(a,a.state.autoRefresh),a.state.autoRefresh=null),d&&0==a.display.wrapper.offsetHeight&&b(a,a.state.autoRefresh={delay:d.delay||250})})}),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if("array"===d.type&&"singlefile"===d.format){d.pattern&&d.pattern.mimeType&&!d.pattern.validationMessage&&(d.pattern.validationMessage="Wrong file type. Allowed types are "),d.maxSize&&d.maxSize.maximum&&!d.maxSize.validationMessage&&(d.maxSize.validationMessage="This file is too large. Maximum size allowed is ",d.maxSize.validationMessage2="Current file size:"),d.minItems&&d.minItems.minimum&&!d.minItems.validationMessage&&(d.minItems.validationMessage="You have to upload at least one file"),d.maxItems&&d.maxItems.maximum&&!d.maxItems.validationMessage&&(d.maxItems.validationMessage="You can't upload more than one file.");var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="nwpFileUpload",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.array.unshift(d);var e=function(b,d,e){if("array"===d.type&&"multifile"===d.format){d.pattern&&d.pattern.mimeType&&!d.pattern.validationMessage&&(d.pattern.validationMessage="Wrong file type. Allowed types are "),d.maxSize&&d.maxSize.maximum&&!d.maxSize.validationMessage&&(d.maxSize.validationMessage="This file is too large. Maximum size allowed is ",d.maxSize.validationMessage2="Current file size:"),d.minItems&&d.minItems.minimum&&!d.minItems.validationMessage&&(d.minItems.validationMessage="You have to upload at least one file"),d.maxItems&&d.maxItems.maximum&&!d.maxItems.validationMessage&&(d.maxItems.validationMessage="You can't upload more than one file.");var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="nwpFileUpload",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.array.unshift(e),b.addMapping("bootstrapDecorator","nwpFileUpload","lib/schemaForm/nwp-file.html")}]),angular.module("ngSchemaFormFile",["ngFileUpload","ngMessages"]).directive("ngSchemaFile",["Upload","$timeout","$q",function(a,b,c){return{restrict:"A",scope:!0,require:"ngModel",link:function(c,d,e,f){function g(d){if(d&&!d.$error&&c.url){var e={url:c.url,file:{}};e.file[c.form.fileName||"file"]=d,d.upload=a.upload(e),d.upload.then(function(a){b(function(){d.result=a.data});var e=c.form.post?c.form.post(a.data):a.data;f.$setViewValue(e),f.$commitViewValue()},function(a){a.status>0&&(c.errorMsg=a.status+": "+a.data)}),d.upload.progress(function(a){d.progress=Math.min(100,parseInt(100*a.loaded/a.total))})}}c.url=c.form&&c.form.endpoint,c.isSinglefileUpload=c.form&&c.form.schema&&"singlefile"===c.form.schema.format,c.selectFile=function(a){c.picFile=a},c.removeFile=function(){c.picFile=null,c.$parent.model.image=null},c.selectFiles=function(a){c.picFiles=a},c.uploadFile=function(a){a&&g(a)},c.uploadFiles=function(a){a.length&&angular.forEach(a,function(a){g(a)})},c.validateField=function(){c.uploadForm.file&&c.uploadForm.file.$valid&&c.picFile&&!c.picFile.$error?console.log("singlefile-form is invalid"):c.uploadForm.files&&c.uploadForm.files.$valid&&c.picFiles&&!c.picFiles.$error?console.log("multifile-form is  invalid"):console.log("single- and multifile-form are valid")},c.submit=function(){c.uploadForm.file&&c.uploadForm.file.$valid&&c.picFile&&!c.picFile.$error?c.uploadFile(c.picFile):c.uploadForm.files&&c.uploadForm.files.$valid&&c.picFiles&&!c.picFiles.$error&&c.uploadFiles(c.picFiles)},c.$on("schemaFormValidate",c.validateField),c.$on("schemaFormFileUploadSubmit",c.submit)}}}]),function(a,b){"function"==typeof define&&define.amd?define(["angular-schema-form"],b):"object"==typeof exports?module.exports=b(require("angular-schema-form")):a.angularSchemaFormDynamicSelect=b(a.schemaForm)
}(this,function(a){angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/strap/strapmultiselect.html",'<div ng-controller="dynamicSelectController" class="form-group {{form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n    <label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label>\n\n    <div class="form-group {{form.fieldHtmlClass}}" ng-init="populateTitleMap(form)">\n        <button type="button" class="btn btn-default" sf-changed="form" schema-validate="form" ng-model="$$value$$"\n                data-placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\')}}"\n                data-html="1"\n                data-multiple="1"  data-multiple="1" data-max-length="{{form.options.inlineMaxLength}}"\n                data-max-length-html="{{form.options.inlineMaxLengthHtml}}"\n                bs-options="item.value as item.name for item in form.titleMap | selectFilter:this:$$value$$:&quot;$$value$$&quot;"\n                bs-select>\n        </button>\n        <span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span>\n    </div>\n</div>\n'),a.put("directives/decorators/bootstrap/strap/strapselect.html",'<div ng-controller="dynamicSelectController" class="select-controller form-group {{form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n    <label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label>\n\n    <div class="form-group {{form.fieldHtmlClass}}" ng-init="populateTitleMap(form)">\n        <button ng-if="(form.options.multiple == \'true\') || (form.options.multiple == true)"\n                type="button" class="btn btn-default" sf-changed="form" schema-validate="form" ng-model="$$value$$"\n                data-placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\')}}"\n                data-html="1" data-multiple="1" data-max-length="{{form.options.inlineMaxLength}}"\n                data-max-length-html="{{form.options.inlineMaxLengthHtml}}"\n                bs-options="item.value as item.name for item in form.titleMap | selectFilter:this:$$value$$:&quot;$$value$$&quot;"\n                bs-select>\n        </button>\n        <button ng-if="!((form.options.multiple == \'true\') || (form.options.multiple == true))"\n                type="button" class="btn btn-default" sf-changed="form" schema-validate="form" ng-model="$$value$$"\n                data-placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\')}}"\n                data-html="1"\n                bs-options="item.value as item.name for item in form.titleMap | selectFilter:this:$$value$$:&quot;$$value$$&quot;"\n                bs-select>\n        </button>\n        <span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}} </span>\n    </div>\n</div>\n\n')}]),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/uiselect/uiselect.html",'<div ng-controller="dynamicSelectController" class="form-group"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"\n         ng-init="insideModel=$$value$$;">\n    <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n\n    <div class="form-group">\n        <ui-select ng-model="select_model.selected"\n                   ng-if="!(form.options.tagging||false)" theme="bootstrap" ng-disabled="form.disabled"\n                   on-select="$$value$$=$item.value" class="{{form.options.uiClass}}">\n            <ui-select-match\n                    placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">\n                {{select_model.selected.name}}\n            </ui-select-match>\n            <ui-select-choices refresh="populateTitleMap(form, $select.search)"\n                               refresh-delay="form.options.refreshDelay" group-by="form.options.groupBy"\n                               repeat="item in form.titleMap | propsFilter: {name: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }">\n                <div ng-bind-html="item.name | highlight: $select.search"></div>\n                <div ng-if="item.description">\n                    <span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\'))+ \'</small>\'"></span>\n                </div>\n            </ui-select-choices>\n        </ui-select>\n        <ui-select ng-controller="dynamicSelectController" ng-model="select_model.selected"\n                   ng-if="(form.options.tagging||false) && !(form.options.groupBy || false)"\n                   tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel"\n                   tagging-tokens="form.options.taggingTokens"\n                   theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value"\n                   class="{{form.options.uiClass}}">\n            <ui-select-match\n                    placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">\n                {{select_model.selected.name}}&nbsp;\n                <small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small>\n            </ui-select-match>\n            \x3c!--repeat code because tagging does not display properly under group by but is still useful --\x3e\n            <ui-select-choices refresh="populateTitleMap(form, $select.search))"\n                               refresh-delay="form.options.refreshDelay"\n                               repeat="item in form.titleMap | propsFilter: {name: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }">\n                <div ng-if="item.isTag"\n                     ng-bind-html="\'<div>\' + (item.name   | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div>\n                <div ng-if="!item.isTag" ng-bind-html="item.name + item.isTag| highlight: $select.search"></div>\n                <div ng-if="item.description">\n                    <span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span>\n                </div>\n            </ui-select-choices>\n        </ui-select>\n\n        \x3c!--repeat code because tagging does not display properly under group by but is still useful --\x3e\n\n        <ui-select ng-controller="dynamicSelectController" ng-model="select_model.selected"\n                   ng-if="(form.options.tagging||false) && (form.options.groupBy || false)"\n                   tagging="form.options.tagging||false" tagging-label="form.options.taggingLabel"\n                   tagging-tokens="form.options.taggingTokens"\n                   theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value"\n                   class="{{form.options.uiClass}}">\n            <ui-select-match\n                    placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">\n                {{select_model.selected.name}}&nbsp;\n                <small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small>\n            </ui-select-match>\n            <ui-select-choices group-by="form.options.groupBy"\n                               refresh="populateTitleMap(form, $select.search)"\n                               refresh-delay="form.options.refreshDelay"\n                               repeat="item in form.titleMap | propsFilter: {name: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }">\n                <div ng-if="item.isTag"\n                     ng-bind-html="\'<div>\' + (item.name  | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div>\n                <div ng-if="!item.isTag" ng-bind-html="item.name + item.isTag| highlight: $select.search"></div>\n                <div ng-if="item.description">\n                    <span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span>\n                </div>\n            </ui-select-choices>\n        </ui-select>\n\n        <input type="hidden" toggle-single-model sf-changed="form" ng-model="insideModel" schema-validate="form"/>\n    <span ng-if="form.feedback !== false"\n          class="form-control-feedback"\n          ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span>\n\n        <div class="help-block"\n             ng-show="(hasError() && errorMessage(schemaError())) || form.description"\n             ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div>\n    </div>\n</div>\n'),a.put("directives/decorators/bootstrap/uiselect/uiselectmultiple.html",'\n<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"\n        ng-controller="dynamicSelectController" ng-init="$$value$$=$$value$$||[];uiMultiSelectInitInternalModel($$value$$)">\n  <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n  <div class="form-group">\n    <ui-select first-item-active="false" skip-focusser="true" remove-selected="true" limit="{{form.options.limit}}" multiple autofocus="true"  close-on-select="{{form.options.closeOnSelect}}" append-to-body="true" sortable-options="{{form.sortableOptions}}" ng-model="internalModel" theme="bootstrap"\n               on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)"\n               class="{{form.options.uiClass}}">\n      <ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.name}}</ui-select-match>\n      <ui-select-choices first-item-active="false" skip-focusser="true" remove-selected="true" repeat="item in form.titleMap | propsFilter: {name: $select.search} | limitTo: form.options.limitTo"\n         refresh="populateTitleMap(form, $select.search)"\n         refresh-delay="form.options.refreshDelay"\n         group-by="form.options.groupBy">\n        <div ng-bind-html="item.name | highlight: $select.search"></div>\n      </ui-select-choices>\n    </ui-select>\n    <span ng-if="form.feedback !== false"\n      class="form-control-feedback"\n      ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span>\n    <div class="help-block"\n      ng-show="(hasError() && errorMessage(schemaError())) || form.description"\n      ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div>\n  </div>\n</div>\n')}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if("string"===d.type&&"enum"in d){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="strapselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.string.unshift(d),b.addMapping("bootstrapDecorator","strapselect","directives/decorators/bootstrap/strap/strapselect.html"),b.addMapping("bootstrapDecorator","strapmultiselect","directives/decorators/bootstrap/strap/strapmultiselect.html"),b.addMapping("bootstrapDecorator","strapselectdynamic","directives/decorators/bootstrap/strap/strapselect.html"),b.addMapping("bootstrapDecorator","strapmultiselectdynamic","directives/decorators/bootstrap/strap/strapmultiselect.html"),b.addMapping("bootstrapDecorator","uiselect","directives/decorators/bootstrap/uiselect/uiselect.html"),b.addMapping("bootstrapDecorator","uiselectmultiple","directives/decorators/bootstrap/uiselect/uiselectmultiple.html")}]).directive("toggleSingleModel",function(){return{require:"ngModel",restrict:"A",scope:{},replace:!0,controller:["$scope",function(a){a.$parent.$watch("select_model.selected",function(){void 0!=a.$parent.select_model.selected&&(a.$parent.insideModel=a.$parent.select_model.selected.value,a.$parent.ngModel.$setViewValue(a.$parent.select_model.selected.value))})}]}}).directive("multipleOn",function(){return{link:function(a,b,c){a.$watch(function(){return b.attr("multiple-on")},function(a){if("true"==a){var c=angular.element(b).scope().$$childTail;c.$isMultiple=!0,c.options.multiple=!0,c.$select.$element.addClass("select-multiple")}else angular.element(b).scope().$$childTail.$isMultiple=!1})}}}).filter("whereMulti",function(){return function(a,b,c){var d=[];return angular.isArray(c)&&void 0!==a?c.forEach(function(c){for(var e=0;e<a.length;e++)if(c==a[e][b]){d.push(a[e]);break}}):d=a,d}}).filter("propsFilter",function(){return function(a,b){var c=[],d=0;return angular.isArray(a)?a.forEach(function(a){for(var e=!1,f=Object.keys(b),g=0;g<f.length;g++){var h=f[g];if(a.hasOwnProperty(h)){var i=b[h].toLowerCase();if(0===a[h].toString().toLowerCase().indexOf(i)||-1!==a[h].toString().toLowerCase().indexOf(" "+i)&&d<150){d++,e=!0;break}}}e&&c.push(a)}):c=a,c}}),angular.module("schemaForm").controller("dynamicSelectController",["$scope","$http","$timeout",function(a,b,c){a.form.options||(a.form.options={}),a.select_model={},console.log("Setting options."+a.form.options.toString()),a.form.options.scope=a,a.triggerTitleMap=function(){console.log("listener triggered"),a.form.titleMap.push({value:"345890u340598u3405u9",name:"34095u3p4ouij"}),c(function(){a.form.titleMap.pop()})},a.initFiltering=function(b){a.form.options.filterTriggers&&a.form.options.filterTriggers.forEach(function(b){a.$parent.$watch(b,a.triggerTitleMap)}),a.localModelType=Object.prototype.toString.call(b),a.filteringInitialized=!0},a.finalizeTitleMap=function(b,c,d){if(b.titleMap=[],d&&"map"in d&&d.map){var e=d.map.nameProperty.length-1,f=d.map.separatorValue?d.map.separatorValue:" - ";c.forEach(function(a){if(a.value=a[d.map.valueProperty],"string"!=typeof d.map.nameProperty){var c="";for(var g in d.map.nameProperty)c+=a[d.map.nameProperty[g]],g!=e&&(c+=f);a.name=c}else a.name=a[d.map.nameProperty];b.titleMap.push(a)})}else c.forEach(function(a){"text"in a&&(a.name=a.text)}),b.titleMap=c;a.insideModel&&void 0===a.select_model.selected&&(a.select_model.selected=a.find_in_titleMap(a.insideModel)),a.internalModel&&(console.log("Call uiMultiSelectInitInternalModel"),a.uiMultiSelectInitInternalModel(a.externalModel))},a.clone=function(b){if(null==b||"object"!=typeof b)return b;var c=b.constructor();for(var d in b)b[d]!=a&&b.hasOwnProperty(d)&&(c[d]=a.clone(b[d]));return c},a.getCallback=function(b){if("string"==typeof b){var c=a.$parent.evalExpr(b);if("function"==typeof c)return c;throw"A callback string must match name of a function in the parent scope"}if("function"==typeof b)return b;throw"A callback must either be a string matching the name of a function in the parent scope or a direct function reference"},a.getOptions=function(b,c){return b.httpPost&&b.httpPost.optionsCallback?(newOptionInstance=a.clone(b),a.getCallback(b.httpPost.optionsCallback)(newOptionInstance,c)):b.httpGet&&b.httpGet.optionsCallback?(newOptionInstance=a.clone(b),a.getCallback(b.httpGet.optionsCallback)(newOptionInstance,c)):b},a.test=function(a){a.titleMap.pop()},a.populateTitleMap=function(c,d){if(c.schema&&"enum"in c.schema)c.titleMap=[],c.schema.enum.forEach(function(a){c.titleMap.push({value:a,name:a})});else if(c.options)if(c.options.callback)c.titleMap=a.getCallback(c.options.callback)(c.options,d),a.finalizeTitleMap(c,c.titleMap,c.options),console.log("callback items: ",c.titleMap);else{if(c.options.asyncCallback)return a.getCallback(c.options.asyncCallback)(c.options,d).then(function(b){a.finalizeTitleMap(c,b.data,c.options),console.log("asyncCallback items",c.titleMap)},function(a,b){alert("Loading select items failed(Options: '"+String(c.options)+"\nError: "+b)});if(c.options.httpPost){var e=a.getOptions(c.options,d);return b.post(e.httpPost.url,e.httpPost.parameter).then(function(b){a.finalizeTitleMap(c,b.data,e),console.log("httpPost items",c.titleMap)},function(a,b){alert("Loading select items failed (URL: '"+String(e.httpPost.url)+"' Parameter: "+String(e.httpPost.parameter)+"\nError: "+b)})}if(c.options.httpGet){var e=a.getOptions(c.options,d);return b.get(e.httpGet.url,e.httpGet.parameter).then(function(b){a.finalizeTitleMap(c,b.data,e),console.log("httpGet items",c.titleMap)},function(a,b){alert("Loading select items failed (URL: '"+String(e.httpGet.url)+"\nError: "+b)})}}else console.log("dynamicSelectController.populateTitleMap(key:"+c.key+") : No options set, needed for dynamic selects")},a.find_in_titleMap=function(b){for(i=0;i<a.form.titleMap.length;i++)if(a.form.titleMap[i].value==b)return{value:a.form.titleMap[i].value,name:a.form.titleMap[i].name}},a.uiMultiSelectInitInternalModel=function(b){console.log("$scope.externalModel: Key: "+a.form.key.toString()+" Model: "+b.toString()),a.externalModel=b,a.internalModel=[],a.form.titleMap&&void 0!==b&&angular.isArray(b)&&b.forEach(function(b){a.internalModel.push(a.find_in_titleMap(b))})}}]),angular.module("schemaForm").filter("selectFilter",[function(a){return function(a,b,c,d){if(!angular.isDefined(a)||!angular.isDefined(b.form.options)||!angular.isDefined(b.form.options.filter)||""==b.form.options.filter)return a;console.log("----- In filtering for "+b.form.key+"("+b.form.title+"), model value: "+JSON.stringify(c)+"----"),console.log("Filter:"+b.form.options.filter),b.filteringInitialized||(console.log("Initialize filter"),b.initFiltering(c));var e=[];return angular.forEach(a,function(a){b.$eval(b.form.options.filter,{item:a})?e.push(a):c&&("[object Array]"==b.localModelType&&c.indexOf(a.value)>-1?c.splice(c.indexOf(a.value),1):c==a.value&&(console.log("Setting model of type "+b.localModelType+"to null."),c=null))}),"[object Array]"!=b.localModelType||c||(console.log("Resetting model of type "+b.localModelType+" to []."),b.$eval(d+"=[]")),console.log("----- Exiting filter for "+b.form.title+"-----"),e}}])});var underscore=angular.module("underscore",[]);underscore.factory("_",["$window",function(a){return a._}]),angular.module("WsClient",["ngWebSocket","ngCookies","underscore"]).provider("wsClient",function(){var a=this,b="wss://api-onset.scriptrapps.io/",c=null,d=null,e=null,f=null,g=null,h={},i=0,j={};this.setBaseUrl=function(a){b=a},this.setPublishChannel=function(a){c=a},this.setSubscribeChannel=function(a){console.log(a),d=a},this.getSubscribeChannel=function(){return d},this.setToken=function(a){e=a};var k=function(){f=b+(e?"/"+e:"")},l=function(a){return i+=1,i>1e4&&(i=0),i},m=function(a,b){return g+"-"+(b?b+"_"+a:a)},n=function(a,b){return b?b+"_"+a:a},o=function(a,b){return g+"-"+(b?b+"_"+a:a)};this.$get=["$websocket","$cookies","$q","$rootScope","_",function(b,e,i,p,q){e.get("token")&&this.setToken(e.get("token")),k();var r=b(f),s={},t=i.defer(),u=i.defer(),v=i.defer();r.onOpen(function(){w(d)}),r.onMessage(function(a){try{var b=JSON.parse(a.data);console.log("Received message data from websocket: ",b),"connected."==b.result&&(g=b.id,t&&t.resolve()),"failure"==b.status&&"429"==b.statusCode&&(0==$("body").find(".alert-transport").length&&$("body").append('<div class="alert alert-danger alert-dismissable alert-transport" style="position: absolute; z-index: 1000; top: 0; width: 600px; left: 30%; text-align: center">You have reached you requests rate limit. For more info check the <a href="https://www.scriptr.io/documentation#documentation-ratelimitingRateLimiting" target="blank">documentation.</a><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></div>'),console.error("You have reached your requests rate limit. For more info check the documentation. https://www.scriptr.io/documentation#documentation-ratelimitingRateLimiting")),s.data=b,y(b),z(b)}catch(b){console.log("Error when parsing message received over socket",a,b)}}),r.onClose(function(a){console.log("Socket Closed",a),v.resolve(),console.log("Trying to reconnect closed socket."),r.reconnect()}),r.onError(function(a){console.log("Socket Error",a),u.resolve()});var w=function(a){if(a)if("string"==typeof a)r.send(JSON.stringify({method:"Subscribe",params:{channel:a}}));else if("Array"==a.constructor.name)for(var b=0;b<a.length;b++)r.send(JSON.stringify({method:"Subscribe",params:{channel:a[b]}}))},x=function(a){if(a)if("string"==typeof a)r.send(JSON.stringify({method:"Unsubscribe",params:{channel:a}}));else if("Array"==a.constructor.name)for(var b=0;b<a.length;b++)r.send(JSON.stringify({method:"Unscubscribe",params:{channel:a[b]}}))},y=function(a){var b=a.id;b&&h.hasOwnProperty(b)?(console.log("Execute registered call back for received socket message.",h[b]),p.$apply(h[b].cb.resolve(a.result)),delete h[b]):console.log("No callbacks registerd for received socket message.")},z=function(a){var b=a.id;if(b&&j.hasOwnProperty("subscribeToAll")){console.log("Execute registered call back for received socket message.",j.subscribeToAll);for(var c=j.subscribeToAll,d=0;d<c.length;d++)c[d].cb(a.result)}else if(b&&j.hasOwnProperty(b)){console.log("Execute registered call back for received socket message.",j[b]);for(var c=j[b],d=0;d<c.length;d++)c[d].cb(a.result)}else console.log("No subscribers registerd for received socket message.")};return{getMessage:function(){return s},getStatus:function(){return r.readyState},subscribe:function(a,b,c){if(d){var b={time:new Date,cb:b};c&&(b.id=c),j[a]?j[a].push(b):j[a]=[b]}},unsubscribe:function(a,b,c){if(!a)return void console.log("prefix is mandatory to unsubscribe.");if(console.log("---",j[a]),d)if(!a||b||c){var e={};b&&(e.cb=b),c&&(e.id=c),j[a]=q.difference(j[a],q.where(j[a],e))}else j[a]=[];console.log("+++",j[a])},publish:function(a,b,d){var e=c;if(d&&(e=d),e){var f=i.defer(),g=l(),j=m(g,b);return h[j]={time:new Date,cb:f},a.id=j,console.log("Sending publish message",a),r.send({method:"Publish",params:{channel:e,message:JSON.stringify(a)}}),f.promise}console.log("No channel is defined, message won't be sent.",a)},call:function(a,b,c){var d=i.defer(),e={method:a,params:{body:JSON.stringify(b)}},f=l(),g=o(f,c);return h[g]={time:new Date,cb:d},e.id=n(f,c),console.log("Sending call api request over socket.",e),r.send(e),d.promise},updateSubscriptionChannel:function(b){x(a.getSubscribeChannel()),a.setSubscribeChannel(b),w(b)},updatePublishingChannel:function(b){a.setPublishChannel(b)},closeSocket:function(a){a?r.close(a):r.close(!1)},onReady:t.promise,onError:u.promise,onClose:v.promise}}]}),angular.module("HttpClient",["ngCookies"]).provider("httpClient",function(){var a="",b=null,c="";this.setBaseUrl=function(b){a=b,console.log(a)},this.setToken=function(a){b=a,console.log(b)};var d=function(b){c=a+"/"+b,console.log(c)};this.$get=["$cookies","$q","$http",function(a,e,f){a.get("token")&&(b=a.get("token"));var g=function(a,b,c){return a&&a[b]||(a||(a={}),a[b]=c),a},h=function(a,h){var i=e.defer();return d(a),h.url=c,b&&(h.headers=g(h.headers,"Authorization","Bearer "+b)),f(h).then(function(a){if(a.data&&a.data.response){var b=a.data.response;"200"==b.metadata.statusCode&&"success"==b.metadata.status?b.result&&b.result.metadata?"200"==b.result.statusCode&&"success"==b.result.status?i.resolve(b.result.result,a):i.reject(b.result.metadata,a):i.resolve(b.result,a):i.reject(b.metadata,a)}},function(a){console.log("ERROR",a),"429"==a.status&&(0==$("body").find(".alert-transport").length&&$("body").append('<div class="alert alert-danger alert-dismissable alert-transport" style="position: absolute; z-index: 1000; top: 0; width: 600px; left: 30%; text-align: center">You have reached you requests rate limit. For more info check the <a href="https://www.scriptr.io/documentation#documentation-ratelimitingRateLimiting" target="blank">documentation.</a><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></div>'),console.error("You have reached your requests rate limit. For more info check the documentation. https://www.scriptr.io/documentation#documentation-ratelimitingRateLimiting")),i.reject(a)}),i.promise};return{get:function(a,b){var c={method:"GET"};return c.params=b,h(a,c)},post:function(a,b,c,d){var e={method:"POST"};return e.data=b,c&&(e.headers=c),c&&c["Content-Type"]||(e.headers=g(e.headers,"Content-Type","application/json")),d&&(e.headers["Content-Type"]=void 0,e.transformRequest=angular.identity),h(a,e)}}}]});var cachedTemplates=["$templateCache",function(a){"use strict";a.put("/UIComponents/dashboard/frontend/components/ACL/ACL.html",'<div class=acl-wrapper ng-click="$ctrl.showAccessControlList = true"><span class=acl-btn ng-class="($ctrl.users.length == 1 && $ctrl.users[0].code == \'anonymous\') ? \'unlocked\' : \'locked\'"><a ng-click=$ctrl.openModal() href=javascript:void(0); uib-tooltip={{$ctrl.accessType}} tooltip-placement=right><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAARCAYAAADZsVyDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkExOUI1NTNCNDc3MzExRTY4OEY2ODFFOTcxN0Q4QkIxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkExOUI1NTNDNDc3MzExRTY4OEY2ODFFOTcxN0Q4QkIxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTE5QjU1Mzk0NzczMTFFNjg4RjY4MUU5NzE3RDhCQjEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTE5QjU1M0E0NzczMTFFNjg4RjY4MUU5NzE3RDhCQjEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6vZpebAAAB2UlEQVR42rSUv0sCYRjH37vu0BNNdG2Qk1ocEk53F1tapdnlqECac2hIbkloFOL8F8IlwqUmQZwOsUHBIZMWRSQHFVTyeh55kzc9Ray+8OX96eee93mfVy6TyRBQCOwh2+kDbCQSiR+TAlgHn5LfKQs+Yyf4P4ASKwZP/kkCbQ2aq23koXdkCU6Cn7cER8FPq8CoS7rpiG6MbgBN1uv1fbfbTVRVXQm+Z6JOriu/Vqt1gK3L5bIPBgMVTNLp9LmmaYN+v/+IaRUscmWsq2v4obfdbl9Mp1NpPB7P51Op1N1wOCROp/MN9sgsGGF+2vdbXQjKbreL4E+EdLvd+TyOUYFAwBeLxXaEhSInTCqWVC6X8RQnDofjcBZJKGTG43ETIuR1XTebzSbX6/VIPp+/EhaK3E+hN1YRy7LsbTQaynd0kUiEwEeIJEkkHA7PwHCZ6GsWbDD9V6u6Nk1zz2az7UJ+fZPJRAQQHn221ul0OGzxIzzPGwKTX4MCo7RdfgkejwF+qFartzAM5nI5DoAIJbVabQZWFOWlWCyGBeboGwnTMBqN5uNCocCx66VSScYYODjexk+MeQT4j0hEUXyHlGjYDwaDWqVSOaZFkN0WTJiy1Gn/iF34EmAAsBK5Pr0LIbQAAAAASUVORK5CYII=" alt=restrictions> <i class="fa fa-lock acl-icon-locked red"></i> <i class="fa fa-unlock-alt acl-icon acl-icon-unlocked light-green"></i></a></span></div>'),a.put("/UIComponents/dashboard/frontend/components/ACL/myModalContent.html",'<div class=acl-controls><div class=modal-header><h3 class=modal-title>Access Control List</h3></div><div class=modal-body><div ng-if=$ctrl.show uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')  + \' m10\'" close=$ctrl.closeAlert() dismiss-on-timeout=5000>{{$ctrl.message.content}}</div><h5 class=text-info>List of groups and devices allowed to run the script <a href=javascript:void(0); class=text-primary uib-popover-html=$ctrl.popoverContent popover-placement=right><i class="fa fa-question-circle"></i></a></h5><div ng-show=$ctrl.showMsg class="col-xs-12 center-div alert fadeIn animated alert-info"><div class="col-xs-9 pdl0"><div class="mt8 ml10"><span>Access permission to the "anonymous" predefined group allows anyone to serve the file. Adding it to your access control list will automatically remove any other groups or devices. Are you sure you want to continue?</span></div></div><div class="col-xs-3 pdr0 text-right"><button ng-click=$ctrl.removeAnonymousAccess() type=button class="btn btn-default btn-sm mr5">No</button> <button ng-click=$ctrl.addAnonymousAccess() type=button class="btn btn-primary btn-sm">Yes</button></div></div><scriptr-autocomplete id=devicesList placeholder="Select a user/group" pause=400 hide-list=false search-fields=code default-set-object=$ctrl.defaultSetObject selected-object=$ctrl.onSelect title-field=code objects=$ctrl.users clear-selected=true description-field=description image-field=pic list-selected-object=true minlength=0 text-no-results="No results" text-searching=Searching... transport=https on-format-data=$ctrl.callback api=UIComponents/dashboard/frontend/examples/list/getDevices input-class="form-control form-control-small"></scriptr-autocomplete><div class=clearfix></div><div class="italic text-muted fnt12 mt10"><i class="fa fa-info-circle" aria-hidden=true></i><span id=permissionsNote> Note that removing scriptr device from the access control list will prevent you from serving the file from the IDE.</span></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=$ctrl.onCancel()>Close</button> <button type=button class="btn btn-warning" ng-click=$ctrl.updateFileACL()>Save changes</button></div></div>'),
a.put("/UIComponents/dashboard/frontend/components/chart/chart.html",'<div class="text-center loading" ng-hide=$ctrl.datas><i class="fa fa-spinner fa-spin fa-3x"></i></div><div ng-show=$ctrl.noResults class="alert alert-danger m10">No data to display</div><div ng-if=$ctrl.datas><div ng-if="$ctrl.type == \'line\'" style="height: 100%; width: 100%" line-data=$ctrl.datas line-xkey={{$ctrl.xkey}} line-ykeys=$ctrl.ykeys line-labels=$ctrl.labels line-colors=$ctrl.colors line-line-width=$ctrl.lineWidth line-point-size=$ctrl.pointSize line-point-fill-colors=$ctrl.pointFillColors line-point-stroke-colors=$ctrl.pointStrokeColors line-ymax=$ctrl.ymax line-ymin=$ctrl.ymin line-smooth=$ctrl.smooth line-hide-hover=$ctrl.hideHover line-hover-callback="$ctrl.hoverCallback(index, options, content, row)" line-parse-time=$ctrl.parseTime line-units=$ctrl.units line-post-units=$ctrl.postUnits line-pre-units=$ctrl.preUnits line-line-date-format=$ctrl.dateFormat(x) line-x-labels=$ctrl.xlabels line-x-label-format=$ctrl.xlabelFormat(x) line-x-label-angle=$ctrl.xlabelAngle line-y-label-format=$ctrl.ylabelFormat(y) line-goals=$ctrl.goals line-goal-stroke-width=$ctrl.goalStrokeWidth line-goal-line-colors=$ctrl.goalLineColors line-events=$ctrl.events line-event-stroke-width=$ctrl.eventStrokeWidth line-event-line-colors=$ctrl.eventLineColors line-continuous-line=$ctrl.continuousLine line-axes=$ctrl.axes line-grid=$ctrl.grid line-grid-text-color=$ctrl.gridTextColor line-grid-text-size=$ctrl.gridTextSize , line-grid-text-family=$ctrl.gridTextFamily line-grid-text-weight=$ctrl.gridTextWeight line-fill-opacity=$ctrl.fillOpacity line-resize=$ctrl.resize line-chart></div><div ng-if="$ctrl.type == \'bar\'" style="height: 100%; width: 100%" bar-data=$ctrl.datas bar-x={{$ctrl.xkey}} bar-y=$ctrl.ykeys bar-labels=$ctrl.labels bar-colors=$ctrl.colors bar-resize=$ctrl.resize bar-stacked=$ctrl.stacked bar-hide-hover=$ctrl.hideHover bar-hover-callback="$ctrl.hoverCallback(index, options, content, row)" bar-grid=$ctrl.grid bar-grid-text-color=$ctrl.gridTextColor bar-grid-text-size=$ctrl.gridTextSize , bar-grid-text-family=$ctrl.gridTextFamily bar-grid-text-weight=$ctrl.gridTextWeight bar-axes=$ctrl.axes bar-ymax=$ctrl.ymax bar-ymin=$ctrl.ymin bar-goals=$ctrl.goals bar-goal-stroke-width=$ctrl.goalStrokeWidth bar-goal-line-colors=$ctrl.goalLineColors bar-x-label-angle=$ctrl.xlabelAngle bar-y-label-format=$ctrl.ylabelFormat(y) bar-parse-time=$ctrl.parseTime bar-events=$ctrl.events bar-event-stroke-width=$ctrl.eventStrokeWidth bar-event-line-colors=$ctrl.eventLineColors bar-post-units=$ctrl.postUnits bar-pre-units=$ctrl.preUnits bar-chart></div><div ng-if="$ctrl.type == \'area\'" style="height: 100%; width: 100%" area-chart line-colors=$ctrl.colors area-data=$ctrl.datas area-xkey={{$ctrl.xkey}} area-ykeys=$ctrl.ykeys area-labels=$ctrl.labels area-line-width=$ctrl.lineWidth area-point-size=$ctrl.pointSize area-point-fill-colors=$ctrl.pointFillColors area-point-stroke-colors=$ctrl.pointStrokeColors area-ymax=$ctrl.ymax area-ymin=$ctrl.ymin area-smooth=$ctrl.smooth area-hide-hover=$ctrl.hideHover area-hover-callback="$ctrl.hoverCallback(index, options, content, row)" area-parse-time=$ctrl.parseTime area-units=$ctrl.units area-post-units=$ctrl.postUnits area-pre-units=$ctrl.preUnits area-area-date-format=$ctrl.dateFormat(x) area-x-labels=$ctrl.xlabels area-x-label-format=$ctrl.xlabelFormat(x) area-x-label-angle=$ctrl.xlabelAngle area-y-label-format=$ctrl.ylabelFormat(y) area-goals=$ctrl.goals area-goal-stroke-width=$ctrl.goalStrokeWidth area-goal-line-colors=$ctrl.goalLineColors area-events=$ctrl.events area-event-stroke-width=$ctrl.eventStrokeWidth area-event-line-colors=$ctrl.eventLineColors area-continuous-line=$ctrl.continuousLine area-axes=$ctrl.axes area-grid=$ctrl.grid area-grid-text-color=$ctrl.gridTextColor area-grid-text-size=$ctrl.gridTextSize , area-grid-text-family=$ctrl.gridTextFamily area-grid-text-weight=$ctrl.gridTextWeight area-fill-opacity=$ctrl.fillOpacity area-resize=$ctrl.resize area-behave-like-line=$ctrl.behaveLikeLine></div><div ng-if="$ctrl.type == \'donut\'" style="height: 100%; width: 100%" donut-data=$ctrl.datas donut-label-color=$ctrl.labelColor donut-background-color=$ctrl.backgroundColor donut-colors=$ctrl.colors donut-formatter=$ctrl.donutFormatter(y,data) donut-resize=$ctrl.resize donut-chart></div></div>'),a.put("/UIComponents/dashboard/frontend/components/gauge/gauge.html",'<div style="width: {{$ctrl.width}}%; height: {{$ctrl.height}}{{$ctrl.heightUnit}}" class=gauge><div value={{$ctrl.gaugeValue}} value-font-color={{$ctrl.valueFontColor}} min={{$ctrl.min}} max={{$ctrl.max}} hide-min-max={{$ctrl.hideMinMax}} hide-value={{$ctrl.hideValue}} show-inner-shadow={{$ctrl.showInnerShadow}} gauge-color={{$ctrl.gaugeColor}} shadow-opacity={{$ctrl.shadowOpacity}} shadow-size={{$ctrl.shadowSize}} custom-sectors={{$ctrl.customSectors}} label={{$ctrl.label}} label-font-color={{$ctrl.labelFontColor}} start-animation-type={{$ctrl.startAnimationType}} refresh-animation-type={{$ctrl.refreshAnimationType}} counter={{$ctrl.counter}} value-font-family={{$ctrl.valueFontFamily}} relative-gauge-size={{$ctrl.relativeGaugeSize}} value-min-font-size={{$ctrl.valueMinFontSize}} label-min-font-size={{$ctrl.labelMinFontSize}} min-label-min-font-size={{$ctrl.minLabelMinFontSize}} max-label-min-font-size={{$ctrl.maxLabelMinFontSize}} gauge-width-scale={{$ctrl.gaugeWidthScale}} shadow-vertical-offset={{$ctrl.shadowVerticalOffset}} level-colors={{$ctrl.levelColors}} no-gradient={{$ctrl.noGradient}} start-animation-time={{$ctrl.startAnimationTime}} refresh-animation-time={{$ctrl.refreshAnimationTime}} donut={{$ctrl.donut}} donut-start-angle={{$ctrl.donutStartAngle}} reverse={{$ctrl.reverse}} decimals={{$ctrl.decimals}} symbol={{$ctrl.symbol}} format-number={{$ctrl.formatNumber}} human-friendly={{$ctrl.humanFriendly}} human-friendly-decimal={{$ctrl.humanFriendlyDecimal}} on-animation-end={{$ctrl.onAnimationEnd}} pointer={{$ctrl.pointer}} justgage></div></div>'),a.put("/UIComponents/dashboard/frontend/components/grid/grid.html",'<div class=filter-bar><div class={{$ctrl.class}}><form><div ng-show="$ctrl.enableClientSideFilter && $ctrl.mode == \'normal\'" class="form-group col-xs-12 col-sm-4 pdr0"><div class=form-group><input class=form-control ng-change=$ctrl.onFilterChanged() ng-model=$ctrl.quickFilterValue placeholder="Client filter"></div></div><div ng-show="$ctrl.enableServerSideFilter && $ctrl.mode == \'infinite\'" class="form-group col-xs-12 col-sm-4 pdr0"><div class=form-group><input class=form-control ng-change=$ctrl.onServerFilterChanged() ng-model=$ctrl.serverFilterText placeholder="Server filter"></div></div><div class="col-xs-12 col-sm-4 pull-right text-right"><button ng-hide={{$ctrl.enableDeleteRow}} ng-click=$ctrl.openConfirmationPopUp() class="btn btn-default mt4" tooltip-placement=left uib-tooltip="Delete selected row"><i class="fa fa-close" aria-hidden=true></i></button> <button ng-hide={{$ctrl.enableAddRow}} ng-click=$ctrl.onAddRow() class="btn btn-warning mt4" tooltip-placement=bottom uib-tooltip="Insert row"><i class="fa fa-plus" aria-hidden=true></i></button></div></form></div></div><div class=col-xs-12 ng-show=$ctrl.showError><div class=alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')">{{$ctrl.message.content}}</div></div><div class=clearfix></div><div class="col-xs-12 onset-grid-wrapper"><div ag-grid=$ctrl.gridOptions class=ag-bootstrap ng-style=$ctrl.style></div></div>'),a.put("/UIComponents/dashboard/frontend/components/grid/popup.html",'<div class=modal-header><h3 class=modal-title>Delete</h3></div><div class=modal-body>Are you sure you want to delete the selected row(s)?</div><div class=modal-footer><button class="btn btn-warning" type=button ng-click=$ctrl.onCancel()>No</button> <button class="btn btn-warning" type=button ng-click=$ctrl.onSubmit()>Yes</button></div>'),a.put("/UIComponents/dashboard/frontend/components/list/autocomplete.html",'<div><span ng-show=$ctrl.showList ng-hide=$ctrl.hideObjects class=script-wrap ng-if=$ctrl.listSelectedObject ng-repeat="obj in $ctrl.objects track by $index"><span style="position: relative"><span class=script-text uib-tooltip={{obj[$ctrl.titleField]}} tooltip-placement=bottom><i class="mr5 text-primary {{obj.icon}}"></i> {{obj[$ctrl.titleField]}}</span> <a ng-if="obj[$ctrl.titleField] != \'nobody\'" href=javascript:void(0); ng-click=$ctrl.addObjectToList(obj) uib-tooltip=Remove tooltip-placement=right><i class="fa fa-close"></i></a></span></span><div class=clearfix></div><div class="text-center loading" ng-show=!$ctrl.showList><i class="fa fa-spinner fa-spin fa-3x"></i></div><angucomplete-alt ng-show=$ctrl.showList id={{$ctrl.id}} placeholder={{$ctrl.placeholder}} default-set-object=$ctrl.defaultSetObject pause={{$ctrl.pause}} hide-objects=$ctrl.hideObjects list-selected-object=$ctrl.listSelectedObject objects=$ctrl.objects selected-object=$ctrl.selectedObject local-data=$ctrl.localData image-field={{$ctrl.imageField}} search-fields={{$ctrl.searchFields}} title-field={{$ctrl.titleField}} description-field={{$ctrl.descriptionField}} image-field={{$ctrl.imageField}} minlength={{$ctrl.minlength}} input-class={{$ctrl.inputClass}} match-class={{$ctrl.matchClass}} maxlength={{$ctrl.maxlength}} selected-object-data=$ctrl.selectedObjectData input-name={{$ctrl.inputName}} clear-selected={{$ctrl.clearSelected}} override-suggestions={{$ctrl.overrideSuggestions}} field-required=$ctrl.fieldRequired field-required-class={{$ctrl.fieldRequiredClass}} initial-value=$ctrl.initialValue input-changed=$ctrl.inputChanged auto-match=$ctrl.autoMatch focus-in=$ctrl.focusIn focus-out=$ctrl.focusOut disable-input=$ctrl.disableInput focus-first=$ctrl.focusFirst field-tabindex={{$ctrl.fieldTabindex}} text-searching={{$ctrl.textSearching}} text-no-results={{$ctrl.textNoResults}}></div>'),a.put("/UIComponents/dashboard/frontend/components/thermometer/thermometer.html","<div ng-style=$ctrl.style><tg-thermometer-vertical value={{$ctrl.value}} unit={{$ctrl.unit}} percent={{$ctrl.percent}} sectors=$ctrl.sectors ticks=$ctrl.ticks height={{$ctrl.height}} mercury-color=$ctrl.mercuryColor></tg-thermometer-vertical></div>"),a.put("/UIComponents/dashboard/frontend/components/thermometer/tg_thermometer_vertical.html",'<div style="height: calc(100% - 30px)" class=tg-thermometer><div class=draw-a></div><div class=draw-b><div style="width: 6px;position: absolute;\n            left: 0;\n            right: 0;\n            width: 10px;\n            top: 0;\n            margin: auto;\n            height: 20px;\n            border-radius: 10px 10px 0 0;background-color: {{mercuryColor}}"></div><div style="width: 14px;height: 14px; position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            margin: auto;\n            width: 24px;\n            height: 24px;\n            border-radius: 50%; background-color: {{mercuryColor}}"></div></div><div class=meter><div class=statistics><div class=percent style="bottom: calc({{val.percent}}% - 2px)" ng-repeat="val in ticks track by $index">{{val.tick}}{{unit}}</div></div><div style="height: {{percent}}%; background-color: {{mercuryColor}}" class=mercury><div class=percent-current>{{value}}{{unit}}</div><div class=mask><div class=bg-color style="height: calc({{height}}% - 57px); background: {{mercuryColor}}"></div></div></div></div></div>'),a.put("/UIComponents/dashboard/frontend/components/odometer/odometer.html","<div ng-style=$ctrl.style><span odometer=$ctrl.odometerValue odometer-options=$ctrl.odometerOptions></span></div>"),a.put("/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",'<div class=row><div class="col-xs-12 side-search"><i class="fa fa-search" aria-hidden=true></i> <input class="form-control input-sm" ng-keyup=$ctrl.onFilterChanged() ng-model=$ctrl.searchValue placeholder={{$ctrl.searchText}}></div></div><div class=row><div class=model-title>Data streams</div><div ng-show="!$ctrl.searching && !$ctrl.noResults"><abn-tree tree-data=$ctrl.treeData tree-control=$ctrl.treeControl icon-leaf={{$ctrl.iconLeaf}} icon-expand={{$ctrl.iconExpand}} icon-collapse={{$ctrl.iconCollapse}} on-select=$ctrl.onSelect(branch) expand-level=$ctrl.expandLevel initial-selection=$ctrl.initialSelection children-tag=sensors label-tag=$ctrl.labelTag></abn-tree></div><div ng-show=$ctrl.noResults class="col-xs-12 alert mb0"><span class="alert col-xs-12 alert-danger mb0">No Streams found</span></div><div class="text-center loading" ng-show=$ctrl.searching><i class="fa fa-spinner fa-spin fa-2x"></i></div><div class=model-title>Calculated Channels</div><div class="col-xs-12 mt10 fnt13"><a href=""><i class="fa fa-plus-circle" aria-hidden=true></i> Add new calculated channels</a></div></div>'),a.put("/UIComponents/dashboard/frontend/components/speedometer/speedometer.html","<div></div>"),a.put("/UIComponents/dashboard/frontend/components/message/message.html","<ng-display-box ng-model=$ctrl.data type={{$ctrl.type}}></ng-display-box>"),a.put("/UIComponents/dashboard/frontend/components/dygraphs/dygraphs.html",'<div class="text-center loading" ng-hide=$ctrl.datas><i class="fa fa-spinner fa-spin fa-3x"></i></div><div class=padder10><div ng-show=$ctrl.noResults class="alert alert-danger">No data to display</div></div><div ng-if=$ctrl.datas><ng-dygraphs data=$ctrl.datas options=$ctrl.options legend=$ctrl.legend></ng-dygraphs></div>'),a.put("/UIComponents/dashboard/frontend/components/displayCount/displayCount.html",'<div ng-style=$ctrl.style><div ng-if="$ctrl.widgetLayout == \'vertical\'" style="border: {{$ctrl.borderSize}}px solid {{$ctrl.borderColor}}"><div class=vertical-count-media style="background: {{$ctrl.numberBackgroundColor}}; font-size: {{$ctrl.numberFontSize}}px; font-weight: {{$ctrl.numberFontWeight}}; font-family:{{$ctrl.numberFontFamily}}; color: {{$ctrl.numberTextColor}}; text-align: {{$ctrl.numberTextAlignment}}">{{$ctrl.data}}</div><div class=vertical-count-media style="background: {{$ctrl.messageBackgroundColor}}; font-size: {{$ctrl.messageFontSize}}px; font-weight: {{$ctrl.messageFontWeight}}; font-family:{{$ctrl.messageFontFamily}};color: {{$ctrl.messageTextColor}}; text-align: {{$ctrl.messageTextAlignment}}">{{$ctrl.message}}</div></div><div ng-if="$ctrl.widgetLayout == \'horizontal\'" style="border: {{$ctrl.borderSize}}px solid {{$ctrl.borderColor}}"><div ng-if="$ctrl.numberCellSize == \'small\'" class="media horizontal-count-media"><div class="media-left media-middle pull-none col-xs-3" style="background: {{$ctrl.numberBackgroundColor}}; font-family:{{$ctrl.numberFontFamily}}; font-size: {{$ctrl.numberFontSize}}px; font-weight: {{$ctrl.numberFontWeight}}; color: {{$ctrl.numberTextColor}}; text-align: {{$ctrl.numberTextAlignment}}">{{$ctrl.data}}</div><div class="media-body media-middle" style="background: {{$ctrl.messageBackgroundColor}}"><span style="color: {{$ctrl.messageTextColor}}; font-size: {{$ctrl.messageFontSize}}px; font-weight: {{$ctrl.messageFontWeight}}; font-family:{{$ctrl.messageFontFamily}}; text-align: {{$ctrl.messageTextAlignment}}">{{$ctrl.message}}</span></div></div><div ng-if="$ctrl.numberCellSize == \'medium\'" class="media horizontal-count-media"><div class="media-left media-middle pull-none col-xs-6" style="background: {{$ctrl.numberBackgroundColor}}; font-family:{{$ctrl.numberFontFamily}}; font-size: {{$ctrl.numberFontSize}}px; font-weight: {{$ctrl.numberFontWeight}}; color: {{$ctrl.numberTextColor}}; text-align: {{$ctrl.numberTextAlignment}}">{{$ctrl.data}}</div><div class="media-body media-middle" style="background: {{$ctrl.messageBackgroundColor}}"><span style="color: {{$ctrl.messageTextColor}}; font-size: {{$ctrl.messageFontSize}}px; font-weight: {{$ctrl.messageFontWeight}}; font-family:{{$ctrl.messageFontFamily}}; text-align: {{$ctrl.messageTextAlignment}}">{{$ctrl.message}}</span></div></div><div ng-if="$ctrl.numberCellSize == \'large\'" class="media horizontal-count-media"><div class="media-left media-middle pull-none col-xs-10" style="background: {{$ctrl.numberBackgroundColor}}; font-family:{{$ctrl.numberFontFamily}}; font-size: {{$ctrl.numberFontSize}}px; font-weight: {{$ctrl.numberFontWeight}}; color: {{$ctrl.numberTextColor}}; text-align: {{$ctrl.numberTextAlignment}}">{{$ctrl.data}}</div><div class="media-body media-middle" style="background: {{$ctrl.messageBackgroundColor}}"><span style="color: {{$ctrl.messageTextColor}}; font-size: {{$ctrl.messageFontSize}}px; font-weight: {{$ctrl.messageFontWeight}}; font-family:{{$ctrl.messageFontFamily}}; text-align: {{$ctrl.messageTextAlignment}}">{{$ctrl.message}}</span></div></div><div ng-if="$ctrl.numberCellSize == \'\'" class="media horizontal-count-media"><div class="media-left media-middle pull-none" style="background: {{$ctrl.numberBackgroundColor}}; font-family:{{$ctrl.numberFontFamily}}; font-size: {{$ctrl.numberFontSize}}px; font-weight: {{$ctrl.numberFontWeight}}; color: {{$ctrl.numberTextColor}}; text-align: {{$ctrl.numberTextAlignment}}">{{$ctrl.data}}</div><div class="media-body media-middle" style="background: {{$ctrl.messageBackgroundColor}}"><span style="color: {{$ctrl.messageTextColor}}; font-size: {{$ctrl.messageFontSize}}px; font-weight: {{$ctrl.messageFontWeight}}; font-family:{{$ctrl.messageFontFamily}}; text-align: {{$ctrl.messageTextAlignment}}">{{$ctrl.message}}</span></div></div></div></div>'),a.put("/UIComponents/dashboard/frontend/components/plotly/plotly.html",'<div ng-style="$ctrl.style">\n    <angular-plotly\n                    plotly-data="$ctrl.data"\n                    plotly-options="$ctrl.options"\n                    plotly-layout="$ctrl.layout"\n    </angular-plotly>\n</div>'),a.put("layout/frontend/components/onsetmenu/menu.html",'<div class=navigation><ul ng-show="!$ctrl.webVersion || ($ctrl.webVersion && !$ctrl.menuOpened)"><li class=menu-logo><div class=logo-small><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/930831d9/images/hobolink-logo-icon.png></div></li><li ng-repeat="item in $ctrl.menuArray track by $index" class=has-sub ng-class="(($ctrl.opened == true && $ctrl.firstLoad == false && $ctrl.webVersion == true) || ($ctrl.webVersion == false && $ctrl.opened == false)) ? \'close-hover\' : \'\'" ng-click=$ctrl.openCloseChild($event) ng-mouseleave=$ctrl.closeChild($event)><a ng-href="{{item.subChildren.length == 0 ? item.route : \'javascript: void(0);\'}}"><div class=menu-item-wrap><span class=menu-img-icon><img src={{item.icon}}></span></div></a><ul><li ng-repeat="subItem in item.subChildren"><a href={{subItem.route}}>{{subItem.title}}</a></li></ul></li></ul><ul ng-show="$ctrl.webVersion && $ctrl.menuOpened"><li class=menu-logo><div class=logo-large><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/57001675/images/hobolink-logo-white.png></div><div class=logo-small><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/930831d9/images/hobolink-logo-icon.png></div><div class=clearfix></div></li><li ng-repeat="item in $ctrl.menuArray track by $index"><a class=menu-item-wrap ng-click=$ctrl.changeIsCollapsed($index) ng-href="{{item.subChildren.length == 0 ? item.route : \'javascript: void(0);\'}}"><span class=menu-img-icon><img src={{item.icon}}> </span><span class=menu-text>{{item.title}}</span></a><div uib-collapse=isCollapsed{{$index}} class=desktop-sub><div ng-repeat="subItem in item.subChildren"><a href={{subItem.route}}>{{subItem.title}}</a></div></div><div class=clearfix></div></li></ul><div class=clearfix></div><div class=menu-bottom-section><div><a href=#/logout>Log out</a></div><div><a href="">Help</a></div><div>Hello! <span class=logged-in-as-user>{{$ctrl.user}}</span></div></div></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/box.html",'<div class=box-wrapper><div class=box><div class="box-header col-xs-12"><div class="box-label pull-left" uib-tooltip={{$ctrl.widget.options.boxLabel}}>{{$ctrl.widget.options.boxLabel}}</div><div class="box-header-btns pull-right"><a title="Configure this widget" ng-if=$ctrl.widget.form ng-click=$ctrl.openSettings($ctrl.widget) ng-show=$ctrl.isEdit><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-wrench.svg> </a><a title="Remove this widget" ng-click=$ctrl.remove($ctrl.widget) ng-show=$ctrl.isEdit><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-bin.svg class=bin-img></a></div></div><div class=clearfix></div><div class=box-content></div></div></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/dashboard.html",'<div>\n    \x3c!-- begin left side --\x3e\n    <div ng-show="$ctrl.isEdit" class="left-dashboard">\n        <div class="col-xs-12 devices-models-tree" id="stickDiv">\n            <scriptr-searchbox \n                               transport="wss"\n                               search-text="Search"\n                               load-tree = "$ctrl.loadTree"\n                               icon-expand = "{{$ctrl.iconExpand || \'fa expand-collapse fa-caret-right\'}} "\n                               icon-collapse = "{{$ctrl.iconCollapse || \'fa expand-collapse fa-caret-right\'}}"\n                               tree-search-criteria = "{{$ctrl.treeSearchCriteria}}"\n                               api=\'{{$ctrl.devicesModel}}\'\n                               children-tag="sensors"\n                               label-tag="label" \n                               widgets-config= "$ctrl.widgetsConfig"\n                               on-select= "$ctrl.addWidget(sectionData)"\n                               </scriptr-searchbox>\n        </div>\n    </div>\n    \x3c!-- end left side --\x3e\n\n    \x3c!-- begin dashboard content --\x3e\n    <div class="dashboard-content">\n        \n        \x3c!-- begin page header --\x3e\n        <div class="page-header col-xs-12" ng-if="!$ctrl.isInIde">\n            <div ng-if="$ctrl.show" uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')  + \' m10\'" close="$ctrl.closeAlert()" dismiss-on-timeout="5000">{{$ctrl.message.content}}</div>\n            <form name="scriptForm" ng-submit="$ctrl.saveDashboard(scriptForm)">\n                <div class="form-group col-xs-12 col-md-10 input-wrapper">\n                    <div class="pull-left back-to-panel"><a class="btn-block btn btn-primary" ng-href="#/dashboardsList"><i class="fa fa-arrow-left" aria-hidden="true"></i></a></div> \n                    \n\t\t\t\t\t\x3c!-- begin view mode --\x3e\n                    <div class="col-xs-12 col-md-7" ng-show="!$ctrl.isEdit">\n                        <div class="row">\n                            <div class="col-xs-12 col-md-1 p0">\n                              <div class="view-mode-img-wrap">\n                                <div class="view-mode-img"><img ng-src="{{!$ctrl.model.image && \'//cdn.rawgit.com/scriptrdotio/onset-static-resources/a923190a/images/default-icon.svg\' || $ctrl.model.image}}" />\n                                </div>\n                              </div>\n                            </div>\n                        \t<div class="col-xs-12 col-md-7 mt5">{{$ctrl.model.dashboardName}}</div>\n                        </div>\n                    </div>\n                    \n                    \x3c!--- begin edit mode --\x3e\n                    <div class="col-xs-12 col-md-7" ng-show="$ctrl.isEdit">\n                        <div ng-if="!$ctrl.isInIde" sf-options="$ctrl.frmGlobalOptions" sf-schema="$ctrl.schema" sf-form="$ctrl.form" sf-model="$ctrl.model" ></div>\n                    </div>\n                    <div class="col-xs-6 col-md-1 cancel-btn" ng-show="$ctrl.isEdit">\n                        <button class="btn btn-primary btn-block" type="button" ng-click="$ctrl.disableEditMode()">Cancel</button>\n                    </div>\n                    <div class="col-xs-6 col-md-1 save-btn" ng-show="$ctrl.isEdit">\n                        <button class="btn btn-primary btn-block" type="submit" ng-if="!$ctrl.isInIde">Save</button>\n                    </div>\n                </div>\n                <div class="col-xs-12 col-md-2 text-right action-buttons" ng-if="!$ctrl.isInIde">\n                    <a ng-if="!$ctrl.isInIde" class="btn btn-primary radius4 presentation-icon" ng-show="false && !$ctrl.isEdit" ng-click="$ctrl.viewDasboard()"><img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/presentation.svg" /></a>\n\n                    <div class="btn-group" uib-dropdown dropdown-append-to-body>\n                        <button id="btn-append-to-body" type="button" class="btn btn-primary wrench-icon radius4" uib-dropdown-toggle>\n                            <img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/4a93b9b6/images/wrench.svg" class="svg"/> <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-right header-sub" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">\n                            <li role="menuitem" ng-show="!$ctrl.isEdit"><a ng-click="$ctrl.enableEditDashboard()">Edit dashboard</a></li>\n                            <li role="menuitem" ng-show="$ctrl.isEdit && !$ctrl.isNew"><a ng-click="$ctrl.deleteDashboardConfirmation()">Delete dashboard</a></li>  \n                            <li role="menuitem" ng-show="$ctrl.isEdit"><a ng-click="$ctrl.clear()">Clear dashboard</a></li>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </form>\n    \t</div>\n   \t \t\x3c!-- end page header --\x3e\n    \n    \x3c!-- begin view mode dropdown --\x3e\n    <div class="col-xs-12 strip-container" ng-show="!$ctrl.isEdit">\n       <div sf-options="$ctrl.frmGlobalOptions" sf-schema="$ctrl.metric_schema" sf-form="$ctrl.metric_form" sf-model="$ctrl.metric_model" ></div>\n    </div>\n    \x3c!-- end view mode dropdown --\x3e\n    \n    \n    \t\x3c!-- begin slick wrap --\x3e\n        <div class="col-xs-12 pdl0 slick-wrap">\n            \x3c!-- begin carousel options --\x3e\n            <div>\n                <div class="slick-container dark-grey-bg" ng-show="$ctrl.isEdit" ng-class="!$ctrl.isInIde ? \'col-xs-12\' : \'col-sm-11 col-xs-9\'">\n                    <slick \n                           settings="$ctrl.slickConfig"\n                           infinite="true" \n                           slides-to-show="$ctrl.widgetsConfig.length"\n                           slides-to-scroll="0"\n                           ng-if="$ctrl.isEdit && $ctrl.dataLoaded" \n                           init-onload="false"\n                           data="$ctrl.dataLoaded"\n                           >\n                        <div class="slick-item" ng-repeat="item in $ctrl.widgetsConfig" ng-if="item.show != false">\n                            <span >\n                                <a ng-click="$ctrl.addWidget(item)"  uib-tooltip="{{ item.label }}" tooltip-placement="auto" tooltip-append-to-body="true">\n                                    <img ng-if="item.imgSrc" ng-src="{{ item.imgSrc }}" class="{{item.imgCls}}" alt="{{ item.label}}" />\n                                    <i ng-if="item.iconSrc" class="{{ item.iconSrc }}" aria-hidden="true" alt="{{ item.label}}" /></i>\n                                \x3c!--  span class="slick-label">{{ item.label }}</span --\x3e\n                                </a>\n                            </span>\n                        </div>\n                    </slick>\n                </div>\n                <div ng-if="$ctrl.isInIde" class="dashboard-config col-sm-1 col-xs-3 pull-right text-center">\n                    <a ng-click="$ctrl.clear()" uib-tooltip="Clear widgets" tooltip-placement="bottom"><i class="fa fa-eraser" aria-hidden="true"></i></a>\n                    <a ng-click="$ctrl.setTransportSettings()" uib-tooltip="Settings" tooltip-placement="bottom"><i class="fa fa-cog" aria-hidden="true"></i></a>\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            \x3c!-- end carousel options --\x3e\n\n            <div class="clearfix"></div>\n\n            \x3c!-- begin gridster --\x3e\n            <div gridster="$ctrl.gridsterOptions" class="builder" ng-class="!$ctrl.isEdit ? \'gridster-viewmode\' : \'\'">\n                <ul>\n                    <li gridster-item="widget" ng-repeat="widget in $ctrl.dashboard.widgets">\n                        <box widget="widget" is-edit="$ctrl.isEdit"></box>\n                    </li>\n                </ul>\n            </div>\n            \x3c!-- end gridster --\x3e\n        </div>\n    \x3c!-- end slick wrap --\x3e\n    </div>\n</div>\n\x3c!-- end dashboard content --\x3e\n'),
a.put("/UIComponents/dashboardBuilder/javascript/components/dashboardsList.html",'<div><div><div class="col-xs-12 col-sm-5 col-md-6 col-lg-8 search-bar mb5"><i class="fa fa-search" aria-hidden=true></i> <input type=textfield ng-model=query placeholder="Search all dashboards" class=form-control></div><div class="col-xs-12 col-sm-4 col-md-3 col-lg-2 mb5"><a class="btn btn-primary add-btn btn-block" ng-href=#/newDashboard ng-click=$ctrl.checkCreateDashboardEligibility($event)>Create new dashboard</a></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 view-options mb5"><label>View:</label><span><a ng-click="$ctrl.changeLayout(\'tile\')" ng-class="{ \'selected\': $ctrl.layout == \'tile\'}"><i class="fa fa-th" aria-hidden=true></i></a></span> <span><a ng-click="$ctrl.changeLayout(\'grid\')" ng-class="{ \'selected\': $ctrl.layout == \'grid\'}"><i class="fa fa-list" aria-hidden=true></i></a></span></div><div class=clearfix></div></div><div ng-show="$ctrl.layout == \'tile\'"><div class="col-xs-12 col-sm-6"><h3 class=page-title>Your Dashboards</h3></div><div class=clearfix></div><div ng-if=$ctrl.showPanelMsg class=col-xs-12><div uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')" close=$ctrl.closeMsg() dismiss-on-timeout=5000>{{$ctrl.message.content}}</div></div><span class="col-xs-12 mb20 text-center" ng-show=$ctrl.noDashboards><div class=mb10>No Dashboards Found</div><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/1f981ecf/images/no-dashboard-found.png class="img-reponsive center-block"></span><div class="text-center loading" ng-show=$ctrl.loading><i class="fa fa-spinner fa-spin fa-3x"></i></div><div ng-repeat="dashboard in $ctrl.customDashboards | filter:{ dashboardName: query  } track by $index  " class="col-xs-12 col-sm-12 col-md-4 mb20 listing-dashboard"><div index="{{scriptName = dashboard.dashboard}}" class=listing-box><div class="img-thumb col-xs-12"><div class=table-display><div class=cell-display><a ng-href=#/dockey/{{dashboard.key}}><img ng-if=!dashboard.viewFile class="img-responsive default-img" src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/a923190a/images/default-icon.svg> <img ng-if="dashboard.viewFile != null" class=img-responsive src={{dashboard.viewFile}}></a></div></div></div><div class="listing-info col-xs-12"><h4 class="mt0 mb5"><a ng-href=#/dockey/{{dashboard.key}} uib-tooltip={{dashboard.dashboardName}} tooltip-placement=left tooltip-append-to-body=true>{{dashboard.dashboardName}}</a> <span class="hidden-md hidden-lg"><a ng-click=$ctrl.setFavoriteDashboard(dashboard.key) href="" uib-tooltip="Star this dashboard for easy access from the menu. You can star one dashboard at a time." tooltip-placement=right tooltip-append-to-body=true><i ng-class="dashboard.key == $ctrl.favDashboardKey ? \'fa fa-star\' : \'fa fa-star-o\'" aria-hidden=true></i></a></span></h4><span class="pull-left visible-md visible-lg star-rate"><a ng-click=$ctrl.setFavoriteDashboard(dashboard.key) href="" uib-tooltip="Star this dashboard for easy access from the menu. You can star one dashboard at a time." tooltip-placement=right tooltip-append-to-body=true><i ng-class="dashboard.key == $ctrl.favDashboardKey ? \'fa fa-star\' : \'fa fa-star-o\'" aria-hidden=true></i></a></span><div class=clearfix></div><div class="mb5 fnt13 listing-date">{{dashboard.lastModifiedDate | date:\'MMMM dd, yyyy HH:mm\'}}</div><div class=clearfix></div><div class=pull-left><span ng-show=false class="badge badge-warning mt5"><i class="fa fa-eye" aria-hidden=true></i> Public</span></div><div class=pull-right><a title="Configure this dashboard" ng-href=#/dockey/{{dashboard.key}}/edit><img class=icon-img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-wrench.svg></a><a title="Remove this dashboard" ng-click="$ctrl.deleteDashboardConfirmation(dashboard.dashboard, dashboard.dashboardName, dashboard.key)" class=ml5><img class=icon-img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-bin.svg></a></div></div><div class=clearfix></div></div></div></div><div ng-show="$ctrl.layout == \'grid\'"><div class=col-xs-12><h3 class=grid-title>Your Dashboards</h3></div><div class=clearfix></div><div ng-if=$ctrl.showPanelMsg class=col-xs-12><div uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')" close=$ctrl.closeMsg() dismiss-on-timeout=5000>{{$ctrl.message.content}}</div></div><span class="col-xs-12 mb20 text-center" ng-show="$ctrl.noDashboards && !ctrl.loading"><div class="mb10 mt20">No Dashboards Found</div><img src=//cdn.rawgit.com/scriptrdotio/onset-static-resources/1f981ecf/images/no-dashboard-found.png class="img-reponsive center-block"></span><div class=col-xs-12 ng-show="!$ctrl.noDashboards && !$ctrl.loading"><div ag-grid=$ctrl.gridOptions style="clear: left;width: 100%" class="ag-bootstrap hobo-grid"></div></div></div></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/deletePopup.html",'<div class=modal-header><button type=button class=close ng-click=close()>&times;</button><h3 class=modal-title>Delete this dashboard?</h3></div><div class=modal-body>Are you sure you want to permanently delete the dashboard "{{name}}"?</div><div class=modal-footer><button class="btn btn-primary" type=button ng-click=close()>Cancel</button> <button class="btn btn-primary" type=button ng-click=ondeleteDashboard()>Delete Dashboard</button></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/confirmation.html",'<div class=modal-header><button type=button class=close ng-click=$ctrl.onCancel()>&times;</button><h4 class=modal-title>{{ $ctrl.data.title }}</h4></div><div class=modal-body>{{ $ctrl.data.body }}</div><div class=modal-footer><button type=reset ng-show=$ctrl.data.btnCancelTitle class="btn btn-primary" ng-click=$ctrl.onCancel()>{{ $ctrl.data.btnCancelTitle }}</button> <button type=submit ng-show=$ctrl.data.btnSubmitTitle ng-click=$ctrl.onSubmit() class="btn btn-primary">{{ $ctrl.data.btnSubmitTitle }}</button></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/myModalContent.html",'<div class=modal-header><button type=button class=close ng-click=$ctrl.onCancel()>&times;</button><h4 class=modal-title id=modal-title>{{$ctrl.widget.label}}</h4></div><form name=myForm ng-submit=$ctrl.onSubmit(myForm)><div class="modal-body white-bg"><div html-class=bls sf-options=$ctrl.frmGlobalOptions sf-schema=$ctrl.schema sf-form=$ctrl.form sf-model=$ctrl.model></div></div><div class=modal-footer><button type=reset class="btn btn-primary" ng-click=$ctrl.onCancel()>Cancel</button> <button type=submit class="btn btn-primary">Save</button></div></form>'),a.put("/UIComponents/dashboardBuilder/view/dashboard.html",'<dashboard load-tree=true tree-search-criteria="" devices-model=app/api/dashboard/GetDataStream></dashboard>'),a.put("/UIComponents/dashboardBuilder/view/dashboardTemplate.min","<script type=text/x-handlebars-template id=handlebar-template>&lt;html ng-app=&quot;myApp&quot;&gt;\n&lt;head&gt;\n\n    &lt;link rel=&quot;icon&quot; href=&quot;data:;base64,iVBORw0KGgo=&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot; integrity=&quot;sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u&quot; crossorigin=&quot;anonymous&quot;&gt;\n    &lt;script src=&quot;//use.fontawesome.com/3d61d6959e.js&quot;&gt;&lt;/script&gt;\n\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/build/external/css/components.min.css&quot;&gt;\n    \n    &lt;!-- JQUERY Material  To use jQuery, simply ensure it is loaded before the angular.js file. --&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/external_jquery_resources.min.js&quot;&gt;&lt;/script&gt;\n  \n    &lt;!-- Libraries --&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/external_libraries.min.js&quot;&gt;&lt;/script&gt;\t\n    &lt;script src=&quot;//maps.google.com/maps/api/js?key=AIzaSyBcPYghFh_BXz4dDz-TXTHbU2iV3Wbf57I&amp;libraries=drawing,visualization&quot;&gt;&lt;/script&gt;\n  \n    &lt;!-- NG material --&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/external_angular_resources_1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/external_angular_resources_2.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/external_angular_resources_3.min.js&quot;&gt;&lt;/script&gt;\n  \n    &lt;!-- Directives --&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/directives_1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/directives_2.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/ag-grid/12.0.0/ag-grid.js?ignore=notused36&quot;&gt;&lt;/script&gt;\n  \n    &lt;!-- Components --&gt;\n    &lt;script src=&quot;/UIComponents/build/external/js/components.min.js&quot;&gt;&lt;/script&gt;\n    \n&lt;/head&gt; \n  \n  \n&lt;style&gt;\n.box {\n\t/**border: none!important;**/\n}\n  \n&lt;/style&gt;\n&lt;script&gt;\n\n(function() {\n  \n   $.urlParam = function(name){\n\t     var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);\n\t     if (results==null){\n\t         return null;\n\t     }else{\n\t         return results[1] || 0;\n\t     }\n\t}\n\n\t$.getUrlVars = function() {\n\t\tvar vars = [], hash;\n\t\tvar hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&amp;');\n\t\tfor(var i = 0; i &lt; hashes.length; i++)\n\t\t{\n\t\t\thash = hashes[i].split('=');\n\t\t\tvars.push(hash[0]);\n\t\t\tvars[hash[0]] = hash[1];\n\t\t}\n\t\treturn vars;\n\t}\n      \n    var underscore = angular.module('underscore', []);\n\t\tunderscore.factory('_', ['$window', function($window) {\t\t\n  \t\treturn $window._; // assumes underscore has already been loaded on the page\t\t\n\t}]);\n    \n\n    var wssConfig = [&quot;wsClientProvider&quot;,function (wsClientProvider) {\n   \t \twsClientProvider.setBaseUrl(&quot;wss://&quot; + window.location.host + &quot;/&quot;);   \t \n        wsClientProvider.setToken($.urlParam(&quot;auth_token&quot;));\n        wsClientProvider.setPublishChannel(&quot;{{{transport.publishChannel}}}&quot;);\n        wsClientProvider.setSubscribeChannel(&quot;{{{transport.subscribeChannel}}}&quot;);\n    }];\n\n    var httpsConfig = [&quot;httpClientProvider&quot;,function (httpClientProvider) {\n   \t  httpClientProvider.setBaseUrl(&quot;https://&quot; + window.location.host);\n      httpClientProvider.setToken($.urlParam(&quot;auth_token&quot;));\n    }]\n\n     var myApp= angular.module(&quot;myApp&quot;, [&quot;underscore&quot; , &quot;WsClient&quot;, &quot;HttpClient&quot;, &quot;Chart&quot;, 'gridster', 'ui.bootstrap', 'ngRoute', 'Gauge', 'Speedometer', 'Odometer', 'Message', 'Map', 'Grid', 'toggle-switch', 'Slider', 'Button', 'IFrame', 'Accelerometer'])\n     \n     angular.module('myApp').run(cachedTemplates);  \n      \n     angular.module('myApp').config(wssConfig);\n     angular.module('myApp').config(httpsConfig);\n     \n     myApp.config(function($interpolateProvider, $locationProvider) {\n        $interpolateProvider.startSymbol('{[{');\n        $interpolateProvider.endSymbol('}]}');\n        $locationProvider.html5Mode({\n          enabled: true,\n          requireBase: false\n        });\n     });\n  \n  \n     myApp.controller('RootCtrl', function($scope, $interpolate, $location) {\n       var vm = this;\n       vm.gridsterOptions = {\n          pushing: false,\n          \n          minRows: 1, // the minimum height of the grid, in rows\n          maxRows: 100,\n          columns: 5, // the width of the grid, in columns\n          colWidth: 'auto', // can be an integer or 'auto'.  'auto' uses the pixel width of the element divided by 'columns'\n          rowHeight: 'match', // can be an integer or 'match'.  Match uses the colWidth, giving you square widgets.\n          margins: [10, 10], // the pixel distance between each widget\n          defaultSizeX: 2, // the default width of a gridster item, if not specifed\n          defaultSizeY: 1, // the default height of a gridster item, if not specified\n          mobileBreakPoint: 1024, // if the screen is not wider that this, remove the grid layout and stack the items\n          minColumns: 1,\n          resizable: {\n            enabled: false\n          },\n          draggable: {\n             enabled: false\n          }\n       };\n       \n        vm.init = function() {\n          {{#each urlParams}}\n           \tconsole.log(&quot;{{this}}&quot;, $location.search()[&quot;{{this}}&quot;])\n            vm.{{this}} = $location.search()[&quot;{{this}}&quot;]\n          {{/each}}\n        }\n        {{#each items}}\n           \t{{#if this.formatFunction}}   \n                vm.{{this.formatFunction}} = function(data){\n                  {{{this.formatFunctionValue}}}\n                }\n           \t{{/if}} \n        {{/each}}\n     });\n        \t\n})();\n  \n&lt;/script&gt;\n\n    &lt;body&gt;\n      &lt;div ng-controller=&quot;RootCtrl as vm&quot; ng-init=&quot;vm.init();&quot;&gt; \n\t\t&lt;div gridster=&quot;vm.gridsterOptions&quot;&gt;\n          &lt;ul&gt;\n             {{#each items}}\n                &lt;li class=&quot;myItem&quot; gridster-item='{sizeX: {{sizeX}}, sizeY: {{sizeY}}, col: {{col}} , row: {{row}} }'&gt;\n                    &lt;div class=&quot;box&quot;&gt;\n                        &lt;div class=&quot;box-content&quot;&gt;\n                          &lt;div  style=&quot;height: 30px;&quot; tooltip-placement=&quot;bottom&quot; uib-tooltip=&quot;{{this.options.boxLabel}}&quot; class=&quot;box-label&quot;&gt;{{this.options.boxLabel}}&lt;/div&gt;\n                          &lt;div  style=&quot;height: calc(100% - 30px)&quot; &gt; &lt;{{type}}\n                           \t      {{#buildAttr this.options }}\n                                        {{this}}\n                                  {{/buildAttr}}\n                                  {{#if this.formatFunction}}   \n                                  \t\ton-format-data='vm.{{this.formatFunction}}'\n                                  {{/if}} \n                           &gt;&lt;/{{type}}&gt; &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/li&gt;\n             {{/each}}\n          &lt;/ul&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n  &lt;/body&gt;  \n&lt;/html&gt;<\/script>"),a.put("/UIComponents/dashboardBuilder/ide/dashboardTemplate_ide.min","<script type=text/x-handlebars-template id=handlebar-template>&lt;html ng-app=&quot;myApp&quot;&gt;\n&lt;head&gt;\n\n    &lt;link rel=&quot;icon&quot; href=&quot;data:;base64,iVBORw0KGgo=&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot; integrity=&quot;sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u&quot; crossorigin=&quot;anonymous&quot;&gt;\n    &lt;script src=&quot;//use.fontawesome.com/3d61d6959e.js&quot;&gt;&lt;/script&gt;\n\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;//{{{staticdomain}}}/lib/UIComponents/build/ide/css//components.min.css&quot;&gt;\n    \n    &lt;script src=&quot;//maps.google.com/maps/api/js?key=AIzaSyBcPYghFh_BXz4dDz-TXTHbU2iV3Wbf57I&amp;libraries=drawing,visualization&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;//{{{staticdomain}}}/lib/UIComponents/build/ide/js/template_resources.min.js&quot;&gt;&lt;/script&gt;\n    \n&lt;/head&gt; \n  \n&lt;script&gt;\n\n(function() {  \n   $.urlParam = function(name){\n\t     var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);\n\t     if (results==null){\n\t         return null;\n\t     }else{\n\t         return results[1] || 0;\n\t     }\n\t}\n\n\t$.getUrlVars = function() {\n\t\tvar vars = [], hash;\n\t\tvar hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&amp;');\n\t\tfor(var i = 0; i &lt; hashes.length; i++)\n\t\t{\n\t\t\thash = hashes[i].split('=');\n\t\t\tvars.push(hash[0]);\n\t\t\tvars[hash[0]] = hash[1];\n\t\t}\n\t\treturn vars;\n\t}\n\t  \n\n      \n    var underscore = angular.module('underscore', []);\n\t\tunderscore.factory('_', ['$window', function($window) {\t\t\n  \t\treturn $window._; // assumes underscore has already been loaded on the page\t\t\n\t}]);\n    \n\n    var wssConfig = [&quot;wsClientProvider&quot;,function (wsClientProvider) {\n   \t \twsClientProvider.setBaseUrl(&quot;wss://&quot; + window.location.host + &quot;/&quot;);   \t \n        wsClientProvider.setToken($.urlParam(&quot;auth_token&quot;));\n        wsClientProvider.setPublishChannel(&quot;{{{transport.publishChannel}}}&quot;);\n        wsClientProvider.setSubscribeChannel(&quot;{{{transport.subscribeChannel}}}&quot;);\n    }];\n\n    var httpsConfig = [&quot;httpClientProvider&quot;,function (httpClientProvider) {\n   \t  httpClientProvider.setBaseUrl(&quot;https://&quot; + window.location.host);\n      httpClientProvider.setToken($.urlParam(&quot;auth_token&quot;));\n    }]\n\n     var myApp= angular.module(&quot;myApp&quot;, [&quot;underscore&quot; , &quot;WsClient&quot;, &quot;HttpClient&quot;, &quot;Chart&quot;, 'gridster', 'ui.bootstrap', 'ngRoute', 'Gauge', 'Speedometer', 'Odometer', 'Message', 'Map', 'Grid', 'toggle-switch', 'Slider', 'Button', 'IFrame', 'Accelerometer', 'Thermometer'])\n     \n     angular.module('myApp').run(cachedTemplates);  \n      \n     angular.module('myApp').config(wssConfig);\n     angular.module('myApp').config(httpsConfig);\n     \n     myApp.config(function($interpolateProvider, $locationProvider) {\n        $interpolateProvider.startSymbol('{[{');\n        $interpolateProvider.endSymbol('}]}');\n        $locationProvider.html5Mode({\n          enabled: true,\n          requireBase: false\n        });\n     });\n  \n  \n     myApp.controller('RootCtrl', function($scope, $interpolate, $location) {\n       var vm = this;\n       vm.gridsterOptions = {\n          pushing: false,\n          \n          minRows: 1, // the minimum height of the grid, in rows\n          maxRows: 100,\n          columns: 5, // the width of the grid, in columns\n          colWidth: 'auto', // can be an integer or 'auto'.  'auto' uses the pixel width of the element divided by 'columns'\n          rowHeight: 'match', // can be an integer or 'match'.  Match uses the colWidth, giving you square widgets.\n          margins: [10, 10], // the pixel distance between each widget\n          defaultSizeX: 2, // the default width of a gridster item, if not specifed\n          defaultSizeY: 1, // the default height of a gridster item, if not specified\n          mobileBreakPoint: 1024, // if the screen is not wider that this, remove the grid layout and stack the items\n          minColumns: 1,\n          resizable: {\n            enabled: false\n          },\n          draggable: {\n             enabled: false\n          }\n       };\n       \n        vm.init = function() {\n          {{#each urlParams}}\n           \tconsole.log(&quot;{{this}}&quot;, $location.search()[&quot;{{this}}&quot;])\n            vm.{{this}} = $location.search()[&quot;{{this}}&quot;]\n          {{/each}}\n        }\n        {{#each items}}\n           \t{{#if this.formatFunction}}   \n                vm.{{this.formatFunction}} = function(data){\n                  {{this.formatFunctionValue}}\n                }\n           \t{{/if}} \n        {{/each}}\n     });\n        \t\n})();\n  \n&lt;/script&gt;\n\n    &lt;body&gt;\n      &lt;div ng-controller=&quot;RootCtrl as vm&quot; ng-init=&quot;vm.init();&quot;&gt; \n\t\t&lt;div gridster=&quot;vm.gridsterOptions&quot;&gt;\n          &lt;ul&gt;\n             {{#each items}}\n                &lt;li class=&quot;myItem&quot; gridster-item='{sizeX: {{sizeX}}, sizeY: {{sizeY}}, col: {{col}} , row: {{row}} }'&gt;\n                    &lt;div class=&quot;box&quot;&gt;\n                        &lt;div class=&quot;box-content&quot;&gt;\n                          &lt;div  style=&quot;height: 30px;&quot; tooltip-placement=&quot;bottom&quot; uib-tooltip=&quot;{{this.options.boxLabel}}&quot; class=&quot;box-label&quot;&gt;{{this.options.boxLabel}}&lt;/div&gt;\n                          &lt;div  style=&quot;height: calc(100% - 30px)&quot; &gt; &lt;{{type}}\n                           \t      {{#buildAttr this.options }}\n                                        {{this}}\n                                  {{/buildAttr}}\n                                  {{#if this.formatFunction}}   \n                                  \t\ton-format-data='vm.{{this.formatFunction}}'\n                                  {{/if}} \n                           &gt;&lt;/{{type}}&gt; &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/li&gt;\n             {{/each}}\n          &lt;/ul&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n  &lt;/body&gt;  \n&lt;/html&gt;<\/script>"),a.put("/UIComponents/dashboardBuilder/view/dashboardsList.html","<dashboards-list></dashboards-list>")}];angular.module("Chart",["angular.morris"]),angular.element(document).ready(function(){Morris.Donut.prototype.resizeHandler=function(){return this.timeoutId=null,this.el&&this.el.width()>0&&this.el.height()>0?(this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()):null},Morris.Donut.prototype.setData=function(a){var b;return this.data=a,this.values=function(){var a,c,d,e;for(d=this.data,e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(parseFloat(b.value));return e}.call(this),this.el&&this.el.width()>0&&this.el.height()>0?this.redraw():null}}),angular.module("Chart").component("scriptrChart",{bindings:{onLoad:"&onLoad",resize:"<?",data:"<?",type:"@",xkey:"@",ykeys:"<?",stacked:"<?",labels:"<?",colors:"<?",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&",lineWidth:"@",pointSize:"@",pointFillColors:"@",pointStrokeColors:"@",ymax:"@",ymin:"@",smooth:"@",hideHover:"@",parseTime:"@",units:"@",postUnits:"@",preUnits:"@",xlabels:"@",xlabelAngle:"<?",goals:"@",goalStrokeWidth:"@",goalLineColors:"@",events:"@",eventStrokeWidth:"@",eventLineColors:"@",continuousLine:"@",axes:"@",grid:"@",gridTextColor:"@",gridTextSize:"@",gridTextFamily:"@",gridTextWeight:"@",fillOpacity:"@",resize:"@",behaveLikeLine:"@",labelColor:"@",donutFormatter:"&",backgroundColor:"@",hoverCallback:"&?",dateFormat:"&?",xlabelFormat:"&?",ylabelFormat:"&?"},templateUrl:"/UIComponents/dashboard/frontend/components/chart/chart.html",controller:["httpClient","wsClient","$scope","$timeout",function(a,b,c,d){var e=this;this.$onInit=function(){void 0===this.api&&void 0===this.msgTag&&(this.data&&0==this.data.length||null==this.data)&&(this.noResults=!0),this.colors=this.colors?this.colors:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],this.stacked=!!this.stacked&&this.stacked,this.resize=!this.resize||this.resize,this.labelColor=this.labelColor?this.labelColor:"#eee",this.backgroundColor=this.backgroundColor?this.backgroundColor:"#fff",this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,console.log(this.type,this.xlabelAngle)},this.$postLink=function(){f(this.transport),this.data&&!this.api?(e.timeout=!1,d(function(){e.consumeData(e.data)},2e3)):e.timeout=!0,c.$watch(function(a){if(a.$ctrl.data&&1==e.timeout)return a.$ctrl.data},function(a){a&&(e.datas=a,e.noResults=!1)})},this.$onDestroy=function(){console.log("destory chart",e.msgTag,c.$id),e.msgTag&&b.unsubscribe(e.msgTag,null,c.$id)};var f=function(d){"wss"==d?b.onReady.then(function(){e.msgTag&&b.subscribe(e.msgTag,e.consumeData.bind(e),c.$id),e.api&&b.call(e.api,e.apiParams,e.msgTag).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a),e.consumeData()})}):"https"==d&&e.api&&a.get(e.api,e.apiParams).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a),e.consumeData()})};this.consumeData=function(a,b){e.timeout=!0,"function"==typeof e.onFormatData()&&(a=e.onFormatData()(a)),a&&a.length>0&&"object"==typeof a?(this.datas=a,this.noResults=!1):(this.datas=[],this.noResults=!0)}}]}),angular.module("Odometer",["ui.odometer"]),angular.module("Odometer").component("scriptrOdometer",{bindings:{onLoad:"&onLoad",api:"@",enableResize:"<?",theme:"@",duration:"@",animation:"@",transport:"@",odometerValue:"<?",data:"<?",msgTag:"@",apiParams:"<?",size:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/odometer/odometer.html",controller:["$scope","httpClient","wsClient","$element","$window","$timeout",function(a,b,c,d,e,f){var g=this;this.$onInit=function(){this.config={duration:this.duration?this.duration:1e3,animation:this.animation?this.animation:"count",theme:this.theme?this.theme:"car"},this.odometerOptions=this.config,this.odometerValue=this.odometerValue?this.odometerValue:this.data?this.data:0,this.size=this.size?this.size:1,this.enableResize=void 0===this.enableResize||this.enableResize,this.style={},this.style["font-size"]=this.size+"em",angular.element(e).on("resize",function(){return null!=g.timeoutId&&f.cancel(g.timeoutId),g.timeoutId=f(g.resize,100)}),this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,h(this.transport)},g.resize=function(){g.timeoutId=null,g.enableResize&&(g.style["margin-top"]=d.parent().outerHeight(!0)/2-d.outerHeight(!0)/2)},this.$postLink=function(){f(g.resize,100),null!=g.timeoutId&&f.cancel(g.timeoutId),g.timeoutId=f(g.resize,100)},this.$onDestroy=function(){angular.element(e).off("resize"),g.msgTag&&c.unsubscribe(g.msgTag,null,a.$id),console.log("destory odometer")};var h=function(d){"wss"==d?c.onReady.then(function(){g.msgTag&&c.subscribe(g.msgTag,g.consumeData.bind(g),a.$id),g.api&&c.call(g.api,g.apiParams,g.msgTag).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a),g.consumeData()})}):"https"==d&&g.api&&b.get(g.api,g.apiParams).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof g.onFormatData()&&(a=g.onFormatData()(a)),this.odometerValue=a}}]}),angular.module("Speedometer",["meterGauge"]),angular.module("Speedometer").component("scriptrSpeedometer",{bindings:{onLoad:"&onLoad",gaugeRadius:"<?",theme:"@",minValue:"<?",maxValue:"<?",needleVal:"<?",data:"<?",tickSpaceMinVal:"<?",tickSpaceMajVal:"<?",gaugeUnits:"@",tickColMaj:"@",tickColMin:"@",outerEdgeCol:"@",pivotCol:"@",innerCol:"@",unitsLabelCol:"@",tickLabelCol:"@",needleCol:"@",defaultFonts:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/speedometer/speedometer.html",controller:["httpClient","wsClient","$element","$window","$scope","$compile","$timeout",function(a,b,c,d,e,f,g){var h=this;this.$onInit=function(){this.speedoConfig={},"speed"==this.theme||void 0===this.theme?(this.speedoConfig.gaugeRadius=this.gaugeRadius?this.gaugeRadius:150,this.speedoConfig.minVal=this.minValue?this.minValue:0,this.speedoConfig.maxVal=this.maxValue?this.maxValue:220,this.speedoConfig.needleVal=this.needleVal?Math.round(this.needleVal):this.data?Math.round(this.data):0,this.speedoConfig.tickSpaceMinVal=this.tickSpaceMinVal?this.tickSpaceMinVal:10,this.speedoConfig.tickSpaceMajVal=this.tickSpaceMajVal?this.tickSpaceMajVal:20,this.speedoConfig.gaugeUnits=this.gaugeUnits?this.gaugeUnits:"kmh",this.speedoConfig.tickColMaj=this.tickColMaj?this.tickColMaj:"#C64DFF",this.speedoConfig.tickColMin=this.tickColMin?this.tickColMin:"#999999",this.speedoConfig.outerEdgeCol=this.outerEdgeCol?this.outerEdgeCol:"#f4f4f4",this.speedoConfig.pivotCol=this.pivotCol?this.pivotCol:"#434a54",this.speedoConfig.innerCol=this.innerCol?this.innerCol:"#ffffff",this.speedoConfig.unitsLabelCol=this.unitsLabelCol?this.unitsLabelCol:"#C64DFF",this.speedoConfig.tickLabelCol=this.tickLabelCol?this.tickLabelCol:"#656D78",this.speedoConfig.needleCol=this.needleCol?this.needleCol:"#C64DFF",this.speedoConfig.defaultFonts=this.defaultFonts?this.defaultFonts:""):"rpm"==this.theme&&(this.speedoConfig.gaugeRadius=this.gaugeRadius?this.gaugeRadius:120,this.speedoConfig.minVal=this.minValue?this.minValue:0,this.speedoConfig.maxVal=this.maxValue?this.maxValue:1e3,this.speedoConfig.needleVal=this.needleVal?Math.round(this.needleVal):this.data?Math.round(this.data):0,this.speedoConfig.tickSpaceMinVal=this.tickSpaceMinVal?this.tickSpaceMinVal:10,this.speedoConfig.tickSpaceMajVal=this.tickSpaceMajVal?this.tickSpaceMajVal:100,this.speedoConfig.gaugeUnits=this.gaugeUnits?this.gaugeUnits:"kmh",this.speedoConfig.tickColMaj=this.tickColMaj?this.tickColMaj:"#0194D9",this.speedoConfig.tickColMin=this.tickColMin?this.tickColMin:"#999999",this.speedoConfig.outerEdgeCol=this.outerEdgeCol?this.outerEdgeCol:"#ffffff",this.speedoConfig.pivotCol=this.pivotCol?this.pivotCol:"#434A54",this.speedoConfig.innerCol=this.innerCol?this.innerCol:"#ffffff",this.speedoConfig.unitsLabelCol=this.unitsLabelCol?this.unitsLabelCol:"#0194d9",this.speedoConfig.tickLabelCol=this.tickLabelCol?this.tickLabelCol:"#656D78",this.speedoConfig.needleCol=this.needleCol?this.needleCol:"#0194d9",this.speedoConfig.defaultFonts=this.defaultFonts?this.defaultFonts:""),this.speedoConfig.speedoTag=e.$id,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null},this.calculateGaugeRadius=function(){h.timeoutId=null;var a=c.parent().height(),b=c.parent().width();h.speedoConfig.gaugeRadius=0==a?b/2:b>=a?a/2:b/2},this.$postLink=function(){g(function(){console.log("Calc"),h.gaugeRadius||(h.calculateGaugeRadius(),console.log("Gauge Size",h.speedoConfig.gaugeRadius),angular.element(d).on("resize",function(){null!=h.timeoutId&&g.cancel(h.timeoutId),h.timeoutId=g(h.calculateGaugeRadius,100)})),h.renderGauge(),e.$watch(function(a){return a.$ctrl.needleVal&&(h.speedoConfig.needleVal=a.$ctrl.needleVal),JSON.stringify(h.speedoConfig)},function(a){h.renderGauge()}),i(h.transport)},500)},this.$onDestroy=function(){this.gaugeRadius||angular.element(d).off("resize"),h.msgTag&&b.unsubscribe(h.msgTag,null,e.$id),console.log("destory speedo")},this.renderGauge=function(){angular.element(c).html(""),this.speedo=angular.element(document.createElement("meter-gauge")),this.speedo.attr("gaugeconfig",JSON.stringify(this.speedoConfig));var a=f(this.speedo)(e);angular.element(c).append(a)};var i=function(c){console.log("Gauge Size",h.speedoConfig.gaugeRadius),"wss"==c?b.onReady.then(function(){h.msgTag&&b.subscribe(h.msgTag,h.consumeData.bind(h),e.$id),h.api&&b.call(h.api,h.apiParams,h.msgTag).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a),h.consumeData()})}):"https"==c&&h.api&&a.get(h.api,h.apiParams).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof h.onFormatData()&&(a=h.onFormatData()(a)),a=parseInt(a),a="number"==typeof a&&"NaN"!=a.toString()?a:0,this.speedoConfig.needleVal=Math.round(a)}}]}),angular.module("SearchBox",["angularBootstrapNavTree"]).component("scriptrSearchbox",{bindings:{treeControl:"<?",treeData:"<?",searchText:"@",iconLeaf:"@",paramName:"@",iconExpand:"@",iconCollapse:"@",onSelect:"&onSelect",expandLevel:"@",initialSelection:"@",apiParams:"<?",loadTree:"<?",treeSearchCriteria:"@",transport:"@",api:"@",onFormatData:"&",childrenTag:"@",labelTag:"@",widgetsConfig:"<?"},templateUrl:"/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",controller:["wsClient","httpClient","$timeout",function(a,b,c){var d=this;this.iconExpand=this.iconExpand?this.iconExpand:null,this.$onInit=function(){this.iconLeaf=this.iconLeaf&&"$ctrl.iconLeaf"!=this.iconLeaf?this.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",
this.iconExpand=this.iconExpand&&"$ctrl.iconExpand"!=this.iconExpand?this.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus",this.iconCollapse=this.iconCollapse&&"$ctrl.iconCollapse"!=this.iconCollapse?this.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",this.paramName=this.paramName?this.paramName:"criteria",this.searchText=this.searchText?this.searchText:"Type to search",this.treeData=this.treeData?this.treeData:[],this.iconLeaf=this.iconLeaf?this.iconLeaf:null,this.transport=this.transport?this.transport:"wss",this.loadTree&&(this.searching=!0,e(this.transport))},this.onFilterChanged=function(){if(null!=this.searchValue&&""!=this.searchValue){this.searching=!0;for(var a=angular.copy(this.originalData),b=[],c=0;c<a.length;c++){var d=a[c],e=d.sensors;if(-1==d.label.toLowerCase().indexOf(this.searchValue.toLowerCase())){for(var f=!1,g=[],h=0;h<e.length;h++){-1==e[h].label.toLowerCase().indexOf(this.searchValue.toLowerCase())?g.push(h):f=!0}for(var i=g.length-1,h=i;h>=0;h--)e.splice(g[h],1);f||b.push(c)}}for(var i=b.length-1,c=i;c>=0;c--)a.splice(b[c],1)}else a=angular.copy(this.originalData);this.consumeData(a,null,!0)};var e=function(c){var e={};if(d.apiParams)for(var f in d.apiParams)e[f]=d.apiParams[f];"wss"==c?a.onReady.then(function(){a.subscribe(d.msgTag,d.consumeData.bind(d)),d.api&&a.call(d.api,e,d.msgTag).then(function(a,b){d.consumeData(a)},function(a){console.log("reject published promise",a),d.consumeData()})}):"https"==c&&d.api&&b.get(d.api,e).then(function(a,b){},function(a){d.consumeData(),console.log("reject published promise",a)})};this.consumeData=function(a,b,c){if("function"==typeof d.onFormatData()&&(a=d.onFormatData()(a)),!c&&a&&"string"!=typeof a){window.localStorage.setItem("dataStream",angular.copy(JSON.stringify(a.dataStream))),window.localStorage.setItem("dataMapping",angular.copy(JSON.stringify(a.dataMapping))),a=a.dataStream;for(var e=d.widgetsConfig,f={},g=0;g<e.length;g++)f[e[g].name]=e[g];for(var h=0;h<a.length;h++)if(a[h].sensors)for(var i=0;i<a[h].sensors.length;i++){var j=a[h].sensors[i].sectionData;a[h].sensors[i].sectionData=angular.copy(f[j]),a[h].sensors[i].sectionData.selectedStreamLabel=angular.copy(a[h].sensors[i].label),a[h].sensors[i].sectionData.selectedStreamValue=angular.copy(a[h].sensors[i].serial_number+a[h].sensors[i].channel_number+a[h].sensors[i].data_type_id),f[j].imgSrc&&(a[h].sensors[i].imgSrc=f[j].imgSrc)}}console.log("display tree"),window.localStorage.getItem("streamData",a),"object"==typeof a&&a.length>0?(this.treeData=a,this.noResults=!1):(this.treeData=[],this.noResults=!0),this.originalData||(this.originalData=angular.copy(this.treeData)),this.searching=!1}}]}),angular.module("Gauge",["frapontillo.gage"]),angular.module("Gauge").component("scriptrGauge",{bindings:{onLoad:"&onLoad",api:"@",transport:"@",msgTag:"@",apiParams:"<?",valueFontColor:"@",min:"@",max:"@",hideMinMax:"@",hideValue:"@",showInnerShadow:"<?",gaugeColor:"@",gaugeValue:"<?",data:"<?",customSectors:"<?",shadowSize:"@",shadowOpacity:"@",label:"@",labelFontColor:"@",startAnimationType:"@",refreshAnimationType:"@",valueFontFamily:"@",relativeGaugeSize:"@",valueMinFontSize:"@",hideMinMax:"@",labelMinFontSize:"@",minLabelMinFontSize:"@",maxLabelMinFontSize:"@",gaugeWidthScale:"@",shadowVerticalOffset:"@",levelColors:"@",noGradient:"@",startAnimationTime:"@",refreshAnimationTime:"@",donut:"@",donutStartAngle:"@",reverse:"@",decimals:"@",symbol:"@",formatNumber:"@",humanFriendly:"@",humanFriendlyDecimal:"@",textRenderer:"&",onAnimationEnd:"&",pointer:"<?",onFormatData:"&",heightUnit:"@",counter:"@",width:"@",height:"@"},templateUrl:"/UIComponents/dashboard/frontend/components/gauge/gauge.html",controller:["$scope","httpClient","wsClient",function(a,b,c){var d=this;this.$onInit=function(){this.gaugeValue=this.gaugeValue?this.gaugeValue:this.data?this.data:0,this.heightUnit=this.heightUnit?this.heightUnit:"px",this.customSectors=this.customSectors?this.customSectors:{percents:!0,ranges:[{color:"#A3CD3B",lo:0,hi:25},{color:"#FF4A43",lo:25,hi:100}]},this.valueFontColor=this.valueFontColor?this.valueFontColor:"#999",this.min=this.min?this.min:0,this.max=this.max?this.max:100,this.hideMinMax=!!this.hideMinMax&&this.hideMinMax,this.hideValue=!!this.hideValue&&this.hideValue,this.gaugeColor=this.gaugeColor?this.gaugeColor:"#e9e9e9",this.shadowSize=this.shadowSize?this.shadowSize:0,this.label=this.label?this.label:"",this.labelFontColor=this.labelFontColor?this.labelFontColor:"#666",this.startAnimationType=this.startAnimationType?this.startAnimationType:"linear",this.refreshAnimationType=this.refreshAnimationType?this.refreshAnimationType:"linear",this.counter=!this.counter||this.counter,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,e(this.transport)},this.$onDestroy=function(){console.log("destory gauge"),d.msgTag&&c.unsubscribe(d.msgTag,null,a.$id)};var e=function(e){"wss"==e?c.onReady.then(function(){d.msgTag&&c.subscribe(d.msgTag,d.consumeData.bind(d),a.$id),d.api&&c.call(d.api,d.apiParams,d.msgTag).then(function(a,b){d.consumeData(a)},function(a){console.log("reject published promise",a),d.consumeData()})}):"https"==e&&d.api&&b.get(d.api,d.apiParams).then(function(a,b){d.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),a=parseInt(a),a="number"==typeof a&&"NaN"!=a.toString()?a:0,this.gaugeValue=a}}]}),angular.module("angular-scriptrui",[]).directive("ngDisplayBox",function(){return{restrict:"E",require:"ngModel",scope:{msg:"=ngModel",type:"@"},template:'<div class="alert alert-{{type}}" role="alert"><span ng-bind="msg"></span></div>',replace:!0}}),angular.module("Message",["angular-scriptrui"]),angular.module("Message").component("scriptrDisplaybox",{bindings:{data:"@",type:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/message/message.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.data=this.data?this.data:"Waiting for info...",this.type=this.type?this.type:"info"},this.$postLink=function(){d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),"object"==typeof a&&(a&&a.data&&"string"==typeof a.data&&(this.data=a.data),a&&a.type&&(this.type=a.type)),"string"==typeof a&&(this.data=a)}}]}),angular.module("Display",[]),angular.module("Display").component("scriptrDisplaycount",{bindings:{widgetLayout:"@",data:"@",message:"@",borderSize:"@",borderColor:"@",numberFontFamily:"@",numberFontSize:"@",numberCellSize:"@",numberFontWeight:"@",numberTextColor:"@",numberBackgroundColor:"@",numberTextAlignment:"@",messageFontFamily:"@",messageFontSize:"@",messageFontWeight:"@",messageTextColor:"@",messageBackgroundColor:"@",messageTextAlignment:"@",api:"@",enableResize:"<?",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/displayCount/displayCount.html",controller:["$scope","httpClient","wsClient","$element","$window","$timeout",function(a,b,c,d,e,f){var g=this;this.$onInit=function(){this.widgetLayout="vertical"==this.widgetLayout?this.widgetLayout:"horizontal",this.data=this.data?isNaN(this.data)?"0":this.data:"0",this.message=this.message?this.message:"Items",this.borderSize=this.borderSize?this.borderSize:"1",this.numberCellSize=this.numberCellSize?this.numberCellSize:"",this.borderColor=this.borderColor?this.borderColor:"#d7d7d7",this.numberFontFamily=this.numberFontFamily?this.numberFontFamily:"Arial",this.numberFontSize=this.numberFontSize?this.numberFontSize:"42",this.numberFontWeight=this.numberFontWeight?this.numberFontWeight:"600",this.numberTextColor=this.numberTextColor?this.numberTextColor:"#ffffff",this.numberTextAlignment=this.numberTextAlignment?this.numberTextAlignment:"center",this.numberBackgroundColor=this.numberBackgroundColor?this.numberBackgroundColor:"#3a87ad",this.messageFontFamily=this.messageFontFamily?this.messageFontFamily:"Arial",this.messageFontSize=this.messageFontSize?this.messageFontSize:"18",this.messageFontWeight=this.messageFontWeight?this.messageFontWeight:"600",this.messageTextColor=this.messageTextColor?this.messageTextColor:"#686868",this.messageBackgroundColor=this.messageBackgroundColor?this.messageBackgroundColor:"white",this.messageTextAlignment=this.messageTextAlignment?this.messageTextAlignment:"center",this.enableResize=void 0===this.enableResize||this.enableResize,angular.element(e).on("resize",function(){return null!=g.timeoutId&&f.cancel(g.timeoutId),g.timeoutId=f(g.resize,100)}),this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,this.style={},h(this.transport)},g.resize=function(){g.timeoutId=null,g.enableResize&&(g.style["margin-top"]=d.parent().outerHeight(!0)/2-d.outerHeight(!0)/2)},this.$postLink=function(){f(g.resize,100),null!=g.timeoutId&&f.cancel(g.timeoutId),g.timeoutId=f(g.resize,100),h(this.transport)};var h=function(a){"wss"==a?c.onReady.then(function(){c.subscribe(g.msgTag,g.consumeData.bind(g)),g.api&&c.call(g.api,g.apiParams,g.msgTag).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a)})}):"https"==a&&g.api&&b.get(g.api,g.apiParams).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof g.onFormatData()&&(a=g.onFormatData()(a)),this.data=a,"object"==typeof a&&a&&a.data&&"string"==typeof a.data&&(this.data=a.data),"string"==typeof a&&(this.data=a)}}]}),angular.module("Thermometer",["angularThermometer"]),angular.module("Thermometer").component("scriptrThermometer",{bindings:{onLoad:"&onLoad",api:"@",value:"<?",data:"<?",step:"<?",customSectors:"<?",outOfRangeColor:"@",ticks:"<?",percent:"@",unit:"@",height:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/thermometer/thermometer.html",controller:["$scope","$window","$element","$timeout","httpClient","wsClient","_",function(a,b,c,d,e,f,g){var h=this;this.$onInit=function(){this.outOfRangeColor=this.outOfRangeColor?this.outOfRangeColor:"#5fc100",this.value=this.value?this.value>100?100:this.value:this.data?this.data:0,this.unit=this.unit?this.unit:"°C",this.height=this.height?this.height:"100",this.customSectors&&(this.customSectors=g.reject(this.customSectors,g.isEmpty)),this.customSectors=this.customSectors&&this.customSectors.length>0?this.customSectors:[{color:"#005588",lo:0,hi:30},{color:"#aa241d",lo:30,hi:60},{color:"#ffa500",lo:60,hi:90}],this.mercuryColor=this.evaluateColor(this.value),this.step=this.step?this.step:"30";var a=this.getLowestTick(),c=this.getHighestTick(),e=parseInt(a);for(this.sectors=[],this.sectors.push(e);e<c;)e+=parseInt(this.step),this.sectors.push(e);this.sectors=this.sectors?this.sectors:[0,30,60,90],this.mercuryMax=g.max(this.sectors),this.minSectorValue=g.min(this.sectors),this.ticks=[];for(var f=0;f<this.sectors.length;f++){var j={};j.tick=this.sectors[f],j.percent=(this.sectors[f]-this.minSectorValue)*this.height/(this.mercuryMax-this.minSectorValue),this.ticks.push(j)}this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,this.style={},angular.element(b).on("resize",function(){return null!=h.timeoutId&&d.cancel(h.timeoutId),h.timeoutId=d(h.resize,500)}),i(this.transport)},h.resize=function(){h.timeoutId=null,h.style["margin-top"]=10,h.style["margin-left"]=c.parent().outerWidth(!0)/2-50},this.$postLink=function(){d(h.resize,100),null!=h.timeoutId&&d.cancel(h.timeoutId),h.timeoutId=d(h.resize,100),a.$watch(function(a){return a.$ctrl.value},function(b){!isNaN(parseFloat(b))&&isFinite(b)&&(b=b>a.$ctrl.mercuryMax?a.$ctrl.mercuryMax:b,h.percent=parseInt((b-a.$ctrl.minSectorValue)*a.$ctrl.height/(a.$ctrl.mercuryMax-a.$ctrl.minSectorValue)))})},this.$onDestroy=function(){console.log("destory Thermometer"),h.msgTag&&f.unsubscribe(h.msgTag,null,a.$id)};var i=function(b){"wss"==b?f.onReady.then(function(){h.msgTag&&f.subscribe(h.msgTag,h.consumeData.bind(h),a.$id),h.api&&f.call(h.api,h.apiParams,h.msgTag).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a),h.consumeData()})}):"https"==b&&h.api&&e.get(h.api,h.apiParams).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),this.value=parseInt(a),this.mercuryColor=this.evaluateColor(a)},this.evaluateColor=function(a){var b=h.outOfRangeColor;return g.some(h.customSectors,function(c){if(c.lo<=a&&a<=c.hi)return b=c.color,!0}),b},this.getLowestTick=function(){return g.min(g.pluck(this.customSectors,"lo"))},this.getHighestTick=function(){return g.max(g.pluck(this.customSectors,"hi"))}}]}),agGrid.initialiseAgGridWithAngular1(angular),angular.module("Grid",["agGrid","ui.bootstrap"]),angular.module("Grid").component("scriptrGrid",{bindings:{onLoad:"&onLoad",columnsDefinition:"<columnsDefinition",rowHeight:"<?",enableServerSideSorting:"<?",enableServerSideFilter:"<?",refreshOnEdit:"<?",enableColResize:"<?",pagination:"@",enableDeleteRow:"<?",fixedHeight:"<?",enableAddRow:"<?",cellEditable:"<?",enableClientSideSorting:"<?",api:"@",onInsertRowScript:"@",onDeleteRowScript:"@",transport:"@",enableClientSideFilter:"<?",rowModelType:"@",rowModelSelection:"@",rowDeselection:"<?",onSelectionChanged:"&?",rowData:"<?",suppressFilter:"<?",gridHeight:"@",paginationPageSize:"<?",paginationOverflowSize:"<?",maxConcurrentDatasourceRequests:"<?",paginationInitialRowCount:"<?",maxPagesInCache:"<?",apiParams:"<?",deleteParams:"<?",addParams:"<?",editParams:"<?",onFormatData:"&",onCellValueChanged:"&",onCellClicked:"&",msgTag:"@",class:"@",defaultCellRenderer:"&",onGridReady:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/grid/grid.html",controller:["$scope","$window","$uibModal","$timeout","wsClient","dataService",function(a,b,c,d,e,f){var g=this;g.broadcastData=null,this.dataSource={getRows:function(a){if(null!=g.broadcastData){if(null!=g.broadcastData.api)var b=g.broadcastData.api;else var b=g.api;if(null!=g.broadcastData.params&&(g.apiParams=g.broadcastData.params),null!=g.broadcastData.transport)var c=g.broadcastData.transport;else var c=g.transport}else var b=g.api,c=g.transport;var d=g.buildParams(a),e=null;"function"==typeof g.onFormatData()&&(e=function(a){return g.onFormatData()(a)}),f.getGridData(b,d,c,e).then(function(b,c){if(b&&b.documents){var d=b.documents,e=parseInt(b.count),f=g.cleanRows(d);if(a.successCallback(f,e),g.gridOptions.api.sizeColumnsToFit(),null==f||0==f.length){g.gridOptions.api.showNoRowsOverlay();angular.element(document.querySelector("#btNext")).attr("disabled","true")}else g.gridOptions.api.hideOverlay()}else a.failCallback(),g.gridOptions.api.showNoRowsOverlay()},function(a){console.log("reject",a)})}},this.$onDestroy=function(){g.msgTag&&e.unsubscribe(g.msgTag,null,a.$id),console.log("destory Grid")},this.cleanRows=function(a){Array.isArray(a)||(a=[a]);for(var b=!1,c=0;c<a.length;c++)for(row in a[c])if("key"!=row){b=!1;for(var d=0;d<g.gridOptions.columnDefs.length;d++)if(row==g.gridOptions.columnDefs[d].field){b=!0;break}b||delete a[c][row]}return a},this._createNewDatasource=function(){this.gridOptions.api.setDatasource(this.dataSource)},this.setGridPaginationIcons=function(){$("button[ref=btPrevious]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/previous.png" />'),$("button[ref=btFirst]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/first.png" />'),$("button[ref=btNext]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/next.png" />'),$("button[ref=btLast]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/last.png" />')},this.$onInit=function(){this.gridOptions={unSortIcon:!0,icons:{sortAscending:'<i class="fa fa-sort-up" aria-hidden="true"></i>',sortDescending:'<i class="fa fa-sort-desc" aria-hidden="true"></i>',sortUnSort:'<span class="unsort-state"><i class="fa fa-angle-up" aria-hidden="true"></i><i class="fa fa-angle-down" aria-hidden="true"></i></span>'},domLayout:"autoHeight",angularCompileRows:!0,rowHeight:this.rowHeight?this.rowHeight:25,enableSorting:void 0===this.enableClientSideSorting||this.enableClientSideSorting,enableServerSideSorting:void 0===this.enableServerSideSorting||this.enableServerSideSorting,enableServerSideFilter:void 0===this.enableServerSideFilter||this.enableServerSideFilter,enableColResize:void 0!==this.enableColResize&&this.enableColResize,enableFilter:!0,columnDefs:this.columnsDefinition,editType:"fullRow",pagination:void 0!==this.pagination&&this.pagination,cacheBlockSize:this.paginationPageSize?this.paginationPageSize:50,rowData:this.rowData?this.rowData:null,rowModelType:this.api?"infinite":"",rowSelection:this.rowModelSelection?this.rowModelSelection:"multiple",paginationPageSize:this.paginationPageSize?this.paginationPageSize:50,overlayLoadingTemplate:'<span class="ag-overlay-loading-center"><i class="fa fa-spinner fa-spin fa-fw fa-2x"></i> Please wait while your rows are loading</span>',defaultColDef:{filterParams:{apply:!0},suppressFilter:void 0!==this.suppressFilter&&this.suppressFilter,editable:void 0===this.cellEditable||this.cellEditable,cellRenderer:"function"==typeof this.defaultCellRenderer()?this.defaultCellRenderer():null},onSelectionChanged:function(){if(null!=g.onSelectionChanged&&"function"==typeof g.onSelectionChanged())return g.onSelectionChanged()(g.gridOptions,g.gridApi)},onCellClicked:function(){if(null!=g.onCellClicked&&"function"==typeof g.onCellClicked())return g.onCellClicked()(g.gridOptions,g.gridApi)},onRowValueChanged:function(a){g.cellEditable&&(null!=g.onCellValueChanged&&"function"==typeof g.onCellValueChanged()&&g.onCellValueChanged()(g.gridOptions),"infinite"==g.gridOptions.rowModelType&&(g.api?(g.gridOptions.api.showLoadingOverlay(),g._saveData(a)):(g.undoChanges(),g.showAlert("danger","No script defined for cell edit"))))},onGridReady:function(a){if(console.log("the grid is now ready"),d(function(){g.gridOptions.api=a.api,g.gridApi=a.api},3e3),"function"==typeof g.onGridReady()&&g.onGridReady()(g),a.api.filterManager.availableFilters.text.CONTAINS="startsWith",void 0===g.rowData||null==g.rowData||g.rowData&&0==g.rowData.length?g.api?g._createNewDatasource():a.api.setRowData([]):a.api.sizeColumnsToFit(),this.columnsDefinition)for(var b=0;b<this.columnsDefinition.length;b++)this.columnsDefinition[b].hasOwnProperty("type")&&"numeric"==this.columnsDefinition[b].type&&(this.columnsDefinition[b].filter="number");g.setGridPaginationIcons()},onGridSizeChanged:function(a){g.gridOptions.api.sizeColumnsToFit()}},this.fixedHeight=void 0===this.fixedHeight||this.fixedHeight,this.style={},this.fixedHeight&&(this.gridHeight=this.gridHeight?this.gridHeight:"500",this.style.clear="left",this.style.width="100%"),this.refreshOnEdit=void 0!==this.refreshOnEdit&&this.refreshOnEdit,this.transport=this.transport?this.transport:"wss",this.enableDeleteRow=1!=this.enableDeleteRow,this.enableAddRow=1!=this.enableAddRow,this.mode="infinite"==this.gridOptions.rowModelType?"infinite":"normal",g.msgTag&&f.subscribe(this.onServerCall,g.msgTag,a),a.$on("updateGridData",function(a,b){g.broadcastData=b,g._createNewDatasource()})},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){g.message={type:a,content:b},g.showError=!0,d(function(){g.showError=!1},5e3)},this._saveData=function(a){if(a.data&&a.data.key){var b=a.data;if(b.action="edit",this.editParams)for(var c in this.editParams)b[c]=this.editParams[c];f.gridHelper(g.api,b).then(function(a,b){g.gridOptions.api.hideOverlay(),!a||"success"!=a.result&&"success"!=a.status?(g.undoChanges(),a&&a.errorDetail?g.showAlert("danger",a.errorDetail):g.showAlert("danger","An error has occured")):g.refreshOnEdit&&g.onServerCall(a)},function(a){g.gridOptions.api.hideOverlay(),console.log("reject",a),g.showAlert("danger","An error has occured")})}else{var b=a.data;if(b.action="add",this.addParams)for(var c in this.addParams)b[c]=this.addParams[c];f.gridHelper(g.api,a.data).then(function(a,b){g.gridOptions.api.hideOverlay(),!a||"success"!=a.result&&"success"!=a.status?(g.undoChanges(),a&&a.errorDetail?g.showAlert("danger",a.errorDetail):g.showAlert("danger","An error has occured")):g.refreshOnEdit&&g.onServerCall(a)},function(a){g.gridOptions.api.hideOverlay(),console.log("reject",a),g.showAlert("danger","An error has occured")})}},this.onAddRow=function(){for(var a={},b=0;b<g.gridOptions.columnDefs.length;b++)a[g.gridOptions.columnDefs[b].field]="";g.gridOptions.api.insertItemsAtIndex(0,[a]),g.gridOptions.api.setFocusedCell(0,g.gridOptions.columnDefs[0].field),g.gridOptions.api.startEditingCell({rowIndex:0,colKey:g.gridOptions.columnDefs[0].field,charPress:g.gridOptions.columnDefs[0].field})},this.openConfirmationPopUp=function(){if(g.gridOptions.api.getSelectedNodes().length>0){c.open({animation:!0,component:"deleteConfirmation",size:"md",resolve:{grid:function(){return g}}})}},this.onRemoveRow=function(a){if("infinite"==g.gridOptions.rowModelType)if(g.api){for(var b=g.gridOptions.api.getSelectedNodes(),c=[],d=0;d<b.length;d++)c.push(b[d].data.key);if(c.length>0){g.gridOptions.api.showLoadingOverlay();var e={keys:c,action:"delete"};if(this.deleteParams)for(var a in this.deleteParams)e[a]=this.deleteParams[a];f.gridHelper(g.api,e).then(function(a,b){g.gridOptions.api.hideOverlay(),!a||"success"!=a.result&&"success"!=a.status?a&&a.errorDetail?g.showAlert("danger",a.errorDetail):g.showAlert("danger","An error has occured"):g.onServerCall(a)},function(a){g.gridOptions.api.hideOverlay(),console.log("reject",a),g.showAlert("danger","An error has occured")})}}else g.showAlert("danger","No script defined for delete row");else{var b=g.gridOptions.api.getSelectedNodes();g.gridOptions.api.removeItems(b)}},this.onServerCall=function(a){g.gridOptions.api.refreshInfiniteCache()},this.undoChanges=function(a){if(g.oldEditedValue){g.gridOptions.api.forEachNode(function(a){a.childIndex!=g.editedChildIndex&&a.id!=g.editedChildIndex||a.setSelected(!0,!0)});g.gridOptions.api.getSelectedNodes()[0].data[g.editedColumn]=g.oldEditedValue,g.gridOptions.api.refreshView()}else g.gridOptions.api.refreshInfiniteCache()},this.onFilterChanged=function(){this.gridOptions.enableServerSideFilter=!1,this.gridOptions.api.setQuickFilter(this.quickFilterValue),this.gridOptions.enableServerSideFilter=!0},this.onServerFilterChanged=function(){g._createNewDatasource()},this.buildParams=function(a){var b=g.serverFilterText,c=null,d=a.endRow/this.gridOptions.paginationPageSize;if(a.sortModel&&a.sortModel.length>0){var e=a.sortModel[0].sort,f=a.sortModel[0].colId;c=this.gridOptions.api.getColumnDef(f).type?this.gridOptions.api.getColumnDef(f).type:null}if(a.filterModel)for(p in a.filterModel){b=a.filterModel[p].filter;var h=a.filterModel[p].type,i=p;c=this.gridOptions.api.getColumnDef(i).type?this.gridOptions.api.getColumnDef(i).type:null}var j={resultsPerPage:this.gridOptions.paginationPageSize,pageNumber:d};if(f&&(j.sortingColumnName=f),i&&(j.filterColumnName=i),e&&(j.sort=e),c&&(j.sortType=c),b&&(j.queryFilter=b),h&&(j.queryType=h),j.startRow=a.startRow,j.endRow=a.endRow,this.apiParams)for(var k in this.apiParams)j[k]=this.apiParams[k];return j}}]}),angular.module("Grid").service("dataService",["httpClient","wsClient","$q",function(a,b,c){this.subscribe=function(a,c,d){b.onReady.then(function(){b.subscribe(c,a.bind(self),d.$id)})},this.gridHelper=function(b,d){var e=c.defer();return a.get(b,d,"grid").then(function(a,b){e.resolve(a,b)},function(a){e.reject(a)}),e.promise},this.getGridData=function(d,e,f,g){var h=c.defer();return"https"==f?(a.get(d,e).then(function(a,b){if(g&&(a=g(a)),a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)}),h.promise):"wss"==f?d&&void 0!==d?(b.onReady.then(function(){b.call(d,e,"grid").then(function(a,b){if(g&&(a=g(a)),a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)})}),h.promise):(b.onReady.then(function(){b.publish(e,"publish").then(function(a,b){if(a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)})}),h.promise):void 0}}]),angular.module("Grid").component("deleteConfirmation",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/grid/popup.html",controller:["$scope",function(a){this.onSubmit=function(){this.resolve.grid.onRemoveRow(),this.close({$value:!0})},this.onCancel=function(){this.dismiss({$value:!1})}}]}),angular.module("ACL",["ui.bootstrap","List"]),angular.module("ACL").component("scriptrAcl",{bindings:{users:"<?",defaultSetObject:"<?",onSave:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/ACL/ACL.html",controller:["$uibModal",function(a){var b=this;this.$onInit=function(){console.log("$onInit initialized"),b.accessType=1==b.users.length&&"anonymous"==b.users[0].code?"Anonymous access":"Restricted access"},this.$postLink=function(){console.log("$postLink initialized")},this.openModal=function(){a.open({animation:!0,size:"lg",component:"aclPopup",resolve:{widget:function(){return{parent:b,users:b.users,defaultSetObject:b.defaultSetObject,onSave:b.onSave}}}}).result.then(function(a){console.log("selectedItem: "+a)},function(){})}}]}),angular.module("ACL").component("aclPopup",{bindings:{resolve:"<",users:"<?",defaultSetObject:"<?",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/ACL/myModalContent.html",controller:["$scope","$sce",function(a,b){var c=this;c.listScope,this.$onInit=function(){c.users=c.resolve.widget.users,c.defaultSetObject=c.resolve.widget.defaultSetObject,c.popoverContent=b.trustAsHtml("<span style='color: #323232;'><strong>Scriptr.io provides the following predefined groups:</strong><div class='mt10 mb5'><i class='fa fa-caret-right text-primary'></i> authenticated represents anyone with a valid token.</div><div class='mb5'><i class='fa fa-caret-right text-primary'></i> anonymous represents everyone.</div><div class='mb5'><i class='fa fa-caret-right text-primary'></i> nobody represents no one.</div></span>")},this.onSelect=function(a){c.resolve.modalScope=this,"anonymous"==a.originalObject[this.titleField]&&(this.disableInput=!0,this.hideObjects=!0,c.showMsg=!0)},this.removeAnonymousAccess=function(){c.showMsg=!1,c.resolve.modalScope.disableInput=!1,c.resolve.modalScope.hideObjects=!1;var b=[{code:"anonymous",icon:"fa fa-group"}];a.$broadcast("angucomplete-alt:addObjectToList",c.id,b)},this.addAnonymousAccess=function(){c.showMsg=!1,c.resolve.modalScope.disableInput=!1,c.resolve.modalScope.hideObjects=!1;for(var b=[],d=0;d<c.resolve.modalScope.objects.length;d++)"anonymous"!=c.resolve.modalScope.objects[d].code&&b.push(c.resolve.modalScope.objects[d]);a.$broadcast("angucomplete-alt:addObjectToList",c.id,b)},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){this.closeAlert(),this.message={type:a,content:b},this.show=!0},this.updateFileACL=function(){c.listScope||(c.listScope=a.$broadcast("angucomplete-alt:getSetObjects",c.id));var b=c.listScope.targetScope.$$childTail.$ctrl;if("function"==typeof c.resolve.widget.onSave()){var d=[];if(void 0===b.objects&&(b.objects=c.resolve.modalScope.objects),b.objects.length>0)var e=b.objects;else var e=c.resolve.widget.defaultSetObject;for(var f=0;f<e.length;f++)d.push(e[f].code);b.showList=!1,c.resolve.widget.onSave()(d).then(function(a,d){b.showList=!0,c.showAlert("success","The Access Control List is saved successfully."),c.resolve.widget.parent.users=b.objects,c.resolve.widget.parent.accessType=1==b.objects.length&&"anonymous"==b.objects[0].code?"Anonymous access":"Restricted access",console.log("success")},function(a){b.showList=!0,c.showMsg("danger",a.data.response.metadata.errorDetail),console.log("reject",a)})}},this.onCancel=function(a){this.dismiss({$value:"cancel"}),console.log("Dissmisseddd")}}]}),angular.module("List",["angucomplete-alt"]).component("scriptrAutocomplete",{bindings:{id:"@",objects:"<?",hideObjects:"<?",listSelectedObject:"<?",defaultSetObject:"<?",placeholder:"@",maxlength:"@",pause:"@",selectedObject:"<?",selectedObjectData:"<?",titleField:"@",descriptionField:"@",imageField:"@",minlength:"@",inputName:"@",inputClass:"@",matchClass:"@",localData:"<?",searchFields:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"@",fieldRequiredClass:"@",textSearching:"@",textNoResults:"@",initialValue:"@",inputChanged:"&",autoMatch:"@",focusIn:"&",focusOut:"&",disableInput:"@",focusFirst:"@",fieldTabindex:"@",parseInput:"&",localSearch:"&",transport:"@",msgTag:"@",api:"@",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/list/autocomplete.html",controller:["$scope","wsClient","httpClient",function(a,b,c){var d=this;this.$onInit=function(){this.localData=this.localData?this.localData:[],this.fieldRequired=void 0!==this.fieldRequired&&this.fieldRequired,this.textSearching=void 0!==this.textSearching&&this.textSearching,this.transport=this.transport?this.transport:"wss",this.objects=this.objects?this.objects:[],this.listSelectedObject&&this.objects.length>0&&!d.api&&(a.$broadcast("angucomplete-alt:setData",d.id,this.localData),a.$broadcast("angucomplete-alt:setSelectedObjects",d.id,this.objects)),d.api&&(d.showList=!1,e(this.transport))},d.addObjectToList=function(b){a.$broadcast("angucomplete-alt:addObjectToList",d.id,b),0==this.objects.length&&void 0!==this.defaultSetObject&&(this.objects=JSON.parse(JSON.stringify(this.defaultSetObject)))};var e=function(a){"wss"==a?b.onReady.then(function(){b.subscribe(d.msgTag,d.consumeData.bind(d)),d.api&&b.call(d.api,d.apiParams,d.msgTag).then(function(a,b){d.consumeData(a)})}):"https"==a&&d.api&&c.get(d.api,d.apiParams).then(function(a,b){d.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(b,c){d.showList=!0,"function"==typeof d.onFormatData()&&(b=d.onFormatData()(b)),this.localData=b,this.listSelectedObject&&this.objects.length>0&&(a.$broadcast("angucomplete-alt:setData",d.id,this.localData),a.$broadcast("angucomplete-alt:setSelectedObjects",d.id,this.objects))}}]}),angular.module("Dygraphs",["angular-dygraphs"]),angular.module("Dygraphs").component("scriptrDygraphs",{bindings:{onLoad:"&onLoad",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&",resize:"<?",data:"<?",legend:"<?",drawX1Axis:"@",drawYAxis:"@",drawY2Axis:"@",colors:"@",x1AxisLabelFontSize:"@",yAxisLabelFontSize:"@",y2AxisLabelFontSize:"@",yAxisLabelsKmb:"@",y2AxisLabelsKmb:"@",x1AxisLabelWidth:"@",yAxisLabelWidth:"@",y2AxisLabelWidth:"@",x1AxisLineColor:"@",yAxisLineColor:"@",y2AxisLineColor:"@",x1AxisLineWidth:"@",yAxisLineWidth:"@",y2AxisLineWidth:"@",x1AxisTickSize:"@",yAxisTickSize:"@",y2AxisTickSize:"@",yAxisIncludeZero:"@",y2AxisIncludeZero:"@",x1AxisLabel:"@",yAxisLabel:"@",y2AxisLabel:"@",showRangeSelector:"@",rangeSelectorAlpha:"@",rangeSelectorBackgroundLineWidth:"@",rangeSelectorBackgroundStrokeColor:"@",rangeSelectorForegroundLineWidth:"@",rangeSelectorForegroundStrokeColor:"@",rangeSelectorHeight:"@",rangeSelectorPlotFillColor:"@",
rangeSelectorPlotFillGradientColor:"@",rangeSelectorPlotLineWidth:"@",rangeSelectorPlotStrokeColor:"@",goals:"<?",goalLineColors:"<?",events:"<?",eventLineColors:"<?",legendPosition:"@",showLegend:"@",x1DrawGrid:"@",yDrawGrid:"@",y2DrawGrid:"@",x1GridLineColor:"@",yGridLineColor:"@",y2GridLineColor:"@",x1GridLineWidth:"@",yGridLineWidth:"@",y2GridLineWidth:"@",legendLabels:"<?",independentTicks:"@",legendMapping:"<?"},templateUrl:"/UIComponents/dashboard/frontend/components/dygraphs/dygraphs.html",controller:["httpClient","wsClient","$scope","$timeout",function(a,b,c,d){var e=this;this.$onInit=function(){void 0===this.api&&void 0===this.msgTag&&(this.data&&0==this.data.length||null==this.data)&&(this.noResults=!0),this.drawX1Axis=!this.drawX1Axis||JSON.parse(this.drawX1Axis),this.drawYAxis=!this.drawYAxis||JSON.parse(this.drawYAxis),this.drawY2Axis=!this.drawY2Axis||JSON.parse(this.drawY2Axis),this.colors=this.colors?this.colors:["#005588","#aa241d"],this.goals=this.goals?this.goals:[],this.goalLineColors=this.goalLineColors?this.goalLineColors:["#ffffff"],this.events=this.events?this.events:[],this.eventLineColors=this.eventLineColors?this.eventLineColors:["#ffffff"],this.x1AxisLabelFontSize=this.x1AxisLabelFontSize?JSON.parse(this.x1AxisLabelFontSize):14,this.yAxisLabelFontSize=this.yAxisLabelFontSize?JSON.parse(this.yAxisLabelFontSize):14,this.y2AxisLabelFontSize=this.y2AxisLabelFontSize?JSON.parse(this.y2AxisLabelFontSize):14,this.yAxisLabelsKmb=!!this.yAxisLabelsKmb&&JSON.parse(this.yAxisLabelsKmb),this.y2AxisLabelsKmb=!!this.y2AxisLabelsKmb&&JSON.parse(this.y2AxisLabelsKmb),this.x1AxisLabelWidth=this.x1AxisLabelWidth?JSON.parse(this.x1AxisLabelWidth):60,this.yAxisLabelWidth=this.yAxisLabelWidth?JSON.parse(this.yAxisLabelWidth):50,this.y2AxisLabelWidth=this.y2AxisLabelWidth?JSON.parse(this.y2AxisLabelWidth):50,this.x1AxisLineColor=this.x1AxisLineColor?this.x1AxisLineColor:"#000000",this.yAxisLineColor=this.yAxisLineColor?this.yAxisLineColor:"#000000",this.y2AxisLineColor=this.y2AxisLineColor?this.y2AxisLineColor:"#000000",this.showLegend=!this.showLegend||JSON.parse(this.showLegend),this.x1AxisLabel=this.x1AxisLabel?this.x1AxisLabel:"",this.yAxisLabel=this.yAxisLabel?this.yAxisLabel:"",this.y2AxisLabel=this.y2AxisLabel?this.y2AxisLabel:"",this.x1AxisLineWidth=this.x1AxisLineWidth?JSON.parse(this.x1AxisLineWidth):.3,this.yAxisLineWidth=this.yAxisLineWidth?JSON.parse(this.yAxisLineWidth):.3,this.y2AxisLineWidth=this.y2AxisLineWidth?JSON.parse(this.y2AxisLineWidth):.3,this.x1AxisTickSize=this.x1AxisTickSize?JSON.parse(this.x1AxisTickSize):3,this.yAxisTickSize=this.yAxisTickSize?JSON.parse(this.yAxisTickSize):3,this.y2AxisTickSize=this.y2AxisTickSize?JSON.parse(this.y2AxisTickSize):3,this.yAxisIncludeZero=!!this.yAxisIncludeZero&&JSON.parse(this.yAxisIncludeZero),this.y2AxisIncludeZero=!!this.y2AxisIncludeZero&&JSON.parse(this.y2AxisIncludeZero),this.showRangeSelector=!!this.showRangeSelector&&JSON.parse(this.showRangeSelector),this.rangeSelectorAlpha=this.rangeSelectorAlpha?JSON.parse(this.rangeSelectorAlpha):.6,this.rangeSelectorBackgroundLineWidth=this.rangeSelectorBackgroundLineWidth?JSON.parse(this.rangeSelectorBackgroundLineWidth):1,this.rangeSelectorBackgroundStrokeColor=this.rangeSelectorBackgroundStrokeColor?this.rangeSelectorBackgroundStrokeColor:"#808080",this.rangeSelectorForegroundLineWidth=this.rangeSelectorForegroundLineWidth?JSON.parse(this.rangeSelectorForegroundLineWidth):1,this.rangeSelectorForegroundStrokeColor=this.rangeSelectorForegroundStrokeColor?this.rangeSelectorForegroundStrokeColor:"#000000",this.rangeSelectorHeight=this.rangeSelectorHeight?JSON.parse(this.rangeSelectorHeight):40,this.rangeSelectorPlotFillColor=this.rangeSelectorPlotFillColor?this.rangeSelectorPlotFillColor:"#A7B1C4",this.rangeSelectorPlotFillGradientColor=this.rangeSelectorPlotFillGradientColor?this.rangeSelectorPlotFillGradientColor:"#FFFFFF",this.rangeSelectorPlotLineWidth=this.rangeSelectorPlotLineWidth?JSON.parse(this.rangeSelectorPlotLineWidth):1.5,this.rangeSelectorPlotStrokeColor=this.rangeSelectorPlotStrokeColor?this.rangeSelectorPlotStrokeColor:"#808FAB",this.x1DrawGrid=!this.x1DrawGrid||JSON.parse(this.x1DrawGrid),this.yDrawGrid=!this.yDrawGrid||JSON.parse(this.yDrawGrid),this.y2DrawGrid=!!this.y2DrawGrid&&JSON.parse(this.y2DrawGrid),this.x1GridLineColor=this.x1GridLineColor?this.x1GridLineColor:"#000000",this.yGridLineColor=this.yGridLineColor?this.yGridLineColor:"#000000",this.y2GridLineColor=this.y2GridLineColor?this.y2GridLineColor:"#000000",this.x1GridLineWidth=this.x1GridLineWidth?JSON.parse(this.x1GridLineWidth):.3,this.yGridLineWidth=this.yGridLineWidth?JSON.parse(this.yGridLineWidth):.3,this.y2GridLineWidth=this.y2GridLineWidth?JSON.parse(this.y2GridLineWidth):.3,this.xDrawGrid=!this.xDrawGrid||JSON.parse(this.xDrawGrid),this.independentTicks=this.independentTicks?this.independentTicks:"y-primary",this.legendLabels=this.legendLabels?this.legendLabels:["X","Y1","Y2","Y3","Y4"],this.legendMapping=this.legendMapping?this.legendMapping:["x","y","y","y2","y2"],this.options={},this.options.axes={},this.x1AxisLabel&&""!=this.x1AxisLabel&&(this.options.xlabel=this.x1AxisLabel),this.yAxisLabel&&""!=this.yAxisLabel&&(this.options.ylabel=this.yAxisLabel),this.y2AxisLabel&&""!=this.y2AxisLabel&&(this.options.y2label=this.y2AxisLabel),this.legendLabels&&""!=this.legendLabels&&(this.options.labels=this.legendLabels),this.options.axes.x={},this.options.axes.x.drawAxis=JSON.parse(this.drawX1Axis),this.options.axes.x.axisLabelFontSize=JSON.parse(this.x1AxisLabelFontSize),this.options.axes.x.axisLabelWidth=JSON.parse(this.x1AxisLabelWidth),this.options.axes.x.axisLineColor=this.x1AxisLineColor,this.options.axes.x.axisLineWidth=JSON.parse(this.x1AxisLineWidth),this.options.axes.x.axisTickSize=JSON.parse(this.x1AxisTickSize),this.options.axes.y={},this.options.axes.y.drawAxis=JSON.parse(this.drawYAxis),this.options.axes.y.axisLabelFontSize=JSON.parse(this.yAxisLabelFontSize),this.options.axes.y.axisLabelWidth=JSON.parse(this.yAxisLabelWidth),this.options.axes.y.axisLineColor=this.yAxisLineColor,this.options.axes.y.axisLineWidth=JSON.parse(this.yAxisLineWidth),this.options.axes.y.axisTickSize=JSON.parse(this.yAxisTickSize),this.options.axes.y.includeZero=JSON.parse(this.yAxisIncludeZero),this.options.axes.y.labelsKMB=JSON.parse(this.yAxisLabelsKmb),this.options.axes.y2={},this.options.axes.y2.drawAxis=JSON.parse(this.drawY2Axis),this.options.axes.y2.axisLabelFontSize=JSON.parse(this.y2AxisLabelFontSize),this.options.axes.y2.axisLabelWidth=JSON.parse(this.y2AxisLabelWidth),this.options.axes.y2.axisLineColor=this.y2AxisLineColor,this.options.axes.y2.axisLineWidth=JSON.parse(this.y2AxisLineWidth),this.options.axes.y2.axisTickSize=JSON.parse(this.y2AxisTickSize),this.options.axes.y2.includeZero=JSON.parse(this.y2AxisIncludeZero),this.options.axes.y2.labelsKMB=JSON.parse(this.y2AxisLabelsKmb),this.options.showRangeSelector=JSON.parse(this.showRangeSelector),this.options.rangeSelectorAlpha=JSON.parse(this.rangeSelectorAlpha),this.options.rangeSelectorBackgroundLineWidth=JSON.parse(this.rangeSelectorBackgroundLineWidth),this.options.rangeSelectorBackgroundStrokeColor=this.rangeSelectorBackgroundStrokeColor,this.options.rangeSelectorForegroundLineWidth=JSON.parse(this.rangeSelectorForegroundLineWidth),this.options.rangeSelectorForegroundStrokeColor=this.rangeSelectorForegroundStrokeColor,this.options.rangeSelectorHeight=JSON.parse(this.rangeSelectorHeight),this.options.rangeSelectorPlotFillColor=this.rangeSelectorPlotFillColor,this.options.rangeSelectorPlotFillGradientColor=this.rangeSelectorPlotFillGradientColor,this.options.rangeSelectorPlotLineWidth=JSON.parse(this.rangeSelectorPlotLineWidth),this.options.rangeSelectorPlotStrokeColor=this.rangeSelectorPlotStrokeColor,this.options.colors=JSON.parse(this.colors),this.showLegend?(this.options.showLabelsOnHighlight=!0,this.options.legend="always"):(this.options.showLabelsOnHighlight=!1,this.options.hideOverlayOnMouseOut=!0),this.options.legendPosition=this.legendPosition?this.legendPosition:"top",this.options.axes.x.valueFormatter=function(a){var b=new Date(a);return b=b.toLocaleDateString()},this.options.axes.x.drawGrid=JSON.parse(this.x1DrawGrid),this.options.axes.y.drawGrid=JSON.parse(this.yDrawGrid),this.options.axes.y2.drawGrid=JSON.parse(this.y2DrawGrid),this.options.axes.x.gridLineColor=this.x1GridLineColor,this.options.axes.y.gridLineColor=this.yGridLineColor,this.options.axes.y2.gridLineColor=this.y2GridLineColor,this.options.axes.x.gridLineWidth=JSON.parse(this.x1GridLineWidth),this.options.axes.y.gridLineWidth=JSON.parse(this.yGridLineWidth),this.options.axes.y2.gridLineWidth=JSON.parse(this.y2GridLineWidth),"y-primary"==this.independentTicks?(this.options.axes.y.independentTicks=!0,this.options.axes.y2.independentTicks=!1):"y2-primary"==this.independentTicks?(this.options.axes.y.independentTicks=!1,this.options.axes.y2.independentTicks=!0):"independent"==this.independentTicks&&(this.options.axes.y.independentTicks=!0,this.options.axes.y2.independentTicks=!0),this.options.goals=this.goals?this.goals:[],this.options.goalLineColors=this.goalLineColors?this.goalLineColors:["#ffffff"],this.options.events=this.events?this.events:[],this.options.eventLineColors=this.eventLineColors?this.eventLineColors:["#ffffff"],this.options.series={};for(var a=[],b=0;b<this.data.length;b++)this.data[b][0]=new Date(this.data[b][0]),a.push(this.data[b]);this.data=a;for(var c=0;c<this.legendLabels.length;c++){var d=this.legendLabels[c];0!=c&&"y2"==this.legendMapping[c]&&this.drawY2Axis&&(d?this.options.series[d]={axis:this.legendMapping[c]}:this.options.series["Y"+c]={axis:this.legendMapping[c]})}this.resize=!this.resize||this.resize,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null},this.$postLink=function(){f(this.transport),this.data&&!this.api?(e.timeout=!1,d(function(){e.consumeData(e.data)},2e3)):e.timeout=!0,c.$watch(function(a){if(a.$ctrl.data&&1==e.timeout)return a.$ctrl.data},function(a){a&&(e.datas=a,e.noResults=!1)})},this.$onDestroy=function(){console.log("destory chart",e.msgTag,c.$id),e.msgTag&&b.unsubscribe(e.msgTag,null,c.$id)};var f=function(d){"wss"==d?b.onReady.then(function(){e.msgTag&&b.subscribe(e.msgTag,e.consumeData.bind(e),c.$id),e.api&&b.call(e.api,e.apiParams,e.msgTag).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a),e.consumeData()})}):"https"==d&&e.api&&a.get(e.api,e.apiParams).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a),e.consumeData()})};this.consumeData=function(a,b){e.timeout=!0;for(var c=0;c<a.length;c++)a[c][0]=new Date(a[c][0]);"function"==typeof e.onFormatData()&&(a=e.onFormatData()(a)),a&&a.length>0&&"object"==typeof a?(this.datas=a,this.noResults=!1):(this.datas=[],this.noResults=!0)}}]}),angular.module("plotly",["angularPlotly"]),angular.module("plotly").component("scriptrPlotly",{bindings:{onLoad:"&onLoad",api:"@",retrievedData:"<?",customRanges:"<?",layout:"<?",options:"<?",transport:"@",showLegend:"@",fontSize:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/plotly/plotly.html",controller:["$scope","$window","$element","$timeout","httpClient","wsClient","_",function(a,b,c,d,e,f,g){var h=this;this.directions=["N","NNE","ENE","E","ESE","SSE","S","SSW","WSW","W","WNW","NNW"],this.speedUnit="m/s",this.$onInit=function(){this.customRanges=this.customRanges&&this.customRanges.length>0?this.customRanges:[{color:"#00476b",lo:0,hi:2},{color:"#005487",lo:2,hi:4},{color:"#006699",lo:4,hi:6},{color:"#0082b5",lo:6,hi:8},{color:"#0294c1",lo:8,hi:10},{color:"#06a9ce",lo:10,hi:20}],this.retrievedData=this.retrievedData?this.retrievedData:[],this.showLegend=this.showLegend?this.showLegend:"true",this.fontSize=this.fontSize?this.fontSize:"12",this.layout={title:"",font:{size:this.fontSize},radialaxis:{ticksuffix:"%"},orientation:270},this.maxRange=g.max(g.pluck(this.customRanges,"hi")),this.listOfMinRanges=g.pluck(this.customRanges,"lo"),this.listOfMaxRanges=g.pluck(this.customRanges,"hi"),this.listOfColors=g.pluck(this.customRanges,"color"),this.listOfColors.push("#10c3e0"),this.style={},angular.element(b).on("resize",function(){return null!=h.timeoutId&&d.cancel(h.timeoutId),h.timeoutId=d(h.resize,100)}),i(this.transport)},h.resize=function(){h.timeoutId=null,h.style.height=c.parent()[0].clientHeight,h.style.width=c.parent()[0].clientWidth,h.layout={title:"",font:{size:h.fontSize},radialaxis:{ticksuffix:"%"},orientation:270,width:c.parent()[0].clientWidth,height:c.parent()[0].clientHeight}},this.$postLink=function(){d(h.resize,100),null!=h.timeoutId&&d.cancel(h.timeoutId),h.timeoutId=d(h.resize,100),a.$watch(function(a){return a.$ctrl.retrievedData},function(a){h.retrievedData=a})},this.$onDestroy=function(){console.log("destory wind rose"),h.msgTag&&f.unsubscribe(h.msgTag,null,a.$id)};var i=function(b){"wss"==b?f.onReady.then(function(){h.msgTag&&f.subscribe(h.msgTag,h.consumeData.bind(h),a.$id),h.api&&f.call(h.api,h.apiParams,h.msgTag).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a),h.consumeData()})}):"https"==b&&h.api&&e.get(h.api,h.apiParams).then(function(a,b){h.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),this.retrievedData=a,this.buildWindRoseData()},this.buildWindRoseData=function(){var a=g.pluck(h.retrievedData,"speeds");h.totalSpeeds=0;for(var b=0;b<a.length;b++)h.totalSpeeds+=a[b].length;h.speedRangeDirectionObj={};for(var b=0;b<h.listOfMinRanges.length;b++)h.speedRangeDirectionObj[h.listOfMinRanges[b]+"-"+h.listOfMaxRanges[b]]=[];h.speedRangeDirectionObj[">="+h.maxRange]=[];for(var b=0;b<h.retrievedData.length;b++){for(var c=h.retrievedData[b].direction,d=h.retrievedData[b].speeds,e=0;e<h.customRanges.length;e++){var f=this.customRanges[e],i=g.filter(d,function(a){return a>=f.lo&&a<f.hi}).length;h.speedRangeDirectionObj[h.customRanges[e].lo+"-"+h.customRanges[e].hi].push({direction:c,percentage:i/h.totalSpeeds*100})}var j=h.maxRange,k=g.filter(d,function(a){return a>=j}).length;h.speedRangeDirectionObj[">="+h.maxRange].push({direction:c,percentage:k/h.totalSpeeds*100})}for(var l=Object.keys(h.speedRangeDirectionObj),m=Object.keys(h.speedRangeDirectionObj)[0],n=(h.speedRangeDirectionObj[m],JSON.parse(JSON.stringify(h.speedRangeDirectionObj))[m]),b=0;b<l.length;b++){var o=l[b],p=h.speedRangeDirectionObj[o];if(o!=m){for(var e=0;e<p.length;e++)n[e].percentage=p[e].percentage+n[e].percentage,0!=p[e].percentage&&(p[e].percentage=n[e].percentage);h.speedRangeDirectionObj[o]=p}}h.data=[],l=Object.keys(h.speedRangeDirectionObj);for(var b=l.length-1;b>=0;b--){var q=g.pluck(h.speedRangeDirectionObj[l[b]],"percentage"),r=l[b],s=h.listOfColors[b],t={r:q,t:h.directions,name:r+" "+h.speedUnit,marker:{color:s},type:"area",showlegend:!h.showLegend||"true"==h.showLegend};h.data.push(t)}}}]}),angular.module("MenuLayout",["ui.bootstrap","ngAnimate","ngSanitize"]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]).component("menu",{bindings:{menuOpened:"<?",transport:"@",api:"@",msgTag:"@",apiParams:"<?",user:"<?"},templateUrl:"/UIComponents/layout/frontend/components/onsetmenu/menu.html",controller:["$scope","$window","httpClient","wsClient",function(a,b,c,d){this.opened=!0,this.firstLoad=!0,this.webVersion=!0;var e=this;this.menuArray=[],this.changeIsCollapsed=function(b){a["isCollapsed"+b]=!a["isCollapsed"+b]},this.$onInit=function(){this.windowWidth=b.innerWidth,this.windowWidth>=992?this.webVersion=!0:this.webVersion=!1,this.webVersion||(this.opened=!1),this.initDataService()},this.openCloseChild=function(a){console.log("click: ",this.opened),this.opened=!this.opened,this.firstLoad=!1,a.stopPropagation()},this.closeChild=function(a){console.log("out",this.opened),this.opened=!1,this.firstLoad=!1,a.stopPropagation()},this.initDataService=function(){"wss"==this.transport?d.onReady.then(function(){e.msgTag&&d.subscribe(e.msgTag,e.consumeData.bind(e),a.$id),e.api&&d.call(e.api,e.apiParams,e.msgTag).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a),e.consumeData()})}):"https"==this.transport&&this.api&&c.get(e.api,e.apiParams).then(function(a,b){e.consumeData(a)},function(a){console.log("reject published promise",a)})},this.consumeData=function(a,b){console.log("data: ",a),a&&(this.menuArray=a,this.prepareMenuParams())},this.prepareMenuParams=function(){for(var b=0;b<this.menuArray.length;b++)a["isCollapsed"+b]=!0},angular.element(b).bind("resize",function(){a.$apply(function(){a.windowWidth=b.innerWidth,a.windowWidth>=992?e.webVersion=!0:e.webVersion=!1})})}]});var underscore=angular.module("underscore",[]);underscore.factory("_",["$window",function(a){return a._}]),angular.module("DashboardBuilder",["underscore","schemaForm","ACL","Grid","Message","xeditable","ui.bootstrap","ngRoute","slickCarousel","ngAnimate","ngSanitize","WsClient","HttpClient","Chart","gridster","DashboardBuilder","Gauge","Speedometer","Odometer","SearchBox","ngMaterial","ngMessages","material.svgAssetsCache","Thermometer","ProgressBar","angularSpectrumColorpicker","angular-underscore/filters","pascalprecht.translate","ui.select","ui.codemirror","Display","Dygraphs","plotly","pascalprecht.translate","ngSchemaFormFile","mgcrea.ngStrap","mgcrea.ngStrap.modal","mgcrea.ngStrap.select","MenuLayout"]),angular.module("DashboardBuilder").constant("common",{formTab:{title:"Data",hidden:!0,items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"transport",notitle:!1,type:"strapselect",titleMap:[{value:"wss",name:"wss"},{value:"https",name:"https"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"msg-tag",condition:"model.transport=='wss'"},{key:"http-method",notitle:!1,type:"strapselect",titleMap:[{value:"GET",name:"GET"}],condition:"model.transport=='https'"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["api"]},{type:"section",htmlClass:"col-xs-6",items:["api-params"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"data"},{key:"on-format-data",type:"codemirror",codemirrorOptions:{value:"return",styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,matchBrackets:!0,theme:"neo",mode:"javascript",readOnly:!1,autoRefresh:!0}}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:'<div class="alert alert-info"><ul><li>Messages published over the subscibe channel need to have the following format in order to be consumed by a widget:<ul><li>{“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”}</li></ul></li><li>A script would publish a message  over the subscribe channel as follow:<ul><li>publish(“responseChannel”, {“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”});</li></ul></li><li>Whether https or wss transport is used, Sciptr API should return the static data structure for widget initial load:<ul><li>return &lt;static data structure&gt;;</li></ul></li></ul></div>'}]}]}]},schemaFields:{api:{title:"Api",type:"string",description:"Name of the scriptr api (script name) responsible for publishing or returning the widget data."},"api-params":{title:"Api params",type:"string",description:"A JSON formatted object containing the parameters to be sent to the scriptr api.","x-schema-form":{type:"textarea",placeholder:"Ex: {'id' : '599865'}"}},"http-method":{title:"Http method",type:"string",description:"Method to be used when calling the scriptr api over https. Default: GET.",default:"GET",placeholder:" "},transport:{title:"Transport",type:"string",description:"Protocol used to call the  scriptr api. Use wss for real time communication whenever your widget needs to update its data live by consuming messages published from scriptr over the subscribe channel defined in settings.",placeholder:" "},"msg-tag":{title:"Message tag",type:"string",description:"The dashboard widgets consume messages published over the subscribe channel defined in dashboard settings. Message tag is an identifier sent as part of the published message. The widget uses it to know which messages to consume or ignore."},"on-format-data":{title:"Format data",default:"return data;",type:"string",description:"Callback function to be called after data is returned from backend."}}}),angular.module("DashboardBuilder").constant("config",{script:{form:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12 col-md-1 file-attachment",items:[{key:"image",type:"nwpFileUpload",i18n:{add:"Open file browser",preview:"Preview Upload",filename:"File Name",progress:"Progress Status",upload:"Upload",dragorclick:"Drag and drop your file here or click here"},notitle:!0}]},{type:"section",htmlClass:"col-xs-12 col-md-5",items:[{key:"dashboardName",notitle:!0,placeholder:"Dashboard Name"}]},{type:"section",htmlClass:"col-xs-12 col-md-3 period-select-box",items:[{key:"period",type:"strapselect",notitle:!0,placeholder:"Period",titleMap:[{value:"past_day",name:"Past day"},{value:"past_week",name:"Past week"},{value:"past_month",name:"Past month"}]}]},{type:"section",htmlClass:"col-xs-12 col-md-3 unit-select-box",items:[{key:"unit",notitle:!0,placeholder:"Unit",type:"strapselect",titleMap:[{value:"si",name:"SI units"},{value:"us",name:"US units"}]}]}]}],schema:{type:"object",title:"Schema",properties:{scriptName:{type:"hidden",fieldHtmlClass:"script-name-input"},dashboardName:{type:"string",fieldHtmlClass:"script-name-input"},image:{title:"Image",type:"array",format:"singlefile",default:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/a923190a/images/default-icon.svg","x-schema-form":{type:"array"},pattern:{mimeType:"image/*",validationMessage:"Invalid file type."},maxSize:{maximum:"1MB",validationMessage:"Maximum allowed image size is 2MB."}},period:{title:"Period",type:"string",description:"",default:"past_day"},unit:{title:"Unit",type:"string",description:"",default:"si",placeholder:" "}},required:["dashboardName","period","unit"]}},metricselector:{form:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12 col-md-3 col-lg-2 period-select-box",items:[{key:"period",type:"strapselect",notitle:!0,placeholder:"Period",titleMap:[{value:"past_day",name:"Past day"},{value:"past_week",name:"Past week"},{value:"past_month",name:"Past month"}]}]},{type:"section",htmlClass:"col-xs-12 col-md-3 col-lg-2 unit-select-box",items:[{key:"unit",notitle:!0,placeholder:"Unit",type:"strapselect",titleMap:[{value:"si",name:"SI units"},{value:"us",name:"US units"}]}]}]}],schema:{type:"object",title:"Schema",properties:{period:{title:"Period",type:"string",description:"",default:"past_day"},unit:{title:"Unit",type:"string",description:"",default:"si",placeholder:" "}},required:["unit"]}},transport:{label:"Transport configuration",defaults:{publishChannel:"requestChannel",subscribeChannel:"responseChannel"},form:["*"],schema:{type:"object",title:"Schema",properties:{publishChannel:{title:"Publish channel",type:"string",description:"Widgets use the publish channel to publish messages that will be distributed to its subscribers."},subscribeChannel:{title:"Subscribe channel",type:"string",description:"Widgets use the subscribe channel to consume the messages published over that channel as a data source."}},required:["token","baseUrl","publishChannel","subscribeChannel"]}},defaultWidget:{name:"displaybox"},widgets:[{name:"line",label:"Line Chart",class:"scriptr-dygraphs",commonData:!0,show:!0,defaults:{type:"line","on-format-data":"return data;",boxLabel:"Line Chart",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:["#005588","#aa241d"],transport:"wss","msg-tag":"chart",data:'[["2009-12-31T22:00:00.000Z",1,99,1039600.0000000001,1960400],["2010-01-01T22:00:00.000Z",2,98,1078400,1921600],["2010-01-02T22:00:00.000Z",3,97,1116400,1883600],["2010-01-03T22:00:00.000Z",4,96,1153600,1846400],["2010-01-04T22:00:00.000Z",5,95,1190000,1810000],["2010-01-05T22:00:00.000Z",6,94,1225600,1774400],["2010-01-06T22:00:00.000Z",7,93,1260400,1739600],["2010-01-07T22:00:00.000Z",8,92,1294400,1705600],["2010-01-08T22:00:00.000Z",9,91,1327600,1672400],["2010-01-09T22:00:00.000Z",10,90,1359999.9999999998,1640000.0000000002],["2010-01-10T22:00:00.000Z",11,89,1391600,1608400],["2010-01-11T22:00:00.000Z",12,88,1422400,1577600],["2010-01-12T22:00:00.000Z",13,87,1452400,1547600],["2010-01-13T22:00:00.000Z",14,86,1481600,1518400],["2010-01-14T22:00:00.000Z",15,85,1510000,1490000],["2010-01-15T22:00:00.000Z",16,84,1537599.9999999998,1462400.0000000002],["2010-01-16T22:00:00.000Z",17,83,1564400,1435600],["2010-01-17T22:00:00.000Z",18,82,1590400,1409600],["2010-01-18T22:00:00.000Z",19,81,1615600.0000000002,1384399.9999999998],["2010-01-19T22:00:00.000Z",20,80,1640000.0000000002,1359999.9999999998],["2010-01-20T22:00:00.000Z",21,79,1663600,1336400],["2010-01-21T22:00:00.000Z",22,78,1686400,1313600],["2010-01-22T22:00:00.000Z",23,77,1708400.0000000002,1291599.9999999998],["2010-01-23T22:00:00.000Z",24,76,1729600,1270400],["2010-01-24T22:00:00.000Z",25,75,1750000,1250000],["2010-01-25T22:00:00.000Z",26,74,1769600,1230400],["2010-01-26T22:00:00.000Z",27,73,1788400,1211600],["2010-01-27T22:00:00.000Z",28,72,1806400,1193600],["2010-01-28T22:00:00.000Z",29,71,1823600,1176400],["2010-01-29T22:00:00.000Z",30,70,1839999.9999999998,1160000.0000000002],["2010-01-30T22:00:00.000Z",31,69,1855600,1144400],["2010-01-31T22:00:00.000Z",32,68,1870400,1129600],["2010-02-01T22:00:00.000Z",33,67,1884399.9999999998,1115600.0000000002],["2010-02-02T22:00:00.000Z",34,66,1897600,1102400],["2010-02-03T22:00:00.000Z",35,65,1910000.0000000002,1089999.9999999998],["2010-02-04T22:00:00.000Z",36,64,1921600,1078400],["2010-02-05T22:00:00.000Z",37,63,1932400,1067600],["2010-02-06T22:00:00.000Z",38,62,1942400.0000000002,1057599.9999999998],["2010-02-07T22:00:00.000Z",39,61,1951600,1048400],["2010-02-08T22:00:00.000Z",40,60,1960000,1040000],["2010-02-09T22:00:00.000Z",41,59,1967600,1032400],["2010-02-10T22:00:00.000Z",42,58,1974400.0000000002,1025599.9999999999],["2010-02-11T22:00:00.000Z",43,57,1980400,1019600.0000000001],["2010-02-12T22:00:00.000Z",44,56,1985600,1014400],["2010-02-13T22:00:00.000Z",45,55,1990000,1010000],["2010-02-14T22:00:00.000Z",46,54,1993600,1006400],["2010-02-15T22:00:00.000Z",47,53,1996400,1003600],["2010-02-16T22:00:00.000Z",48,52,1998400,1001600],["2010-02-17T22:00:00.000Z",49,51,1999600,1000400],["2010-02-18T22:00:00.000Z",50,50,2000000,1000000],["2010-02-19T22:00:00.000Z",51,49,1999600,1000400],["2010-02-20T22:00:00.000Z",52,48,1998400,1001600],["2010-02-21T22:00:00.000Z",53,47,1996400,1003600],["2010-02-22T22:00:00.000Z",54,46,1993600,1006400],["2010-02-23T22:00:00.000Z",55,45,1990000,1010000],["2010-02-24T22:00:00.000Z",56,44,1985600,1014400],["2010-02-25T22:00:00.000Z",57,43,1980400,1019600.0000000001],["2010-02-26T22:00:00.000Z",58,42,1974400.0000000002,1025599.9999999999],["2010-02-27T22:00:00.000Z",59,41,1967600,1032400],["2010-02-28T22:00:00.000Z",60,40,1960000,1040000],["2010-03-01T22:00:00.000Z",61,39,1951600,1048400],["2010-03-02T22:00:00.000Z",62,38,1942400.0000000002,1057599.9999999998],["2010-03-03T22:00:00.000Z",63,37,1932400,1067600],["2010-03-04T22:00:00.000Z",64,36,1921600,1078400],["2010-03-05T22:00:00.000Z",65,35,1910000.0000000002,1089999.9999999998],["2010-03-06T22:00:00.000Z",66,34,1897600,1102400],["2010-03-07T22:00:00.000Z",67,33,1884399.9999999998,1115600.0000000002],["2010-03-08T22:00:00.000Z",68,32,1870400,1129600],["2010-03-09T22:00:00.000Z",69,31,1855600,1144400],["2010-03-10T22:00:00.000Z",70,30,1839999.9999999998,1160000.0000000002],["2010-03-11T22:00:00.000Z",71,29,1823600,1176400],["2010-03-12T22:00:00.000Z",72,28,1806400,1193600],["2010-03-13T22:00:00.000Z",73,27,1788400,1211600],["2010-03-14T22:00:00.000Z",74,26,1769600,1230400],["2010-03-15T22:00:00.000Z",75,25,1750000,1250000],["2010-03-16T22:00:00.000Z",76,24,1729600,1270400],["2010-03-17T22:00:00.000Z",77,23,1708400.0000000002,1291599.9999999998],["2010-03-18T22:00:00.000Z",78,22,1686400,1313600],["2010-03-19T22:00:00.000Z",79,21,1663600,1336400],["2010-03-20T22:00:00.000Z",80,20,1640000.0000000002,1359999.9999999998],["2010-03-21T22:00:00.000Z",81,19,1615600.0000000002,1384399.9999999998],["2010-03-22T22:00:00.000Z",82,18,1590400,1409600],["2010-03-23T22:00:00.000Z",83,17,1564400,1435600],["2010-03-24T22:00:00.000Z",84,16,1537599.9999999998,1462400.0000000002],["2010-03-25T22:00:00.000Z",85,15,1510000,1490000],["2010-03-26T22:00:00.000Z",86,14,1481600,1518400],["2010-03-27T22:00:00.000Z",87,13,1452400,1547600],["2010-03-28T21:00:00.000Z",88,12,1422400,1577600],["2010-03-29T21:00:00.000Z",89,11,1391600,1608400],["2010-03-30T21:00:00.000Z",90,10,1359999.9999999998,1640000.0000000002],["2010-03-31T21:00:00.000Z",91,9,1327600,1672400],["2010-04-01T21:00:00.000Z",92,8,1294400,1705600],["2010-04-02T21:00:00.000Z",93,7,1260400,1739600],["2010-04-03T21:00:00.000Z",94,6,1225600,1774400],["2010-04-04T21:00:00.000Z",95,5,1190000,1810000],["2010-04-05T21:00:00.000Z",96,4,1153600,1846400],["2010-04-06T21:00:00.000Z",97,3,1116400,1883600],["2010-04-07T21:00:00.000Z",98,2,1078400,1921600],["2010-04-08T21:00:00.000Z",99,1,1039600.0000000001,1960400],["2010-04-09T21:00:00.000Z",100,0,1000000,2000000]]',"grid-text-family":"Source Sans Pro","x1-axis-label-font-size":12,"x1-axis-label-width":60,"y2-axis-label-width":95,"y-axis-label-width":95,"y2-axis-label-font-size":12,"y-axis-label-font-size":12},box:{sizeX:3,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/line-chart.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!1,groupBy:"dataStream",multiple:"true",callback:"multiSelectCallBack",widgetName:"line",limitTo:50}}]}]},{title:"X",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"draw-x1-axis",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"x1-axis-label","x1-axis-label-font-size"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"x1-axis-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"x1-axis-line-width",step:"0.1"},"x1-axis-label-width"]}]}]},{title:"Y",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"draw-y-axis",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"y-axis-label","y-axis-label-font-size","y-axis-label-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"y-axis-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"y-axis-line-width",step:"0.1"},{type:"radios-inline",key:"y-axis-include-zero",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"y-axis-labels-kmb",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Y2",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"draw-y2-axis",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]
},"y2-axis-label","y2-axis-label-font-size","y2-axis-label-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"y2-axis-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"y2-axis-line-width",step:"0.1"},{type:"radios-inline",key:"y2-axis-include-zero",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"y2-axis-labels-kmb",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Lines Display",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"colors",condition:"model.colors.length > 0",required:!0,items:[{key:"colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Legend",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"radios-inline",key:"show-legend",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"legend-labels","legend-Mapping"]}]}]},{title:"Grid",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:[{type:"radios-inline",key:"x1-draw-grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"x1-grid-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"x1-grid-line-width",step:"0.1"}]},{type:"section",htmlClass:"col-xs-4",items:[{type:"radios-inline",key:"y-draw-grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"y-grid-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"y-grid-line-width",step:"0.1"}]},{type:"section",htmlClass:"col-xs-4",items:[{type:"radios-inline",key:"y2-draw-grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"y2-grid-line-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"y2-grid-line-width",step:"0.1"}]},{type:"section",htmlClass:"col-xs-12",items:[{key:"independent-ticks",notitle:!1,type:"strapselect",titleMap:[{value:"y-primary",name:"Ticks are aligned. Y is primary"},{value:"y2-primary",name:"Ticks are aligned. Y2 is primary"},{value:"independent",name:"Ticks are not aligned"}]}]}]}]},{title:"Slider",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"show-range-selector",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"range-selector-alpha","range-selector-background-line-width",{key:"range-selector-background-stroke-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},"range-selector-foreground-line-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"range-selector-foreground-stroke-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},"range-selector-height",{key:"range-selector-plot-fill-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"range-selector-plot-fill-gradient-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"range-selector-plot-line-width",step:"0.1"},{key:"range-selector-plot-stroke-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]},{title:"Goals",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["goals"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"goal-line-colors",items:[{key:"goal-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{"show-legend":{title:"Show Legend",default:"true",type:"string",description:""},stream:{title:"Data Streams",type:"array",items:{type:"string"},description:"",placeholder:" "},"legend-position":{title:"Legend Position ",type:"string",default:"bottom",description:"Determines the legend position relative to the graph.",placeholder:" "},"draw-x1-axis":{title:"Draw X-axis",type:"string",default:"true",description:"Determines whether to draw the X-axis. Setting this to false also prevents x-axis ticks from being drawn and reclaims the space for the chart grid/lines."},"draw-y-axis":{title:"Draw Y-axis",type:"string",default:"true",description:"Determines whether to draw the Y-axis. Setting this to false also prevents y-axis ticks from being drawn and reclaims the space for the chart grid/lines."},"draw-y2-axis":{title:"Draw Y2-axis",type:"string",default:"true",description:"Determines whether to draw the Y2-axis. Setting this to false also prevents y2-axis ticks from being drawn and reclaims the space for the chart grid/lines."},goals:{title:"Goals",type:"array",default:["0"],description:"List of y-values to draw as horizontal 'goal' lines on the chart.",items:{type:"string"}},"goal-line-colors":{title:"Goal Line Colors",type:"array",default:["#ffffff"],description:"List of color values to use for the goal line colors.",items:{format:"color",type:"string"}},events:{title:"Events",type:"array",default:["2010-02-02"],description:"List of x-values to draw as vertical 'event' lines on the chart.",items:{type:"string"}},"event-line-colors":{title:"Event Line Colors",type:"array",default:["#ffffff"],description:"List of color values to use for the event line colors.",items:{format:"color",type:"string"}},colors:{title:"Lines' Colors",type:"array",default:["#005588","#aa241d"],description:"Array containing colors for the series lines.",items:{format:"color",type:"string"}},"x1-axis-label-font-size":{title:"Axis Label Font Size",type:"number",default:12,description:"Size of the font (in pixels) to use in the x axis labels."},"y-axis-label-font-size":{title:"Axis Label Font Size",type:"number",default:12,description:"Size of the font (in pixels) to use in the y axis labels."},"y2-axis-label-font-size":{title:"Axis Label Font Size",type:"number",default:12,description:"Size of the font (in pixels) to use in the y2 axis labels."},"x1-axis-label-width":{title:"Axis Label Width",type:"number",default:60,description:"Width (in pixels) of the axis label width."},"y-axis-label-width":{title:"Axis Label Width",type:"number",default:95,description:"Width (in pixels) of the axis label width. This also controls the width of the y-axis."},"y2-axis-label-width":{title:"Axis Label Width",type:"number",default:95,description:"Width (in pixels) of the axis label width. This also controls the width of the y-axis."},"x1-axis-line-color":{title:"Axis Line Color",type:"string",default:"#000000",format:"color",description:"Color of the axis line."},"y-axis-line-color":{title:"Axis Line Color",type:"string",default:"#000000",format:"color",description:"Color of the axis line."},"y2-axis-line-color":{title:"Axis Line Color",type:"string",default:"#000000",format:"color",description:"Color of the axis line."},"x1-axis-line-width":{title:"Axis Line Width",type:"number",default:.3,description:"Thickness (in pixels) of the axis line."},"y-axis-line-width":{title:"Axis Line Width",type:"number",default:.3,description:"Thickness (in pixels) of the axis line."},"y2-axis-line-width":{title:"Axis Line Width",type:"number",default:.3,description:"Thickness (in pixels) of the axis line."},"y-axis-include-zero":{title:"Include Zero",type:"string",default:"false",description:"If this option is set, the y-axis will always include zero, typically as the lowest value. This can be used to avoid exaggerating the variance in the data."},"y2-axis-include-zero":{title:"Include Zero",type:"string",default:"false",description:"If this option is set, the y-axis will always include zero, typically as the lowest value. This can be used to avoid exaggerating the variance in the data."},"y-axis-labels-kmb":{title:"Labels KMB",type:"string",default:"false",description:"Show K/M/B for thousands/millions/billions on y-axis."},"y2-axis-labels-kmb":{title:"Labels KMB",type:"string",default:"false",description:"Show K/M/B for thousands/millions/billions on y-axis."},"show-range-selector":{title:"Show Slider",type:"string",default:"false",description:"Show or hide the slider widget."},"range-selector-alpha":{title:"Alpha",type:"number",default:.6,description:"The transparency of the veil that is drawn over the unselected portions of the slider mini plot. A value of 0 represents full transparency and the unselected portions of the mini plot will appear as normal. A value of 1 represents full opacity and the unselected portions of the mini plot will be hidden."},"range-selector-background-line-width":{title:"Background Line Width",type:"number",default:1,description:"The width of the lines below and on both sides of the slider mini plot."},"range-selector-background-stroke-color":{title:"Background Stroke Color",type:"string",default:"#808080",format:"color",description:"The color of the lines below and on both sides of the slider mini plot."},"range-selector-foreground-line-width":{title:"Forground Line Width",type:"number",default:1,description:"The width the lines in the interactive layer of the slider."},"range-selector-foreground-stroke-color":{title:"Forground Stroke Color",type:"string",default:"#000000",format:"color",description:"The color of the lines in the interactive layer of the slider."},"range-selector-height":{title:"Height",type:"number",default:40,description:"Height, in pixels, of the slider widget."},"range-selector-plot-fill-color":{title:"Plot Fill Color",type:"string",default:"#A7B1C4",format:"color",description:"The slider mini plot fill color."},"range-selector-plot-fill-gradient-color":{title:"Plot Fill Gradient Color",type:"string",default:"#FFFFFF",format:"color",description:"The top color for the slider mini plot fill color gradient."},"range-selector-plot-line-width":{title:"Plot Line Width",type:"number",default:1.5,description:"The width of the slider mini plot line."},"range-selector-plot-stroke-color":{title:"Plot Stroke Color",type:"string",default:"#808FAB",format:"color",description:"The slider mini plot stroke color."},"x1-draw-grid":{title:"Draw X-Axis Grid Lines",type:"string",default:"true",description:"Determines whether to display x-axis grid lines in the chart."},"y-draw-grid":{title:"Draw Y-Axis Grid Lines",type:"string",default:"true",description:"Determines whether to display y-axis grid lines in the chart."},"y2-draw-grid":{title:"Draw Y2-Axis Grid Lines",type:"string",default:"false",description:"Determines whether to display y2-axis grid lines in the chart."},"x1-grid-line-color":{title:"X-Axis Grid Line Color",type:"string",default:"#000000",format:"color",description:"X-axis grid line color."},"y-grid-line-color":{title:"Y-Axis Grid Line Color",type:"string",default:"#000000",format:"color",description:"Y-axis grid line color."},"y2-grid-line-color":{title:"Y2-Axis Grid Line Color",type:"string",default:"#000000",format:"color",description:"Y2-axis grid line color."},"x1-grid-line-width":{title:"X-Axis Grid Line Width",type:"number",default:.3,description:"X-axis grid line width."},"y-grid-line-width":{title:"Y-Axis Grid Line Width",type:"number",default:.3,description:"Y-axis grid line width."},"y2-grid-line-width":{title:"Y2-Axis Grid Line Width",type:"number",default:.3,description:"Y2-axis grid line width."},"independent-ticks":{title:"Y Axes Alignment",type:"string",default:"y-primary",description:"This option defines whether the y axes should align their ticks or if they should be independent.",placeholder:" "},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:'[["2009-12-31T22:00:00.000Z",1,99,1039600.0000000001,1960400],["2010-01-01T22:00:00.000Z",2,98,1078400,1921600]]'}},"x1-axis-label":{title:"X-axis Label",type:"string",default:"",description:"X-axis Label."},"y-axis-label":{title:"Y-axis Label",type:"string",default:"",description:"Y-axis Label."},"y2-axis-label":{title:"Y2-axis Label",type:"string",default:"",description:"Y2-axis Label."},"legend-labels":{title:"Legend Labels",type:"string",default:"['X', 'Y1', 'Y2', 'Y3', 'Y4']",description:"A name for each data series, including the independent (X) series."},"legend-Mapping":{title:"Legend Mapping",type:"string",default:"['x', 'y', 'y', 'y2', 'y2']",description:"Mapping the legends to their corresponding axis."},boxLabel:{title:"Box label",type:"string",description:"Define your widget box title."}}}},{name:"bar",label:"Bar Chart",class:"scriptr-chart",commonData:!0,show:!0,defaults:{type:"bar",boxLabel:"Bar Chart",stacked:"true",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:["#aa241d","#edcfce"],transport:"wss","on-format-data":"return data;","msg-tag":"chart",data:'[{"y":"2006","a":88,"b":20},{"y":"2007","a":30,"b":34},{"y":"2008","a":90,"b":42},{"y":"2009","a":89,"b":59},{"y":"2010","a":43,"b":61},{"y":"2011","a":85,"b":69},{"y":"2012","a":29,"b":65}]',"grid-text-family":"Arial","hide-hover":"auto"},box:{sizeY:2,sizeX:2,minSizeX:1,minSizeY:1},imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/b8a3ec79/images/bar-chart.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!1,groupBy:"dataStream",multiple:"true",callback:"multiSelectCallBack",widgetName:"bar",limitTo:50}}]}]},{title:"X",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:["xkey","xlabel-angle",{type:"hidden",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Y",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["ykeys","pre-units","ymin",{key:"stacked",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"hide-hover",titleMap:[{value:"auto",name:"Auto"},{value:"false",name:"Never"},{value:"always",name:"Always"}]}]},{type:"section",htmlClass:"col-xs-6",items:["labels","post-units","ymax",{key:"colors",items:[{key:"colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Grid",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"grid-text-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"grid-text-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]},{key:"grid-text-weight",notitle:!1,type:"strapselect",titleMap:[{value:"normal",name:"Normal"},{value:"bold",name:"Bold"}]},"grid-text-size"]}]}]},{title:"Goals",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"goal-line-colors",condition:"model.goals.length > 0",required:!0,items:[{key:"goal-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{key:"goal-line-colors",condition:"model.goals.length == 0",required:!1}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box label",type:"string",description:"Define your widget box title."},stream:{title:"Data Streams",type:"array",items:{type:"string"},description:"",placeholder:" "},data:{title:"Data",type:"string",description:"Data to plot in case of static data.This is an array of objects, containing x and y attributes as described by the xkey and ykeys options. The order in which you provide the data is the order in which the bars are displayed.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},"parse-time":{title:"Parse time",type:"hidden",default:"false",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},xkey:{title:"X key",type:"string",description:"A string containing the name of the attribute that contains X labels."},ykeys:{title:"Y keys",type:"string",description:"A list of strings containing names of attributes that contain Y values (one for each series of data to be plotted)."},labels:{title:"Labels",type:"string",description:"A list of strings containing labels for the data series to be plotted (corresponding to the values in the ykeys option)."},colors:{title:"Colors",type:"array",default:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],description:"Array containing colors for the series bars.",items:{type:"string",format:"color"}},stacked:{title:"Stacked",type:"string",default:"false",description:"Set to true to draw bars stacked vertically."},"hide-hover":{title:"Hide hover",default:"auto",type:"string",description:"Set to Never to always show a hover legend. Set to 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes.",default:"true"},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines.",default:"true"},"grid-text-color":{title:"Grid text color",type:"string",description:"Set the color of the axis labels (default: #888).",format:"color",default:"#888"},"grid-text-size":{title:"Grid text size",type:"number",description:"Set the point size of the axis labels (default: 12).",default:12},"grid-text-family":{title:"Grid text family",type:"string",description:"Set the font family of the axis labels (default: sans-serif).",default:"Source Sans Pro",placeholder:" "},"grid-text-weight":{title:"Grid text weight",type:"string",description:"Set the font weight of the axis labels (default: normal).",default:"normal",placeholder:" "},ymax:{title:"Y maximum value",type:"string",default:"auto",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"Y minimum value",type:"string",default:"auto 0",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},"post-units":{title:"Post units",type:"string",description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre units",type:"string",description:"Set to a string value (eg: '$') to add a label prefix all y-labels."},"xlabel-angle":{title:"X label angle",type:"number",default:0,description:"The angle in degrees from horizontal to draw x-axis labels."},"ylabel-format":{title:"Y label Format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"array",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]",items:{type:"number"}},"goal-stroke-width":{title:"Goal stroke width",type:"number",default:1,description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal line colors",type:"array",default:["#666633","#999966","#cc6666","#663333"],description:"Array of color values to use for the goal line colors.",items:{format:"color",type:"string"}}},required:["xkey","ykeys","labels"]}},{name:"area",label:"Area Chart",class:"scriptr-chart",commonData:!0,show:!0,defaults:{type:"area","on-format-data":"return data;",boxLabel:"Area Chart",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:["#5fc100","#005487"],transport:"wss","msg-tag":"chart","grid-text-family":"Arial",data:'[{"y":2000,"a":64,"b":82},{"y":2003,"a":53,"b":48},{"y":2004,"a":81,"b":58},{"y":2005,"a":68,"b":72},{"y":2008,"a":52,"b":60},{"y":20011,"a":55,"b":30},{"y":2013,"a":79,"b":40}]',"hide-hover":"auto"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/15759895/images/area-chart.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!1,groupBy:"dataStream",multiple:"true",callback:"multiSelectCallBack",widgetName:"area",limitTo:50}}]}]},{title:"X",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:["xkey","xlabel-angle",{type:"hidden",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Y",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["ykeys","pre-units","ymin",{type:"radios-inline",key:"hide-hover",titleMap:[{value:"auto",name:"Auto"},{value:"false",name:"Never"},{value:"always",name:"Always"}]}]},{type:"section",htmlClass:"col-xs-6",items:["labels","post-units","ymax"]}]}]},{title:"Grid",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"grid-text-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"grid-text-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]},{key:"grid-text-weight",notitle:!1,type:"strapselect",titleMap:[{value:"normal",name:"Normal"},{value:"bold",name:"Bold"}]},"grid-text-size"]}]}]},{title:"Lines & Points",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["line-width",{type:"radios-inline",key:"smooth",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"colors",items:[{key:"colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]},{type:"section",htmlClass:"col-xs-6",items:["point-size",{key:"point-fill-colors",items:[{key:"point-fill-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{key:"point-stroke-colors",items:[{key:"point-stroke-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Area",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"behave-like-line",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"fill-opacity",step:"0.1"}]}]}]},{title:"Goals",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"goal-line-colors",items:[{key:"goal-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Events",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["events","event-stroke-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"event-line-colors",items:[{key:"event-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},stream:{title:"Data Streams",type:"array",items:{type:"string"},description:"",placeholder:" "},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},"parse-time":{title:"Parse time",type:"hidden",default:"false",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},xkey:{title:"X key",type:"string",description:"A string containing the name of the attribute that contains date (X) values. Timestamps are accepted in the form of millisecond timestamps (as returned by Date.getTime() or as strings in the following formats: 2012, 2012 Q1, 2012 W1, 2012-02, 2012-02-24, 2012-02-24 15:00, 2012-02-24 15:00:00, 2012-02-24 15:00:00.000. date/time strings can optionally contain a T between the date and time parts, and/or a Z suffix, for compatibility with ISO-8601 dates."},ykeys:{title:"Y keys",type:"string",description:"A list of strings containing names of attributes that contain Y values (one for each series of data to be plotted)."},labels:{title:"Labels",type:"string",description:"A list of strings containing labels for the data series to be plotted (corresponding to the values in the ykeys option)."},colors:{title:"Colors",type:"array",description:"Array containing colors for the series lines/points.",default:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],items:{format:"color",type:"string"}},"line-width":{title:"Line width",type:"number",default:3,description:"Width of the series lines, in pixels."},"point-size":{title:"Point size",type:"number",default:4,description:"Diameter of the series points, in pixels."},"point-fill-colors":{title:"Point fill colors",type:"array",description:"Colors for the series points. By default uses the same values as lineColors.",items:{format:"color",type:"string"}},"point-stroke-colors":{title:"Point Stroke Colors",type:"array",default:["#fff"],description:"Colors for the outlines of the series points. (#ffffff by default).",items:{format:"color",type:"string"}},ymax:{title:"Y maximum value",type:"string",default:"auto",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"Y minimum value",type:"string",default:"auto 0",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},smooth:{title:"Smooth",type:"string",default:"true",description:"Set to false to disable line smoothing."},"hide-hover":{title:"Hide hover",default:"auto",type:"string",description:"Set to Never to always show a hover legend. Set to 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},"post-units":{title:"Post units",type:"string",
description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre units",type:"string",description:"Set to a string value (eg: '$') to add a label prefix all y-labels."},xlabels:{title:"X labels",type:"string",default:"auto",description:"Sets the x axis labelling interval. By default the interval will be automatically computed.",format:"uiselect",placeholder:" ",items:[{value:"auto",label:"auto"},{value:"decade",label:"decade"},{value:"year",label:"year"},{value:"month",label:"month"},{value:"week",label:"week"},{value:"day",label:"day"},{value:"hour",label:"hour"},{value:"30min",label:"30min"},{value:"15min",label:"15min"},{value:"10min",label:"10min"},{value:"5min",label:"5min"},{value:"minute",label:"minute"},{value:"30sec",label:"30sec"},{value:"15sec",label:"15sec"},{value:"10sec",label:"10sec"},{value:"5sec",label:"5sec"},{value:"second",label:"second"}]},"xlabel-angle":{title:"X label angle",type:"number",default:0,description:"The angle in degrees from horizontal to draw x-axis labels."},"xlabel-format":{title:"X label format",type:"string",description:"A function that accepts Date objects and formats them for display as x-axis labels. Overrides the default formatter chosen by the automatic labeller or the xLabels option. function (x) { return x.toString(); }"},"ylabel-format":{title:"Y label format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"array",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]",items:{type:"number"}},"goal-stroke-width":{title:"Goal stroke width",type:"number",default:1,description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal line colors",type:"array",default:["#666633","#999966","#cc6666","#663333"],description:"Array of color values to use for the goal line colors. If you list fewer colors here than you have lines in goals, then the values will be cycled.",items:{format:"color",type:"string"}},events:{title:"Events",type:"array",description:"A list of x-values to draw as vertical 'event' lines on the chart. ex: ['2012-01-01', '2012-02-01']",items:{type:"string"}},"event-stroke-width":{title:"Event stroke width",type:"number",default:1,description:"Width, in pixels, of the event lines."},"event-line-colors":{title:"Event line colors",type:"array",default:["#005a04","#ccffbb","#3a5f0b","#005502"],description:"Array of color values to use for the event line colors. If you list fewer colors here than you have lines in events, then the values will be cycled.",items:{format:"color",type:"string"}},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes.",default:"true"},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines.",default:"true"},"grid-text-color":{title:"Grid text color",type:"string",description:"Set the color of the axis labels (default: #888).",format:"color",default:"#888"},"grid-text-size":{title:"Grid text size",type:"number",description:"Set the point size of the axis labels (default: 12).",default:12},"grid-text-family":{title:"Grid text family",type:"string",description:"Set the font family of the axis labels (default: sans-serif).",default:"Source Sans Pro",placeholder:" "},"grid-text-weight":{title:"Grid text weight",type:"string",description:"Set the font weight of the axis labels (default: normal).",default:"normal",placeholder:" "},"fill-opacity":{title:"Fill opacity",type:"number",default:1,description:"Change the opacity of the area fill color. Accepts values between 0.0 (for completely transparent) and 1.0 (for completely opaque).",minimum:0,maximum:1},"behave-like-line":{title:"Behave like Line",type:"string",default:"false",description:"Set to true to overlay the areas on top of each other instead of stacking them."},"date-format":{title:"Date format",type:"string",description:"A function that accepts millisecond timestamps and formats them for display as chart labels. default is function (x) { return new Date(x).toString() }."}},required:["xkey","ykeys"]}},{name:"lineChart",label:"Line Chart",class:"scriptr-chart",commonData:!0,show:!1,defaults:{type:"line","on-format-data":"return data;",boxLabel:"Line Chart",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:["#005588","#ffa500"],transport:"wss","msg-tag":"chart",data:'[{"y": 2006, "a": 2, "b": 3 }, { "y": 2007, "a": 82, "b": 68 }, { "y": 2009, "a": 70, "b": 99 }, { "y":2010, "a": 30, "b": 64 }, { "y": 2011, "a": 72, "b":100 }, { "y": 2012, "a": 81, "b": 81 }, { "y": 2013,"a": 52, "b": 39 } ]',"grid-text-family":"Arial","hide-hover":"auto"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/line-chart.svg",form:[{type:"tabs",tabs:[{title:"X",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:["xkey","xlabel-angle",{type:"radios-inline",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Y",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["ykeys","pre-units","ymin",{type:"radios-inline",key:"hide-hover",titleMap:[{value:"auto",name:"Auto"},{value:"false",name:"Never"},{value:"always",name:"Always"}]}]},{type:"section",htmlClass:"col-xs-6",items:["labels","post-units","ymax"]}]}]},{title:"Grid",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"grid-text-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"grid-text-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]},{key:"grid-text-weight",notitle:!1,type:"strapselect",titleMap:[{value:"normal",name:"Normal"},{value:"bold",name:"Bold"}]},"grid-text-size"]}]}]},{title:"Lines & Points",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["line-width",{type:"radios-inline",key:"smooth",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"colors",items:[{key:"colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]},{type:"section",htmlClass:"col-xs-6",items:["point-size",{key:"point-fill-colors",items:[{key:"point-fill-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},"point-stroke-colors"]}]}]},{title:"Goals",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"goal-line-colors",items:[{key:"goal-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Events",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["events","event-stroke-width"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"event-line-colors",items:[{key:"event-line-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},xkey:{title:"X key",type:"string",description:"A string containing the name of the attribute that contains date (X) values. Timestamps are accepted in the form of millisecond timestamps (as returned by Date.getTime() or as strings in the following formats: 2012, 2012 Q1, 2012 W1, 2012-02, 2012-02-24, 2012-02-24 15:00, 2012-02-24 15:00:00, 2012-02-24 15:00:00.000. date/time strings can optionally contain a T between the date and time parts, and/or a Z suffix, for compatibility with ISO-8601 dates."},ykeys:{title:"Y keys",type:"string",description:"A list of strings containing names of attributes that contain Y values (one for each series of data to be plotted)."},labels:{title:"Labels",type:"string",description:"A list of strings containing labels for the data series to be plotted (corresponding to the values in the ykeys option)."},colors:{title:"Colors",type:"array",description:"Array containing colors for the series lines/points.",default:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],items:{format:"color",type:"string"}},"line-width":{title:"Line width",type:"number",default:3,description:"Width of the series lines, in pixels."},"point-size":{title:"Point size",type:"number",default:4,description:"Diameter of the series points, in pixels."},"point-fill-colors":{title:"Point fill colors",type:"array",description:"Colors for the series points. By default uses the same values as lineColors.",items:{format:"color",type:"string"}},"point-stroke-colors":{title:"Point Stroke Colors",type:"array",default:["#fff"],description:"Colors for the outlines of the series points. (#ffffff by default).",items:{format:"color",type:"string"}},ymax:{title:"Y maximum value",type:"string",default:"auto",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"Y minimum value",type:"string",default:"auto 0",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},smooth:{title:"Smooth",type:"string",default:"true",description:"Set to false to disable line smoothing."},"hide-hover":{title:"Hide hover",default:"auto",type:"string",description:"Set to Never to always show a hover legend. Set to 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},"parse-time":{title:"Parse time",type:"string",default:"true",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},"post-units":{title:"Post units",type:"string",description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre units",type:"string",description:"Set to a string value (eg: '$') to add a label prefix all y-labels."},xlabels:{title:"X labels",type:"string",default:"auto",description:"Sets the x axis labelling interval. By default the interval will be automatically computed.",format:"uiselect",placeholder:" ",items:[{value:"auto",label:"auto"},{value:"decade",label:"decade"},{value:"year",label:"year"},{value:"month",label:"month"},{value:"week",label:"week"},{value:"day",label:"day"},{value:"hour",label:"hour"},{value:"30min",label:"30min"},{value:"15min",label:"15min"},{value:"10min",label:"10min"},{value:"5min",label:"5min"},{value:"minute",label:"minute"},{value:"30sec",label:"30sec"},{value:"15sec",label:"15sec"},{value:"10sec",label:"10sec"},{value:"5sec",label:"5sec"},{value:"second",label:"second"}]},"xlabel-angle":{title:"X label angle",type:"number",default:0,description:"The angle in degrees from horizontal to draw x-axis labels."},"xlabel-format":{title:"X label format",type:"string",description:"A function that accepts Date objects and formats them for display as x-axis labels. Overrides the default formatter chosen by the automatic labeller or the xLabels option. function (x) { return x.toString(); }"},"ylabel-format":{title:"Y label format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"array",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]",items:{type:"number"}},"goal-stroke-width":{title:"Goal stroke width",type:"number",default:1,description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal line colors",type:"array",default:["#666633","#999966","#cc6666","#663333"],description:"Array of color values to use for the goal line colors. If you list fewer colors here than you have lines in goals, then the values will be cycled.",items:{format:"color",type:"string"}},events:{title:"Events",type:"array",description:"A list of x-values to draw as vertical 'event' lines on the chart. ex: ['2012-01-01', '2012-02-01']",items:{type:"string"}},"event-stroke-width":{title:"Event stroke width",type:"number",default:1,description:"Width, in pixels, of the event lines."},"event-line-colors":{title:"Event line colors",type:"array",default:["#005a04","#ccffbb","#3a5f0b","#005502"],description:"Array of color values to use for the event line colors. If you list fewer colors here than you have lines in events, then the values will be cycled.",items:{format:"color",type:"string"}},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes.",default:"true"},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines.",default:"true"},"grid-text-color":{title:"Grid text color",type:"string",description:"Set the color of the axis labels (default: #888).",format:"color",default:"#888"},"grid-text-size":{title:"Grid text size",type:"number",description:"Set the point size of the axis labels (default: 12).",default:12},"grid-text-family":{title:"Grid text family",type:"string",description:"Set the font family of the axis labels (default: sans-serif).",default:"Source Sans Pro",placeholder:" "},"grid-text-weight":{title:"Grid text weight",type:"string",description:"Set the font weight of the axis labels (default: normal).",default:"normal",placeholder:" "},"date-format":{title:"Date format",type:"string",description:"A function that accepts millisecond timestamps and formats them for display as chart labels. default is function (x) { return new Date(x).toString() }."}},required:["xkey","ykeys"]}},{name:"donut",label:"Donut Chart",class:"scriptr-chart",commonData:!0,show:!0,defaults:{type:"donut","on-format-data":"return data;",boxLabel:"Donut Chart",transport:"wss",colors:["#005487","#fba723","#aa241d"],data:'[{label: "Drillers", value: 50}, {label: "Cranes",value: 20 }, {label: "Blasters", value: 30 }]',"msg-tag":"donut"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/donut-chart.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!0,groupBy:"dataStream",multiple:"false",callback:"multiSelectCallBack",widgetName:"donut",limit:1,limitTo:50}}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["donut-formatter",{key:"background-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"label-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"colors",items:[{key:"colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{stream:{title:"Data Stream",type:"string",description:"",placeholder:" "},boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},colors:{title:"Colors",type:"array",default:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],description:"An array of strings containing HTML-style hex colors for each of the donut segments. Note: if there are fewer colors than segments, the colors will cycle back to the start of the array when exhausted.",items:{type:"string",format:"color"}},"label-color":{title:"Donut Label Color",type:"string",description:"Donut label color.",format:"color",default:"#eeeeee"},"background-color":{title:"Donut Background Color",type:"string",description:"Donut background color.",format:"color",default:"#ffffff"},"donut-formatter":{title:"Donut Formatter",type:"string",description:"Can either be a string for a filter name (eg. 'currency') or a reference to a scope function.  The latter is not yet available."}},required:[]}},{name:"gauge",label:"Gauge",class:"scriptr-gauge",commonData:!0,show:!0,defaults:{transport:"wss","on-format-data":"return data;",boxLabel:"Gauge","msg-tag":"gauge",data:30,"value-font-color":"#005588"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgCls:"gauge-img",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/gauge.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!0,groupBy:"dataStream",multiple:"false",callback:"multiSelectCallBack",widgetName:"gauge",limit:1,limitTo:50}}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:["symbol"]},{type:"section",htmlClass:"col-xs-3",items:["value-min-font-size"]},{type:"section",htmlClass:"col-xs-3",items:[{key:"value-font-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-3",items:[{key:"hide-value",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr/>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:["label"]},{type:"section",htmlClass:"col-xs-3",items:["label-min-font-size"]},{type:"section",htmlClass:"col-xs-3",items:[{key:"label-font-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr/>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"value-font-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"gauge-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr/>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"format-number",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["decimals"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"human-friendly",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["human-friendly-decimal"]}]}]},{title:"Min/Max",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["min","min-label-min-font-size",{key:"hide-min-max",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["max","max-label-min-font-size",{key:"reverse",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Sectors",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:[{key:"pointer",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-4",items:[{key:"gauge-width-scale",step:"0.1"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:[{key:"donut",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-4",items:["donut-start-angle"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:[{key:"no-gradient",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-4",items:[{key:"level-colors",items:[{key:"level-colors[]",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}],style:{add:"btn-primary btn-sm pull-left"}}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:[{key:"custom-sectors",title:"",items:[{key:"custom-sectors.percents",title:"Custom percent",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]},{type:"section",htmlClass:"col-xs-8",items:[{key:"custom-sectors",title:"",items:[{key:"custom-sectors.ranges",startEmpty:!0,title:"Custom Ranges",style:{add:"btn-primary btn-sm pull-left"},items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-sectors.ranges[].color",title:"color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-4",items:[{key:"custom-sectors.ranges[].lo"}]},{type:"section",htmlClass:"col-xs-4",items:[{key:"custom-sectors.ranges[].hi"}]}]}]}]}]}]}]},{title:"shadow",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:[{key:"show-inner-shadow",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-3",items:["shadow-size"]},{type:"section",htmlClass:"col-xs-3",items:[{key:"shadow-opacity",step:"0.1"}]},{type:"section",htmlClass:"col-xs-3",items:["shadow-vertical-offset"]}]}]},{title:"Animation",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"start-animation-type",notitle:!1,type:"strapselect",titleMap:[{value:"linear",name:"linear"},{value:">",name:">"},{value:"<",name:"<"},{value:"<>",name:"<>"},{value:"bounce",name:"bounce"}]},{key:"refresh-animation-type",notitle:!1,type:"strapselect",titleMap:[{value:"linear",name:"linear"},{value:">",name:">"},{value:"<",name:"<"},{value:"<>",name:"<>"},{value:"bounce",name:"bounce"}]},{key:"counter",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["start-animation-time","refresh-animation-time"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Static data",type:"number",description:"Gauge static value to show"},stream:{title:"Data Stream",type:"string",description:"",placeholder:" "},"value-font-color":{title:"Value color",type:"string",default:"#005386",format:"color",description:"Color of the gauge value text"},min:{title:"Gauge min",type:"number",default:0,description:"Minimum gauge value."},max:{title:"Gauge max",type:"number",default:100,description:"Maximum gauge value."},"hide-min-max":{title:"Hide min/max",type:"string",default:"false",description:"Select true to hide min and max values (bool)"},"hide-value":{title:"Hide value",type:"string",default:"false",description:"Select true to hide gauge value"},"show-inner-shadow":{title:"Show shadow",type:"string",default:"false",description:"Show gauge inner shadow"},"gauge-color":{title:"Gauge background",type:"string",format:"color",description:"Background color of gauge."},"custom-sectors":{title:"Custom sectors",type:"object",properties:{percents:{title:"Percents",type:"string",default:"false",description:"Set to true for to have percent based sectors."},ranges:{type:"array",items:{type:"object",properties:{color:{title:"Sector Color",type:"string",format:"color",required:!0},lo:{title:"Low",type:"number",required:!0},hi:{title:"High",type:"number",required:!0}}}}}},"shadow-size":{title:"Shadow size",type:"number",default:5,description:"Gauge inner shadow size."},"shadow-opacity":{title:"Shadow opacity",type:"number",default:.2,description:"Shadow opacity, values 0 ~ 1",minimum:0,maximum:1},label:{title:"Label",type:"string",description:"Text to show below gauge value."},"label-font-color":{title:"Label color",type:"string",description:"Color of label under the value",format:"color"},"start-animation-type":{title:"Start animation",type:"string",default:"linear",description:"Select type of initial animation.",placeholder:" "},"refresh-animation-type":{title:"Refresh animation",type:"string",default:"linear",description:"Select type of refresh animation.",placeholder:" "},"value-font-family":{title:"Gauge font family",type:"string",default:"Arial",placeholder:" ",description:"Font family of the gauge."},"value-min-font-size":{title:"Value size",type:"number",default:12,description:"Minimum font size for the value."},"label-min-font-size":{title:"Label size",type:"number",default:12,description:"Minimum font size for the label."},"min-label-min-font-size":{title:"Min label size",type:"number",default:12,description:"Minimum font size for the minimum label."},"max-label-min-font-size":{title:"Max label size",type:"number",default:12,description:"Minimum font size for the maximum label."},"gauge-width-scale":{title:"Width scale",type:"number",default:1,description:"Gauge width scale."},"shadow-vertical-offset":{title:"Shadow vertical offset",type:"number",default:3,description:"Defines how much is shadow offset from top."},"level-colors":{title:"Level colors",type:"array",minItems:1,items:{type:"string",format:"color"},format:"color",default:["#005588","#5fc100","#fe4444"],description:"Colors of indicator, from lower to upper."},"relative-gauge-size":{title:"Relative gauge size",type:"string",default:"true",description:"Set to true to use sector-based color change, false to use gradual color change."},"no-gradient":{title:"No gradient",type:"string",default:"false",description:"Set to true to use sector-based color change, false to use gradual color change."},"start-animation-time":{title:"Start animation time",type:"number",default:700,description:"Duration of initial load animation in ms."},"refresh-animation-time":{title:"Refresh animation time",type:"number",default:700,description:"Length of refresh animation in ms."},donut:{title:"Donut",type:"string",default:"false",description:"Turn the gauge into a full circle donut."},"donut-start-angle":{title:"Donut start angle",type:"number",default:90,description:"Angle to start from when in donut mode."},width:{title:"Width",type:"number",description:"Gauge width"},height:{title:"Height",type:"number",description:"Gauge height."},reverse:{title:"Reverse",type:"string",default:"false",description:"Set to trueto swap max and min (with max appearing on the left, min on the right)."},decimals:{title:"Decimals",type:"number",default:0,description:"Quantity of decimal numbers to show."},symbol:{title:"Symbol",type:"string",description:"Unit of measure that will be appended to value."},"format-number":{title:"Format number",type:"string",default:"false",description:"Set to true to format numbers."},"human-friendly":{title:"Human friendly",type:"string",default:"false",description:"Set to true to show shorthand big numbers (300K instead of 300XXX)."},"human-friendly-decimal":{title:"Human friendly decimals",type:"number",default:0,description:"Number of decimal places for our human friendly number to contain."},pointer:{title:"Pointer",type:"string",default:"false",description:"Set to true to show value pointer."},counter:{title:"Counter",type:"string",default:"false",description:"Set to true to increase numbers one by one."}},required:["level-colors"]}},{name:"thermometer",label:"Thermometer",
class:"scriptr-thermometer",commonData:!0,show:!0,defaults:{transport:"wss",api:"UIComponents/dashboard/frontend/examples/thermometer/getThermometerValue","msg-tag":"thermometer","on-format-data":"return data;",boxLabel:"Thermometer",data:"0",step:30,unit:"°C","custom-sectors":[{color:"#005588",lo:0,hi:30},{color:"#aa241d",lo:30,hi:60},{color:"#ffa500",lo:60,hi:90}]},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1,maxSizeX:1,maxSizeY:2},imgCls:"thermometer-img",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/thermometer.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!0,groupBy:"dataStream",multiple:"false",callback:"multiSelectCallBack",widgetName:"thermometer",limit:1,limitTo:50}}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12 col-sm-6",items:[{key:"out-of-range-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-12 col-sm-6",items:[{type:"section",htmlClass:"",items:["step"]},{type:"section",htmlClass:"",items:[{key:"custom-sectors",title:"Fill Color",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-sectors[].color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-sectors[].lo"}]},{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-sectors[].hi"}]}]}]}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{data:{title:"Thermometer Value",type:"string",description:"Thermometer Value (0 to 100)"},stream:{title:"Data Stream",type:"string",description:"",placeholder:" "},height:{title:"Height",type:"number",description:"Set the height of Thermometer."},unit:{title:"Unit",type:"hidden",default:"°C",description:"Set the unit value of Thermometer."},"out-of-range-color":{title:"Out Of Range Color",type:"string",description:"Set the default color for out of range values (default: #005588).",format:"color",default:"#5fc100"},"custom-sectors":{title:"Custom sectors",type:"array",items:{type:"object",properties:{color:{title:"Color",type:"string",format:"color",required:!0},lo:{title:"Low",type:"number",required:!0},hi:{title:"High",type:"number",required:!0}}}},step:{title:"Interval",type:"number",description:"Set the interval value between ticks."},boxLabel:{title:"Box Label",type:"string",description:""}},required:[]}},{name:"plotly",label:"Wind Rose",class:"scriptr-plotly",commonData:!0,show:!0,defaults:{transport:"wss",api:"UIComponents/dashboard/frontend/examples/plotly/getPlotlyData","msg-tag":"windrose","on-format-data":"return data;",boxLabel:"Wind Rose","retrieved-data":[{direction:"E",speeds:[2,3,15,17]},{direction:"ESE",speeds:[24,8,4]},{direction:"SSE",speeds:[2.5,7,16]},{direction:"S",speeds:[3,8,2,1,9,11]},{direction:"SSW",speeds:[13,3,7.5,8]},{direction:"WSW",speeds:[21,14,9]},{direction:"W",speeds:[7,0,8,9,15,19,11]},{direction:"WNW",speeds:[4,17,21]},{direction:"NNW",speeds:[14,7]},{direction:"N",speeds:[20,0,5,9,7]},{direction:"NNE",speeds:[1,.5,6.5]},{direction:"ENE",speeds:[3.5,30,15]}]},box:{sizeX:1,sizeY:1},imgCls:"",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/6106965d/images/wind-rose.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"windDirection",notitle:!1,type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!0,groupBy:"dataStream",callback:"multiSelectCallBack",widgetName:"plotly",widgetField:"Wind Direction",limit:"1",limitTo:50}}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"windSpeed",notitle:!1,type:"uiselectmultiple",options:{closeOnSelect:!0,groupBy:"dataStream",callback:"multiSelectCallBack",widgetName:"plotly",widgetField:"Wind Speed",limit:"1",limitTo:50}}]}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12 col-sm-6",items:["font-size",{key:"show-legend",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-12 col-sm-6",items:[{key:"custom-ranges",title:"Fill Color & Ranges",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-ranges[].color",title:"color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}}]},{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-ranges[].lo"}]},{type:"section",htmlClass:"col-xs-3",items:[{key:"custom-ranges[].hi"}]}]}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{"font-size":{title:"Font Size",type:"number",default:16,description:"Set the font size of the wind rose (in px)."},windSpeed:{title:"Wind Speed Data Stream",type:"string",description:"",placeholder:" "},windDirection:{title:"Wind Direction Data Stream",type:"string",description:"",placeholder:" "},"show-legend":{title:"Show Legend",type:"string",default:"true",description:"Set visibility of the legend."},boxLabel:{title:"Box Label",type:"string",description:""},"custom-ranges":{title:"Custom Ranges",type:"array",default:[{color:"#00476b",lo:0,hi:2},{color:"#005487",lo:2,hi:4},{color:"#006699",lo:4,hi:6},{color:"#0082b5",lo:6,hi:8},{color:"#0294c1",lo:8,hi:10},{color:"#06a9ce",lo:10,hi:20}],items:{type:"object",properties:{color:{title:"Sector Color",type:"string",format:"color",required:!0},lo:{title:"Low",type:"number",required:!0},hi:{title:"High",type:"number",required:!0}}}}},required:[]}},{name:"speedometer",label:"Speedometer",class:"scriptr-speedometer",commonData:!0,show:!1,defaults:{transport:"wss",boxLabel:"Speedometer","on-format-data":"return data;",data:45,"msg-tag":"speedometer"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0U0RkEwQjZFN0I3MTFFNjhGMEZBOEREMDEzMkY1NjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0U0RkEwQjVFN0I3MTFFNjhGMEZBOEREMDEzMkY1NjciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MmM0MmUzZDAtZTJjNC1iMjQyLWJjZTItYThjYWQ3ZjkxMzAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poq6iGcAAAS7SURBVHjazFhpbA1RFJ432qq1VUtUqK1FSGiUJ2jkWZ7YfpTG1ibULvHDnhA/hPhhDz+IJVWaWqKpNhEifRJCEY9KNSpEiiIhllL6qkFT3+FMnd4+rTfz+p6TfDkz584955szZ87cuTbNgrhcrhZQw4CxwFCgP9ADiAB0oAb4DLwEHgP3gCvAXafTWWM2rs0k2SFQC4C5QBcTLt4Cp4EMkL/frKRBNgFqCzBV859cADaDfKFfSYNsJNR2YKmXObVAMXCNdWnrgsL40Bev936PiV5TlZhQBFtfYDAwhrU3H0eADSD/yTJpEB4BdQbopQw9Aw4DJxHolRy4m7woCSoXmD4sJz1P8dcdKhVYBvRWfD4H5sDf7cY46U0QJufXJWHd81Vr5S5247AfnO9QCTcldD3No/nkh/wJoTjXOa7vpDFxBVQWECrMB9pnX8oNv/fQ3uHQmVFWCpnmkx/yR37FEMXL4vj/Xh6YMA/qhDBROlKRoVw8+p44fsQtLAGP3+fWBR/UKgu5RQ6AjzLEnE6lBrQSl85HzMwmM43JlMF0YXoPOIgwnVAAKHq81PbGm0z0eJ6/g/1p7N/B8QxJZz5/J40LOkKdBULY5KH2BoduZR6RTkTAfDOMeV4i+5H17uZ26mET8TjLvLyXBwYzoNKEaYaR4UAKl8o5YToOHgsakMaFo6EK/nTO2v3OiRNXaUESV37+Ps1mWylMiSB+Qy2PrXU1U1mlRR7LGYcXxhEMwhSX4hMPb/xsnOXhUHV1i1aUgx46hd9kKo+1qMNnASBLH5s99FGijvXVPvhi9dCByeISO7J9x8j0EjFQigtnUfMHTgFJvHILhPTgeBS3H3jMJj5i/BdPG7IcBv0OaM8D63E3u8XdxyHLTwJYGvXigd86qF18SsvczpTpkYJwLX8FZXt6Esh69hIvi3lpzHOkzgt4Q4qR5TfafyTMp1iYxhLpeGG4auGxDgBszcRd8orX+ftvyEMLjgcCB5uJuOTVn0hHC8NTC46p8S+n9QIviPwpklc0dQ+jyLU2rhtHwkpfvhYXbMeLUe1DiVB76sMta56ZFSD7Cae/GOP8W9+Ybh7nqLq2HCIvblFRuVSZvw+o9iHeLSadwsHNEifSm//w+tJglffDOPGMG+Gk9blAhYkSMYSIZ5oslQrJw+OwTxBjNZTpcmMboCYqsi0y88lC7V1Wzol4FIinwO9HH3o1lWwdD9fyOW3F8Add+UzG+eHDUKaYJwElID7FgutYcVymK+3E7oc3vcCLjToU/arFms2HOH5ApG8Kg4O3uqzIo7/Yw3hHytcfAhv/hhni1pU67MQbKlbkQyNjESb80b5LV3kfOr7tL6g7CeNii6Qb2966acLfQnFcAr6lxno6QwzMxCOJsfAyurm/q5LHPxS+lEYn3o3SJE+DdKboyaG8yWili6yGSuad0WzOVjK3Ml9kI9Ba7AwcV39sN0FtE+vqMXgUBUH7sXW5BkEVia82bcFtUH9s92u/N7+Nm8nAxIggEW7Ji/8Q8XLvbLBZg7uohFqhNPSDQUp0mrLOp1/Acq87TBg4D3VImKYFibRck+eAl2wU9Vd5LLRBQ91jMpdMMOQor/Ta8ZZCPfkpwABkBJ8fXRbYywAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"min/max",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["min-value","max-value"]},{type:"section",htmlClass:"col-xs-6",items:["tick-space-maj-val","tick-space-min-val"]}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-4",items:["tick-col-maj","outer-edge-col","needle-col",{key:"default-fonts",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]}]},{type:"section",htmlClass:"col-xs-4",items:["tick-col-min","inner-col","gauge-units"]},{type:"section",htmlClass:"col-xs-4",items:["tick-label-col","pivot-col","units-label-col"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Static data",type:"number",description:"Sets the value of needle to be pointed."},"min-value":{title:"Minimum Value",type:"number",description:"Minimum value to be shown in gauge scale.",default:0},"max-value":{title:"Maximum Value",type:"number",description:"Maximum value to be shown in gauge scale.",default:220},"tick-space-min-val":{title:"Minor Tick Space Value",type:"number",description:"Space between the major ticks of the gauge.",default:10},"tick-space-maj-val":{title:"Major Tick Space Value",type:"number",description:"Space between the sub ticks of the gauge.",default:20},"gauge-units":{title:"Gauge Units",type:"string",description:"Unit of the values to be shown(ex. Kmph,%)."},"tick-col-maj":{title:"Tick Major Color",type:"string",description:"Sets color of the major tick.",format:"color",default:"#C64DFF"},"tick-col-min":{title:"Tick Minor Color",type:"string",format:"color",description:"Sets color of the sub tick.",default:"#999999"},"outer-edge-col":{title:"Outer Edge color",type:"string",description:"Sets the color of outer circle of the gauge.",format:"color",default:"#f4f4f4"},"pivot-col":{title:"Pivot color",type:"string",description:"Sets color of the pivot.",format:"color",default:"#434a54"},"inner-col":{title:"Inner color",type:"string",description:"Sets color of inner body of the gauge.",format:"color",default:"#fff"},"units-label-col":{title:"Units Label Colour",type:"string",description:"Sets color of units label.",format:"color",default:"#C64DFF"},"tick-label-col":{title:"Tick Label Colour",type:"string",description:"Sets color of labels of the ticks.",format:"color",default:"#656D78"},"needle-col":{title:"Needle Colour",type:"string",description:"Sets color of the needle.",format:"color",default:"#C64DFF"},"default-fonts":{title:"Default Fonts",type:"string",description:"Sets the default fonts in gauge.",default:"Source Sans Pro",placeholder:" "}},required:[]}},{name:"progressbar",label:"ProgressBar",class:"scriptr-progressbar",commonData:!0,show:!1,defaults:{transport:"wss","msg-tag":"progressbar",value:"20",animate:"true","on-format-data":"return data;",title:"Progress bar",class:"progress-striped active"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzIwMzYyNENGNzg1MTFFNkEwRUNDNjZDRjJCNDk3Q0YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzIwMzYyNEJGNzg1MTFFNkEwRUNDNjZDRjJCNDk3Q0YiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnTLjfAAAAHGSURBVHja7JffK0NhGMe3mRWLbBEXLshc0eHOnbh2Q4miSC1kSpblbyBEWpRtRbI7/Aei3LhQfl65k/zI7581NN+3nlOvpzPjzup569Pznn3O8+57zt5zavZkMmnLtOGwZeCQ0BJaQktoCS2hJbSEltBphrM7etCCGgYJ7fMsUMrOfQNXNM8FRczfgweau0HhH/0deEyzvsoQcFDg+iW/UWaC4zhr+ARN5HzgiHl1MQb5SnD8g/dZ+AtQRb4CHDJ/CapVTpXXqe4wTj4xbVdkvx0lxJpGcc4GzcdAg+Y+QBv8KR1P0eKp/ATz76AV/pyOx0GjRf8Z5Ut829P4wECJscBxNEyS70AJMh+C3yTfgzLIfFDznShDzA/Db2s3jK8/Ar9l+SCiwYOyTvvJHHvAT74WJcIWXMaC0+TrUOaZj8HPkq9BWWB+ET5MXv38UYv1Z6zeHtloUPtwBZRr7hY0o+kV3ov5GsjR/C7opS8sQVkFLs3vgAHyqfr7yReQd7Mb1sd2gnoeXHZM1NtjDhSzC3oGNzTPA17m1UU90TwfeJi/Bi+/7Ld6m+jeHOqmBOzyb1xCS2gJLaEltISW0BJaQv+P8SXAADiWmlqqypMfAAAAAElFTkSuQmCC",form:[{type:"tabs",tabs:[{title:"Progress bar behaviour",items:["stacked","class","type","max",{key:"animate",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Progressbar Value",type:"number",description:"The current value of progress bar."},animate:{title:"Animate",type:"string",description:"Whether bars use transitions to achieve the width change."},class:{title:"Class",type:"string",description:"Can take 'progress-striped' or 'progress-striped active'"},type:{title:"Type",type:"string",description:"Bootstrap style type. Possible values are 'success', 'info', 'warning', and, 'danger' to use Bootstrap's pre-existing styling, or any desired custom suffix."},max:{title:"Total number of bars",type:"string",description:"A number that specifies the total value of bars that is required."},stacked:{title:"Stacked",type:"string",description:"Array of objects representing multiple stacked progress bars.","x-schema-form":{type:"textarea",placeholder:"[{value : 50, type : 'success', title : 'bar1'},{value : 70, type : 'warning', title : 'bar2'}]"}}},required:[]}},{name:"map",label:"Map",class:"scriptr-map",commonData:!0,show:!1,defaults:{"on-format-data":"return data;",transport:"wss",boxLabel:"Map","clustered-view":"true","cluster-zoom":8,heatmap:"true",bounce:"true",resize:"false",data:'{ "253812" : { "550153" : [ { "lat" : {"value": "40.84969"}, "long" :{"value": "-73.94168"}, "bounce": {"value" : "true"}, "speed" : { "value" : "8", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "30", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.3", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "2818", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "91", "description" :"Engine Temperature" }, "voltage" : { "value" : "13.99", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55101" }, "make" : { "value" : "Toyota" },"model" : { "value" : "Tacoma" }, "snr" : { "value" : "11","description" : "Signal to Noise Ratio" }, "rssi" : { "value" : "61","description" : "Received Signal Strength Indicator" } }, { "lat" :{"value": "40.84919"}, "long" : {"value": "-73.93897000000001"}, "speed": { "value" : "5", "description" : "Maximum Speed Recorded (since theprevious reading)" }, "fuel" : { "value" : "57", "description" :"Percentage of Fuel Remaining" }, "fuelRate" : { "value" : "1.4","description" : "Rate of Fuel Consumption" }, "rpm" : { "value" :"2838", "description" : "Engine Speed" }, "coolantTemperature" : {"value" : "94", "description" : "Engine Temperature" }, "voltage" : {"value" : "13.15", "description" : "Battery Voltage" }, "status" : {"value" : "RUNNING" }, "address" : {}, "mileage" : { "value" : "55101"}, "make" : { "value" : "Toyota" }, "model" : { "value" : "Tacoma" },"snr" : { "value" : "9", "description" : "Signal to Noise Ratio" },"rssi" : { "value" : "48", "description" : "Received Signal StrengthIndicator" } }, { "lat" : {"value": "40.848600000000005"}, "long" :{"value": "-73.93648"}, "speed" : { "value" : "9", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "76", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.2", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "2465", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "97", "description" :"Engine Temperature" }, "voltage" : { "value" : "13.39", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55101" }, "make" : { "value" : "Toyota" },"model" : { "value" : "Tacoma" }, "snr" : { "value" : "11","description" : "Signal to Noise Ratio" }, "rssi" : { "value" : "69","description" : "Received Signal Strength Indicator" } } ], "source" :"simulator", "order" : [ "550153" ] }, "253815" : { "550191" : [ { "lat": {"value": "40.80913"}, "long" : {"value": "-73.90327"}, "speed" : {"value" : "7", "description" : "Maximum Speed Recorded (since theprevious reading)" }, "fuel" : { "value" : "56", "description" :"Percentage of Fuel Remaining" }, "fuelRate" : { "value" : "1.2","description" : "Rate of Fuel Consumption" }, "rpm" : { "value" :"2123", "description" : "Engine Speed" }, "coolantTemperature" : {"value" : "100", "description" : "Engine Temperature" }, "voltage" : {"value" : "13.45", "description" : "Battery Voltage" }, "status" : {"value" : "RUNNING" }, "address" : {}, "mileage" : { "value" : "55043"}, "make" : { "value" : "Saab" }, "model" : { "value" : "9-3" }, "snr" :{ "value" : "13", "description" : "Signal to Noise Ratio" }, "rssi" : {"value" : "49", "description" : "Received Signal Strength Indicator" }}, { "lat" : {"value": "40.807500000000004"}, "long" : {"value":"-73.90557000000001"}, "speed" : { "value" : "6", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "16", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.7", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "1946", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "95", "description" :"Engine Temperature" }, "voltage" : { "value" : "12.87", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55043" }, "make" : { "value" : "Saab" },"model" : { "value" : "9-3" }, "snr" : { "value" : "13", "description" :"Signal to Noise Ratio" }, "rssi" : { "value" : "59", "description" :"Received Signal Strength Indicator" } } ], "source" : "simulator","order" : [ "550191" ] } }',"sources-info":'{"simulator": {"label": "Carvoyant"}}',"msg-tag":"everyone-main-live"},box:{sizeX:2,sizeY:2,minSizeX:2,minSizeY:2},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkU0NTdGMTJGMUU1MTFFNkJDRDE5REMyQjEzM0VEQzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkU0NTdGMTFGMUU1MTFFNkJDRDE5REMyQjEzM0VEQzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Phrv2GYAAAP1SURBVHja7JlrSFRBFMfnqklWW5qP0NK2KCgqo6DACntpRQ8MAwtK+tBLiygiqCiIDAyjD/Uhn5VFH8oUKYuCMiUqS4JKgojIrdQv+SDDtJe72//ocZu97euuXlfBgT9nd+48fvfMzNmZWcVqtQo5KYoi+jr9qYpIgNkDLYZCoG9QFZQ3bEHjLWf11Gw2Rj2hARsIkw9tdVGMoDcDvt1TaD+hb7rgBphSElSEF/SYRTdoQKyESbUbxeFGoYxdJZSgqeria8jbnrYdoKOX99p5x5gh/CJ3/Rv6phvCXLsfH8xy+as+9TTSUpuHQ9fZAXflhacIvwi7gZiH0RnhM2h0boCxASjByxxHgZAEdVaEz6ARCdpg2mwZlp+OC1o67L5BzdEP0sI1Q6NSFjSpD9jv2eZvcwkzqZgxr6X0CC/7HbYU/VdA8501/F+cjilPpwwrd5oD3a1PzLV4QomOpsOkQKdMI0sXwlbYOgpbL/yNJzEMmAGdrcJSlyksX67I1TdObk+ugX3Xk1GXkKNoiR5UeDXrE2DyYC8CvskBaCTMJg5vczi7HiqEXtAC6/b2TdHZXIYeRwthbpOjBqUP5GFoDFQpL2JvQ56RPAedAGAxbDb0Bkrm2LpcNc1olOIw1JewIA/J3u6aIvCyg3QU5TuFyG1BH2XuoF0txGPQTqiGvwcy5FPoK3QZSpTaIK8eJOdjRHbwgqxkD7pKj6FiLYvFlafb0XkBbAHePg52N89XgvfnMo3QOfoZRtlaJ+3sg1ZAoxxFRygNL2fVAu1RyAPQM4jm7ATosBTOKD/TBTB5uwHmgJPHx/H8rdawpClO00KEsvDRpDFu04jdVmXTNDvtTSzVe5cnp208nQSPVCpexjygoQHYxNtUmr/p+P7R27b609MCPx7VMEtgy3vTTr9CI50B8A8+zQwa6FCKONDEwQQtpBg/qKDFEPQQ9BD0wIAOw84x1tvKAf1FCcgpfKCgNJ726ch7wke6EmzEfg8IaEBRTF5Lew3eU6vPfItYZ1GWrtDyfAYNgHEw2yG6oYlWPX5IBwtoFpehsnRtcASi41lDb6DnovNgDFurBth49uoG2thJj6gNOnpno733nFeE8hl81qQ68bzGYtz14+wKoSfRbco16Dw6eyXBvYaZLbqvaelEs4WPYzNV7b+kutB11O9w88IzuA1qz+DqCsERNJ3p0qBpqrLVfBKnG5bnDE175CDV+e8XQdICA2i1F1PLwE5IB3SsR9B0qY6KCh/j6c2TVNOohQ+3BlVbJo4EhYBt6Yu14fU/AXiBKL5KoGuBKPXNFnSHYe97ehOlO7QEH8Bep/9OaP5RiMoH6Ge9QqYz6L8CDAAxBVRygRGqnQAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Map behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"clustered-view",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"heatmap",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"cluster-zoom","clustered-zoom-max","detailed-zoom-min"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"marker-info-window",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"bounce",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"focused-marker-zoom","path-stroke-opacity","path-stroke-weight","max-asset-points"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:["sources-info","default-center"]}]}]},{title:"Box Properties",items:["boxLabel"]},{title:"Help",items:[{type:"help",helpvalue:'<div class="alert alert-info"><h4>Map data format is as below, where: <br/> <br/>"253831": asset id, <br/> <br/> "550488": asset trip id & contains an array  of asset trip points data,  <br/> <br/>  "order" : [ "550488" ]\r\n   contains the asset\'s trips order <br/> <br/>and "source" : "simulator" is the asset source name.  </h4></div> <pre class="map-help-settings">{"253831" : {\r\n      "550488" : [\r\n            {\r\n               "lat" : {"value": "40.859140000000004"},\r\n               "long" : {"value": "-72.67528"},\r\n               "speed" : {\r\n                  "value" : "6",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "57",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "0.9",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "2181",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "104",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "13.38",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "11",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "46",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            },\r\n            {\r\n               "lat" : {"value": "40.859790000000004"},\r\n               "long" : {"value": "-72.67344"},\r\n               "speed" : {\r\n                  "value" : "11",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "23",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "1.6",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "1498",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "87",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "13.68",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "10",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "49",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            },\r\n            {\r\n               "lat" : {"value": "40.86056000000001"},\r\n               "long" : {"value": "-72.67124000000001"},\r\n               "speed" : {\r\n                  "value" : "15",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "32",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "1.8",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "1323",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "91",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "14.30",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "13",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "57",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            } ],\r\n      "source" : "simulator",\r\n      "order" : [ "550488" ]\r\n   } }</pre>'}]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},"clustered-view":{title:"Clustered View",type:"string",description:"Render map with a cluster view for conglomerate markers or not."},"cluster-zoom":{title:"Cluster Zoom",type:"number",description:"The initial map zoom level when clustered view is true.",default:3},heatmap:{title:"Heat Map",type:"string",description:"Enable/disable heat map."},bounce:{title:"Bounce",type:"string",description:"Enable/disable bouncing."},"clustered-zoom-max":{title:"Cluster Zoom Max",type:"number",description:"Map max zoom level with a rendered cluster view.",default:11},"focused-marker-zoom":{title:"Focused marker zoom",type:"number",description:"Zoom level when focusing on a single marker. If not set it is equal to detailed map zoom + 3."},"detailed-zoom-min":{title:"Detailed map initial zoom",type:"number",description:"Ignored when clustered view true.",default:0},"max-asset-points":{title:"Max marker trip points",type:"string",description:"Number of tracked trip points per marker, do not set if infinite.",default:100},"marker-info-window":{title:"Show marker info",type:"string",description:"Whether to show an info window on marker click.",default:"true"},"default-center":{title:"Default Map Center",type:"string",
description:"Default map center before marker(s) is/are loaded. String format lat,long.",default:"40.7053111,-74.258188"},"sources-info":{title:"Sources Info",type:"string",description:"Sources Info.ex: {'stream': {'label': 'Carvoyant', 'url': 'http://icons.iconarchive.com/icons/graphicloads/flat-finance/32/lock-icon.png'}}","x-schema-form":{type:"textarea",placeholder:"{'stream': {'label': 'Carvoyant', 'url': 'http://icons.iconarchive.com/icons/graphicloads/flat-finance/32/lock-icon.png'}}"}},data:{title:"Markers data",type:"string",description:"Static markers data","x-schema-form":{type:"textarea",placeholder:'{ "253812" : { "550153" : [ { "lat" : {"value": "40.84969"}, "long" :{"value": "-73.94168"}, "speed" : { "value" : "8", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "30", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.3", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "2818", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "91", "description" :"Engine Temperature" }, "voltage" : { "value" : "13.99", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55101" }, "make" : { "value" : "Toyota" },"model" : { "value" : "Tacoma" }, "snr" : { "value" : "11","description" : "Signal to Noise Ratio" }, "rssi" : { "value" : "61","description" : "Received Signal Strength Indicator" } }, { "lat" :{"value": "40.84919"}, "long" : {"value": "-73.93897000000001"}, "speed": { "value" : "5", "description" : "Maximum Speed Recorded (since theprevious reading)" }, "fuel" : { "value" : "57", "description" :"Percentage of Fuel Remaining" }, "fuelRate" : { "value" : "1.4","description" : "Rate of Fuel Consumption" }, "rpm" : { "value" :"2838", "description" : "Engine Speed" }, "coolantTemperature" : {"value" : "94", "description" : "Engine Temperature" }, "voltage" : {"value" : "13.15", "description" : "Battery Voltage" }, "status" : {"value" : "RUNNING" }, "address" : {}, "mileage" : { "value" : "55101"}, "make" : { "value" : "Toyota" }, "model" : { "value" : "Tacoma" },"snr" : { "value" : "9", "description" : "Signal to Noise Ratio" },"rssi" : { "value" : "48", "description" : "Received Signal StrengthIndicator" } }, { "lat" : {"value": "40.848600000000005"}, "long" :{"value": "-73.93648"}, "speed" : { "value" : "9", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "76", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.2", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "2465", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "97", "description" :"Engine Temperature" }, "voltage" : { "value" : "13.39", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55101" }, "make" : { "value" : "Toyota" },"model" : { "value" : "Tacoma" }, "snr" : { "value" : "11","description" : "Signal to Noise Ratio" }, "rssi" : { "value" : "69","description" : "Received Signal Strength Indicator" } } ], "source" :"simulator", "order" : [ "550153" ] }, "253815" : { "550191" : [ { "lat": {"value": "40.80913"}, "long" : {"value": "-73.90327"}, "speed" : {"value" : "7", "description" : "Maximum Speed Recorded (since theprevious reading)" }, "fuel" : { "value" : "56", "description" :"Percentage of Fuel Remaining" }, "fuelRate" : { "value" : "1.2","description" : "Rate of Fuel Consumption" }, "rpm" : { "value" :"2123", "description" : "Engine Speed" }, "coolantTemperature" : {"value" : "100", "description" : "Engine Temperature" }, "voltage" : {"value" : "13.45", "description" : "Battery Voltage" }, "status" : {"value" : "RUNNING" }, "address" : {}, "mileage" : { "value" : "55043"}, "make" : { "value" : "Saab" }, "model" : { "value" : "9-3" }, "snr" :{ "value" : "13", "description" : "Signal to Noise Ratio" }, "rssi" : {"value" : "49", "description" : "Received Signal Strength Indicator" }}, { "lat" : {"value": "40.807500000000004"}, "long" : {"value":"-73.90557000000001"}, "speed" : { "value" : "6", "description" :"Maximum Speed Recorded (since the previous reading)" }, "fuel" : {"value" : "16", "description" : "Percentage of Fuel Remaining" },"fuelRate" : { "value" : "1.7", "description" : "Rate of FuelConsumption" }, "rpm" : { "value" : "1946", "description" : "EngineSpeed" }, "coolantTemperature" : { "value" : "95", "description" :"Engine Temperature" }, "voltage" : { "value" : "12.87", "description" :"Battery Voltage" }, "status" : { "value" : "RUNNING" }, "address" : {},"mileage" : { "value" : "55043" }, "make" : { "value" : "Saab" },"model" : { "value" : "9-3" }, "snr" : { "value" : "13", "description" :"Signal to Noise Ratio" }, "rssi" : { "value" : "59", "description" :"Received Signal Strength Indicator" } } ], "source" : "simulator","order" : [ "550191" ] } }'}},"path-stroke-opacity":{title:"Path stroke opacity",type:"number",description:"Default marker trail opacity.",default:0},"path-stroke-weight":{title:"Path stroke weight",type:"number",description:"Default marker trail stroke weight.",default:1}},required:[]}},{name:"accelerometer",label:"Accelerometer",class:"scriptr-accelerometer",commonData:!0,show:!1,defaults:{transport:"wss","msg-tag":"accelerometer","on-format-data":"return data;"},box:{sizeX:2,sizeY:2,minSizeX:2,minSizeY:2},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTI4ODA3MjA1MjlCMTFFNzhFN0Q4OUFFNTNCQjg5MTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTI4ODA3MUY1MjlCMTFFNzhFN0Q4OUFFNTNCQjg5MTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsAn8koAAANsSURBVHja7FjrSxRRHJ2ddd0MAqOHbU8Rkixcem3kqlQilSV+0B4g1caWSYj6ITD8C6QPRSkSZS1thWBphFQWSA9WM7IXK2UUlJW1RUGCkK2ru52f/AyRHuPcO5HghcNhZueec2bm3t/euaZIJKJQM5lMiqz2IG/PWtAtYN3KhtO3ZekOZ1WVcdgmQvv9/llAhjnDuZ6OiemYzsv0iZIQNB5UAOQCi4bmxzybwlwOKufrnoMuATV2u71LxNOkdyIixAxQBbCb5gjQBNwAHoU8F2ZH3gXqEXqLxb3tA84tBzYAWWQFnKGbQfjPeiairtAITObngCnAUeAIAnz6W/VAvzjQAaAU6AV2ol+T4dUDxvtAV4A3QDJMD44M/KdG1wFl1I/7X4VemaETEQa7QCeARiANAV7oGZPc7zwPlUOsKz80hFfQJAKuA9th3CcweVdTWOAy69WwvrzQEKQq4wECQD4C9wsEngaqB14D9ITzWdfDPtKetJveKlCEwF8FqySFJo1caPWyXhHru6WUPNw9/UA19gsMUo1ae8CnFTSdaj18IqLVg8ZfIlBl8L9zFfukyBgem4AQVwwjWyP7ZMkIvQpoxyv7ptW9xRpOfmIJD/EYyiDpt7OfcOgEoFOrucvlKnlsCVf6rGGFmI7H8LQ72U/bRJzfvJ+K/dzRFyyx2FJ7wn2B94M9r7S4pl/8nmIJRqKHj0NWU79v66Q2LX3nmGMTYtUY29NQoPUXP3e/zTy+Y9yup7WUvJegOxhze7UOD9CxEadKvV5vpcaydwq0Bl4LRUseDYskrU+BAi4LqSXpQVUh1hqYWxL7CU/E+4ADT2GyVue0oNqxNKQO8Rj+3knfwX7Coa8BFiDH4KGawz5NMkLfA2gpWWxw6GL2aRMOzeuAw4ATr3CzEWlZ10k+v1t36Fnl0bLUD1TDYKrkwKRXzfoeaUtT3P0ALxvpM7sWRtGSApNOLeu62UfelwsEH/JWwUagDoYxgoGpfx3rFbC+/G9ECJ8FFfJMb4Fxos7A1K+FdQpZ17gdJhicBGUDC4AOBKAP05kaw8bR9dSP+2ez3sRmja5tsXBXtzLgbVCiXHmKGv9z4Si8LSYt9OgNSNDiQV975uDNu+XmDGeFOd3RjHPPEPSjqL4hoUU+bA3dFvsf2kTof9V+CDAAygmYxsVKnggAAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","data"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{data:{title:"Data",type:"string",description:"X,Y,Z Value"},boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."}},required:[]}},{name:"grid",label:"Grid",class:"scriptr-grid",show:!0,commonData:!0,defaults:{"columns-definition":'[{headerName: "Name", field: "name"},{headerName: "Model", field: "model"},{headerName: "Price", field: "price"}]',"row-data":'[{name: "Toyota", model: "Celica", price: 35000},{name: "Ford", model: "Mondeo", price: 32000},{name: "Porsche", model: "Boxter", price: 72000}]',boxLabel:"Grid","fixed-height":"false","msg-tag":"grid","on-format-data":"return data;","pagination-page-size":"20",transport:"https","cell-editable":!1,"enable-client-side-sorting":!1},box:{sizeX:2,sizeY:2,minSizeX:2,minSizeY:1,maxSizeY:4},imgCls:"grid-img",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/grid.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!1,groupBy:"dataStream",multiple:"true",callback:"multiSelectCallBack",widgetName:"grid",limitTo:50}}]}]},{title:"Format",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"pagination",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["pagination-page-size",{key:"enable-server-side-sorting",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"enable-server-side-filter",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"enable-col-resize",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},stream:{title:"Data Streams",type:"array",items:{type:"string"},description:"",placeholder:" "},"columns-definition":{title:"Columns definition",type:"string",description:"Series of data (Each column in the grid is defined using a column definition).","x-schema-form":{type:"textarea",placeholder:"[{'headerName': 'Name', 'field': 'name'}, {'headerName': 'Model', 'field': 'model'}, {'headerName': 'Price', 'field': 'price', 'type': 'numeric'}]"}},"row-data":{title:"Row data",type:"string",description:"You pass static data to the grid.","x-schema-form":{type:"textarea",placeholder:"[{'name': 'Golf', 'model': 'GT', 'price' : '10000'}, {'name': 'BMW', 'model': 'Z3', 'price' : '20000'}]"}},"enable-client-side-sorting":{title:"Enable client Side Sorting",type:"hidden",description:"Turn on client sorting for the grid."},"enable-client-side-filter":{title:"Enable Client Side Filter",type:"hidden",description:"Turn on client side filter."},"enable-add-row":{title:"Enable Add Row",type:"hidden",description:"Turn on insert row."},"enable-delete-row":{title:"Enable Delete Row",type:"hidden",description:"Turn on delete row."},"cell-editable":{title:"Cell Editable",type:"hidden",description:"Turn on cell editing."},"row-model-selection":{title:"Row Model Selection",type:"hidden",description:"Set to either 'single' or 'multiple' in case of backend data.",default:"Source Sans Pro",placeholder:" "},"suppress-filter":{title:"Suppress filer",type:"hidden",description:"Hide column filter."},"add-params":{title:"on-add API Params",type:"hidden",description:"On add API params.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},"delete-params":{title:"on-delete API Params",type:"hidden",description:"On delete API params.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},"edit-params":{title:"on-edit API Params",type:"hidden",description:"On edit API params.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},"enable-server-side-sorting":{title:"Enable Sorting",type:"string",description:"Turn on server sorting for the grid."},"enable-server-side-filter":{title:"Enable Filter",type:"string",description:"Turn on server side filter."},"enable-col-resize":{title:"Enable Column Resize",type:"string",description:"Enable column resize."},pagination:{title:"Enable Pagination",type:"string",description:"Enable Pagination."},"row-model-type":{title:"Row Model Type",type:"string",description:"The supported ways are 'virtual' and 'pagination' for only non-static data",default:"pagination",placeholder:" "},"pagination-page-size":{title:"Pagination Page Size",type:"string",description:"Number of rows per page."},api:{title:"Api",type:"string",description:"Name of the api to get data.","x-schema-form":{placeholder:"UIComponents/dashboard/frontend/examples/grid/getCarsInfo"}},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:["columns-definition"]}},{name:"odometer",label:"Odometer",class:"scriptr-odometer",commonData:!0,show:!0,defaults:{transport:"wss",boxLabel:"Odometer","msg-tag":"odometer",data:28022017,animation:"count","on-format-data":"return data;",duration:1e3,size:"1.8"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:2},imgCls:"odometer-img",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/odometer.svg",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"col-xs-12",items:[{key:"stream",type:"uiselectmultiple",placeholder:"",options:{closeOnSelect:!0,groupBy:"dataStream",multiple:"false",callback:"multiSelectCallBack",widgetName:"odometer",limit:1,limitTo:50}}]}]},{title:"Format",items:["duration","animation","size"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},stream:{title:"Data Stream",type:"string",description:"",placeholder:" "},data:{title:"Static data",type:"number",description:"Set a static value for Odometer."},duration:{title:"Duration",type:"number",description:"Change how long the javascript expects the CSS animation to take."},size:{title:"Size",type:"number",default:2,description:"Odometer size in em. Recommended size between 0 & 5."},animation:{title:"Animation",type:"string",description:"Count is a simpler animation method which just increments the value,use it when you're looking for something more subtle."}},required:[]}},{name:"toggleSwitch",label:"Toggle Switch",class:"scriptr-toggle-switch",show:!1,defaults:{boxLabel:"Toggle Switch","switch-status":"false","knob-label":"TV","on-label":"ON","off-label":"OFF","on-format-data":"return data;","on-switch-change":"vm.onChange",transport:"wss","msg-tag":"toggle"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1,maxSizeX:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0RCQTE1RUU1MUI2MTFFN0FFNDlEMTM4RTRFODYwMkIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0RCQTE1RUQ1MUI2MTFFN0FFNDlEMTM4RTRFODYwMkIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk9fI0kAAAIXSURBVHja7Jg/SAJxFMe9H2pDQ4PRDZHU1OZkUIu0OESIbqFLZYtEczTYVEO4CVEOkTmktBnR5BItBW5uTYXpoOTg4NA/7PvgFRJWnnE/Ovo9+PI79E4+9+793vueWrvdtlkthM2CoaAVtIJW0P8IWuv2YalUGsQShkLQFDQikakOFaE8lPN4PK0foQG8jCUBDUNN6BKqQjUJwDo0CvmgIegBWgd4uis0YO1YDqBF6AaKrzVOrm9fGrM4dvNpZahw70+ZegNgcWAJQtvQJJSBVgD/+hn6iIFTgE0AdgvHkS5Pg8xKFtoAfMVkeCeWJBQjcEAvfUBzSRwS8Hxtj9YzflTfBWU7APCi2TUDvn0Gj1KpaLzp7qAGMjyHDF/1ANwJ7pWU8RLkgsYFlwBtujiXhG5w4+yYnWlk94n4mDMsuOCbtOn4BoxGZKwQ0yV0llPuZiHBffiSu4TWZ6/3S8j2M7ffKcGDo9rR1voJt01OEOeIZb1HnadQ+Re/U5bES5x1wXPeN2F3XfDgMBp0TUFCr3bweC8K3pVDu66FaZ50RiNr9ljnCLIfyQsGJWOyjWxvGjRGdO6GhCw72YcQZ06w9VsnY4Js0xroEfx9jFckZDnJxokcX0twD0yzk4qd66tRZHwGx8df1Hibv/Oa7Tsowx2+I/NuUa1tTXt4CXiUUAYDhl4CLPW6pf6AVNAKWkEr6D8dbwIMAG8Y3AV944YCAAAAAElFTkSuQmCC",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["transport"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"msg-tag",condition:"model.transport=='wss'"},{key:"http-method",notitle:!1,type:"strapselect",titleMap:[{value:"GET",name:"GET"},{value:"GET",name:"POST"}],condition:"model.transport=='https'"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["api",{key:"on-format-data",type:"codemirror",codemirrorOptions:{value:"return",styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,matchBrackets:!0,theme:"neo",mode:"javascript",readOnly:!1,autoRefresh:!0}}]},{type:"section",htmlClass:"col-xs-6",items:["api-params","publish-api-params"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:'<div class="alert alert-info"><ul><li>Messages published over the subscibe channel need to have the following format in order to be consumed by a widget:<ul><li>{“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”}</li></ul></li><li>A script would publish a message  over the subscribe channel as follow:<ul><li>publish(“responseChannel”, {“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”});</li></ul></li><li>Whether https or wss transport is used, Sciptr API should return the static data structure for widget initial load:<ul><li>return &lt;static data structure&gt;;</li></ul></li></ul></div>'}]}]}]},{title:"Toggle Switch behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"switch-status",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"on-label","size"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"is-disabled",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"off-label","type","knob-label"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},"switch-status":{title:"Toggle Switch Value",type:"string",description:"The current value of toggle switch."},"on-label":{title:"ON Label",type:"string",description:"ON Label."},"off-label":{title:"OFF Label",type:"string",description:"OFF Label"},"knob-label":{title:"Knob Label",type:"string",description:"Knob Label."},"is-disabled":{title:"Disabled",type:"string",description:"Set to true to disbale the toggle switch."},type:{title:"Type",type:"string",enum:["switch-default","switch-danger","switch-warning","switch-success","switch-info","switch-primary"],description:"Choose the type of the Toggle Switch."},size:{title:"Size",type:"string",enum:["switch-mini","switch-small","switch-large"],description:"choose the size of the toggle switch."},api:{title:"Api",type:"string",description:"Name of the api to get data.","x-schema-form":{placeholder:"UIComponents/dashboard/frontend/examples/grid/getCarsInfo"}},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"http-method":{title:"Http method",type:"string",description:"Method to be used when calling the scriptr api over https. Default: GET.",default:"GET",placeholder:" "},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},"on-format-data":{title:"Format data",default:"return data;",type:"string",description:"Callback function to be called after data is returned from backend."},"publish-api-params":{title:"Publish Api Params",type:"string",description:"Publish Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"slider",label:"Slider",class:"scriptr-slider",show:!1,defaults:{transport:"wss",boxLabel:"Slider",min:2,"enable-resize":!0,floor:0,"on-format-data":"return data;","min-limit":1,"max-limit":9,ceil:10,step:1,vertical:!1,"show-ticks":"true"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDRFNDQ5MDQ1MUI3MTFFNzlBMzVDOTRBMkVCQkU2OUYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDRFNDQ5MDM1MUI3MTFFNzlBMzVDOTRBMkVCQkU2OUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhwmJL8AAAHdSURBVHjaYvz//z/DUANMDEMQjDp61NGjjh519KijRx096ugh62hGQgosdlw1BFLNQOwExBxAfA2IpwDxzBMe2gPS2mIh4GB3ILUJiNmQhLWBeDoQmwNx4qAKaaCDOYHUPSCWAPGNhLgZhNlZGI68+szw/e8/mLJAYGhvgHEuXboE8lwFEDsC8X0gbtDT03uEbC5QjR+QygTiv0A8CSi/C01eDEg1AbEGEJ8E4kagmm8ojgYqsgbSLuge2PmFUW3tJ6ZIEDtcXoihQAPsdoabn34wJB6/xwBKF3Ks/6/XiP5bhaTNE4jNkPjvgHgqEMN8qQDE8UjyIGPmAvFTJLEUIJZG4l8B4rVI6veAkscOIOZBD2kOJC9YiiCk1fk4GISAIf725x8GZkYGTaBQPZ6YFALiWgIxnUIgNehAMQyUgEqP/dhUCjAj2MfffIGzQSH9DuhgEBAcmLJnP7XTtB2Q2gLEvFAhUJpuRJIXAFL7gNgQKnQMiN2Aar4iqckBUhOAGBRsP4A4Aii/kegiD0fpAQMLgA7GKD2AlgoCKRNQRgRadgeLPAu05AH5/CRQzT8sauRBKRGIzwPlXw+LcppxtDc+6uhRR486etTRo44edfSoo0cdPerowQEAAgwA9F+Sz6eyRO4AAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["transport"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"msg-tag",condition:"model.transport=='wss'"},{key:"http-method",notitle:!1,type:"strapselect",titleMap:[{value:"GET",name:"GET"},{value:"GET",name:"POST"}],condition:"model.transport=='https'"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["api",{key:"on-format-data",type:"codemirror",codemirrorOptions:{value:"return",styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,matchBrackets:!0,theme:"neo",mode:"javascript",readOnly:!1,autoRefresh:!0}}]},{type:"section",htmlClass:"col-xs-6",items:["api-params","publish-api-params"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:'<div class="alert alert-info"><ul><li>Messages published over the subscibe channel need to have the following format in order to be consumed by a widget:<ul><li>{“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”}</li></ul></li><li>A script would publish a message  over the subscribe channel as follow:<ul><li>publish(“responseChannel”, {“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”});</li></ul></li><li>Whether https or wss transport is used, Sciptr API should return the static data structure for widget initial load:<ul><li>return &lt;static data structure&gt;;</li></ul></li></ul></div>'}]}]}]},{title:"Slider behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["min","floor","min-limit","min-range","step",{key:"keyboard-support",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"log-scale",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"is-disabled",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["max","ceil","max-limit","max-range","precision",{key:"right-to-left",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"read-only",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"steps-array"]}]}]},{title:"Visualization",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["show-selection-bar-from-value",{key:"show-selection-bar",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"show-ticks",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"hide-limit-labels",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["ticks-array",{key:"show-selection-bar-end",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"show-ticks-values",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Range",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"push-range",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"draggable-range",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"draggable-range-only",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"no-switching",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},min:{title:"Slider 1",type:"number",description:"First Slider Value (defaults to 0)."},max:{title:"Slider 2",type:"number",description:"Second Slider Value."},floor:{title:"Floor",type:"number",description:"Minimum value for a slider (defaults to 0)."},ceil:{title:"Ceil",type:"number",description:"Maximum value for a slider (defaults to rz-slider-modelvalue)."},step:{title:"Step",type:"number",description:"Step between each value."},precision:{title:"Precision",type:"number",description:"The precision to display values with. The toFixed() is used internally for this."},"min-limit":{title:"Minimum Limit",type:"number",description:"The minimum value authorized on the slider."},"max-limit":{title:"Maximum Limit",type:"number",description:"The maximum value authorized on the slider."},"min-range":{title:"Minimum Range",type:"number",description:"The minimum range authorized on the slider. Applies to range slider only."},"max-range":{title:"Maximum range",type:"number",description:"The maximum range authorized on the slider. Applies to range slider only."},"push-range":{title:"Push Range",type:"string",description:"Set to true to have a push behavior. When the min handle goes above the max, the max is moved as well."},"steps-array":{title:"Steps Array",type:"string",description:"If you want to display a slider with non linear/number steps. Just pass an array with each slider value and that's it; the floor, ceil and step settings of the slider will be computed automatically.They can also be bound to the index of the selected item by setting the bindIndexForStepsArray option to true.","x-schema-form":{placeholder:"Ex: [{value: 'A'},{value: 10, legend: 'Legend for 10'}, new Date(2016, 7, 12),{value: new Date(2016, 7, 12), legend: 'Legend for 10'} ]"}},"bind-index-for-steps-array":{title:"Bind Index For Steps Array",type:"string",description:"Set to true to bind the index of the selected item to rz-slider-model and rz-slider-high. (This was the default behavior prior to 4.0)."},"draggable-range":{title:"Draggable Range",type:"string",description:"When set to true and using a range slider, the range can be dragged by the selection bar."},"draggable-range-only":{title:"Draggable Range Only",type:"string",description:"Same as draggableRange but the slider range can't be changed."},"show-selection-bar":{title:"Show Selection Bar",type:"string",description:"Set to true to always show the selection bar before the slider handle."},"show-selection-bar-end":{title:"Show Selection Bar End",type:"string",description:"Set to true to always show the selection bar after the slider handle."},"show-selection-bar-from-value":{title:"Show Selection Bar From Value",type:"number",description:"Set a number to draw the selection bar between this value and the slider handle."},"hide-limit-labels":{title:"Hide Limit Labels",type:"string",description:"Set to true to hide min / max labels"},"auto-hide-limit-labels":{title:"Auto Hide Limit Labels",type:"string",description:"Set to false to disable the auto-hiding behavior of the limit labels."},"read-only":{title:"Read Only",type:"string",description:"Set to true to make the slider read-only."},"is-disabled":{title:"Disabled",type:"string",description:"Set to true to disable the slider."},interval:{title:"Interval",type:"number",description:"The number of milliseconds to wait between two updates of the slider."},"show-ticks":{title:"Show Ticks",type:"string",description:"Set to true to display a tick for each step of the slider."},"show-ticks-values":{title:"Show Ticks Values",type:"string",description:"Set to true to display a tick and the step value for each step of the slider."},"ticks-array":{title:"Ticks Array",type:"string",description:"Use to display ticks at specific positions. The array contains the index of the ticks that should be displayed.","x-schema-form":{placeholder:" [0, 1, 5] "}},scale:{title:"Scale",type:"number",
description:"If you display the slider in an element that uses transform: scale(0.5), set the scale value to 2 so that the slider is rendered properly and the events are handled correctly."},"enforce-step":{title:"Enforce Step",type:"number",description:"Set to true to force the value to be rounded to the step, even when modified from the outside.. When set to false, if the model values are modified from outside the slider, they are not rounded and can be between two steps."},"enforce-range":{title:"Enforce Range",type:"string",description:"Set to true to round the Slider 1 and Slider 2 to the slider range even when modified from outside the slider."},"no-switching":{title:"No Switching",type:"string",description:"Set to true to prevent to user from switching the min and max handles. Applies to range slider only."},"only-bind-handles":{title:"Only Bind Handles",type:"string",description:"Set to true to only bind events on slider handles."},"bound-pointer-labels":{title:"Bound Pointer Labels",type:"string",description:"Set to true to keep the slider labels inside the slider bounds."},"merge-range-labes-if-same":{title:"Merge Range Labels If Same",type:"string",description:"Set to true to merge the range labels if they are the same. For instance, if min and max are 50, the label will be '50 - 50' if mergeRangeLabelsIfSame: false, else '50'."},"right-to-left":{title:"Right To Left",type:"string",description:"Set to true to show graphs right to left."},vertical:{title:"Vertical",type:"string",description:"Set to true to display the slider vertically. The slider will take the full height of its parent. Changing this value at runtime is not currently supported."},"keyboard-support":{title:"Keyboard Support",type:"string",description:"Handles are focusable (on click or with tab) and can be modified using keyboard controls."},"log-scale":{title:"Log Scale",type:"string",description:"Set to true to use a logarithmic scale to display the slider."},"selection-bar-gradient":{title:"Selection Bar Gradient",type:"string",description:"Use to display the selection bar as a gradient. The given object must contain from and to properties which are colors."},"aria-label":{title:"Aria Label",type:"string",description:"Use to add a label directly to the slider(s) for accessibility. Adds the aria-label attribute."},"aria-label-high":{title:"Aria Label High ",type:"string",description:"Use to add a label directly to the slider(s) for accessibility. Adds the aria-label attribute."},api:{title:"Api",type:"string",description:"Name of the api to get data.","x-schema-form":{placeholder:"UIComponents/dashboard/frontend/examples/grid/getCarsInfo"}},"http-method":{title:"Http method",type:"string",description:"Method to be used when calling the scriptr api over https. Default: GET.",default:"GET",placeholder:" "},"on-format-data":{title:"Format data",default:"return data;",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},"publish-api-params":{title:"Publish Api Params",type:"string",description:"Publish Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:["ceil"]}},{name:"button",label:"Button",class:"scriptr-button",show:!1,defaults:{transport:"https",boxLabel:"Button",type:"btn-success","enable-resize":!0,size:"small",label:"Refresh data"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1,maxSizeX:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTM1MEZDOUE1MUI4MTFFNzg0MDZBODMxOUZDNUVGN0IiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTM1MEZDOTk1MUI4MTFFNzg0MDZBODMxOUZDNUVGN0IiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pg1w0C8AAAHySURBVHja7Jc9SMNAFMfvbEVRcBVEHYqzOujgILWI4mIHdRArWZSCIE4WcdFVtKOg4CAtVhwEP0AUQbHipIvi4iQIzg5+QimN/yvPEtokSjH1Infw66XpNfzy8u7dheu6ztzWypgLm5JW0kpagubNHUV5PT43gF9CzyQYZdP6Y36kY5IKM/KKmaVHQPKsCJhJc8mluaoeSlpJF9cS4NRt0j4eYd3om8Ea+HCDdIe+xFohfgvC+C5W3RnwIHtOT+QKbYQ9gUUcNoEhcF5Uwc69bkV5Gp8eB6TfQB1kn81+xJNoQTcFQqDC5joZ7D08+ZHedSjS1UCzjFqE3YAxHDaAA5vr7BTu8lj2j2KiiIlT9YvSlZQiy9/lP+ilJ5M2nH8HJ2CyID04d2brgcffh+4QdCGiSYsxQXTb4EjkOsalTMeRaykm4jG4N05IkzYCykHcSrik1QMSGXSrYAARrbUYptHT2MSYHlmW8fXs7Gds3JASfhCmG0tRCbwAezjf+aOS51ROGyTj9AbiA22UNjXiNQrSCRojCsAduMa54F/m9FdbAY1gnoSF3JbIY8iGaMwclb59KSJNkbxE1w6ugMjdVyENhqlG94NZRHnBrnp4S7yrFHVY5OsZxF7oRjRaiQfthM2XcbWfVtJKWkn/e+lPAQYAoEWDWxM/8JkAAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["transport"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"msg-tag",condition:"model.transport=='wss'"},{key:"http-method",notitle:!1,type:"strapselect",titleMap:[{value:"GET",name:"GET"},{value:"GET",name:"POST"}],condition:"model.transport=='https'"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["api"]},{type:"section",htmlClass:"col-xs-6",items:["api-params"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:"<hr>"}]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:[{type:"help",helpvalue:'<div class="alert alert-info"><ul><li>Messages published over the subscibe channel need to have the following format in order to be consumed by a widget:<ul><li>{“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”}</li></ul></li><li>A script would publish a message  over the subscribe channel as follow:<ul><li>publish(“responseChannel”, {“id”: “&lt;message tag value&gt;”, “result”: “&lt;static data structure&gt;”});</li></ul></li><li>Whether https or wss transport is used, Sciptr API should return the static data structure for widget initial load:<ul><li>return &lt;static data structure&gt;;</li></ul></li></ul></div>'}]}]}]},{title:"Button behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["type","size"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"is-disabled",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},"is-disabled":{title:"Disabled",type:"string",description:"Set to true to disbale the Button."},type:{title:"Type",type:"string",enum:["btn-default","btn-danger","btn-warning","btn-success","btn-info","btn-primary"],description:"Choose the type of the Button."},size:{title:"Size",type:"string",enum:["small","large"],description:"choose the size of the Button."},api:{title:"Api",type:"string",description:"Name of the api to get data.","x-schema-form":{placeholder:"UIComponents/dashboard/frontend/examples/grid/getCarsInfo"}},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"http-method":{title:"Http method",type:"string",description:"Method to be used when calling the scriptr api over https. Default: GET.",default:"GET",placeholder:" "},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"iframe",label:"IFrame",class:"scriptr-iframe",show:!1,defaults:{boxLabel:"IFrame"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkE2REVDRkM1NEVCMTFFNzg4MjNDNkYyQjhEQjcyNjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkE2REVDRkI1NEVCMTFFNzg4MjNDNkYyQjhEQjcyNjciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk48GP8AAAIqSURBVHja7JexS8NQEMaT6CjooAVFxcFJBXGqFaci2kq7uPU/UIeiXVpREVRUcHFqceiqUzep1aGKLSgiTtXVwVE72KGCovV7coX0kaA1qXkpffBxeblL8uNyubwnl0olqTxkWZZGU3dzOFyCeiTrxyO0feUZjFVwqieuk3sGHJXEG/OXUwOx8qSZc0bI5qA96MNC0CZoARoiLl3oXrJbeCWHVqcXpVqEOVBxfQ9FJ/5VkLLQ5FAkG45mnfMOvJo+Afgc1UDvi5zpuiqPVSgrAN84tPFb6Bxa3rkALa+tbsqjAW31h2hWTbbDrEO7+EYe7JJpH8RWjh3ClQcyOgN1a7i8UB66YX4WJwQ0bRoSbLHOnWdLy0kohdL4JH+C4q2DJoAorb9DnNsFsT6bonmI4qJGwRWTgN3I5hMX4oFKZWjyu80AV2oEzMY0dA3fc/mEWeDKH4BnfwJGTCfMCJTkfRrgs/+RaS/ZtE6G1TFJLSddl+ZiawodgM6gILK0oxPDSoOB3eq8LXZdkO4TqDk0slSknwZ7YJgHx5z9ZSdUrU4LOEzX++h+tf8QNcCXVe4xqBU61gBeMQpsqOWpwDPQJoAWVTXKMnzKAS/Sgj5jBNjwz4Ue7KfMFVTQrNXlufACxfmNAJuyygPAC7Uwls0umGFoTSMuDhMXcZXXD71DR7bZBCCbFzAtsLe22rkA+K2x3ar3PaITnUAEPmc10BE7lUdWUM4Kri8BBgC569bhyidDOgAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Data",items:["link"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},link:{title:"Link or URL",type:"string",description:"Enter Iframe source URL."}},required:[]}},{name:"displaybox",label:"Display Box",class:"scriptr-displaybox",commonData:!0,show:!1,defaults:{"on-format-data":"return data;",transport:"wss",boxLabel:"Text","msg-tag":"text",data:"Bla Bla"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1},imgCls:"displaybox-img",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDY5MEY1QUM1RkU1MTFFNzk3MTJENUY1ODM3OUFFQ0MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDY5MEY1QUI1RkU1MTFFNzk3MTJENUY1ODM3OUFFQ0MiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmt9N/4AAAHGSURBVHja7JexS8NAFIdbcRBdRBS6KI6iDoqibgVBwaV0cLA4VKGD7SJugpt/gaOTguLuqFURd20HQQu1VFsXsYsOUkWoX+AJZ6gxwYZEuYOPd/fuXfLj8e5yCdZqtYBV6zlOHmKmA+60FxgpT23mzBNWuppsPNgtwUZrhWz30VKfk0VBG5n+DNiHswaJHYOYMq7CsJpxK11ORK/w0I1GKCazC5htk/uL8N+Wh9vtTmyL3VLxg+go5J0Ib/aB6KxpbAi/gDa/Zbps41TxV6bZbCeUwAzdUJ3jNfbTes/KA+EHdU6Vdjui/bARHTctWov+b6J/dXqw2+cxXSb3OYzCFTzDhOJT2yMnyJ4XmU7BLSTkbhyBd5iFTvmqzYkvIjEJWZPyqjziZMu4slYgDcbtLQOLkIRl6WdkzoipyJq4J+XBy29M45J085TOg5FhfNfiK+Hr/W6t5xsRceOYN+igP+i70wNRQ3KHmJTxAGYLdoUdfP0SbsSEZI03p4fyx7EKT8p4DYpwD+vwKnNFia16Klp+j3LKuIApKCGXytyp/iJq0Vq0Fq1Fa9FatP7dstnC3M7c1hNutOio8CfKI+2BLst3fggwAHHJk2PD+/d6AAAAAElFTkSuQmCC",form:[{type:"tabs",tabs:[{title:"Format",items:[{key:"type",notitle:!1,type:"strapselect",titleMap:[{value:"info",name:"INFO"},{value:"warning",name:"WARNING"},{value:"success",name:"SUCCESS"},{value:"danger",name:"DANGER"}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},data:{title:"Data",type:"string",description:"Text to display.","x-schema-form":{type:"textarea",placeholder:"Front door has been unlocked for the past 5 hours."}},type:{title:"Type",type:"string",placeholder:" ",description:"Select text theme."}},required:[]}},{name:"displaycount",label:"Count Display",class:"scriptr-displaycount",commonData:!0,show:!0,defaults:{"on-format-data":"return data;",transport:"wss",boxLabel:"Count","msg-tag":"text",data:"12"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgCls:"count-img",imgSrc:"//cdn.rawgit.com/scriptrdotio/onset-static-resources/97574e7b/images/display-count.svg",form:[{type:"tabs",tabs:[{title:"Format",items:["message",{key:"widget-layout",notitle:!1,type:"strapselect",titleMap:[{value:"horizontal",name:"Horizontal"},{value:"vertical",name:"Vertical"}]},"border-size",{key:"border-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"number-cell-size",notitle:!1,type:"strapselect",titleMap:[{value:"small",name:"Small"},{value:"medium",name:"Medium"},{value:"large",name:"Large"},{value:"",name:"no-width"}]},{type:"section",htmlClass:"col-xs-12 col-sm-6 row",items:[{key:"number-font-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",label:"Garamond"},{value:"Bookman",label:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]},"number-font-size","number-font-weight",{key:"number-text-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"number-background-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"number-Text-Alignment",notitle:!1,type:"strapselect",titleMap:[{value:"left",name:"Left"},{value:"center",name:"Center"},{value:"right",name:"Right"}]}]},{type:"section",htmlClass:"col-xs-12 col-sm-6 row pull-right",items:[{key:"message-font-family",notitle:!1,type:"strapselect",titleMap:[{value:"Arial",name:"Arial"},{value:"Helvetica",name:"Helvetica"},{value:"Times New Roman",name:"Times New Roman"},{value:"Courier New",name:"Courier New"},{value:"Courier",name:"Courier"},{value:"Verdana",name:"Verdana"},{value:"Georgia",name:"Georgia"},{value:"Palatino",name:"Palatino"},{value:"Garamond",name:"Garamond"},{value:"Bookman",name:"Bookman"},{value:"Comic Sans MS",name:"Comic Sans MS"},{value:"Trebuchet MS",name:"Trebuchet MS"},{value:"Arial Black",name:"Arial Black"},{value:"Impact",name:"Impact"},{value:"Sans-Serif",name:"Sans-Serif"},{value:"Source Sans Pro",name:"Source Sans Pro"}]},"message-font-size","message-font-weight",{key:"message-text-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"message-background-color",colorFormat:"hex3",spectrumOptions:{showInput:!0,showAlpha:!1,allowEmpty:!0,showPalette:!0,preferredFormat:"hex3",palette:[["#fce94f","#fcaf3e","#e9b96e"],["#8ae234","#729fcf","#ad7fa8"],["#ef2929","#888a85","#deface"]]}},{key:"message-Text-Alignment",notitle:!1,type:"strapselect",titleMap:[{value:"left",name:"Left"},{value:"center",name:"Center"},{value:"right",name:"Right"}]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define your widget box title."},"widget-layout":{title:"Layout",type:"string",default:"horizontal",placeholder:" ",description:"Define your widget's layout."},"number-cell-size":{title:"Numbers Cell Size",type:"string",default:"",placeholder:" ",description:"Define your widget's numbers cell size."},message:{title:"Message",type:"string",default:"Items",description:"Define your widget message."},"number-font-family":{title:"Number Font family",type:"string",description:"Define your widget number font family.",default:"Arial",placeholder:" "},"message-font-family":{title:"Message Font family",type:"string",description:"Define your widget message font family.",default:"Arial",placeholder:" "},"number-font-size":{title:"Number Font Size",type:"number",default:42,description:"Define your widget number font size."},"message-font-size":{title:"Message Font Size",type:"number",default:18,description:"Define your widget message font size."},"number-font-weight":{title:"Number Font Weight",type:"number",default:"600",description:"Define your widget number font weight."},"message-font-weight":{title:"Message Font Weight",type:"number",default:"600",description:"Define your widget message font weight."},"number-text-color":{title:"Number Text Color",type:"string",description:"Define your widget number text color.",format:"color",default:"#ffffff"},"message-text-color":{title:"Message Text Color",type:"string",description:"Define your widget message text color.",format:"color",default:"#686868"},"number-background-color":{title:"Number Backgrount Color",type:"string",description:"Define your widget number background color.",format:"color",default:"#005588"},"message-background-color":{title:"Message Backgrount Color",type:"string",description:"Define your widget message background color.",format:"color",default:"white"},"message-Text-Alignment":{title:"Message Text Alignment",type:"string",default:"center",placeholder:" ",description:"Define your widget message text alignment."},"number-Text-Alignment":{title:"Number Text Alignment",type:"string",default:"center",placeholder:" ",description:"Define your widget number text alignment."},"border-size":{title:"Border Weight",type:"number",default:1,description:"Define your widget border weight."},"border-color":{title:"Border Color",type:"string",description:"Define your widget border color.",format:"color",default:"#d7d7d7"},data:{title:"Count",type:"string",description:"Count to display."}},required:[]}}]}),angular.module("DashboardBuilder").component("dashboardsList",{bindings:{dashboard:"<",layout:"@"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/dashboardsList.html",controller:["$scope","$filter","$timeout","$sce","$window","httpClient","wsClient","$cookies","config","$uibModal","scriptrService","$route","$routeParams","$q","_",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.wsClient=g;var p=this;p.acls,this.$onInit=function(){p.user=window.localStorage.user?JSON.parse(window.localStorage.user):null,null!=p.user&&p.user.favDashboardKey&&(p.favDashboardKey=p.user.favDashboardKey),p.loading=!0,p.showPanelMsg=!1,p.layout=void 0!==this.layout?this.layout:"grid",p.users=[{code:"anonymous",icon:"fa fa-group"}],this.urlParams=[],this.transport=angular.copy(i.transport),this.frmGlobalOptions={destroyStrategy:"remove",formDefaults:{feedback:!0}};var c=m.scriptName;c&&this.openEditor(c),this.gridOptions={columnDefs:[{headerName:"",field:"star",valueGetter:function(a){return a.data},cellRenderer:function(a){return'<a href="" ng-click="$ctrl.setFavoriteDashboard(\''+a.value.key+'\')" class="favorite-star" uib-tooltip="Star this dashboard for easy access from the menu. You can star one dashboard at a time." tooltip-placement="auto" tooltip-append-to-body="true"><i ng-class="$ctrl.favDashboardKey == \''+a.value.key+"' ? 'fa fa-star' : 'fa fa-star-o'\" aria-hidden=\"true\"></i></a>"},width:25,cellStyle:{paddingTop:8,textAlign:"center"}},{headerName:"Name",unSortIcon:!0,icons:{sortAscending:'<i class="fa fa-sort-up" aria-hidden="true"></i>',sortDescending:'<i class="fa fa-sort-desc" aria-hidden="true"></i>',sortUnSort:'<span class="unsort-state"><i class="fa fa-angle-up" aria-hidden="true"></i><i class="fa fa-angle-down" aria-hidden="true"></i></span>'},field:"dashboardName",comparator:function(a,b,c,d){return a.dashboardName.localeCompare(b.dashboardName)},cellStyle:{paddingTop:6},valueGetter:function(a){return a.data},cellRenderer:function(a){return'<span class="img-thumb"><div class="table-display"><div class="cell-display">'+(a.value.viewFile?'<img class="img-responsive grid-img" src="'+a.value.viewFile+'" />':'<img class="img-responsive" src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/a923190a/images/default-icon.svg" />')+'</div></div></span><span class="grid-name"><a href="#/dockey/'+a.value.key+'">'+a.value.dashboardName+"</a></span>"}},{headerName:"Modified",field:"lastModifiedDate",cellRenderer:function(a){return b("date")(a.value,"MMMM dd, yyyy HH:mm")},unSortIcon:!0,icons:{sortAscending:'<i class="fa fa-sort-up" aria-hidden="true"></i>',sortDescending:'<i class="fa fa-sort-desc" aria-hidden="true"></i>',sortUnSort:'<span class="unsort-state"><i class="fa fa-angle-up" aria-hidden="true"></i><i class="fa fa-angle-down" aria-hidden="true"></i></span>'},cellStyle:{paddingTop:6}},{headerName:"",field:"public",cellRenderer:function(a){return'<span ng-show="false" class="badge badge-warning mt5"><i class="fa fa-eye" aria-hidden="true"></i> Public</span>'},cellStyle:{textAlign:"right",paddingTop:2}},{headerName:"",field:"key",cellRenderer:function(a){return'<a title="Configure this dashboard" ng-href="#/dockey/'+a.value+'/edit"><img class="icon-img" src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-wrench.svg" /></a>'},width:50,cellStyle:{textAlign:"center",paddingTop:5}},{headerName:"",field:"dashboard",valueGetter:function(a){return a.data},cellRenderer:function(a){return'<a title="Remove this dashboard" ng-click="$ctrl.deleteDashboardConfirmation(\''+a.value.dashboard+"', '"+a.value.dashboardName+"', '"+a.value.key+'\')"><img class="icon-img pointer" src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/2a8afcdb/images/blue-bin.svg" /></a>'},width:30,cellStyle:{textAlign:"center",paddingTop:4}}],rowData:null,rowHeight:34,headerHeight:37,angularCompileRows:!0,enableSorting:!0,animateRows:!0,domLayout:"autoHeight",pagination:!0,paginationPageSize:10,onGridSizeChanged:function(a){if(e.innerWidth<=768){var b=["star","dashboardName","dashboard","key"],c=["lastModifiedDate","public"];p.gridOptions.columnApi.setColumnsVisible(b,!0),p.gridOptions.columnApi.setColumnsVisible(c,!1)}else p.gridOptions.columnApi.setColumnsVisible(["star","dashboardName","dashboard","key","lastModifiedDate","public"],!0);p.gridOptions.api.sizeColumnsToFit()}},a.$watch(function(a){return a.query},function(a){var b=[];if(void 0!==a&&null!=a&&""!=a)for(var c=0;c<p.customDashboards.length;c++)-1!=p.customDashboards[c].dashboardName.toLowerCase().indexOf(a.toLowerCase())&&b.push(p.customDashboards[c]);else p.customDashboards&&(b=p.customDashboards);p.customDashboards&&(0==b.length?p.noDashboards=!0:(p.noDashboards=!1,p.gridOptions.api.setRowData(b),p.setGridPaginationIcons()))})},this.setGridPaginationIcons=function(){$("button[ref=btPrevious]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/previous.png" />'),$("button[ref=btFirst]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/first.png" />'),$("button[ref=btNext]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/next.png" />'),$("button[ref=btLast]").html('<img src="//cdn.rawgit.com/scriptrdotio/onset-static-resources/6309fad6/images/last.png" />')},this.$postLink=function(){k.loadDashboards({}).then(function(a,b){a?(p.customDashboards=a,p.gridOptions.api.setRowData(a),p.setGridPaginationIcons(),p.loading=!1,0==a.length&&(p.noDashboards=!0)):(console.log("No Dashboards Found"),p.loading=!1)},function(a){p.loading=!1,console.log("reject published promise",a)})},this.deleteDashboardConfirmation=function(a,b,c){j.open({controller:"PopupCont",templateUrl:"/UIComponents/dashboardBuilder/javascript/components/deletePopup.html",resolve:{dashboard:function(){return p},path:function(){return a},name:function(){return b},key:function(){return c}}})},this.checkCreateDashboardEligibility=function(b){if(this.customDashboards&&10==this.customDashboards.length){b.preventDefault();j.open({animation:!0,component:"confirmationModal",size:"md",scope:a,resolve:{data:function(){return{title:"Information Message",body:"You can save a maximum of 10 dashboards.",btnCancelTitle:"Ok"}}}})}},this.callMenuAPI=function(){k.callMenuAPI().then(function(a,b){},function(a){})},this.setFavoriteDashboard=function(a){var b=!1;p.favDashboardKey&&a==p.favDashboardKey&&(b=!0);var c={dockey:b?null:a};k.setFavoriteDashboard(c).then(function(a,c){a&&a.status&&"success"==a.status?(p.favDashboardKey=a.favDashboardKey,null!=p.user&&(b?delete p.user.favDashboardKey:p.user.favDashboardKey=p.favDashboardKey,window.localStorage.setItem("user",JSON.stringify(p.user))),p.callMenuAPI()):console.log("failure fav")},function(a){p.showMsg("danger","An error has occured"),console.log("reject published promise",a)})},this.deleteDashboard=function(a,b){p.user=window.localStorage.user?JSON.parse(window.localStorage.user):null,null!=p.user&&p.user.favDashboardKey&&(p.favDashboardKey=p.user.favDashboardKey);var c={path:a,removeFavDashboard:!(!p.favDashboardKey||!b||b!=p.favDashboardKey)};p=this,k.deleteDashboard(c).then(function(a,c){if(a&&a.status&&"success"==a.status){if(p.customDashboards=a.documents,p.gridOptions.api.setRowData(a.documents),p.setGridPaginationIcons(),0==a.documents.length?p.noDashboards=!0:p.noDashboards=!1,p.favDashboardKey&&b&&b==p.favDashboardKey){var d=JSON.parse(window.localStorage.user);delete d.favDashboardKey,window.localStorage.setItem("user",JSON.stringify(d)),p.callMenuAPI()}}else a&&a.errorDetail?p.showMsg("danger",a.errorDetail):p.showMsg("danger","An error occurred while deleting the dashboard. Please try again later")},function(a){p.showMsg("danger","An error has occured"),console.log("reject published promise",a)})},this.renameDashboard=function(a,b){var c=n.defer();if(console.log(a,b),a!=b){var d={scriptName:a,newScriptName:b},e=this;return console.log(d),k.renameDashboard(d).then(function(a,b){a&&a.documents?(e.customDashboards=a.documents,0==a.documents.length?e.noDashboards=!0:e.noDashboards=!1,c.resolve(),e.showMsg("success","The dashboard has been renamed successfully.")):(c.reject(),a&&a.errorDetail?e.showMsg("danger",a.errorDetail):e.showMsg("danger","An error has occured"))},function(a){c.reject(),e.showMsg("danger",a.data.response.metadata.errorDetail),console.log("reject published promise",a)}),c.promise}},this.changeLayout=function(a){this.layout=a},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){this.closeAlert(),this.message={type:a,content:b},this.show=!0},this.closeMsg=function(){this.showPanelMsg=!1},this.showMsg=function(a,b){this.closeMsg(),this.message={type:a,content:b},this.showPanelMsg=!0},this.openEditor=function(a){this.model={scriptName:a};var b=this;k.getScript(this.model).then(function(c,d){b.postLoadScript(a,c)},function(a){console.error("reject",a)})}}]}),angular.module("DashboardBuilder").controller("PopupCont",["$scope","$uibModalInstance",function(a,b){a.name=a.$resolve.name,a.close=function(){b.dismiss("cancel")},a.ondeleteDashboard=function(){this.$resolve.dashboard.deleteDashboard(this.$resolve.path,this.$resolve.key),b.dismiss("cancel")}}]),angular.module("DashboardBuilder").service("scriptrService",["httpClient","$cookies",function(a,b){this.callMenuAPI=function(){return a.post("UIComponents/layout/frontend/components/onsetmenu/getMenuInfo")},this.saveScript=function(b,c){return a.post("app/api/dashboard/save",b,null,!0)},this.getScript=function(b){return a.post("UIComponents/dashboardBuilder/backend/api/getDashboard",b)},this.getDashboardDocument=function(b){return a.get("app/api/dashboard/get",b)},this.loadDashboards=function(b){return a.get("app/api/dashboard/list",{})},this.deleteDashboard=function(b){return a.get("app/api/dashboard/delete",b)},this.setFavoriteDashboard=function(b){return a.get("app/api/dashboard/favorite",b)},this.renameDashboard=function(b){return a.get("UIComponents/dashboardBuilder/backend/api/renameDashboard",b)},this.getToken=function(){return b.get("token")||null}}]),angular.module("DashboardBuilder").component("dashboard",{bindings:{widgets:"<",dashboard:"<",treeSearchCriteria:"@",iconExpand:"@",iconCollapse:"@",loadTree:"<?",showTree:"<",devicesModel:"@"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/dashboard.html",controller:["$scope","$rootScope","$timeout","$sce","$window","httpClient","wsClient","$cookies","common","config","$uibModal","scriptrService","$route","$routeParams","$q","_","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.wsClient=g;var r=this;r.acls,this.$onInit=function(){if(r.showTree=void 0===this.showTree||this.showTree,r.loading=!0,r.showPanelMsg=!1,r.isEdit=!1,r.users=[{code:"anonymous",icon:"fa fa-group"}],r.onACLChange=function(a){r.acls=a.join(";");var b=o.defer();return r.saveScript(null,null,!0).then(function(a,c){console.log("success"),b.resolve(a,c)},function(a){console.log("reject",a),b.reject(a)}),b.promise},this.urlParams=[],this.transport=angular.copy(j.transport),this.frmGlobalOptions={destroyStrategy:"remove",formDefaults:{feedback:!1},validationMessage:{302:"Required field."}},
this.initializeDashboard(),this.schema=angular.copy(j.script.schema),this.form=angular.copy(j.script.form),this.model={},this.metric_schema=angular.copy(j.metricselector.schema),this.metric_form=angular.copy(j.metricselector.form),this.metric_model={},this.isInIde=!!n.scriptrIdeRef,a.$root&&a.$root.isNew?(this.isEdit=!0,this.isNew=a.$root.isNew):(this.isEdit=!!n.edit,this.isNew=!1),this.isNew)this.setDefaultDashboardName();else{var b=n.dockey;this.getDashboard(b)}this.slickConfig={enabled:!0,autoplay:!0,draggable:!1,autoplaySpeed:3e3,method:{},event:{beforeChange:function(a,b,c,d){},afterChange:function(a,b,c,d){}}},this.gridsterOptions={defaultSizeY:200,defaultSizeX:200,minRows:1,maxRows:100,columns:5,colWidth:"auto",rowHeight:"match",margins:[10,10],defaultSizeX:2,defaultSizeY:1,mobileBreakPoint:480,minColumns:1,sparse:!0,resizable:{enabled:r.isEdit,handle:".my-class",start:function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)},resize:function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)},stop:function(a,b,c){console.log("End resize:",a,b,c),setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100),r.notifyDashboardChange()}},draggable:{enabled:r.isEdit,handle:".my-class",start:function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)},drag:function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)},stop:function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100),r.notifyDashboardChange()}}},a.$watch("self.dashboard.widgets",function(a){},!0),a.$on("gridster-resized",function(a,b,c){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)}),a.$on("gridster-item-initialized",function(a){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)}),this.widgetsConfig=j.widgets,this.widgetsCommon=i,this.dataLoaded=!0,$(document).ready(function(){$("#stickDiv").sticky({topSpacing:0})})},this.$postLink=function(){var a=this;this.scriptrIdeRef=n.scriptrIdeRef,angular.element(e).on("message",function(b){var c=b.originalEvent.data;c[0]=="get_editor_save_data-"+a.scriptrIdeRef&&e.parent&&e.parent.postMessage(["editor_save-"+a.scriptrIdeRef,a.getEditorValue()],"*"),c[0]=="set_editor_load_data-"+a.scriptrIdeRef&&a.setEditorValue(JSON.parse(c[1]))}),e.parent&&e.parent.postMessage(["editor_loaded-"+this.scriptrIdeRef],"*")},this.trustSrc=function(a){return d.trustAsResourceUrl(a)},this.setDefaultDashboardName=function(){this.model.dashboardName="Dashboard "+q("date")(new Date,"dd-MM-yyyy")},this.addCustomDashboard=function(){this.showDashboard=!0,r.savedScript=null,this.switchStatus=!0,this.model.scriptName=null,this.model.dashboardName=null,r.isEdit=!1,this.dashboard.widgets=[]},this.showCustomDashboard=function(a){this.showDashboard=!0,this.scriptName=a,this.switchStatus=!1,this.dashboardScriptName="/"+this.scriptName,this.openEditor(a)},this.enableEditDashboard=function(){this.isEdit=!0,this.gridsterOptions.draggable.enabled=this.isEdit,this.gridsterOptions.resizable.enabled=this.isEdit},this.disableEditMode=function(){this.isNew?window.location.href="#/dashboardsList":(this.dashboard.widgets=angular.copy(this.dashboard.originalWidgets),this.dashboard.counter=angular.copy(this.dashboard.originalCounter),this.model=angular.copy(this.originalModel),this.isEdit=!1,this.gridsterOptions.draggable.enabled=this.isEdit,this.gridsterOptions.resizable.enabled=this.isEdit)},this.deleteDashboardConfirmation=function(){var a=this.model.dashboardName;k.open({controller:"PopupCont",templateUrl:"/UIComponents/dashboardBuilder/javascript/components/deletePopup.html",resolve:{dashboard:function(){return r},name:function(){return a}}})},this.callMenuAPI=function(){l.callMenuAPI().then(function(a,b){},function(a){})},this.deleteDashboard=function(){r.user=window.localStorage.user?JSON.parse(window.localStorage.user):null,null!=r.user&&r.user.favDashboardKey&&(r.favDashboardKey=r.user.favDashboardKey);var a={path:this.model.scriptName,removeFavDashboard:!(!r.favDashboardKey||!r.dashboardDocument||r.dashboardDocument.key!=r.favDashboardKey)};l.deleteDashboard(a).then(function(a,b){if(console.log("success"),a&&a.status&&"success"==a.status&&(window.location.href="#/dashboardsList",r.favDashboardKey&&r.dashboardDocument&&r.dashboardDocument.key==r.favDashboardKey)){var c=JSON.parse(window.localStorage.user);delete c.favDashboardKey,window.localStorage.setItem("user",JSON.stringify(c)),r.callMenuAPI()}},function(a){console.log("reject published promise",a)})},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){this.closeAlert(),this.message={type:a,content:b},this.show=!0},this.closeMsg=function(){this.showPanelMsg=!1},this.showMsg=function(a,b){this.closeMsg(),this.message={type:a,content:b},this.showPanelMsg=!0},this.getEditorValue=function(){var a={};a.items=angular.copy(this.dashboard.widgets),a.urlParams=angular.copy(this.urlParams),a.transport=angular.copy(this.transport.defaults),a.staticdomain=n.staticdomain;var b=this.unsafe_tags(document.querySelector("#handlebar-template").innerHTML),c=Handlebars.compile(b)(a),d={};return d.content=c,d.pluginData=JSON.stringify({wdg:a.items,urlParams:a.urlParams,settings:a.transport}),d},this.setEditorValue=function(a){a&&(this.widgets=a.wdg,this.urlParams=a.urlParams,this.transport.defaults=a.settings,this.dashboard.widgets=this.widgets)},this.notifyDashboardChange=function(){e.parent&&e.parent.postMessage(["editor_data_changed-"+this.scriptrIdeRef,this.getEditorValue()],"*")},this.openEditor=function(a){this.showLoading(),a&&(this.model?this.model.scriptName=a:this.model={scriptName:a});var b=this;l.getScript(this.model).then(function(a,c){b.postLoadScript(a),b.hideLoadingModalInstance()},function(a){console.error("reject",a),b.hideLoadingModalInstance()})},this.selectBranch=function(a){console.log("Clicked branch data",a);var b=a.label;if(a[b]&&a[b].widget&&a[b].widget.type){var c=a[b].widget,d=p.findWhere(j.widgets,{name:c.type});console.log("Widget is",d),d||(d=p.findWhere(j.widgets,{name:j.sectionData.name}));var e=angular.copy(d.form),f=angular.copy(d.schema);d.commonData&&(e[0].tabs=angular.copy([i.formTab].concat(d.form[0].tabs)),f.properties=s(d.schema.properties,i.schemaFields));var g=0;c["default-api-params"]&&(g=Object.keys(c["default-api-params"]).length);var h={};p.each(c,function(a,b){h[b]=a});var k="{";if(c["api-params-name"]&&p.each(c["api-params-name"],function(a,b){r.urlParams=r.urlParams.concat([a]),k+='"'+a+'": vm.'+a+(b<c["api-params-name"].length-1||g>0?",":"")}),c["default-api-params"]){var l=0;p.each(c["default-api-params"],function(a,b){r.urlParams=r.urlParams.concat([b]),k+='"'+b+'": "'+a+(l<g-1?'",':'"'),l++}),k+="}"}else k+="}";console.log("apiParamsOutput",k),h["api-params"]=k,r.dashboard.widgets.push({name:a.label,sizeX:d.box&&d.box.sizeX?d.box.sizeX:2,sizeY:d.box&&d.box.sizeY?d.box.sizeY:2,minSizeX:d.box&&d.box.minSizeX?d.box.minSizeX:2,maxSizeX:d.box&&d.box.maxSizeX?d.box.maxSizeX:null,minSizeY:d.box&&d.box.minSizeY?d.box.minSizeY:2,maxSizeY:d.box&&d.box.maxSizeY?d.box.maxSizeY:null,label:d.label,type:d.class,options:angular.extend(angular.copy(d.defaults),angular.copy(h)),schema:f,form:e}),r.notifyDashboardChange()}},this.initializeDashboard=function(){this.dashboard={widgets:[],counter:0},this.widgets&&(this.dashboard.widgets=this.widgets),this.dashboard.counter=this.dashboard.widgets.length},this.clear=function(){var b=this;k.open({animation:!0,component:"confirmationModal",size:"md",scope:a,resolve:{data:function(){return{title:"Clear this dashboard?",body:"Are you sure you want to remove all the widgets?",btnCancelTitle:"Cancel",btnSubmitTitle:"Clear dashboard"}}}}).result.then(function(a){a&&b.clearWidgets()},function(){console.info("modal-component for clearing dashboard update dismissed at: "+new Date)})},this.clearWidgets=function(){this.dashboard.counter=0,this.dashboard.widgets=[],this.notifyDashboardChange()},this.logout=function(){$.scriptr.authorization({loginPage:login.loginTarget}).logout()};var s=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c};this.addWidget=function(a){if(a.url)return void window.open(a.url);if(this.dashboard.counter>=20)this.showInformationModel();else{var b=angular.copy(a.form),c=angular.copy(a.schema);a.commonData&&(b[0].tabs=angular.copy([i.formTab].concat(a.form[0].tabs)),c.properties=s(a.schema.properties,i.schemaFields)),a.selectedStreamValue&&(a.defaults.stream=[a.selectedStreamValue]),a.selectedStreamValue=null,this.dashboard.widgets.push({name:a.name,sizeX:a.box&&a.box.sizeX?a.box.sizeX:2,sizeY:a.box&&a.box.sizeY?a.box.sizeY:2,minSizeX:a.box&&a.box.minSizeX?a.box.minSizeX:2,maxSizeX:a.box&&a.box.maxSizeX?a.box.maxSizeX:null,minSizeY:a.box&&a.box.minSizeY?a.box.minSizeY:2,maxSizeY:a.box&&a.box.maxSizeY?a.box.maxSizeY:null,label:a.label,type:a.class,options:a.defaults,schema:c,form:b}),this.notifyDashboardChange()}},this.showInformationModel=function(){k.open({animation:!0,component:"confirmationModal",size:"md",scope:a,resolve:{data:function(){return{title:"Information Message",body:"You can add a maximum of 20 widgets.",btnCancelTitle:"Ok"}}}})},this.setTransportSettings=function(a){var b=this;k.open({animation:!0,component:"modalComponent",size:"lg",resolve:{widget:function(){return{label:b.transport.label,options:b.transport.defaults,schema:b.transport.schema,form:b.transport.form}}}}).result.then(function(a){console.log("modal-component transport settings data :",a,"submitted at: "+new Date),"cancel"!=a&&(b.transport.defaults&&b.transport.defaults.publishChannel!=a.publishChannel&&b.wsClient.updatePublishingChannel(a.publishChannel),b.transport.defaults&&b.transport.defaults.subscribeChannel!=a.subscribeChannel&&b.wsClient.updateSubscriptionChannel(a.subscribeChannel),b.transport.defaults=angular.copy(a),b.notifyDashboardChange())},function(){console.log("modal-component transport settings dismissed at: "+new Date)})},this.getDashboard=function(a){var b={dockey:a};l.getDashboardDocument(b).then(function(a,b){console.log("resolve",a),a.documents&&a.documents.length>0&&(r.dashboardDocument=angular.copy(a.documents[0]),r.model.scriptName=r.dashboardDocument.dashboard,r.model.dashboardName=r.dashboardDocument.dashboardName,r.model.unit=r.dashboardDocument.unit,r.model.period=r.dashboardDocument.period,r.model.image=r.dashboardDocument.viewFile,r.originalModel=angular.copy(r.model),r.metric_model&&(r.metric_model.unit=r.model.unit,r.metric_model.period=r.model.period)),r.model.scriptName?r.openEditor():r.setDefaultDashboardName()},function(a){r.showAlert("danger",a.data.response.metadata.errorDetail),console.log("reject",a.data.response.metadata.errorDetail)})},this.showLoading=function(){this.loadingModalInstance=k.open({controller:"LoadingCtrl",windowTemplateUrl:"/UIComponents/dashboardBuilder/javascript/components/loading.html",templateUrl:"/UIComponents/dashboardBuilder/javascript/components/loading.html",backdrop:"static",resolve:{loadingTitle:function(){return"Saving..."}}})},this.hideLoadingModalInstance=function(){this.loadingModalInstance.dismiss()},this.saveDashboard=function(b,c,d){this.showLoading();var e=this;if(a.$broadcast("schemaFormValidate"),b&&b.$valid||d){if(!(this.dashboard.widgets.length>20)){var f={};f.items=angular.copy(this.dashboard.widgets),f.urlParams=angular.copy(this.urlParams),f.token=l.getToken(),e.transport.defaults.redirectTarget=this.model.scriptName,f.transport=angular.copy(this.transport.defaults);var g=this.unsafe_tags(document.querySelector("#handlebar-template").innerHTML),h=Handlebars.compile(g)(f),i={};i.content=h,i.dashboardName=this.model.dashboardName,i.unit=this.model.unit,i.period=this.model.period,b.uploadForm.file.$dirty&&(i.apsdb_attachments=b.uploadForm.file.$modelValue),e.dashboardDocument&&e.model.image!=e.dashboardDocument.viewFile&&(i.apsdb_attachments=null),i.pluginData=JSON.stringify({wdg:f.items,urlParams:f.urlParams,settings:f.transport}),e.isEdit&&!e.isNew&&(i.update=!0),e.savedScript&&(i.previousScriptName=e.savedScript),i.acls=this.acls;var j=new FormData;for(var k in i)j.append(k,i[k]);var m=o.defer();return l.saveScript(j).then(function(a,b){"failure"==a.status?(e.isEdit=!0,e.showAlert("danger",a.errorDetail),e.hideLoadingModalInstance()):(a.data&&a.data.document&&a.data.document.key&&e.getDashboard(a.data.document.key),e.hideLoadingModalInstance(),e.isEdit=!1,e.isNew=!1,e.gridsterOptions.draggable.enabled=e.isEdit,e.gridsterOptions.resizable.enabled=e.isEdit,e.savedScript=a.scriptName,e.showAlert("info","Dashboard successfully saved."),m.resolve(a,b))},function(a){e.hideLoadingModalInstance(),e.showAlert("danger",a.data.response.metadata.errorDetail),console.log("reject",a.data.response.metadata.errorDetail),m.reject(a)}),m.promise}e.showAlert("danger","You can add a maximum of 20 widgets.")}},this.setACLs=function(a){this.acls=a.ACL.execute;var b=this.acls.split(";");this.users=[];for(var c=0;c<b.length;c++){var d={};d.code=b[c],this.users.push(d)}},this.postLoadScript=function(a){var b=/\/\*#\*SCRIPTR_PLUGIN\*#\*(.*\n?.*)\*#\*#\*\//;if(a){var c=a.userConfig,d=c.match(b);if(c&&d){var e=JSON.parse(d[1]);e&&e.metadata&&"DashboardBuilder"==e.metadata.name?(this.widgets=JSON.parse(e.metadata.plugindata).wdg,this.urlParams=JSON.parse(e.metadata.plugindata).urlParams,this.transport.defaults=JSON.parse(e.metadata.plugindata).settings,this.dashboard.widgets=this.widgets,this.dashboard.originalWidgets=angular.copy(this.dashboard.widgets),this.dashboard.counter=this.widgets.length,this.dashboard.originalCounter=this.dashboard.counter,this.savedScript=this.model.scriptName,this.setACLs(a)):(this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script."))}else this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script.")}else this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script.");console.debug("resolve get script "+this.model.scriptName+" :",a)},this.safe_tags=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},this.unsafe_tags=function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')}}]}),angular.module("DashboardBuilder").component("box",{require:{parent:"^^dashboard"},bindings:{widget:"<",isEdit:"<?"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/box.html",controller:["$scope","$compile","$element","$uibModal",function(a,b,c,d){var e=this;this.remove=function(b){var c=this;d.open({animation:!0,component:"confirmationModal",size:"md",scope:a,resolve:{data:function(){return{title:"Delete this widget?",body:'Are you sure you want to delete this widget "'+b.label+'"?',btnCancelTitle:"Cancel",btnSubmitTitle:"Delete"}}}}).result.then(function(a){a&&c.removeWidget(b)},function(){console.info("modal-component for removing widget dismissed at: "+new Date)})},this.removeWidget=function(a){delete this[a.formatFunction],this.parent.dashboard.widgets.splice(this.parent.dashboard.widgets.indexOf(a),1),this.parent.dashboard.counter--,this.parent.notifyDashboardChange()},this.$onInit=function(){a.$on("gridster-item-transition-end",function(a){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)}),a.$on("gridster-item-resized",function(a){setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100)});var b=this;this.widget&&this.addWidget(this.widget),a.$on("resize_widget",function(a,c){if(setTimeout(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize"))},100),b.widget==c.element&&"scriptr-grid"==b.widget.type){var d=c.wdg.height();c.element.options["grid-height"]=d-110,b.updateWidget(c.element.options)}e.parent.notifyDashboardChange()}),a.$on("drag_widget",function(a,b){e.parent.notifyDashboardChange()})},this.openSettings=function(){var b=this;d.open({animation:!0,component:"modalComponent",size:"lg",scope:a,resolve:{widget:function(){return b.widget}}}).result.then(function(a){"cancel"!=a&&b.updateWidget(a)},function(){console.info("modal-component for widget update dismissed at: "+new Date)})},this.addWidget=function(d){var e=this;this.chart=angular.element(document.createElement(d.type)),angular.forEach(d.options,function(a,b){if(angular.isArray(a)||angular.isObject(a))e.chart.attr(b,JSON.stringify(a));else if("on-format-data"==b){this.parent.dashboard.counter||(this.parent.dashboard.counter=0);var c=!1;d.formatFunction&&(c=!0),c||(this.parent.dashboard.counter+=1);var f=this.parent.dashboard.counter,g=d.name+"FormatData"+f;e[g]=new Function("data",a),d.formatFunction=g,d.formatFunctionValue=a,e.chart.attr("on-format-data","$ctrl."+g)}else e.chart.attr(b,a)},this);var f=b(this.chart)(a);angular.element(c.find(".box-content")).append(f)},this.updateWidget=function(a){var b=this;angular.forEach(a,function(a,c){angular.isArray(a)||angular.isObject(a)?b.chart.attr(c,JSON.stringify(a)):"on-format-data"==c?(b[b.widget.formatFunction]=new Function("data",a),b[b.widget.formatFunctionValue]=a,b.chart.attr("on-format-data","$ctrl."+b.widget.formatFunction)):b.chart.attr(c,a)},this);var c=angular.copy(a),d=this.parent.dashboard.widgets.indexOf(this.widget),e=angular.copy(this.widget);e.options=angular.copy(c),this.parent.dashboard.widgets.splice(d,1,e),this.parent.notifyDashboardChange()}}]}),angular.module("DashboardBuilder").component("modalComponent",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/myModalContent.html",controller:["$scope","httpClient","$q","$http",function(a,b,c,d){this.$onInit=function(){this.widget=this.resolve.widget,a.$broadcast("schemaFormRedraw"),this.frmGlobalOptions={destroyStrategy:"remove",formDefaults:{feedback:!1}},this.widget&&(this.widget.schema&&(this.schema=angular.copy(this.widget.schema)),this.widget.form&&(this.form=angular.copy(this.widget.form)),this.model=this.widget.options?angular.copy(this.widget.options):{})},a.multiSelectCallBack=function(a,b){var c=a.widgetName,d=a.widgetField,e=window.localStorage.getItem("dataStream"),f=window.localStorage.getItem("dataMapping"),g=[];f&&e&&(f=JSON.parse(f),e=JSON.parse(e));for(var h=0;h<e.length;h++)for(var i=e[h].label,j=e[h].sensors,k=0;k<j.length;k++){var l=j[k].measurement_type;if(f[l]){var m=f[l].allowed;if(m.indexOf(c)>-1&&(!d||l==d)){var n=j[k].serial_number+j[k].channel_number+j[k].data_type_id;g.push({value:n,name:j[k].label,dataStream:i})}}}return g},this.onSubmit=function(b){a.$broadcast("schemaFormValidate"),console.log(this.model),b.$valid&&(this.close({$value:this.model}),console.log("component_form_parent",this.model))},this.onCancel=function(a){this.schema={},this.form={},this.model=angular.copy(this.widget.options),this.dismiss({$value:"cancel"}),console.log("Dissmissed")}}]}),angular.module("DashboardBuilder").component("sidetoolbar",{bindings:{},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/sideToolbar.html",controller:["$scope","$mdSidenav",function(a,b){this.close=function(){b("left").close().then(function(){console.debug("close LEFT is done")})}}]}),angular.module("DashboardBuilder").component("confirmationModal",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/confirmation.html",controller:["$scope",function(a){this.$onInit=function(){this.data=this.resolve.data},this.onSubmit=function(){this.close({$value:!0})},this.onCancel=function(){this.dismiss({$value:!1})}}]}),angular.module("DashboardBuilder").controller("PopupCont",["$scope","$uibModalInstance",function(a,b){a.name=a.$resolve.name,a.close=function(){b.dismiss("cancel")},a.ondeleteDashboard=function(){this.$resolve.dashboard.deleteDashboard(this.$resolve.path,this.$resolve.key),b.dismiss("cancel")}}]),angular.module("DashboardBuilder").controller("LoadingCtrl",["$scope","$uibModalInstance",function(a,b){a.title=a.$resolve.title}]);